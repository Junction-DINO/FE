var ox=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Q=(t,e,n)=>(ox(t,e,"read from private field"),n?n.call(t):e.get(t)),Ye=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Fe=(t,e,n,s)=>(ox(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n);var m0=(t,e,n,s)=>({set _(r){Fe(t,e,r,n)},get _(){return Q(t,e,s)}}),Nt=(t,e,n)=>(ox(t,e,"access private method"),n);function XC(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(s,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function V7(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var rA={exports:{}},j1={},oA={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm=Symbol.for("react.element"),U7=Symbol.for("react.portal"),W7=Symbol.for("react.fragment"),j7=Symbol.for("react.strict_mode"),G7=Symbol.for("react.profiler"),H7=Symbol.for("react.provider"),q7=Symbol.for("react.context"),K7=Symbol.for("react.forward_ref"),X7=Symbol.for("react.suspense"),Y7=Symbol.for("react.memo"),Q7=Symbol.for("react.lazy"),NE=Symbol.iterator;function Z7(t){return t===null||typeof t!="object"?null:(t=NE&&t[NE]||t["@@iterator"],typeof t=="function"?t:null)}var iA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aA=Object.assign,lA={};function Pd(t,e,n){this.props=t,this.context=e,this.refs=lA,this.updater=n||iA}Pd.prototype.isReactComponent={};Pd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uA(){}uA.prototype=Pd.prototype;function YC(t,e,n){this.props=t,this.context=e,this.refs=lA,this.updater=n||iA}var QC=YC.prototype=new uA;QC.constructor=YC;aA(QC,Pd.prototype);QC.isPureReactComponent=!0;var TE=Array.isArray,cA=Object.prototype.hasOwnProperty,ZC={current:null},dA={key:!0,ref:!0,__self:!0,__source:!0};function hA(t,e,n){var s,r={},o=null,i=null;if(e!=null)for(s in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)cA.call(e,s)&&!dA.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:lm,type:t,key:o,ref:i,props:r,_owner:ZC.current}}function J7(t,e){return{$$typeof:lm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function JC(t){return typeof t=="object"&&t!==null&&t.$$typeof===lm}function eV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $E=/\/+/g;function ix(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eV(""+t.key):e.toString(36)}function ry(t,e,n,s,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case lm:case U7:i=!0}}if(i)return i=t,r=r(i),t=s===""?"."+ix(i,0):s,TE(r)?(n="",t!=null&&(n=t.replace($E,"$&/")+"/"),ry(r,e,n,"",function(u){return u})):r!=null&&(JC(r)&&(r=J7(r,n+(!r.key||i&&i.key===r.key?"":(""+r.key).replace($E,"$&/")+"/")+t)),e.push(r)),1;if(i=0,s=s===""?".":s+":",TE(t))for(var a=0;a<t.length;a++){o=t[a];var l=s+ix(o,a);i+=ry(o,e,n,l,r)}else if(l=Z7(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=s+ix(o,a++),i+=ry(o,e,n,l,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function g0(t,e,n){if(t==null)return t;var s=[],r=0;return ry(t,s,"","",function(o){return e.call(n,o,r++)}),s}function tV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xs={current:null},oy={transition:null},nV={ReactCurrentDispatcher:Xs,ReactCurrentBatchConfig:oy,ReactCurrentOwner:ZC};kt.Children={map:g0,forEach:function(t,e,n){g0(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return g0(t,function(){e++}),e},toArray:function(t){return g0(t,function(e){return e})||[]},only:function(t){if(!JC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=Pd;kt.Fragment=W7;kt.Profiler=G7;kt.PureComponent=YC;kt.StrictMode=j7;kt.Suspense=X7;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nV;kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=aA({},t.props),r=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=ZC.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cA.call(e,l)&&!dA.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:lm,type:t.type,key:r,ref:o,props:s,_owner:i}};kt.createContext=function(t){return t={$$typeof:q7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H7,_context:t},t.Consumer=t};kt.createElement=hA;kt.createFactory=function(t){var e=hA.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:K7,render:t}};kt.isValidElement=JC;kt.lazy=function(t){return{$$typeof:Q7,_payload:{_status:-1,_result:t},_init:tV}};kt.memo=function(t,e){return{$$typeof:Y7,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=oy.transition;oy.transition={};try{t()}finally{oy.transition=e}};kt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};kt.useCallback=function(t,e){return Xs.current.useCallback(t,e)};kt.useContext=function(t){return Xs.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return Xs.current.useDeferredValue(t)};kt.useEffect=function(t,e){return Xs.current.useEffect(t,e)};kt.useId=function(){return Xs.current.useId()};kt.useImperativeHandle=function(t,e,n){return Xs.current.useImperativeHandle(t,e,n)};kt.useInsertionEffect=function(t,e){return Xs.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return Xs.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return Xs.current.useMemo(t,e)};kt.useReducer=function(t,e,n){return Xs.current.useReducer(t,e,n)};kt.useRef=function(t){return Xs.current.useRef(t)};kt.useState=function(t){return Xs.current.useState(t)};kt.useSyncExternalStore=function(t,e,n){return Xs.current.useSyncExternalStore(t,e,n)};kt.useTransition=function(){return Xs.current.useTransition()};kt.version="18.2.0";oA.exports=kt;var _=oA.exports;const Ze=W1(_),sV=XC({__proto__:null,default:Ze},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rV=_,oV=Symbol.for("react.element"),iV=Symbol.for("react.fragment"),aV=Object.prototype.hasOwnProperty,lV=rV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uV={key:!0,ref:!0,__self:!0,__source:!0};function fA(t,e,n){var s,r={},o=null,i=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(s in e)aV.call(e,s)&&!uV.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:oV,type:t,key:o,ref:i,props:r,_owner:lV.current}}j1.Fragment=iV;j1.jsx=fA;j1.jsxs=fA;rA.exports=j1;var R=rA.exports,um=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},id=typeof window>"u"||"Deno"in globalThis;function qr(){}function cV(t,e){return typeof t=="function"?t(e):t}function Cw(t){return typeof t=="number"&&t>=0&&t!==1/0}function pA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function EE(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:o,queryKey:i,stale:a}=t;if(i){if(s){if(e.queryHash!==ek(i,e.options))return!1}else if(!lp(e.queryKey,i))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||o&&!o(e))}function IE(t,e){const{exact:n,status:s,predicate:r,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(ap(e.options.mutationKey)!==ap(o))return!1}else if(!lp(e.options.mutationKey,o))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function ek(t,e){return((e==null?void 0:e.queryKeyHashFn)||ap)(t)}function ap(t){return JSON.stringify(t,(e,n)=>Nw(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function lp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!lp(t[n],e[n])):!1}function mA(t,e){if(t===e)return t;const n=RE(t)&&RE(e);if(n||Nw(t)&&Nw(e)){const s=n?t:Object.keys(t),r=s.length,o=n?e:Object.keys(e),i=o.length,a=n?[]:{};let l=0;for(let u=0;u<i;u++){const c=n?u:o[u];!n&&t[c]===void 0&&e[c]===void 0&&s.includes(c)?(a[c]=void 0,l++):(a[c]=mA(t[c],e[c]),a[c]===t[c]&&t[c]!==void 0&&l++)}return r===i&&l===r?t:a}return e}function kw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function RE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Nw(t){if(!_E(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!_E(n)||!n.hasOwnProperty("isPrototypeOf"))}function _E(t){return Object.prototype.toString.call(t)==="[object Object]"}function dV(t){return new Promise(e=>{setTimeout(e,t)})}function Tw(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?mA(t,e):e}function hV(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function fV(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var tk=Symbol(),eu,Ta,Hc,X_,pV=(X_=class extends um{constructor(){super();Ye(this,eu,void 0);Ye(this,Ta,void 0);Ye(this,Hc,void 0);Fe(this,Hc,e=>{if(!id&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,Ta)||this.setEventListener(Q(this,Hc))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Ta))==null||e.call(this),Fe(this,Ta,void 0))}setEventListener(e){var n;Fe(this,Hc,e),(n=Q(this,Ta))==null||n.call(this),Fe(this,Ta,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){Q(this,eu)!==e&&(Fe(this,eu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,eu)=="boolean"?Q(this,eu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},eu=new WeakMap,Ta=new WeakMap,Hc=new WeakMap,X_),nk=new pV,qc,$a,Kc,Y_,mV=(Y_=class extends um{constructor(){super();Ye(this,qc,!0);Ye(this,$a,void 0);Ye(this,Kc,void 0);Fe(this,Kc,e=>{if(!id&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){Q(this,$a)||this.setEventListener(Q(this,Kc))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,$a))==null||e.call(this),Fe(this,$a,void 0))}setEventListener(e){var n;Fe(this,Kc,e),(n=Q(this,$a))==null||n.call(this),Fe(this,$a,e(this.setOnline.bind(this)))}setOnline(e){Q(this,qc)!==e&&(Fe(this,qc,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return Q(this,qc)}},qc=new WeakMap,$a=new WeakMap,Kc=new WeakMap,Y_),Ey=new mV;function gV(t){return Math.min(1e3*2**t,3e4)}function sk(t){return(t??"online")==="online"?Ey.isOnline():!0}var gA=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ax(t){return t instanceof gA}function yA(t){let e=!1,n=0,s=!1,r,o,i;const a=new Promise((g,y)=>{o=g,i=y}),l=g=>{var y;s||(f(new gA(g)),(y=t.abort)==null||y.call(t))},u=()=>{e=!0},c=()=>{e=!1},d=()=>!nk.isFocused()||t.networkMode!=="always"&&!Ey.isOnline(),h=g=>{var y;s||(s=!0,(y=t.onSuccess)==null||y.call(t,g),r==null||r(),o(g))},f=g=>{var y;s||(s=!0,(y=t.onError)==null||y.call(t,g),r==null||r(),i(g))},p=()=>new Promise(g=>{var y;r=b=>{const v=s||!d();return v&&g(b),v},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;r=void 0,s||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(s)return;let g;try{g=t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var S;if(s)return;const b=t.retry??(id?0:3),v=t.retryDelay??gV,x=typeof v=="function"?v(n,y):v,w=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!w){f(y);return}n++,(S=t.onFail)==null||S.call(t,n,y),dV(x).then(()=>{if(d())return p()}).then(()=>{e?f(y):m()})})};return sk(t.networkMode)?m():p().then(m),{promise:a,cancel:l,continue:()=>(r==null?void 0:r())?a:Promise.resolve(),cancelRetry:u,continueRetry:c}}function yV(){let t=[],e=0,n=h=>{h()},s=h=>{h()},r=h=>setTimeout(h,0);const o=h=>{r=h},i=h=>{let f;e++;try{f=h()}finally{e--,e||u()}return f},a=h=>{e?t.push(h):r(()=>{n(h)})},l=h=>(...f)=>{a(()=>{h(...f)})},u=()=>{const h=t;t=[],h.length&&r(()=>{s(()=>{h.forEach(f=>{n(f)})})})};return{batch:i,batchCalls:l,schedule:a,setNotifyFunction:h=>{n=h},setBatchNotifyFunction:h=>{s=h},setScheduler:o}}var vs=yV(),tu,Q_,bA=(Q_=class{constructor(){Ye(this,tu,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cw(this.gcTime)&&Fe(this,tu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(id?1/0:5*60*1e3))}clearGcTimeout(){Q(this,tu)&&(clearTimeout(Q(this,tu)),Fe(this,tu,void 0))}},tu=new WeakMap,Q_),Xc,Yc,Gr,Fs,ts,Yp,nu,wo,Ni,Z_,bV=(Z_=class extends bA{constructor(e){super();Ye(this,wo);Ye(this,Xc,void 0);Ye(this,Yc,void 0);Ye(this,Gr,void 0);Ye(this,Fs,void 0);Ye(this,ts,void 0);Ye(this,Yp,void 0);Ye(this,nu,void 0);Fe(this,nu,!1),Fe(this,Yp,e.defaultOptions),this.setOptions(e.options),Fe(this,ts,[]),Fe(this,Gr,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Fe(this,Xc,e.state||vV(this.options)),this.state=Q(this,Xc),this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...Q(this,Yp),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!Q(this,ts).length&&this.state.fetchStatus==="idle"&&Q(this,Gr).remove(this)}setData(e,n){const s=Tw(this.state.data,e,this.options);return Nt(this,wo,Ni).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){Nt(this,wo,Ni).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,r;const n=(s=Q(this,Fs))==null?void 0:s.promise;return(r=Q(this,Fs))==null||r.cancel(e),n?n.then(qr).catch(qr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Xc))}isActive(){return Q(this,ts).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?Q(this,ts).some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!pA(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=Q(this,ts).find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Q(this,Fs))==null||n.continue()}onOnline(){var n;const e=Q(this,ts).find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Q(this,Fs))==null||n.continue()}addObserver(e){Q(this,ts).includes(e)||(Q(this,ts).push(e),this.clearGcTimeout(),Q(this,Gr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){Q(this,ts).includes(e)&&(Fe(this,ts,Q(this,ts).filter(n=>n!==e)),Q(this,ts).length||(Q(this,Fs)&&(Q(this,nu)?Q(this,Fs).cancel({revert:!0}):Q(this,Fs).cancelRetry()),this.scheduleGc()),Q(this,Gr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return Q(this,ts).length}invalidate(){this.state.isInvalidated||Nt(this,wo,Ni).call(this,{type:"invalidate"})}fetch(e,n){var u,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Q(this,Fs))return Q(this,Fs).continueRetry(),Q(this,Fs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=Q(this,ts).find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,r={queryKey:this.queryKey,meta:this.meta},o=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Fe(this,nu,!0),s.signal)})};o(r);const i=()=>!this.options.queryFn||this.options.queryFn===tk?Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)):(Fe(this,nu,!1),this.options.persister?this.options.persister(this.options.queryFn,r,this):this.options.queryFn(r)),a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};o(a),(u=this.options.behavior)==null||u.onFetch(a,this),Fe(this,Yc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&Nt(this,wo,Ni).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=h=>{var f,p,m,g;ax(h)&&h.silent||Nt(this,wo,Ni).call(this,{type:"error",error:h}),ax(h)||((p=(f=Q(this,Gr).config).onError)==null||p.call(f,h,this),(g=(m=Q(this,Gr).config).onSettled)==null||g.call(m,this.state.data,h,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return Fe(this,Fs,yA({fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var f,p,m,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}this.setData(h),(p=(f=Q(this,Gr).config).onSuccess)==null||p.call(f,h,this),(g=(m=Q(this,Gr).config).onSettled)==null||g.call(m,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:l,onFail:(h,f)=>{Nt(this,wo,Ni).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Nt(this,wo,Ni).call(this,{type:"pause"})},onContinue:()=>{Nt(this,wo,Ni).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode})),Q(this,Fs).promise}},Xc=new WeakMap,Yc=new WeakMap,Gr=new WeakMap,Fs=new WeakMap,ts=new WeakMap,Yp=new WeakMap,nu=new WeakMap,wo=new WeakSet,Ni=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...vA(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return ax(r)&&r.revert&&Q(this,Yc)?{...Q(this,Yc),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),vs.batch(()=>{Q(this,ts).forEach(s=>{s.onQueryUpdate()}),Q(this,Gr).notify({query:this,type:"updated",action:e})})},Z_);function vA(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sk(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vV(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jo,J_,xV=(J_=class extends um{constructor(e={}){super();Ye(this,jo,void 0);this.config=e,Fe(this,jo,new Map)}build(e,n,s){const r=n.queryKey,o=n.queryHash??ek(r,n);let i=this.get(o);return i||(i=new bV({cache:this,queryKey:r,queryHash:o,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){Q(this,jo).has(e.queryHash)||(Q(this,jo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,jo).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,jo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,jo).get(e)}getAll(){return[...Q(this,jo).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>EE(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>EE(e,s)):n}notify(e){vs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){vs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jo=new WeakMap,J_),Go,Qp,vr,Qc,Ho,ba,eA,wV=(eA=class extends bA{constructor(e){super();Ye(this,Ho);Ye(this,Go,void 0);Ye(this,Qp,void 0);Ye(this,vr,void 0);Ye(this,Qc,void 0);this.mutationId=e.mutationId,Fe(this,Qp,e.defaultOptions),Fe(this,vr,e.mutationCache),Fe(this,Go,[]),this.state=e.state||SV(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...Q(this,Qp),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Q(this,Go).includes(e)||(Q(this,Go).push(e),this.clearGcTimeout(),Q(this,vr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Fe(this,Go,Q(this,Go).filter(n=>n!==e)),this.scheduleGc(),Q(this,vr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Q(this,Go).length||(this.state.status==="pending"?this.scheduleGc():Q(this,vr).remove(this))}continue(){var e;return((e=Q(this,Qc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,o,i,a,l,u,c,d,h,f,p,m,g,y,b,v,x,w,S,k;const n=()=>(Fe(this,Qc,yA({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,$)=>{Nt(this,Ho,ba).call(this,{type:"failed",failureCount:N,error:$})},onPause:()=>{Nt(this,Ho,ba).call(this,{type:"pause"})},onContinue:()=>{Nt(this,Ho,ba).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),Q(this,Qc).promise),s=this.state.status==="pending";try{if(!s){Nt(this,Ho,ba).call(this,{type:"pending",variables:e}),await((o=(r=Q(this,vr).config).onMutate)==null?void 0:o.call(r,e,this));const $=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,e));$!==this.state.context&&Nt(this,Ho,ba).call(this,{type:"pending",context:$,variables:e})}const N=await n();return await((u=(l=Q(this,vr).config).onSuccess)==null?void 0:u.call(l,N,e,this.state.context,this)),await((d=(c=this.options).onSuccess)==null?void 0:d.call(c,N,e,this.state.context)),await((f=(h=Q(this,vr).config).onSettled)==null?void 0:f.call(h,N,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,N,null,e,this.state.context)),Nt(this,Ho,ba).call(this,{type:"success",data:N}),N}catch(N){try{throw await((y=(g=Q(this,vr).config).onError)==null?void 0:y.call(g,N,e,this.state.context,this)),await((v=(b=this.options).onError)==null?void 0:v.call(b,N,e,this.state.context)),await((w=(x=Q(this,vr).config).onSettled)==null?void 0:w.call(x,void 0,N,this.state.variables,this.state.context,this)),await((k=(S=this.options).onSettled)==null?void 0:k.call(S,void 0,N,e,this.state.context)),N}finally{Nt(this,Ho,ba).call(this,{type:"error",error:N})}}}},Go=new WeakMap,Qp=new WeakMap,vr=new WeakMap,Qc=new WeakMap,Ho=new WeakSet,ba=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!sk(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vs.batch(()=>{Q(this,Go).forEach(s=>{s.onMutationUpdate(e)}),Q(this,vr).notify({mutation:this,type:"updated",action:e})})},eA);function SV(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hr,Zp,su,tA,CV=(tA=class extends um{constructor(e={}){super();Ye(this,Hr,void 0);Ye(this,Zp,void 0);Ye(this,su,void 0);this.config=e,Fe(this,Hr,[]),Fe(this,Zp,0)}build(e,n,s){const r=new wV({mutationCache:this,mutationId:++m0(this,Zp)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){Q(this,Hr).push(e),this.notify({type:"added",mutation:e})}remove(e){Fe(this,Hr,Q(this,Hr).filter(n=>n!==e)),this.notify({type:"removed",mutation:e})}clear(){vs.batch(()=>{Q(this,Hr).forEach(e=>{this.remove(e)})})}getAll(){return Q(this,Hr)}find(e){const n={exact:!0,...e};return Q(this,Hr).find(s=>IE(n,s))}findAll(e={}){return Q(this,Hr).filter(n=>IE(e,n))}notify(e){vs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){return Fe(this,su,(Q(this,su)??Promise.resolve()).then(()=>{const e=Q(this,Hr).filter(n=>n.state.isPaused);return vs.batch(()=>e.reduce((n,s)=>n.then(()=>s.continue().catch(qr)),Promise.resolve()))}).then(()=>{Fe(this,su,void 0)})),Q(this,su)}},Hr=new WeakMap,Zp=new WeakMap,su=new WeakMap,tA);function kV(t){return{onFetch:(e,n)=>{const s=async()=>{var p,m,g,y,b;const r=e.options,o=(g=(m=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],a=((b=e.state.data)==null?void 0:b.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},d=e.options.queryFn&&e.options.queryFn!==tk?e.options.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`)),h=async(v,x,w)=>{if(u)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const S={queryKey:e.queryKey,pageParam:x,direction:w?"backward":"forward",meta:e.options.meta};c(S);const k=await d(S),{maxPages:N}=e.options,$=w?fV:hV;return{pages:$(v.pages,k,N),pageParams:$(v.pageParams,x,N)}};let f;if(o&&i.length){const v=o==="backward",x=v?NV:AE,w={pages:i,pageParams:a},S=x(r,w);f=await h(w,S,v)}else{f=await h(l,a[0]??r.initialPageParam);const v=t??i.length;for(let x=1;x<v;x++){const w=AE(r,f);f=await h(f,w)}}return f};e.options.persister?e.fetchFn=()=>{var r,o;return(o=(r=e.options).persister)==null?void 0:o.call(r,s,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=s}}}function AE(t,{pages:e,pageParams:n}){const s=e.length-1;return t.getNextPageParam(e[s],e,n[s],n)}function NV(t,{pages:e,pageParams:n}){var s;return(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n)}var gn,Ea,Ia,Zc,Jc,Ra,ed,td,nA,TV=(nA=class{constructor(t={}){Ye(this,gn,void 0);Ye(this,Ea,void 0);Ye(this,Ia,void 0);Ye(this,Zc,void 0);Ye(this,Jc,void 0);Ye(this,Ra,void 0);Ye(this,ed,void 0);Ye(this,td,void 0);Fe(this,gn,t.queryCache||new xV),Fe(this,Ea,t.mutationCache||new CV),Fe(this,Ia,t.defaultOptions||{}),Fe(this,Zc,new Map),Fe(this,Jc,new Map),Fe(this,Ra,0)}mount(){m0(this,Ra)._++,Q(this,Ra)===1&&(Fe(this,ed,nk.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,gn).onFocus())})),Fe(this,td,Ey.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,gn).onOnline())})))}unmount(){var t,e;m0(this,Ra)._--,Q(this,Ra)===0&&((t=Q(this,ed))==null||t.call(this),Fe(this,ed,void 0),(e=Q(this,td))==null||e.call(this),Fe(this,td,void 0))}isFetching(t){return Q(this,gn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Ea).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,gn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),s=Q(this,gn).build(this,n);return t.revalidateIfStale&&s.isStaleByTime(n.staleTime)&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Q(this,gn).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=Q(this,gn).get(s.queryHash),o=r==null?void 0:r.state.data,i=cV(e,o);if(i!==void 0)return Q(this,gn).build(this,s).setData(i,{...n,manual:!0})}setQueriesData(t,e,n){return vs.batch(()=>Q(this,gn).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,gn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,gn);vs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,gn),s={type:"active",...t};return vs.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(s,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},s=vs.batch(()=>Q(this,gn).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(qr).catch(qr)}invalidateQueries(t={},e={}){return vs.batch(()=>{if(Q(this,gn).findAll(t).forEach(s=>{s.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=vs.batch(()=>Q(this,gn).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let o=r.fetch(void 0,n);return n.throwOnError||(o=o.catch(qr)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(qr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,gn).build(this,e);return n.isStaleByTime(e.staleTime)?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(qr).catch(qr)}fetchInfiniteQuery(t){return t.behavior=kV(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(qr).catch(qr)}resumePausedMutations(){return Ey.isOnline()?Q(this,Ea).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,gn)}getMutationCache(){return Q(this,Ea)}getDefaultOptions(){return Q(this,Ia)}setDefaultOptions(t){Fe(this,Ia,t)}setQueryDefaults(t,e){Q(this,Zc).set(ap(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,Zc).values()];let n={};return e.forEach(s=>{lp(t,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(t,e){Q(this,Jc).set(ap(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Jc).values()];let n={};return e.forEach(s=>{lp(t,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Ia).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ek(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===tk&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Ia).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,gn).clear(),Q(this,Ea).clear()}},gn=new WeakMap,Ea=new WeakMap,Ia=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,Ra=new WeakMap,ed=new WeakMap,td=new WeakMap,nA),tr,Ht,Jp,Ls,ru,nd,qo,em,sd,rd,ou,iu,_a,od,au,Af,tm,$w,nm,Ew,sm,Iw,rm,Rw,om,_w,im,Aw,am,Dw,U1,xA,sA,$V=(sA=class extends um{constructor(e,n){super();Ye(this,au);Ye(this,tm);Ye(this,nm);Ye(this,sm);Ye(this,rm);Ye(this,om);Ye(this,im);Ye(this,am);Ye(this,U1);Ye(this,tr,void 0);Ye(this,Ht,void 0);Ye(this,Jp,void 0);Ye(this,Ls,void 0);Ye(this,ru,void 0);Ye(this,nd,void 0);Ye(this,qo,void 0);Ye(this,em,void 0);Ye(this,sd,void 0);Ye(this,rd,void 0);Ye(this,ou,void 0);Ye(this,iu,void 0);Ye(this,_a,void 0);Ye(this,od,new Set);this.options=n,Fe(this,tr,e),Fe(this,qo,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,Ht).addObserver(this),DE(Q(this,Ht),this.options)?Nt(this,au,Af).call(this):this.updateResult(),Nt(this,rm,Rw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ow(Q(this,Ht),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ow(Q(this,Ht),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Nt(this,om,_w).call(this),Nt(this,im,Aw).call(this),Q(this,Ht).removeObserver(this)}setOptions(e,n){const s=this.options,r=Q(this,Ht);if(this.options=Q(this,tr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");Nt(this,am,Dw).call(this),Q(this,Ht).setOptions(this.options),s._defaulted&&!kw(this.options,s)&&Q(this,tr).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,Ht),observer:this});const o=this.hasListeners();o&&OE(Q(this,Ht),r,this.options,s)&&Nt(this,au,Af).call(this),this.updateResult(n),o&&(Q(this,Ht)!==r||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&Nt(this,tm,$w).call(this);const i=Nt(this,nm,Ew).call(this);o&&(Q(this,Ht)!==r||this.options.enabled!==s.enabled||i!==Q(this,_a))&&Nt(this,sm,Iw).call(this,i)}getOptimisticResult(e){const n=Q(this,tr).getQueryCache().build(Q(this,tr),e),s=this.createResult(n,e);return IV(this,s)&&(Fe(this,Ls,s),Fe(this,nd,this.options),Fe(this,ru,Q(this,Ht).state)),s}getCurrentResult(){return Q(this,Ls)}trackResult(e,n){const s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),n==null||n(r),e[r])})}),s}trackProp(e){Q(this,od).add(e)}getCurrentQuery(){return Q(this,Ht)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Q(this,tr).defaultQueryOptions(e),s=Q(this,tr).getQueryCache().build(Q(this,tr),n);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,n))}fetch(e){return Nt(this,au,Af).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Ls)))}createResult(e,n){var k;const s=Q(this,Ht),r=this.options,o=Q(this,Ls),i=Q(this,ru),a=Q(this,nd),u=e!==s?e.state:Q(this,Jp),{state:c}=e;let d={...c},h=!1,f;if(n._optimisticResults){const N=this.hasListeners(),$=!N&&DE(e,n),I=N&&OE(e,s,n,r);($||I)&&(d={...d,...vA(c.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:g}=d;if(n.select&&d.data!==void 0)if(o&&d.data===(i==null?void 0:i.data)&&n.select===Q(this,em))f=Q(this,sd);else try{Fe(this,em,n.select),f=n.select(d.data),f=Tw(o==null?void 0:o.data,f,n),Fe(this,sd,f),Fe(this,qo,null)}catch(N){Fe(this,qo,N)}else f=d.data;if(n.placeholderData!==void 0&&f===void 0&&g==="pending"){let N;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))N=o.data;else if(N=typeof n.placeholderData=="function"?n.placeholderData((k=Q(this,rd))==null?void 0:k.state.data,Q(this,rd)):n.placeholderData,n.select&&N!==void 0)try{N=n.select(N),Fe(this,qo,null)}catch($){Fe(this,qo,$)}N!==void 0&&(g="success",f=Tw(o==null?void 0:o.data,N,n),h=!0)}Q(this,qo)&&(p=Q(this,qo),f=Q(this,sd),m=Date.now(),g="error");const y=d.fetchStatus==="fetching",b=g==="pending",v=g==="error",x=b&&y,w=f!==void 0;return{status:g,fetchStatus:d.fetchStatus,isPending:b,isSuccess:g==="success",isError:v,isInitialLoading:x,isLoading:x,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:v&&!w,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&w,isStale:rk(e,n),refetch:this.refetch}}updateResult(e){const n=Q(this,Ls),s=this.createResult(Q(this,Ht),this.options);if(Fe(this,ru,Q(this,Ht).state),Fe(this,nd,this.options),Q(this,ru).data!==void 0&&Fe(this,rd,Q(this,Ht)),kw(s,n))return;Fe(this,Ls,s);const r={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!Q(this,od).size)return!0;const l=new Set(a??Q(this,od));return this.options.throwOnError&&l.add("error"),Object.keys(Q(this,Ls)).some(u=>{const c=u;return Q(this,Ls)[c]!==n[c]&&l.has(c)})};(e==null?void 0:e.listeners)!==!1&&o()&&(r.listeners=!0),Nt(this,U1,xA).call(this,{...r,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Nt(this,rm,Rw).call(this)}},tr=new WeakMap,Ht=new WeakMap,Jp=new WeakMap,Ls=new WeakMap,ru=new WeakMap,nd=new WeakMap,qo=new WeakMap,em=new WeakMap,sd=new WeakMap,rd=new WeakMap,ou=new WeakMap,iu=new WeakMap,_a=new WeakMap,od=new WeakMap,au=new WeakSet,Af=function(e){Nt(this,am,Dw).call(this);let n=Q(this,Ht).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(qr)),n},tm=new WeakSet,$w=function(){if(Nt(this,om,_w).call(this),id||Q(this,Ls).isStale||!Cw(this.options.staleTime))return;const n=pA(Q(this,Ls).dataUpdatedAt,this.options.staleTime)+1;Fe(this,ou,setTimeout(()=>{Q(this,Ls).isStale||this.updateResult()},n))},nm=new WeakSet,Ew=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,Ht)):this.options.refetchInterval)??!1},sm=new WeakSet,Iw=function(e){Nt(this,im,Aw).call(this),Fe(this,_a,e),!(id||this.options.enabled===!1||!Cw(Q(this,_a))||Q(this,_a)===0)&&Fe(this,iu,setInterval(()=>{(this.options.refetchIntervalInBackground||nk.isFocused())&&Nt(this,au,Af).call(this)},Q(this,_a)))},rm=new WeakSet,Rw=function(){Nt(this,tm,$w).call(this),Nt(this,sm,Iw).call(this,Nt(this,nm,Ew).call(this))},om=new WeakSet,_w=function(){Q(this,ou)&&(clearTimeout(Q(this,ou)),Fe(this,ou,void 0))},im=new WeakSet,Aw=function(){Q(this,iu)&&(clearInterval(Q(this,iu)),Fe(this,iu,void 0))},am=new WeakSet,Dw=function(){const e=Q(this,tr).getQueryCache().build(Q(this,tr),this.options);if(e===Q(this,Ht))return;const n=Q(this,Ht);Fe(this,Ht,e),Fe(this,Jp,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},U1=new WeakSet,xA=function(e){vs.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Q(this,Ls))}),Q(this,tr).getQueryCache().notify({query:Q(this,Ht),type:"observerResultsUpdated"})})},sA);function EV(t,e){return e.enabled!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function DE(t,e){return EV(t,e)||t.state.data!==void 0&&Ow(t,e,e.refetchOnMount)}function Ow(t,e,n){if(e.enabled!==!1){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&rk(t,e)}return!1}function OE(t,e,n,s){return(t!==e||s.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&rk(t,n)}function rk(t,e){return e.enabled!==!1&&t.isStaleByTime(e.staleTime)}function IV(t,e){return!kw(t.getCurrentResult(),e)}var wA=_.createContext(void 0),RV=t=>{const e=_.useContext(wA);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},_V=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),R.jsx(wA.Provider,{value:t,children:e})),SA=_.createContext(!1),AV=()=>_.useContext(SA);SA.Provider;function DV(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var OV=_.createContext(DV()),FV=()=>_.useContext(OV);function LV(t,e){return typeof t=="function"?t(...e):!!t}var PV=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},MV=t=>{_.useEffect(()=>{t.clearReset()},[t])},zV=({result:t,errorResetBoundary:e,throwOnError:n,query:s})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&LV(n,[t.error,s]),BV=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},VV=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,UV=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function WV(t,e,n){const s=RV(n),r=AV(),o=FV(),i=s.defaultQueryOptions(t);i._optimisticResults=r?"isRestoring":"optimistic",BV(i),PV(i,o),MV(o);const[a]=_.useState(()=>new e(s,i)),l=a.getOptimisticResult(i);if(_.useSyncExternalStore(_.useCallback(u=>{const c=r?()=>{}:a.subscribe(vs.batchCalls(u));return a.updateResult(),c},[a,r]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),_.useEffect(()=>{a.setOptions(i,{listeners:!1})},[i,a]),VV(i,l))throw UV(i,a,o);if(zV({result:l,errorResetBoundary:o,throwOnError:i.throwOnError,query:s.getQueryCache().get(i.queryHash)}))throw l.error;return i.notifyOnChangeProps?l:a.trackResult(l)}function jV(t,e){return WV(t,$V,e)}var Fw={},CA={exports:{}},Fr={},kA={exports:{}},NA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,H){var K=B.length;B.push(H);e:for(;0<K;){var ne=K-1>>>1,D=B[ne];if(0<r(D,H))B[ne]=H,B[K]=D,K=ne;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var H=B[0],K=B.pop();if(K!==H){B[0]=K;e:for(var ne=0,D=B.length,X=D>>>1;ne<X;){var te=2*(ne+1)-1,ue=B[te],ie=te+1,me=B[ie];if(0>r(ue,K))ie<D&&0>r(me,ue)?(B[ne]=me,B[ie]=K,ne=ie):(B[ne]=ue,B[te]=K,ne=te);else if(ie<D&&0>r(me,K))B[ne]=me,B[ie]=K,ne=ie;else break e}}return H}function r(B,H){var K=B.sortIndex-H.sortIndex;return K!==0?K:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var H=n(u);H!==null;){if(H.callback===null)s(u);else if(H.startTime<=B)s(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function x(B){if(m=!1,v(B),!p)if(n(l)!==null)p=!0,q(w);else{var H=n(u);H!==null&&Z(x,H.startTime-B)}}function w(B,H){p=!1,m&&(m=!1,y(N),N=-1),f=!0;var K=h;try{for(v(H),d=n(l);d!==null&&(!(d.expirationTime>H)||B&&!A());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,h=d.priorityLevel;var D=ne(d.expirationTime<=H);H=t.unstable_now(),typeof D=="function"?d.callback=D:d===n(l)&&s(l),v(H)}else s(l);d=n(l)}if(d!==null)var X=!0;else{var te=n(u);te!==null&&Z(x,te.startTime-H),X=!1}return X}finally{d=null,h=K,f=!1}}var S=!1,k=null,N=-1,$=5,I=-1;function A(){return!(t.unstable_now()-I<$)}function O(){if(k!==null){var B=t.unstable_now();I=B;var H=!0;try{H=k(!0,B)}finally{H?P():(S=!1,k=null)}}else S=!1}var P;if(typeof b=="function")P=function(){b(O)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=O,P=function(){G.postMessage(null)}}else P=function(){g(O,0)};function q(B){k=B,S||(S=!0,P())}function Z(B,H){N=g(function(){B(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,q(w))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var K=h;h=H;try{return B()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=h;h=B;try{return H()}finally{h=K}},t.unstable_scheduleCallback=function(B,H,K){var ne=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ne+K:ne):K=ne,B){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=K+D,B={id:c++,callback:H,priorityLevel:B,startTime:K,expirationTime:D,sortIndex:-1},K>ne?(B.sortIndex=K,e(u,B),n(l)===null&&B===n(u)&&(m?(y(N),N=-1):m=!0,Z(x,K-ne))):(B.sortIndex=D,e(l,B),p||f||(p=!0,q(w))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var H=h;return function(){var K=h;h=H;try{return B.apply(this,arguments)}finally{h=K}}}})(NA);kA.exports=NA;var GV=kA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA=_,Ar=GV;function Se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $A=new Set,up={};function Bu(t,e){ad(t,e),ad(t+"Capture",e)}function ad(t,e){for(up[t]=e,t=0;t<e.length;t++)$A.add(e[t])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lw=Object.prototype.hasOwnProperty,HV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FE={},LE={};function qV(t){return Lw.call(LE,t)?!0:Lw.call(FE,t)?!1:HV.test(t)?LE[t]=!0:(FE[t]=!0,!1)}function KV(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XV(t,e,n,s){if(e===null||typeof e>"u"||KV(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ys(t,e,n,s,r,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ws[t]=new Ys(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ws[e]=new Ys(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ws[t]=new Ys(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ws[t]=new Ys(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ws[t]=new Ys(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ws[t]=new Ys(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ws[t]=new Ys(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ws[t]=new Ys(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ws[t]=new Ys(t,5,!1,t.toLowerCase(),null,!1,!1)});var ok=/[\-:]([a-z])/g;function ik(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ok,ik);ws[e]=new Ys(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ok,ik);ws[e]=new Ys(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ok,ik);ws[e]=new Ys(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ws[t]=new Ys(t,1,!1,t.toLowerCase(),null,!1,!1)});ws.xlinkHref=new Ys("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ws[t]=new Ys(t,1,!1,t.toLowerCase(),null,!0,!0)});function ak(t,e,n,s){var r=ws.hasOwnProperty(e)?ws[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XV(e,n,r,s)&&(n=null),s||r===null?qV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Qi=TA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y0=Symbol.for("react.element"),bc=Symbol.for("react.portal"),vc=Symbol.for("react.fragment"),lk=Symbol.for("react.strict_mode"),Pw=Symbol.for("react.profiler"),EA=Symbol.for("react.provider"),IA=Symbol.for("react.context"),uk=Symbol.for("react.forward_ref"),Mw=Symbol.for("react.suspense"),zw=Symbol.for("react.suspense_list"),ck=Symbol.for("react.memo"),xa=Symbol.for("react.lazy"),RA=Symbol.for("react.offscreen"),PE=Symbol.iterator;function rf(t){return t===null||typeof t!="object"?null:(t=PE&&t[PE]||t["@@iterator"],typeof t=="function"?t:null)}var mn=Object.assign,lx;function Df(t){if(lx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lx=e&&e[1]||""}return`
`+lx+t}var ux=!1;function cx(t,e){if(!t||ux)return"";ux=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=s.stack.split(`
`),i=r.length-1,a=o.length-1;1<=i&&0<=a&&r[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(r[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||r[i]!==o[a]){var l=`
`+r[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{ux=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Df(t):""}function YV(t){switch(t.tag){case 5:return Df(t.type);case 16:return Df("Lazy");case 13:return Df("Suspense");case 19:return Df("SuspenseList");case 0:case 2:case 15:return t=cx(t.type,!1),t;case 11:return t=cx(t.type.render,!1),t;case 1:return t=cx(t.type,!0),t;default:return""}}function Bw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vc:return"Fragment";case bc:return"Portal";case Pw:return"Profiler";case lk:return"StrictMode";case Mw:return"Suspense";case zw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IA:return(t.displayName||"Context")+".Consumer";case EA:return(t._context.displayName||"Context")+".Provider";case uk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ck:return e=t.displayName||null,e!==null?e:Bw(t.type)||"Memo";case xa:e=t._payload,t=t._init;try{return Bw(t(e))}catch{}}return null}function QV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bw(e);case 8:return e===lk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _A(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZV(t){var e=_A(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function b0(t){t._valueTracker||(t._valueTracker=ZV(t))}function AA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=_A(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Iy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vw(t,e){var n=e.checked;return mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ME(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Qa(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DA(t,e){e=e.checked,e!=null&&ak(t,"checked",e,!1)}function Uw(t,e){DA(t,e);var n=Qa(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ww(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ww(t,e.type,Qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ww(t,e,n){(e!=="number"||Iy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Of=Array.isArray;function Oc(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Qa(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function jw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return mn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function BE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Se(92));if(Of(n)){if(1<n.length)throw Error(Se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qa(n)}}function OA(t,e){var n=Qa(e.value),s=Qa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function VE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function FA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?FA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var v0,LA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(v0=v0||document.createElement("div"),v0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=v0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JV=["Webkit","ms","Moz","O"];Object.keys(Gf).forEach(function(t){JV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gf[e]=Gf[t]})});function PA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gf.hasOwnProperty(t)&&Gf[t]?(""+e).trim():e+"px"}function MA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=PA(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var e8=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hw(t,e){if(e){if(e8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function qw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kw=null;function dk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xw=null,Fc=null,Lc=null;function UE(t){if(t=hm(t)){if(typeof Xw!="function")throw Error(Se(280));var e=t.stateNode;e&&(e=X1(e),Xw(t.stateNode,t.type,e))}}function zA(t){Fc?Lc?Lc.push(t):Lc=[t]:Fc=t}function BA(){if(Fc){var t=Fc,e=Lc;if(Lc=Fc=null,UE(t),e)for(t=0;t<e.length;t++)UE(e[t])}}function VA(t,e){return t(e)}function UA(){}var dx=!1;function WA(t,e,n){if(dx)return t(e,n);dx=!0;try{return VA(t,e,n)}finally{dx=!1,(Fc!==null||Lc!==null)&&(UA(),BA())}}function dp(t,e){var n=t.stateNode;if(n===null)return null;var s=X1(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Se(231,e,typeof n));return n}var Yw=!1;if(Bi)try{var of={};Object.defineProperty(of,"passive",{get:function(){Yw=!0}}),window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{Yw=!1}function t8(t,e,n,s,r,o,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Hf=!1,Ry=null,_y=!1,Qw=null,n8={onError:function(t){Hf=!0,Ry=t}};function s8(t,e,n,s,r,o,i,a,l){Hf=!1,Ry=null,t8.apply(n8,arguments)}function r8(t,e,n,s,r,o,i,a,l){if(s8.apply(this,arguments),Hf){if(Hf){var u=Ry;Hf=!1,Ry=null}else throw Error(Se(198));_y||(_y=!0,Qw=u)}}function Vu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WE(t){if(Vu(t)!==t)throw Error(Se(188))}function o8(t){var e=t.alternate;if(!e){if(e=Vu(t),e===null)throw Error(Se(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return WE(r),t;if(o===s)return WE(r),e;o=o.sibling}throw Error(Se(188))}if(n.return!==s.return)n=r,s=o;else{for(var i=!1,a=r.child;a;){if(a===n){i=!0,n=r,s=o;break}if(a===s){i=!0,s=r,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,s=r;break}if(a===s){i=!0,s=o,n=r;break}a=a.sibling}if(!i)throw Error(Se(189))}}if(n.alternate!==s)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?t:e}function GA(t){return t=o8(t),t!==null?HA(t):null}function HA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HA(t);if(e!==null)return e;t=t.sibling}return null}var qA=Ar.unstable_scheduleCallback,jE=Ar.unstable_cancelCallback,i8=Ar.unstable_shouldYield,a8=Ar.unstable_requestPaint,Rn=Ar.unstable_now,l8=Ar.unstable_getCurrentPriorityLevel,hk=Ar.unstable_ImmediatePriority,KA=Ar.unstable_UserBlockingPriority,Ay=Ar.unstable_NormalPriority,u8=Ar.unstable_LowPriority,XA=Ar.unstable_IdlePriority,G1=null,ni=null;function c8(t){if(ni&&typeof ni.onCommitFiberRoot=="function")try{ni.onCommitFiberRoot(G1,t,void 0,(t.current.flags&128)===128)}catch{}}var Eo=Math.clz32?Math.clz32:f8,d8=Math.log,h8=Math.LN2;function f8(t){return t>>>=0,t===0?32:31-(d8(t)/h8|0)|0}var x0=64,w0=4194304;function Ff(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dy(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,o=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~r;a!==0?s=Ff(a):(o&=i,o!==0&&(s=Ff(o)))}else i=n&~r,i!==0?s=Ff(i):o!==0&&(s=Ff(o));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Eo(e),r=1<<n,s|=t[n],e&=~r;return s}function p8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m8(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-Eo(o),a=1<<i,l=r[i];l===-1?(!(a&n)||a&s)&&(r[i]=p8(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Zw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YA(){var t=x0;return x0<<=1,!(x0&4194240)&&(x0=64),t}function hx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Eo(e),t[e]=n}function g8(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Eo(n),o=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~o}}function fk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Eo(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Pt=0;function QA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZA,pk,JA,eD,tD,Jw=!1,S0=[],Ma=null,za=null,Ba=null,hp=new Map,fp=new Map,ka=[],y8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GE(t,e){switch(t){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":hp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fp.delete(e.pointerId)}}function af(t,e,n,s,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[r]},e!==null&&(e=hm(e),e!==null&&pk(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function b8(t,e,n,s,r){switch(e){case"focusin":return Ma=af(Ma,t,e,n,s,r),!0;case"dragenter":return za=af(za,t,e,n,s,r),!0;case"mouseover":return Ba=af(Ba,t,e,n,s,r),!0;case"pointerover":var o=r.pointerId;return hp.set(o,af(hp.get(o)||null,t,e,n,s,r)),!0;case"gotpointercapture":return o=r.pointerId,fp.set(o,af(fp.get(o)||null,t,e,n,s,r)),!0}return!1}function nD(t){var e=jl(t.target);if(e!==null){var n=Vu(e);if(n!==null){if(e=n.tag,e===13){if(e=jA(n),e!==null){t.blockedOn=e,tD(t.priority,function(){JA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function iy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Kw=s,n.target.dispatchEvent(s),Kw=null}else return e=hm(n),e!==null&&pk(e),t.blockedOn=n,!1;e.shift()}return!0}function HE(t,e,n){iy(t)&&n.delete(e)}function v8(){Jw=!1,Ma!==null&&iy(Ma)&&(Ma=null),za!==null&&iy(za)&&(za=null),Ba!==null&&iy(Ba)&&(Ba=null),hp.forEach(HE),fp.forEach(HE)}function lf(t,e){t.blockedOn===e&&(t.blockedOn=null,Jw||(Jw=!0,Ar.unstable_scheduleCallback(Ar.unstable_NormalPriority,v8)))}function pp(t){function e(r){return lf(r,t)}if(0<S0.length){lf(S0[0],t);for(var n=1;n<S0.length;n++){var s=S0[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Ma!==null&&lf(Ma,t),za!==null&&lf(za,t),Ba!==null&&lf(Ba,t),hp.forEach(e),fp.forEach(e),n=0;n<ka.length;n++)s=ka[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<ka.length&&(n=ka[0],n.blockedOn===null);)nD(n),n.blockedOn===null&&ka.shift()}var Pc=Qi.ReactCurrentBatchConfig,Oy=!0;function x8(t,e,n,s){var r=Pt,o=Pc.transition;Pc.transition=null;try{Pt=1,mk(t,e,n,s)}finally{Pt=r,Pc.transition=o}}function w8(t,e,n,s){var r=Pt,o=Pc.transition;Pc.transition=null;try{Pt=4,mk(t,e,n,s)}finally{Pt=r,Pc.transition=o}}function mk(t,e,n,s){if(Oy){var r=eS(t,e,n,s);if(r===null)Sx(t,e,s,Fy,n),GE(t,s);else if(b8(r,t,e,n,s))s.stopPropagation();else if(GE(t,s),e&4&&-1<y8.indexOf(t)){for(;r!==null;){var o=hm(r);if(o!==null&&ZA(o),o=eS(t,e,n,s),o===null&&Sx(t,e,s,Fy,n),o===r)break;r=o}r!==null&&s.stopPropagation()}else Sx(t,e,s,null,n)}}var Fy=null;function eS(t,e,n,s){if(Fy=null,t=dk(s),t=jl(t),t!==null)if(e=Vu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fy=t,null}function sD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l8()){case hk:return 1;case KA:return 4;case Ay:case u8:return 16;case XA:return 536870912;default:return 16}default:return 16}}var Aa=null,gk=null,ay=null;function rD(){if(ay)return ay;var t,e=gk,n=e.length,s,r="value"in Aa?Aa.value:Aa.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var i=n-t;for(s=1;s<=i&&e[n-s]===r[o-s];s++);return ay=r.slice(t,1<s?1-s:void 0)}function ly(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function C0(){return!0}function qE(){return!1}function Lr(t){function e(n,s,r,o,i){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?C0:qE,this.isPropagationStopped=qE,this}return mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=C0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=C0)},persist:function(){},isPersistent:C0}),e}var Md={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yk=Lr(Md),dm=mn({},Md,{view:0,detail:0}),S8=Lr(dm),fx,px,uf,H1=mn({},dm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uf&&(uf&&t.type==="mousemove"?(fx=t.screenX-uf.screenX,px=t.screenY-uf.screenY):px=fx=0,uf=t),fx)},movementY:function(t){return"movementY"in t?t.movementY:px}}),KE=Lr(H1),C8=mn({},H1,{dataTransfer:0}),k8=Lr(C8),N8=mn({},dm,{relatedTarget:0}),mx=Lr(N8),T8=mn({},Md,{animationName:0,elapsedTime:0,pseudoElement:0}),$8=Lr(T8),E8=mn({},Md,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I8=Lr(E8),R8=mn({},Md,{data:0}),XE=Lr(R8),_8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O8(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=D8[t])?!!e[t]:!1}function bk(){return O8}var F8=mn({},dm,{key:function(t){if(t.key){var e=_8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ly(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bk,charCode:function(t){return t.type==="keypress"?ly(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ly(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L8=Lr(F8),P8=mn({},H1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YE=Lr(P8),M8=mn({},dm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bk}),z8=Lr(M8),B8=mn({},Md,{propertyName:0,elapsedTime:0,pseudoElement:0}),V8=Lr(B8),U8=mn({},H1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),W8=Lr(U8),j8=[9,13,27,32],vk=Bi&&"CompositionEvent"in window,qf=null;Bi&&"documentMode"in document&&(qf=document.documentMode);var G8=Bi&&"TextEvent"in window&&!qf,oD=Bi&&(!vk||qf&&8<qf&&11>=qf),QE=" ",ZE=!1;function iD(t,e){switch(t){case"keyup":return j8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xc=!1;function H8(t,e){switch(t){case"compositionend":return aD(e);case"keypress":return e.which!==32?null:(ZE=!0,QE);case"textInput":return t=e.data,t===QE&&ZE?null:t;default:return null}}function q8(t,e){if(xc)return t==="compositionend"||!vk&&iD(t,e)?(t=rD(),ay=gk=Aa=null,xc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oD&&e.locale!=="ko"?null:e.data;default:return null}}var K8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!K8[t.type]:e==="textarea"}function lD(t,e,n,s){zA(s),e=Ly(e,"onChange"),0<e.length&&(n=new yk("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Kf=null,mp=null;function X8(t){vD(t,0)}function q1(t){var e=Cc(t);if(AA(e))return t}function Y8(t,e){if(t==="change")return e}var uD=!1;if(Bi){var gx;if(Bi){var yx="oninput"in document;if(!yx){var eI=document.createElement("div");eI.setAttribute("oninput","return;"),yx=typeof eI.oninput=="function"}gx=yx}else gx=!1;uD=gx&&(!document.documentMode||9<document.documentMode)}function tI(){Kf&&(Kf.detachEvent("onpropertychange",cD),mp=Kf=null)}function cD(t){if(t.propertyName==="value"&&q1(mp)){var e=[];lD(e,mp,t,dk(t)),WA(X8,e)}}function Q8(t,e,n){t==="focusin"?(tI(),Kf=e,mp=n,Kf.attachEvent("onpropertychange",cD)):t==="focusout"&&tI()}function Z8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return q1(mp)}function J8(t,e){if(t==="click")return q1(e)}function e9(t,e){if(t==="input"||t==="change")return q1(e)}function t9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Do=typeof Object.is=="function"?Object.is:t9;function gp(t,e){if(Do(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Lw.call(e,r)||!Do(t[r],e[r]))return!1}return!0}function nI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sI(t,e){var n=nI(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nI(n)}}function dD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hD(){for(var t=window,e=Iy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Iy(t.document)}return e}function xk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function n9(t){var e=hD(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dD(n.ownerDocument.documentElement,n)){if(s!==null&&xk(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(s.start,r);s=s.end===void 0?o:Math.min(s.end,r),!t.extend&&o>s&&(r=s,s=o,o=r),r=sI(n,o);var i=sI(n,s);r&&i&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>s?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var s9=Bi&&"documentMode"in document&&11>=document.documentMode,wc=null,tS=null,Xf=null,nS=!1;function rI(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nS||wc==null||wc!==Iy(s)||(s=wc,"selectionStart"in s&&xk(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Xf&&gp(Xf,s)||(Xf=s,s=Ly(tS,"onSelect"),0<s.length&&(e=new yk("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=wc)))}function k0(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sc={animationend:k0("Animation","AnimationEnd"),animationiteration:k0("Animation","AnimationIteration"),animationstart:k0("Animation","AnimationStart"),transitionend:k0("Transition","TransitionEnd")},bx={},fD={};Bi&&(fD=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function K1(t){if(bx[t])return bx[t];if(!Sc[t])return t;var e=Sc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fD)return bx[t]=e[n];return t}var pD=K1("animationend"),mD=K1("animationiteration"),gD=K1("animationstart"),yD=K1("transitionend"),bD=new Map,oI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dl(t,e){bD.set(t,e),Bu(e,[t])}for(var vx=0;vx<oI.length;vx++){var xx=oI[vx],r9=xx.toLowerCase(),o9=xx[0].toUpperCase()+xx.slice(1);dl(r9,"on"+o9)}dl(pD,"onAnimationEnd");dl(mD,"onAnimationIteration");dl(gD,"onAnimationStart");dl("dblclick","onDoubleClick");dl("focusin","onFocus");dl("focusout","onBlur");dl(yD,"onTransitionEnd");ad("onMouseEnter",["mouseout","mouseover"]);ad("onMouseLeave",["mouseout","mouseover"]);ad("onPointerEnter",["pointerout","pointerover"]);ad("onPointerLeave",["pointerout","pointerover"]);Bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lf));function iI(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,r8(s,e,void 0,t),t.currentTarget=null}function vD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var o=void 0;if(e)for(var i=s.length-1;0<=i;i--){var a=s[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;iI(r,a,u),o=l}else for(i=0;i<s.length;i++){if(a=s[i],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;iI(r,a,u),o=l}}}if(_y)throw t=Qw,_y=!1,Qw=null,t}function Qt(t,e){var n=e[aS];n===void 0&&(n=e[aS]=new Set);var s=t+"__bubble";n.has(s)||(xD(e,t,2,!1),n.add(s))}function wx(t,e,n){var s=0;e&&(s|=4),xD(n,t,s,e)}var N0="_reactListening"+Math.random().toString(36).slice(2);function yp(t){if(!t[N0]){t[N0]=!0,$A.forEach(function(n){n!=="selectionchange"&&(i9.has(n)||wx(n,!1,t),wx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[N0]||(e[N0]=!0,wx("selectionchange",!1,e))}}function xD(t,e,n,s){switch(sD(e)){case 1:var r=x8;break;case 4:r=w8;break;default:r=mk}n=r.bind(null,e,n,t),r=void 0,!Yw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Sx(t,e,n,s,r){var o=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(i===4)for(i=s.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;i=i.return}for(;a!==null;){if(i=jl(a),i===null)return;if(l=i.tag,l===5||l===6){s=o=i;continue e}a=a.parentNode}}s=s.return}WA(function(){var u=o,c=dk(n),d=[];e:{var h=bD.get(t);if(h!==void 0){var f=yk,p=t;switch(t){case"keypress":if(ly(n)===0)break e;case"keydown":case"keyup":f=L8;break;case"focusin":p="focus",f=mx;break;case"focusout":p="blur",f=mx;break;case"beforeblur":case"afterblur":f=mx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=KE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=k8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=z8;break;case pD:case mD:case gD:f=$8;break;case yD:f=V8;break;case"scroll":f=S8;break;case"wheel":f=W8;break;case"copy":case"cut":case"paste":f=I8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=YE}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var b=u,v;b!==null;){v=b;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,y!==null&&(x=dp(b,y),x!=null&&m.push(bp(b,x,v)))),g)break;b=b.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Kw&&(p=n.relatedTarget||n.fromElement)&&(jl(p)||p[Vi]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?jl(p):null,p!==null&&(g=Vu(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=KE,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(m=YE,x="onPointerLeave",y="onPointerEnter",b="pointer"),g=f==null?h:Cc(f),v=p==null?h:Cc(p),h=new m(x,b+"leave",f,n,c),h.target=g,h.relatedTarget=v,x=null,jl(c)===u&&(m=new m(y,b+"enter",p,n,c),m.target=v,m.relatedTarget=g,x=m),g=x,f&&p)t:{for(m=f,y=p,b=0,v=m;v;v=uc(v))b++;for(v=0,x=y;x;x=uc(x))v++;for(;0<b-v;)m=uc(m),b--;for(;0<v-b;)y=uc(y),v--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=uc(m),y=uc(y)}m=null}else m=null;f!==null&&aI(d,h,f,m,!1),p!==null&&g!==null&&aI(d,g,p,m,!0)}}e:{if(h=u?Cc(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=Y8;else if(JE(h))if(uD)w=e9;else{w=Z8;var S=Q8}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=J8);if(w&&(w=w(t,u))){lD(d,w,n,c);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Ww(h,"number",h.value)}switch(S=u?Cc(u):window,t){case"focusin":(JE(S)||S.contentEditable==="true")&&(wc=S,tS=u,Xf=null);break;case"focusout":Xf=tS=wc=null;break;case"mousedown":nS=!0;break;case"contextmenu":case"mouseup":case"dragend":nS=!1,rI(d,n,c);break;case"selectionchange":if(s9)break;case"keydown":case"keyup":rI(d,n,c)}var k;if(vk)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else xc?iD(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(oD&&n.locale!=="ko"&&(xc||N!=="onCompositionStart"?N==="onCompositionEnd"&&xc&&(k=rD()):(Aa=c,gk="value"in Aa?Aa.value:Aa.textContent,xc=!0)),S=Ly(u,N),0<S.length&&(N=new XE(N,t,null,n,c),d.push({event:N,listeners:S}),k?N.data=k:(k=aD(n),k!==null&&(N.data=k)))),(k=G8?H8(t,n):q8(t,n))&&(u=Ly(u,"onBeforeInput"),0<u.length&&(c=new XE("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=k))}vD(d,e)})}function bp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ly(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=dp(t,n),o!=null&&s.unshift(bp(t,o,r)),o=dp(t,e),o!=null&&s.push(bp(t,o,r))),t=t.return}return s}function uc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aI(t,e,n,s,r){for(var o=e._reactName,i=[];n!==null&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=dp(n,o),l!=null&&i.unshift(bp(n,l,a))):r||(l=dp(n,o),l!=null&&i.push(bp(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var a9=/\r\n?/g,l9=/\u0000|\uFFFD/g;function lI(t){return(typeof t=="string"?t:""+t).replace(a9,`
`).replace(l9,"")}function T0(t,e,n){if(e=lI(e),lI(t)!==e&&n)throw Error(Se(425))}function Py(){}var sS=null,rS=null;function oS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iS=typeof setTimeout=="function"?setTimeout:void 0,u9=typeof clearTimeout=="function"?clearTimeout:void 0,uI=typeof Promise=="function"?Promise:void 0,c9=typeof queueMicrotask=="function"?queueMicrotask:typeof uI<"u"?function(t){return uI.resolve(null).then(t).catch(d9)}:iS;function d9(t){setTimeout(function(){throw t})}function Cx(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),pp(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);pp(e)}function Va(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zd=Math.random().toString(36).slice(2),Qo="__reactFiber$"+zd,vp="__reactProps$"+zd,Vi="__reactContainer$"+zd,aS="__reactEvents$"+zd,h9="__reactListeners$"+zd,f9="__reactHandles$"+zd;function jl(t){var e=t[Qo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vi]||n[Qo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cI(t);t!==null;){if(n=t[Qo])return n;t=cI(t)}return e}t=n,n=t.parentNode}return null}function hm(t){return t=t[Qo]||t[Vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Se(33))}function X1(t){return t[vp]||null}var lS=[],kc=-1;function hl(t){return{current:t}}function en(t){0>kc||(t.current=lS[kc],lS[kc]=null,kc--)}function qt(t,e){kc++,lS[kc]=t.current,t.current=e}var Za={},_s=hl(Za),ar=hl(!1),gu=Za;function ld(t,e){var n=t.type.contextTypes;if(!n)return Za;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function lr(t){return t=t.childContextTypes,t!=null}function My(){en(ar),en(_s)}function dI(t,e,n){if(_s.current!==Za)throw Error(Se(168));qt(_s,e),qt(ar,n)}function wD(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(Se(108,QV(t)||"Unknown",r));return mn({},n,s)}function zy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Za,gu=_s.current,qt(_s,t),qt(ar,ar.current),!0}function hI(t,e,n){var s=t.stateNode;if(!s)throw Error(Se(169));n?(t=wD(t,e,gu),s.__reactInternalMemoizedMergedChildContext=t,en(ar),en(_s),qt(_s,t)):en(ar),qt(ar,n)}var Ei=null,Y1=!1,kx=!1;function SD(t){Ei===null?Ei=[t]:Ei.push(t)}function p9(t){Y1=!0,SD(t)}function fl(){if(!kx&&Ei!==null){kx=!0;var t=0,e=Pt;try{var n=Ei;for(Pt=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ei=null,Y1=!1}catch(r){throw Ei!==null&&(Ei=Ei.slice(t+1)),qA(hk,fl),r}finally{Pt=e,kx=!1}}return null}var Nc=[],Tc=0,By=null,Vy=0,Yr=[],Qr=0,yu=null,Fi=1,Li="";function Ol(t,e){Nc[Tc++]=Vy,Nc[Tc++]=By,By=t,Vy=e}function CD(t,e,n){Yr[Qr++]=Fi,Yr[Qr++]=Li,Yr[Qr++]=yu,yu=t;var s=Fi;t=Li;var r=32-Eo(s)-1;s&=~(1<<r),n+=1;var o=32-Eo(e)+r;if(30<o){var i=r-r%5;o=(s&(1<<i)-1).toString(32),s>>=i,r-=i,Fi=1<<32-Eo(e)+r|n<<r|s,Li=o+t}else Fi=1<<o|n<<r|s,Li=t}function wk(t){t.return!==null&&(Ol(t,1),CD(t,1,0))}function Sk(t){for(;t===By;)By=Nc[--Tc],Nc[Tc]=null,Vy=Nc[--Tc],Nc[Tc]=null;for(;t===yu;)yu=Yr[--Qr],Yr[Qr]=null,Li=Yr[--Qr],Yr[Qr]=null,Fi=Yr[--Qr],Yr[Qr]=null}var Ir=null,Nr=null,on=!1,ko=null;function kD(t,e){var n=Zr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ir=t,Nr=Va(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ir=t,Nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yu!==null?{id:Fi,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ir=t,Nr=null,!0):!1;default:return!1}}function uS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cS(t){if(on){var e=Nr;if(e){var n=e;if(!fI(t,e)){if(uS(t))throw Error(Se(418));e=Va(n.nextSibling);var s=Ir;e&&fI(t,e)?kD(s,n):(t.flags=t.flags&-4097|2,on=!1,Ir=t)}}else{if(uS(t))throw Error(Se(418));t.flags=t.flags&-4097|2,on=!1,Ir=t}}}function pI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ir=t}function $0(t){if(t!==Ir)return!1;if(!on)return pI(t),on=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oS(t.type,t.memoizedProps)),e&&(e=Nr)){if(uS(t))throw ND(),Error(Se(418));for(;e;)kD(t,e),e=Va(e.nextSibling)}if(pI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nr=Va(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nr=null}}else Nr=Ir?Va(t.stateNode.nextSibling):null;return!0}function ND(){for(var t=Nr;t;)t=Va(t.nextSibling)}function ud(){Nr=Ir=null,on=!1}function Ck(t){ko===null?ko=[t]:ko.push(t)}var m9=Qi.ReactCurrentBatchConfig;function vo(t,e){if(t&&t.defaultProps){e=mn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Uy=hl(null),Wy=null,$c=null,kk=null;function Nk(){kk=$c=Wy=null}function Tk(t){var e=Uy.current;en(Uy),t._currentValue=e}function dS(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Mc(t,e){Wy=t,kk=$c=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(or=!0),t.firstContext=null)}function ao(t){var e=t._currentValue;if(kk!==t)if(t={context:t,memoizedValue:e,next:null},$c===null){if(Wy===null)throw Error(Se(308));$c=t,Wy.dependencies={lanes:0,firstContext:t}}else $c=$c.next=t;return e}var Gl=null;function $k(t){Gl===null?Gl=[t]:Gl.push(t)}function TD(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,$k(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ui(t,s)}function Ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wa=!1;function Ek(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $D(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Rt&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Ui(t,n)}return r=s.interleaved,r===null?(e.next=e,$k(s)):(e.next=r.next,r.next=e),s.interleaved=e,Ui(t,n)}function uy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,fk(t,n)}}function mI(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jy(t,e,n,s){var r=t.updateQueue;wa=!1;var o=r.firstBaseUpdate,i=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==i&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;i=0,c=u=l=null,a=o;do{var h=a.lane,f=a.eventTime;if((s&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=mn({},d,h);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,i|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do i|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);vu|=i,t.lanes=i,t.memoizedState=d}}function gI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(Se(191,r));r.call(s)}}}var ED=new TA.Component().refs;function hS(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:mn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Q1={isMounted:function(t){return(t=t._reactInternals)?Vu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Vs(),r=ja(t),o=Pi(s,r);o.payload=e,n!=null&&(o.callback=n),e=Ua(t,o,r),e!==null&&(Io(e,t,r,s),uy(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Vs(),r=ja(t),o=Pi(s,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ua(t,o,r),e!==null&&(Io(e,t,r,s),uy(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vs(),s=ja(t),r=Pi(n,s);r.tag=2,e!=null&&(r.callback=e),e=Ua(t,r,s),e!==null&&(Io(e,t,s,n),uy(e,t,s))}};function yI(t,e,n,s,r,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,i):e.prototype&&e.prototype.isPureReactComponent?!gp(n,s)||!gp(r,o):!0}function ID(t,e,n){var s=!1,r=Za,o=e.contextType;return typeof o=="object"&&o!==null?o=ao(o):(r=lr(e)?gu:_s.current,s=e.contextTypes,o=(s=s!=null)?ld(t,r):Za),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Q1,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function bI(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Q1.enqueueReplaceState(e,e.state,null)}function fS(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=ED,Ek(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=ao(o):(o=lr(e)?gu:_s.current,r.context=ld(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(hS(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Q1.enqueueReplaceState(r,r.state,null),jy(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function cf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var s=n.stateNode}if(!s)throw Error(Se(147,t));var r=s,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var a=r.refs;a===ED&&(a=r.refs={}),i===null?delete a[o]:a[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,t))}return t}function E0(t,e){throw t=Object.prototype.toString.call(e),Error(Se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vI(t){var e=t._init;return e(t._payload)}function RD(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function s(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function r(y,b){return y=Ga(y,b),y.index=0,y.sibling=null,y}function o(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,x){return b===null||b.tag!==6?(b=_x(v,y.mode,x),b.return=y,b):(b=r(b,v),b.return=y,b)}function l(y,b,v,x){var w=v.type;return w===vc?c(y,b,v.props.children,x,v.key):b!==null&&(b.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===xa&&vI(w)===b.type)?(x=r(b,v.props),x.ref=cf(y,b,v),x.return=y,x):(x=my(v.type,v.key,v.props,null,y.mode,x),x.ref=cf(y,b,v),x.return=y,x)}function u(y,b,v,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=Ax(v,y.mode,x),b.return=y,b):(b=r(b,v.children||[]),b.return=y,b)}function c(y,b,v,x,w){return b===null||b.tag!==7?(b=uu(v,y.mode,x,w),b.return=y,b):(b=r(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=_x(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case y0:return v=my(b.type,b.key,b.props,null,y.mode,v),v.ref=cf(y,null,b),v.return=y,v;case bc:return b=Ax(b,y.mode,v),b.return=y,b;case xa:var x=b._init;return d(y,x(b._payload),v)}if(Of(b)||rf(b))return b=uu(b,y.mode,v,null),b.return=y,b;E0(y,b)}return null}function h(y,b,v,x){var w=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:a(y,b,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case y0:return v.key===w?l(y,b,v,x):null;case bc:return v.key===w?u(y,b,v,x):null;case xa:return w=v._init,h(y,b,w(v._payload),x)}if(Of(v)||rf(v))return w!==null?null:c(y,b,v,x,null);E0(y,v)}return null}function f(y,b,v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(v)||null,a(b,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case y0:return y=y.get(x.key===null?v:x.key)||null,l(b,y,x,w);case bc:return y=y.get(x.key===null?v:x.key)||null,u(b,y,x,w);case xa:var S=x._init;return f(y,b,v,S(x._payload),w)}if(Of(x)||rf(x))return y=y.get(v)||null,c(b,y,x,w,null);E0(b,x)}return null}function p(y,b,v,x){for(var w=null,S=null,k=b,N=b=0,$=null;k!==null&&N<v.length;N++){k.index>N?($=k,k=null):$=k.sibling;var I=h(y,k,v[N],x);if(I===null){k===null&&(k=$);break}t&&k&&I.alternate===null&&e(y,k),b=o(I,b,N),S===null?w=I:S.sibling=I,S=I,k=$}if(N===v.length)return n(y,k),on&&Ol(y,N),w;if(k===null){for(;N<v.length;N++)k=d(y,v[N],x),k!==null&&(b=o(k,b,N),S===null?w=k:S.sibling=k,S=k);return on&&Ol(y,N),w}for(k=s(y,k);N<v.length;N++)$=f(k,y,N,v[N],x),$!==null&&(t&&$.alternate!==null&&k.delete($.key===null?N:$.key),b=o($,b,N),S===null?w=$:S.sibling=$,S=$);return t&&k.forEach(function(A){return e(y,A)}),on&&Ol(y,N),w}function m(y,b,v,x){var w=rf(v);if(typeof w!="function")throw Error(Se(150));if(v=w.call(v),v==null)throw Error(Se(151));for(var S=w=null,k=b,N=b=0,$=null,I=v.next();k!==null&&!I.done;N++,I=v.next()){k.index>N?($=k,k=null):$=k.sibling;var A=h(y,k,I.value,x);if(A===null){k===null&&(k=$);break}t&&k&&A.alternate===null&&e(y,k),b=o(A,b,N),S===null?w=A:S.sibling=A,S=A,k=$}if(I.done)return n(y,k),on&&Ol(y,N),w;if(k===null){for(;!I.done;N++,I=v.next())I=d(y,I.value,x),I!==null&&(b=o(I,b,N),S===null?w=I:S.sibling=I,S=I);return on&&Ol(y,N),w}for(k=s(y,k);!I.done;N++,I=v.next())I=f(k,y,N,I.value,x),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?N:I.key),b=o(I,b,N),S===null?w=I:S.sibling=I,S=I);return t&&k.forEach(function(O){return e(y,O)}),on&&Ol(y,N),w}function g(y,b,v,x){if(typeof v=="object"&&v!==null&&v.type===vc&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case y0:e:{for(var w=v.key,S=b;S!==null;){if(S.key===w){if(w=v.type,w===vc){if(S.tag===7){n(y,S.sibling),b=r(S,v.props.children),b.return=y,y=b;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===xa&&vI(w)===S.type){n(y,S.sibling),b=r(S,v.props),b.ref=cf(y,S,v),b.return=y,y=b;break e}n(y,S);break}else e(y,S);S=S.sibling}v.type===vc?(b=uu(v.props.children,y.mode,x,v.key),b.return=y,y=b):(x=my(v.type,v.key,v.props,null,y.mode,x),x.ref=cf(y,b,v),x.return=y,y=x)}return i(y);case bc:e:{for(S=v.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=r(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=Ax(v,y.mode,x),b.return=y,y=b}return i(y);case xa:return S=v._init,g(y,b,S(v._payload),x)}if(Of(v))return p(y,b,v,x);if(rf(v))return m(y,b,v,x);E0(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=r(b,v),b.return=y,y=b):(n(y,b),b=_x(v,y.mode,x),b.return=y,y=b),i(y)):n(y,b)}return g}var cd=RD(!0),_D=RD(!1),fm={},si=hl(fm),xp=hl(fm),wp=hl(fm);function Hl(t){if(t===fm)throw Error(Se(174));return t}function Ik(t,e){switch(qt(wp,e),qt(xp,t),qt(si,fm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gw(e,t)}en(si),qt(si,e)}function dd(){en(si),en(xp),en(wp)}function AD(t){Hl(wp.current);var e=Hl(si.current),n=Gw(e,t.type);e!==n&&(qt(xp,t),qt(si,n))}function Rk(t){xp.current===t&&(en(si),en(xp))}var hn=hl(0);function Gy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nx=[];function _k(){for(var t=0;t<Nx.length;t++)Nx[t]._workInProgressVersionPrimary=null;Nx.length=0}var cy=Qi.ReactCurrentDispatcher,Tx=Qi.ReactCurrentBatchConfig,bu=0,pn=null,Wn=null,ns=null,Hy=!1,Yf=!1,Sp=0,g9=0;function ks(){throw Error(Se(321))}function Ak(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Do(t[n],e[n]))return!1;return!0}function Dk(t,e,n,s,r,o){if(bu=o,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cy.current=t===null||t.memoizedState===null?x9:w9,t=n(s,r),Yf){o=0;do{if(Yf=!1,Sp=0,25<=o)throw Error(Se(301));o+=1,ns=Wn=null,e.updateQueue=null,cy.current=S9,t=n(s,r)}while(Yf)}if(cy.current=qy,e=Wn!==null&&Wn.next!==null,bu=0,ns=Wn=pn=null,Hy=!1,e)throw Error(Se(300));return t}function Ok(){var t=Sp!==0;return Sp=0,t}function Wo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?pn.memoizedState=ns=t:ns=ns.next=t,ns}function lo(){if(Wn===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=Wn.next;var e=ns===null?pn.memoizedState:ns.next;if(e!==null)ns=e,Wn=t;else{if(t===null)throw Error(Se(310));Wn=t,t={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},ns===null?pn.memoizedState=ns=t:ns=ns.next=t}return ns}function Cp(t,e){return typeof e=="function"?e(t):e}function $x(t){var e=lo(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var s=Wn,r=s.baseQueue,o=n.pending;if(o!==null){if(r!==null){var i=r.next;r.next=o.next,o.next=i}s.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,s=s.baseState;var a=i=null,l=null,u=o;do{var c=u.lane;if((bu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,i=s):l=l.next=d,pn.lanes|=c,vu|=c}u=u.next}while(u!==null&&u!==o);l===null?i=s:l.next=a,Do(s,e.memoizedState)||(or=!0),e.memoizedState=s,e.baseState=i,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do o=r.lane,pn.lanes|=o,vu|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ex(t){var e=lo(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do o=t(o,i.action),i=i.next;while(i!==r);Do(o,e.memoizedState)||(or=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,s]}function DD(){}function OD(t,e){var n=pn,s=lo(),r=e(),o=!Do(s.memoizedState,r);if(o&&(s.memoizedState=r,or=!0),s=s.queue,Fk(PD.bind(null,n,s,t),[t]),s.getSnapshot!==e||o||ns!==null&&ns.memoizedState.tag&1){if(n.flags|=2048,kp(9,LD.bind(null,n,s,r,e),void 0,null),as===null)throw Error(Se(349));bu&30||FD(n,e,r)}return r}function FD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LD(t,e,n,s){e.value=n,e.getSnapshot=s,MD(e)&&zD(t)}function PD(t,e,n){return n(function(){MD(e)&&zD(t)})}function MD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Do(t,n)}catch{return!0}}function zD(t){var e=Ui(t,1);e!==null&&Io(e,t,1,-1)}function xI(t){var e=Wo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cp,lastRenderedState:t},e.queue=t,t=t.dispatch=v9.bind(null,pn,t),[e.memoizedState,t]}function kp(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function BD(){return lo().memoizedState}function dy(t,e,n,s){var r=Wo();pn.flags|=t,r.memoizedState=kp(1|e,n,void 0,s===void 0?null:s)}function Z1(t,e,n,s){var r=lo();s=s===void 0?null:s;var o=void 0;if(Wn!==null){var i=Wn.memoizedState;if(o=i.destroy,s!==null&&Ak(s,i.deps)){r.memoizedState=kp(e,n,o,s);return}}pn.flags|=t,r.memoizedState=kp(1|e,n,o,s)}function wI(t,e){return dy(8390656,8,t,e)}function Fk(t,e){return Z1(2048,8,t,e)}function VD(t,e){return Z1(4,2,t,e)}function UD(t,e){return Z1(4,4,t,e)}function WD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jD(t,e,n){return n=n!=null?n.concat([t]):null,Z1(4,4,WD.bind(null,e,t),n)}function Lk(){}function GD(t,e){var n=lo();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Ak(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function HD(t,e){var n=lo();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Ak(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function qD(t,e,n){return bu&21?(Do(n,e)||(n=YA(),pn.lanes|=n,vu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,or=!0),t.memoizedState=n)}function y9(t,e){var n=Pt;Pt=n!==0&&4>n?n:4,t(!0);var s=Tx.transition;Tx.transition={};try{t(!1),e()}finally{Pt=n,Tx.transition=s}}function KD(){return lo().memoizedState}function b9(t,e,n){var s=ja(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},XD(t))YD(e,n);else if(n=TD(t,e,n,s),n!==null){var r=Vs();Io(n,t,s,r),QD(n,e,s)}}function v9(t,e,n){var s=ja(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(XD(t))YD(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,a=o(i,n);if(r.hasEagerState=!0,r.eagerState=a,Do(a,i)){var l=e.interleaved;l===null?(r.next=r,$k(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=TD(t,e,r,s),n!==null&&(r=Vs(),Io(n,t,s,r),QD(n,e,s))}}function XD(t){var e=t.alternate;return t===pn||e!==null&&e===pn}function YD(t,e){Yf=Hy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QD(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,fk(t,n)}}var qy={readContext:ao,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},x9={readContext:ao,useCallback:function(t,e){return Wo().memoizedState=[t,e===void 0?null:e],t},useContext:ao,useEffect:wI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dy(4194308,4,WD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dy(4194308,4,t,e)},useInsertionEffect:function(t,e){return dy(4,2,t,e)},useMemo:function(t,e){var n=Wo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Wo();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=b9.bind(null,pn,t),[s.memoizedState,t]},useRef:function(t){var e=Wo();return t={current:t},e.memoizedState=t},useState:xI,useDebugValue:Lk,useDeferredValue:function(t){return Wo().memoizedState=t},useTransition:function(){var t=xI(!1),e=t[0];return t=y9.bind(null,t[1]),Wo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=pn,r=Wo();if(on){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=e(),as===null)throw Error(Se(349));bu&30||FD(s,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,wI(PD.bind(null,s,o,t),[t]),s.flags|=2048,kp(9,LD.bind(null,s,o,n,e),void 0,null),n},useId:function(){var t=Wo(),e=as.identifierPrefix;if(on){var n=Li,s=Fi;n=(s&~(1<<32-Eo(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=g9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w9={readContext:ao,useCallback:GD,useContext:ao,useEffect:Fk,useImperativeHandle:jD,useInsertionEffect:VD,useLayoutEffect:UD,useMemo:HD,useReducer:$x,useRef:BD,useState:function(){return $x(Cp)},useDebugValue:Lk,useDeferredValue:function(t){var e=lo();return qD(e,Wn.memoizedState,t)},useTransition:function(){var t=$x(Cp)[0],e=lo().memoizedState;return[t,e]},useMutableSource:DD,useSyncExternalStore:OD,useId:KD,unstable_isNewReconciler:!1},S9={readContext:ao,useCallback:GD,useContext:ao,useEffect:Fk,useImperativeHandle:jD,useInsertionEffect:VD,useLayoutEffect:UD,useMemo:HD,useReducer:Ex,useRef:BD,useState:function(){return Ex(Cp)},useDebugValue:Lk,useDeferredValue:function(t){var e=lo();return Wn===null?e.memoizedState=t:qD(e,Wn.memoizedState,t)},useTransition:function(){var t=Ex(Cp)[0],e=lo().memoizedState;return[t,e]},useMutableSource:DD,useSyncExternalStore:OD,useId:KD,unstable_isNewReconciler:!1};function hd(t,e){try{var n="",s=e;do n+=YV(s),s=s.return;while(s);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Ix(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var C9=typeof WeakMap=="function"?WeakMap:Map;function ZD(t,e,n){n=Pi(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Xy||(Xy=!0,kS=s),pS(t,e)},n}function JD(t,e,n){n=Pi(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){pS(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){pS(t,e),typeof s!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function SI(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new C9;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=P9.bind(null,t,e,n),e.then(t,t))}function CI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kI(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pi(-1,1),e.tag=2,Ua(n,e,1))),n.lanes|=1),t)}var k9=Qi.ReactCurrentOwner,or=!1;function Ps(t,e,n,s){e.child=t===null?_D(e,null,n,s):cd(e,t.child,n,s)}function NI(t,e,n,s,r){n=n.render;var o=e.ref;return Mc(e,r),s=Dk(t,e,n,s,o,r),n=Ok(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wi(t,e,r)):(on&&n&&wk(e),e.flags|=1,Ps(t,e,s,r),e.child)}function TI(t,e,n,s,r){if(t===null){var o=n.type;return typeof o=="function"&&!jk(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,eO(t,e,o,s,r)):(t=my(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:gp,n(i,s)&&t.ref===e.ref)return Wi(t,e,r)}return e.flags|=1,t=Ga(o,s),t.ref=e.ref,t.return=e,e.child=t}function eO(t,e,n,s,r){if(t!==null){var o=t.memoizedProps;if(gp(o,s)&&t.ref===e.ref)if(or=!1,e.pendingProps=s=o,(t.lanes&r)!==0)t.flags&131072&&(or=!0);else return e.lanes=t.lanes,Wi(t,e,r)}return mS(t,e,n,s,r)}function tO(t,e,n){var s=e.pendingProps,r=s.children,o=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qt(Ic,wr),wr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qt(Ic,wr),wr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,qt(Ic,wr),wr|=s}else o!==null?(s=o.baseLanes|n,e.memoizedState=null):s=n,qt(Ic,wr),wr|=s;return Ps(t,e,r,n),e.child}function nO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mS(t,e,n,s,r){var o=lr(n)?gu:_s.current;return o=ld(e,o),Mc(e,r),n=Dk(t,e,n,s,o,r),s=Ok(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Wi(t,e,r)):(on&&s&&wk(e),e.flags|=1,Ps(t,e,n,r),e.child)}function $I(t,e,n,s,r){if(lr(n)){var o=!0;zy(e)}else o=!1;if(Mc(e,r),e.stateNode===null)hy(t,e),ID(e,n,s),fS(e,n,s,r),s=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=ao(u):(u=lr(n)?gu:_s.current,u=ld(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==s||l!==u)&&bI(e,i,s,u),wa=!1;var h=e.memoizedState;i.state=h,jy(e,s,i,r),l=e.memoizedState,a!==s||h!==l||ar.current||wa?(typeof c=="function"&&(hS(e,n,c,s),l=e.memoizedState),(a=wa||yI(e,n,a,s,h,l,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),i.props=s,i.state=l,i.context=u,s=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,$D(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:vo(e.type,a),i.props=u,d=e.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=ao(l):(l=lr(n)?gu:_s.current,l=ld(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||h!==l)&&bI(e,i,s,l),wa=!1,h=e.memoizedState,i.state=h,jy(e,s,i,r);var p=e.memoizedState;a!==d||h!==p||ar.current||wa?(typeof f=="function"&&(hS(e,n,f,s),p=e.memoizedState),(u=wa||yI(e,n,u,s,h,p,l)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,p,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,p,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),i.props=s,i.state=p,i.context=l,s=u):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return gS(t,e,n,s,o,r)}function gS(t,e,n,s,r,o){nO(t,e);var i=(e.flags&128)!==0;if(!s&&!i)return r&&hI(e,n,!1),Wi(t,e,o);s=e.stateNode,k9.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&i?(e.child=cd(e,t.child,null,o),e.child=cd(e,null,a,o)):Ps(t,e,a,o),e.memoizedState=s.state,r&&hI(e,n,!0),e.child}function sO(t){var e=t.stateNode;e.pendingContext?dI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dI(t,e.context,!1),Ik(t,e.containerInfo)}function EI(t,e,n,s,r){return ud(),Ck(r),e.flags|=256,Ps(t,e,n,s),e.child}var yS={dehydrated:null,treeContext:null,retryLane:0};function bS(t){return{baseLanes:t,cachePool:null,transitions:null}}function rO(t,e,n){var s=e.pendingProps,r=hn.current,o=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),qt(hn,r&1),t===null)return cS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=s.children,t=s.fallback,o?(s=e.mode,o=e.child,i={mode:"hidden",children:i},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=t2(i,s,0,null),t=uu(t,s,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=bS(n),e.memoizedState=yS,t):Pk(e,i));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return N9(t,e,i,s,a,r,n);if(o){o=s.fallback,i=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(i&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Ga(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=Ga(a,o):(o=uu(o,i,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,i=t.child.memoizedState,i=i===null?bS(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~n,e.memoizedState=yS,s}return o=t.child,t=o.sibling,s=Ga(o,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Pk(t,e){return e=t2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function I0(t,e,n,s){return s!==null&&Ck(s),cd(e,t.child,null,n),t=Pk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N9(t,e,n,s,r,o,i){if(n)return e.flags&256?(e.flags&=-257,s=Ix(Error(Se(422))),I0(t,e,i,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=s.fallback,r=e.mode,s=t2({mode:"visible",children:s.children},r,0,null),o=uu(o,r,i,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,e.mode&1&&cd(e,t.child,null,i),e.child.memoizedState=bS(i),e.memoizedState=yS,o);if(!(e.mode&1))return I0(t,e,i,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,o=Error(Se(419)),s=Ix(o,s,void 0),I0(t,e,i,s)}if(a=(i&t.childLanes)!==0,or||a){if(s=as,s!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|i)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Ui(t,r),Io(s,t,r,-1))}return Wk(),s=Ix(Error(Se(421))),I0(t,e,i,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=M9.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Nr=Va(r.nextSibling),Ir=e,on=!0,ko=null,t!==null&&(Yr[Qr++]=Fi,Yr[Qr++]=Li,Yr[Qr++]=yu,Fi=t.id,Li=t.overflow,yu=e),e=Pk(e,s.children),e.flags|=4096,e)}function II(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),dS(t.return,e,n)}function Rx(t,e,n,s,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=r)}function oO(t,e,n){var s=e.pendingProps,r=s.revealOrder,o=s.tail;if(Ps(t,e,s.children,n),s=hn.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&II(t,n,e);else if(t.tag===19)II(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(qt(hn,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Gy(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Rx(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Gy(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Rx(e,!0,n,null,o);break;case"together":Rx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Se(153));if(e.child!==null){for(t=e.child,n=Ga(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ga(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T9(t,e,n){switch(e.tag){case 3:sO(e),ud();break;case 5:AD(e);break;case 1:lr(e.type)&&zy(e);break;case 4:Ik(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;qt(Uy,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(qt(hn,hn.current&1),e.flags|=128,null):n&e.child.childLanes?rO(t,e,n):(qt(hn,hn.current&1),t=Wi(t,e,n),t!==null?t.sibling:null);qt(hn,hn.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return oO(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),qt(hn,hn.current),s)break;return null;case 22:case 23:return e.lanes=0,tO(t,e,n)}return Wi(t,e,n)}var iO,vS,aO,lO;iO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vS=function(){};aO=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Hl(si.current);var o=null;switch(n){case"input":r=Vw(t,r),s=Vw(t,s),o=[];break;case"select":r=mn({},r,{value:void 0}),s=mn({},s,{value:void 0}),o=[];break;case"textarea":r=jw(t,r),s=jw(t,s),o=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Py)}Hw(n,s);var i;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(up.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in s){var l=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(up.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Qt("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};lO=function(t,e,n,s){n!==s&&(e.flags|=4)};function df(t,e){if(!on)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ns(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function $9(t,e,n){var s=e.pendingProps;switch(Sk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(e),null;case 1:return lr(e.type)&&My(),Ns(e),null;case 3:return s=e.stateNode,dd(),en(ar),en(_s),_k(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&($0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ko!==null&&($S(ko),ko=null))),vS(t,e),Ns(e),null;case 5:Rk(e);var r=Hl(wp.current);if(n=e.type,t!==null&&e.stateNode!=null)aO(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Se(166));return Ns(e),null}if(t=Hl(si.current),$0(e)){s=e.stateNode,n=e.type;var o=e.memoizedProps;switch(s[Qo]=e,s[vp]=o,t=(e.mode&1)!==0,n){case"dialog":Qt("cancel",s),Qt("close",s);break;case"iframe":case"object":case"embed":Qt("load",s);break;case"video":case"audio":for(r=0;r<Lf.length;r++)Qt(Lf[r],s);break;case"source":Qt("error",s);break;case"img":case"image":case"link":Qt("error",s),Qt("load",s);break;case"details":Qt("toggle",s);break;case"input":ME(s,o),Qt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Qt("invalid",s);break;case"textarea":BE(s,o),Qt("invalid",s)}Hw(n,o),r=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?s.textContent!==a&&(o.suppressHydrationWarning!==!0&&T0(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&T0(s.textContent,a,t),r=["children",""+a]):up.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Qt("scroll",s)}switch(n){case"input":b0(s),zE(s,o,!0);break;case"textarea":b0(s),VE(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Py)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=i.createElement(n,{is:s.is}):(t=i.createElement(n),n==="select"&&(i=t,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):t=i.createElementNS(t,n),t[Qo]=e,t[vp]=s,iO(t,e,!1,!1),e.stateNode=t;e:{switch(i=qw(n,s),n){case"dialog":Qt("cancel",t),Qt("close",t),r=s;break;case"iframe":case"object":case"embed":Qt("load",t),r=s;break;case"video":case"audio":for(r=0;r<Lf.length;r++)Qt(Lf[r],t);r=s;break;case"source":Qt("error",t),r=s;break;case"img":case"image":case"link":Qt("error",t),Qt("load",t),r=s;break;case"details":Qt("toggle",t),r=s;break;case"input":ME(t,s),r=Vw(t,s),Qt("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=mn({},s,{value:void 0}),Qt("invalid",t);break;case"textarea":BE(t,s),r=jw(t,s),Qt("invalid",t);break;default:r=s}Hw(n,r),a=r;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?MA(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&LA(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cp(t,l):typeof l=="number"&&cp(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(up.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Qt("scroll",t):l!=null&&ak(t,o,l,i))}switch(n){case"input":b0(t),zE(t,s,!1);break;case"textarea":b0(t),VE(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Qa(s.value));break;case"select":t.multiple=!!s.multiple,o=s.value,o!=null?Oc(t,!!s.multiple,o,!1):s.defaultValue!=null&&Oc(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Py)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ns(e),null;case 6:if(t&&e.stateNode!=null)lO(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Se(166));if(n=Hl(wp.current),Hl(si.current),$0(e)){if(s=e.stateNode,n=e.memoizedProps,s[Qo]=e,(o=s.nodeValue!==n)&&(t=Ir,t!==null))switch(t.tag){case 3:T0(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&T0(s.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Qo]=e,e.stateNode=s}return Ns(e),null;case 13:if(en(hn),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(on&&Nr!==null&&e.mode&1&&!(e.flags&128))ND(),ud(),e.flags|=98560,o=!1;else if(o=$0(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(Se(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Se(317));o[Qo]=e}else ud(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ns(e),o=!1}else ko!==null&&($S(ko),ko=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||hn.current&1?Hn===0&&(Hn=3):Wk())),e.updateQueue!==null&&(e.flags|=4),Ns(e),null);case 4:return dd(),vS(t,e),t===null&&yp(e.stateNode.containerInfo),Ns(e),null;case 10:return Tk(e.type._context),Ns(e),null;case 17:return lr(e.type)&&My(),Ns(e),null;case 19:if(en(hn),o=e.memoizedState,o===null)return Ns(e),null;if(s=(e.flags&128)!==0,i=o.rendering,i===null)if(s)df(o,!1);else{if(Hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Gy(t),i!==null){for(e.flags|=128,df(o,!1),s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)o=n,t=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qt(hn,hn.current&1|2),e.child}t=t.sibling}o.tail!==null&&Rn()>fd&&(e.flags|=128,s=!0,df(o,!1),e.lanes=4194304)}else{if(!s)if(t=Gy(i),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),df(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!on)return Ns(e),null}else 2*Rn()-o.renderingStartTime>fd&&n!==1073741824&&(e.flags|=128,s=!0,df(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(n=o.last,n!==null?n.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Rn(),e.sibling=null,n=hn.current,qt(hn,s?n&1|2:n&1),e):(Ns(e),null);case 22:case 23:return Uk(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?wr&1073741824&&(Ns(e),e.subtreeFlags&6&&(e.flags|=8192)):Ns(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function E9(t,e){switch(Sk(e),e.tag){case 1:return lr(e.type)&&My(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dd(),en(ar),en(_s),_k(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rk(e),null;case 13:if(en(hn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));ud()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return en(hn),null;case 4:return dd(),null;case 10:return Tk(e.type._context),null;case 22:case 23:return Uk(),null;case 24:return null;default:return null}}var R0=!1,$s=!1,I9=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Ec(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){bn(t,e,s)}else n.current=null}function xS(t,e,n){try{n()}catch(s){bn(t,e,s)}}var RI=!1;function R9(t,e){if(sS=Oy,t=hD(),xk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=i+r),d!==o||s!==0&&d.nodeType!==3||(l=i+s),d.nodeType===3&&(i+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=i),h===o&&++c===s&&(l=i),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rS={focusedElem:t,selectionRange:n},Oy=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){e=Me;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:vo(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(x){bn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}return p=RI,RI=!1,p}function Qf(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&xS(e,n,o)}r=r.next}while(r!==s)}}function J1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function wS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uO(t){var e=t.alternate;e!==null&&(t.alternate=null,uO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qo],delete e[vp],delete e[aS],delete e[h9],delete e[f9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cO(t){return t.tag===5||t.tag===3||t.tag===4}function _I(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function SS(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Py));else if(s!==4&&(t=t.child,t!==null))for(SS(t,e,n),t=t.sibling;t!==null;)SS(t,e,n),t=t.sibling}function CS(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(CS(t,e,n),t=t.sibling;t!==null;)CS(t,e,n),t=t.sibling}var ys=null,So=!1;function ha(t,e,n){for(n=n.child;n!==null;)dO(t,e,n),n=n.sibling}function dO(t,e,n){if(ni&&typeof ni.onCommitFiberUnmount=="function")try{ni.onCommitFiberUnmount(G1,n)}catch{}switch(n.tag){case 5:$s||Ec(n,e);case 6:var s=ys,r=So;ys=null,ha(t,e,n),ys=s,So=r,ys!==null&&(So?(t=ys,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ys.removeChild(n.stateNode));break;case 18:ys!==null&&(So?(t=ys,n=n.stateNode,t.nodeType===8?Cx(t.parentNode,n):t.nodeType===1&&Cx(t,n),pp(t)):Cx(ys,n.stateNode));break;case 4:s=ys,r=So,ys=n.stateNode.containerInfo,So=!0,ha(t,e,n),ys=s,So=r;break;case 0:case 11:case 14:case 15:if(!$s&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var o=r,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&xS(n,e,i),r=r.next}while(r!==s)}ha(t,e,n);break;case 1:if(!$s&&(Ec(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){bn(n,e,a)}ha(t,e,n);break;case 21:ha(t,e,n);break;case 22:n.mode&1?($s=(s=$s)||n.memoizedState!==null,ha(t,e,n),$s=s):ha(t,e,n);break;default:ha(t,e,n)}}function AI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new I9),e.forEach(function(s){var r=z9.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function mo(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var o=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:ys=a.stateNode,So=!1;break e;case 3:ys=a.stateNode.containerInfo,So=!0;break e;case 4:ys=a.stateNode.containerInfo,So=!0;break e}a=a.return}if(ys===null)throw Error(Se(160));dO(o,i,r),ys=null,So=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){bn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hO(e,t),e=e.sibling}function hO(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mo(e,t),Uo(t),s&4){try{Qf(3,t,t.return),J1(3,t)}catch(m){bn(t,t.return,m)}try{Qf(5,t,t.return)}catch(m){bn(t,t.return,m)}}break;case 1:mo(e,t),Uo(t),s&512&&n!==null&&Ec(n,n.return);break;case 5:if(mo(e,t),Uo(t),s&512&&n!==null&&Ec(n,n.return),t.flags&32){var r=t.stateNode;try{cp(r,"")}catch(m){bn(t,t.return,m)}}if(s&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,i=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&DA(r,o),qw(a,i);var u=qw(a,o);for(i=0;i<l.length;i+=2){var c=l[i],d=l[i+1];c==="style"?MA(r,d):c==="dangerouslySetInnerHTML"?LA(r,d):c==="children"?cp(r,d):ak(r,c,d,u)}switch(a){case"input":Uw(r,o);break;case"textarea":OA(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Oc(r,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Oc(r,!!o.multiple,o.defaultValue,!0):Oc(r,!!o.multiple,o.multiple?[]:"",!1))}r[vp]=o}catch(m){bn(t,t.return,m)}}break;case 6:if(mo(e,t),Uo(t),s&4){if(t.stateNode===null)throw Error(Se(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(m){bn(t,t.return,m)}}break;case 3:if(mo(e,t),Uo(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{pp(e.containerInfo)}catch(m){bn(t,t.return,m)}break;case 4:mo(e,t),Uo(t);break;case 13:mo(e,t),Uo(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Bk=Rn())),s&4&&AI(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?($s=(u=$s)||c,mo(e,t),$s=u):mo(e,t),Uo(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Me=t,c=t.child;c!==null;){for(d=Me=c;Me!==null;){switch(h=Me,f=h.child,h.tag){case 0:case 11:case 14:case 15:Qf(4,h,h.return);break;case 1:Ec(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){s=h,n=h.return;try{e=s,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){bn(s,n,m)}}break;case 5:Ec(h,h.return);break;case 22:if(h.memoizedState!==null){OI(d);continue}}f!==null?(f.return=h,Me=f):OI(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PA("display",i))}catch(m){bn(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){bn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mo(e,t),Uo(t),s&4&&AI(t);break;case 21:break;default:mo(e,t),Uo(t)}}function Uo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cO(n)){var s=n;break e}n=n.return}throw Error(Se(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(cp(r,""),s.flags&=-33);var o=_I(t);CS(t,o,r);break;case 3:case 4:var i=s.stateNode.containerInfo,a=_I(t);SS(t,a,i);break;default:throw Error(Se(161))}}catch(l){bn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _9(t,e,n){Me=t,fO(t)}function fO(t,e,n){for(var s=(t.mode&1)!==0;Me!==null;){var r=Me,o=r.child;if(r.tag===22&&s){var i=r.memoizedState!==null||R0;if(!i){var a=r.alternate,l=a!==null&&a.memoizedState!==null||$s;a=R0;var u=$s;if(R0=i,($s=l)&&!u)for(Me=r;Me!==null;)i=Me,l=i.child,i.tag===22&&i.memoizedState!==null?FI(r):l!==null?(l.return=i,Me=l):FI(r);for(;o!==null;)Me=o,fO(o),o=o.sibling;Me=r,R0=a,$s=u}DI(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,Me=o):DI(t)}}function DI(t){for(;Me!==null;){var e=Me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$s||J1(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!$s)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:vo(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gI(e,o,s);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gI(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&pp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}$s||e.flags&512&&wS(e)}catch(h){bn(e,e.return,h)}}if(e===t){Me=null;break}if(n=e.sibling,n!==null){n.return=e.return,Me=n;break}Me=e.return}}function OI(t){for(;Me!==null;){var e=Me;if(e===t){Me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Me=n;break}Me=e.return}}function FI(t){for(;Me!==null;){var e=Me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{J1(4,e)}catch(l){bn(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){bn(e,r,l)}}var o=e.return;try{wS(e)}catch(l){bn(e,o,l)}break;case 5:var i=e.return;try{wS(e)}catch(l){bn(e,i,l)}}}catch(l){bn(e,e.return,l)}if(e===t){Me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Me=a;break}Me=e.return}}var A9=Math.ceil,Ky=Qi.ReactCurrentDispatcher,Mk=Qi.ReactCurrentOwner,ro=Qi.ReactCurrentBatchConfig,Rt=0,as=null,On=null,xs=0,wr=0,Ic=hl(0),Hn=0,Np=null,vu=0,e2=0,zk=0,Zf=null,sr=null,Bk=0,fd=1/0,$i=null,Xy=!1,kS=null,Wa=null,_0=!1,Da=null,Yy=0,Jf=0,NS=null,fy=-1,py=0;function Vs(){return Rt&6?Rn():fy!==-1?fy:fy=Rn()}function ja(t){return t.mode&1?Rt&2&&xs!==0?xs&-xs:m9.transition!==null?(py===0&&(py=YA()),py):(t=Pt,t!==0||(t=window.event,t=t===void 0?16:sD(t.type)),t):1}function Io(t,e,n,s){if(50<Jf)throw Jf=0,NS=null,Error(Se(185));cm(t,n,s),(!(Rt&2)||t!==as)&&(t===as&&(!(Rt&2)&&(e2|=n),Hn===4&&Na(t,xs)),ur(t,s),n===1&&Rt===0&&!(e.mode&1)&&(fd=Rn()+500,Y1&&fl()))}function ur(t,e){var n=t.callbackNode;m8(t,e);var s=Dy(t,t===as?xs:0);if(s===0)n!==null&&jE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&jE(n),e===1)t.tag===0?p9(LI.bind(null,t)):SD(LI.bind(null,t)),c9(function(){!(Rt&6)&&fl()}),n=null;else{switch(QA(s)){case 1:n=hk;break;case 4:n=KA;break;case 16:n=Ay;break;case 536870912:n=XA;break;default:n=Ay}n=wO(n,pO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pO(t,e){if(fy=-1,py=0,Rt&6)throw Error(Se(327));var n=t.callbackNode;if(zc()&&t.callbackNode!==n)return null;var s=Dy(t,t===as?xs:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Qy(t,s);else{e=s;var r=Rt;Rt|=2;var o=gO();(as!==t||xs!==e)&&($i=null,fd=Rn()+500,lu(t,e));do try{F9();break}catch(a){mO(t,a)}while(!0);Nk(),Ky.current=o,Rt=r,On!==null?e=0:(as=null,xs=0,e=Hn)}if(e!==0){if(e===2&&(r=Zw(t),r!==0&&(s=r,e=TS(t,r))),e===1)throw n=Np,lu(t,0),Na(t,s),ur(t,Rn()),n;if(e===6)Na(t,s);else{if(r=t.current.alternate,!(s&30)&&!D9(r)&&(e=Qy(t,s),e===2&&(o=Zw(t),o!==0&&(s=o,e=TS(t,o))),e===1))throw n=Np,lu(t,0),Na(t,s),ur(t,Rn()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(Se(345));case 2:Fl(t,sr,$i);break;case 3:if(Na(t,s),(s&130023424)===s&&(e=Bk+500-Rn(),10<e)){if(Dy(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Vs(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=iS(Fl.bind(null,t,sr,$i),e);break}Fl(t,sr,$i);break;case 4:if(Na(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var i=31-Eo(s);o=1<<i,i=e[i],i>r&&(r=i),s&=~o}if(s=r,s=Rn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*A9(s/1960))-s,10<s){t.timeoutHandle=iS(Fl.bind(null,t,sr,$i),s);break}Fl(t,sr,$i);break;case 5:Fl(t,sr,$i);break;default:throw Error(Se(329))}}}return ur(t,Rn()),t.callbackNode===n?pO.bind(null,t):null}function TS(t,e){var n=Zf;return t.current.memoizedState.isDehydrated&&(lu(t,e).flags|=256),t=Qy(t,e),t!==2&&(e=sr,sr=n,e!==null&&$S(e)),t}function $S(t){sr===null?sr=t:sr.push.apply(sr,t)}function D9(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],o=r.getSnapshot;r=r.value;try{if(!Do(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Na(t,e){for(e&=~zk,e&=~e2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Eo(e),s=1<<n;t[n]=-1,e&=~s}}function LI(t){if(Rt&6)throw Error(Se(327));zc();var e=Dy(t,0);if(!(e&1))return ur(t,Rn()),null;var n=Qy(t,e);if(t.tag!==0&&n===2){var s=Zw(t);s!==0&&(e=s,n=TS(t,s))}if(n===1)throw n=Np,lu(t,0),Na(t,e),ur(t,Rn()),n;if(n===6)throw Error(Se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fl(t,sr,$i),ur(t,Rn()),null}function Vk(t,e){var n=Rt;Rt|=1;try{return t(e)}finally{Rt=n,Rt===0&&(fd=Rn()+500,Y1&&fl())}}function xu(t){Da!==null&&Da.tag===0&&!(Rt&6)&&zc();var e=Rt;Rt|=1;var n=ro.transition,s=Pt;try{if(ro.transition=null,Pt=1,t)return t()}finally{Pt=s,ro.transition=n,Rt=e,!(Rt&6)&&fl()}}function Uk(){wr=Ic.current,en(Ic)}function lu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,u9(n)),On!==null)for(n=On.return;n!==null;){var s=n;switch(Sk(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&My();break;case 3:dd(),en(ar),en(_s),_k();break;case 5:Rk(s);break;case 4:dd();break;case 13:en(hn);break;case 19:en(hn);break;case 10:Tk(s.type._context);break;case 22:case 23:Uk()}n=n.return}if(as=t,On=t=Ga(t.current,null),xs=wr=e,Hn=0,Np=null,zk=e2=vu=0,sr=Zf=null,Gl!==null){for(e=0;e<Gl.length;e++)if(n=Gl[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,o=n.pending;if(o!==null){var i=o.next;o.next=r,s.next=i}n.pending=s}Gl=null}return t}function mO(t,e){do{var n=On;try{if(Nk(),cy.current=qy,Hy){for(var s=pn.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Hy=!1}if(bu=0,ns=Wn=pn=null,Yf=!1,Sp=0,Mk.current=null,n===null||n.return===null){Hn=1,Np=e,On=null;break}e:{var o=t,i=n.return,a=n,l=e;if(e=xs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=CI(i);if(f!==null){f.flags&=-257,kI(f,i,a,o,e),f.mode&1&&SI(o,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){SI(o,u,e),Wk();break e}l=Error(Se(426))}}else if(on&&a.mode&1){var g=CI(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),kI(g,i,a,o,e),Ck(hd(l,a));break e}}o=l=hd(l,a),Hn!==4&&(Hn=2),Zf===null?Zf=[o]:Zf.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=ZD(o,l,e);mI(o,y);break e;case 1:a=l;var b=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Wa===null||!Wa.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var x=JD(o,a,e);mI(o,x);break e}}o=o.return}while(o!==null)}bO(n)}catch(w){e=w,On===n&&n!==null&&(On=n=n.return);continue}break}while(!0)}function gO(){var t=Ky.current;return Ky.current=qy,t===null?qy:t}function Wk(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),as===null||!(vu&268435455)&&!(e2&268435455)||Na(as,xs)}function Qy(t,e){var n=Rt;Rt|=2;var s=gO();(as!==t||xs!==e)&&($i=null,lu(t,e));do try{O9();break}catch(r){mO(t,r)}while(!0);if(Nk(),Rt=n,Ky.current=s,On!==null)throw Error(Se(261));return as=null,xs=0,Hn}function O9(){for(;On!==null;)yO(On)}function F9(){for(;On!==null&&!i8();)yO(On)}function yO(t){var e=xO(t.alternate,t,wr);t.memoizedProps=t.pendingProps,e===null?bO(t):On=e,Mk.current=null}function bO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=E9(n,e),n!==null){n.flags&=32767,On=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hn=6,On=null;return}}else if(n=$9(n,e,wr),n!==null){On=n;return}if(e=e.sibling,e!==null){On=e;return}On=e=t}while(e!==null);Hn===0&&(Hn=5)}function Fl(t,e,n){var s=Pt,r=ro.transition;try{ro.transition=null,Pt=1,L9(t,e,n,s)}finally{ro.transition=r,Pt=s}return null}function L9(t,e,n,s){do zc();while(Da!==null);if(Rt&6)throw Error(Se(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Se(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(g8(t,o),t===as&&(On=as=null,xs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_0||(_0=!0,wO(Ay,function(){return zc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ro.transition,ro.transition=null;var i=Pt;Pt=1;var a=Rt;Rt|=4,Mk.current=null,R9(t,n),hO(n,t),n9(rS),Oy=!!sS,rS=sS=null,t.current=n,_9(n),a8(),Rt=a,Pt=i,ro.transition=o}else t.current=n;if(_0&&(_0=!1,Da=t,Yy=r),o=t.pendingLanes,o===0&&(Wa=null),c8(n.stateNode),ur(t,Rn()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Xy)throw Xy=!1,t=kS,kS=null,t;return Yy&1&&t.tag!==0&&zc(),o=t.pendingLanes,o&1?t===NS?Jf++:(Jf=0,NS=t):Jf=0,fl(),null}function zc(){if(Da!==null){var t=QA(Yy),e=ro.transition,n=Pt;try{if(ro.transition=null,Pt=16>t?16:t,Da===null)var s=!1;else{if(t=Da,Da=null,Yy=0,Rt&6)throw Error(Se(331));var r=Rt;for(Rt|=4,Me=t.current;Me!==null;){var o=Me,i=o.child;if(Me.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Me=u;Me!==null;){var c=Me;switch(c.tag){case 0:case 11:case 15:Qf(8,c,o)}var d=c.child;if(d!==null)d.return=c,Me=d;else for(;Me!==null;){c=Me;var h=c.sibling,f=c.return;if(uO(c),c===u){Me=null;break}if(h!==null){h.return=f,Me=h;break}Me=f}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Me=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Me=i;else e:for(;Me!==null;){if(o=Me,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qf(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Me=y;break e}Me=o.return}}var b=t.current;for(Me=b;Me!==null;){i=Me;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Me=v;else e:for(i=b;Me!==null;){if(a=Me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:J1(9,a)}}catch(w){bn(a,a.return,w)}if(a===i){Me=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Me=x;break e}Me=a.return}}if(Rt=r,fl(),ni&&typeof ni.onPostCommitFiberRoot=="function")try{ni.onPostCommitFiberRoot(G1,t)}catch{}s=!0}return s}finally{Pt=n,ro.transition=e}}return!1}function PI(t,e,n){e=hd(n,e),e=ZD(t,e,1),t=Ua(t,e,1),e=Vs(),t!==null&&(cm(t,1,e),ur(t,e))}function bn(t,e,n){if(t.tag===3)PI(t,t,n);else for(;e!==null;){if(e.tag===3){PI(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Wa===null||!Wa.has(s))){t=hd(n,t),t=JD(e,t,1),e=Ua(e,t,1),t=Vs(),e!==null&&(cm(e,1,t),ur(e,t));break}}e=e.return}}function P9(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Vs(),t.pingedLanes|=t.suspendedLanes&n,as===t&&(xs&n)===n&&(Hn===4||Hn===3&&(xs&130023424)===xs&&500>Rn()-Bk?lu(t,0):zk|=n),ur(t,e)}function vO(t,e){e===0&&(t.mode&1?(e=w0,w0<<=1,!(w0&130023424)&&(w0=4194304)):e=1);var n=Vs();t=Ui(t,e),t!==null&&(cm(t,e,n),ur(t,n))}function M9(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vO(t,n)}function z9(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Se(314))}s!==null&&s.delete(e),vO(t,n)}var xO;xO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ar.current)or=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return or=!1,T9(t,e,n);or=!!(t.flags&131072)}else or=!1,on&&e.flags&1048576&&CD(e,Vy,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;hy(t,e),t=e.pendingProps;var r=ld(e,_s.current);Mc(e,n),r=Dk(null,e,s,t,r,n);var o=Ok();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(s)?(o=!0,zy(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ek(e),r.updater=Q1,e.stateNode=r,r._reactInternals=e,fS(e,s,t,n),e=gS(null,e,s,!0,o,n)):(e.tag=0,on&&o&&wk(e),Ps(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(hy(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=V9(s),t=vo(s,t),r){case 0:e=mS(null,e,s,t,n);break e;case 1:e=$I(null,e,s,t,n);break e;case 11:e=NI(null,e,s,t,n);break e;case 14:e=TI(null,e,s,vo(s.type,t),n);break e}throw Error(Se(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vo(s,r),mS(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vo(s,r),$I(t,e,s,r,n);case 3:e:{if(sO(e),t===null)throw Error(Se(387));s=e.pendingProps,o=e.memoizedState,r=o.element,$D(t,e),jy(e,s,null,n);var i=e.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=hd(Error(Se(423)),e),e=EI(t,e,s,n,r);break e}else if(s!==r){r=hd(Error(Se(424)),e),e=EI(t,e,s,n,r);break e}else for(Nr=Va(e.stateNode.containerInfo.firstChild),Ir=e,on=!0,ko=null,n=_D(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ud(),s===r){e=Wi(t,e,n);break e}Ps(t,e,s,n)}e=e.child}return e;case 5:return AD(e),t===null&&cS(e),s=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,i=r.children,oS(s,r)?i=null:o!==null&&oS(s,o)&&(e.flags|=32),nO(t,e),Ps(t,e,i,n),e.child;case 6:return t===null&&cS(e),null;case 13:return rO(t,e,n);case 4:return Ik(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=cd(e,null,s,n):Ps(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vo(s,r),NI(t,e,s,r,n);case 7:return Ps(t,e,e.pendingProps,n),e.child;case 8:return Ps(t,e,e.pendingProps.children,n),e.child;case 12:return Ps(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,o=e.memoizedProps,i=r.value,qt(Uy,s._currentValue),s._currentValue=i,o!==null)if(Do(o.value,i)){if(o.children===r.children&&!ar.current){e=Wi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(o.tag===1){l=Pi(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),dS(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Se(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),dS(i,n,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ps(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Mc(e,n),r=ao(r),s=s(r),e.flags|=1,Ps(t,e,s,n),e.child;case 14:return s=e.type,r=vo(s,e.pendingProps),r=vo(s.type,r),TI(t,e,s,r,n);case 15:return eO(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:vo(s,r),hy(t,e),e.tag=1,lr(s)?(t=!0,zy(e)):t=!1,Mc(e,n),ID(e,s,r),fS(e,s,r,n),gS(null,e,s,!0,t,n);case 19:return oO(t,e,n);case 22:return tO(t,e,n)}throw Error(Se(156,e.tag))};function wO(t,e){return qA(t,e)}function B9(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(t,e,n,s){return new B9(t,e,n,s)}function jk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function V9(t){if(typeof t=="function")return jk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uk)return 11;if(t===ck)return 14}return 2}function Ga(t,e){var n=t.alternate;return n===null?(n=Zr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function my(t,e,n,s,r,o){var i=2;if(s=t,typeof t=="function")jk(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case vc:return uu(n.children,r,o,e);case lk:i=8,r|=8;break;case Pw:return t=Zr(12,n,e,r|2),t.elementType=Pw,t.lanes=o,t;case Mw:return t=Zr(13,n,e,r),t.elementType=Mw,t.lanes=o,t;case zw:return t=Zr(19,n,e,r),t.elementType=zw,t.lanes=o,t;case RA:return t2(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case EA:i=10;break e;case IA:i=9;break e;case uk:i=11;break e;case ck:i=14;break e;case xa:i=16,s=null;break e}throw Error(Se(130,t==null?t:typeof t,""))}return e=Zr(i,n,e,r),e.elementType=t,e.type=s,e.lanes=o,e}function uu(t,e,n,s){return t=Zr(7,t,s,e),t.lanes=n,t}function t2(t,e,n,s){return t=Zr(22,t,s,e),t.elementType=RA,t.lanes=n,t.stateNode={isHidden:!1},t}function _x(t,e,n){return t=Zr(6,t,null,e),t.lanes=n,t}function Ax(t,e,n){return e=Zr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function U9(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hx(0),this.expirationTimes=hx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hx(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gk(t,e,n,s,r,o,i,a,l){return t=new U9(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Zr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ek(o),t}function W9(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bc,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function SO(t){if(!t)return Za;t=t._reactInternals;e:{if(Vu(t)!==t||t.tag!==1)throw Error(Se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(t.tag===1){var n=t.type;if(lr(n))return wD(t,n,e)}return e}function CO(t,e,n,s,r,o,i,a,l){return t=Gk(n,s,!0,t,r,o,i,a,l),t.context=SO(null),n=t.current,s=Vs(),r=ja(n),o=Pi(s,r),o.callback=e??null,Ua(n,o,r),t.current.lanes=r,cm(t,r,s),ur(t,s),t}function n2(t,e,n,s){var r=e.current,o=Vs(),i=ja(r);return n=SO(n),e.context===null?e.context=n:e.pendingContext=n,e=Pi(o,i),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Ua(r,e,i),t!==null&&(Io(t,r,i,o),uy(t,r,i)),i}function Zy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function MI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hk(t,e){MI(t,e),(t=t.alternate)&&MI(t,e)}function j9(){return null}var kO=typeof reportError=="function"?reportError:function(t){console.error(t)};function qk(t){this._internalRoot=t}s2.prototype.render=qk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Se(409));n2(t,e,null,null)};s2.prototype.unmount=qk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xu(function(){n2(null,t,null,null)}),e[Vi]=null}};function s2(t){this._internalRoot=t}s2.prototype.unstable_scheduleHydration=function(t){if(t){var e=eD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ka.length&&e!==0&&e<ka[n].priority;n++);ka.splice(n,0,t),n===0&&nD(t)}};function Kk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function r2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zI(){}function G9(t,e,n,s,r){if(r){if(typeof s=="function"){var o=s;s=function(){var u=Zy(i);o.call(u)}}var i=CO(e,s,t,0,null,!1,!1,"",zI);return t._reactRootContainer=i,t[Vi]=i.current,yp(t.nodeType===8?t.parentNode:t),xu(),i}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=Zy(l);a.call(u)}}var l=Gk(t,0,!1,null,null,!1,!1,"",zI);return t._reactRootContainer=l,t[Vi]=l.current,yp(t.nodeType===8?t.parentNode:t),xu(function(){n2(e,l,n,s)}),l}function o2(t,e,n,s,r){var o=n._reactRootContainer;if(o){var i=o;if(typeof r=="function"){var a=r;r=function(){var l=Zy(i);a.call(l)}}n2(e,i,t,r)}else i=G9(n,e,t,r,s);return Zy(i)}ZA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ff(e.pendingLanes);n!==0&&(fk(e,n|1),ur(e,Rn()),!(Rt&6)&&(fd=Rn()+500,fl()))}break;case 13:xu(function(){var s=Ui(t,1);if(s!==null){var r=Vs();Io(s,t,1,r)}}),Hk(t,1)}};pk=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var n=Vs();Io(e,t,134217728,n)}Hk(t,134217728)}};JA=function(t){if(t.tag===13){var e=ja(t),n=Ui(t,e);if(n!==null){var s=Vs();Io(n,t,e,s)}Hk(t,e)}};eD=function(){return Pt};tD=function(t,e){var n=Pt;try{return Pt=t,e()}finally{Pt=n}};Xw=function(t,e,n){switch(e){case"input":if(Uw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=X1(s);if(!r)throw Error(Se(90));AA(s),Uw(s,r)}}}break;case"textarea":OA(t,n);break;case"select":e=n.value,e!=null&&Oc(t,!!n.multiple,e,!1)}};VA=Vk;UA=xu;var H9={usingClientEntryPoint:!1,Events:[hm,Cc,X1,zA,BA,Vk]},hf={findFiberByHostInstance:jl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},q9={bundleType:hf.bundleType,version:hf.version,rendererPackageName:hf.rendererPackageName,rendererConfig:hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GA(t),t===null?null:t.stateNode},findFiberByHostInstance:hf.findFiberByHostInstance||j9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var A0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!A0.isDisabled&&A0.supportsFiber)try{G1=A0.inject(q9),ni=A0}catch{}}Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H9;Fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kk(e))throw Error(Se(200));return W9(t,e,null,n)};Fr.createRoot=function(t,e){if(!Kk(t))throw Error(Se(299));var n=!1,s="",r=kO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Gk(t,1,!1,null,null,n,!1,s,r),t[Vi]=e.current,yp(t.nodeType===8?t.parentNode:t),new qk(e)};Fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Se(188)):(t=Object.keys(t).join(","),Error(Se(268,t)));return t=GA(e),t=t===null?null:t.stateNode,t};Fr.flushSync=function(t){return xu(t)};Fr.hydrate=function(t,e,n){if(!r2(e))throw Error(Se(200));return o2(null,t,e,!0,n)};Fr.hydrateRoot=function(t,e,n){if(!Kk(t))throw Error(Se(405));var s=n!=null&&n.hydratedSources||null,r=!1,o="",i=kO;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=CO(e,null,t,1,n??null,r,!1,o,i),t[Vi]=e.current,yp(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new s2(e)};Fr.render=function(t,e,n){if(!r2(e))throw Error(Se(200));return o2(null,t,e,!1,n)};Fr.unmountComponentAtNode=function(t){if(!r2(t))throw Error(Se(40));return t._reactRootContainer?(xu(function(){o2(null,null,t,!1,function(){t._reactRootContainer=null,t[Vi]=null})}),!0):!1};Fr.unstable_batchedUpdates=Vk;Fr.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!r2(n))throw Error(Se(200));if(t==null||t._reactInternals===void 0)throw Error(Se(38));return o2(t,e,n,!1,s)};Fr.version="18.2.0-next-9e3b772b8-20220608";function NO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NO)}catch(t){console.error(t)}}NO(),CA.exports=Fr;var Bd=CA.exports;const Xk=W1(Bd),K9=XC({__proto__:null,default:Xk},[Bd]);var BI=Bd;Fw.createRoot=BI.createRoot,Fw.hydrateRoot=BI.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vn(){return vn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},vn.apply(this,arguments)}var $n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($n||($n={}));const VI="popstate";function X9(t){t===void 0&&(t={});function e(s,r){let{pathname:o,search:i,hash:a}=s.location;return Tp("",{pathname:o,search:i,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:pm(r)}return Q9(e,n,null,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Y9(){return Math.random().toString(36).substr(2,8)}function UI(t,e){return{usr:t.state,key:t.key,idx:e}}function Tp(t,e,n,s){return n===void 0&&(n=null),vn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zi(e):e,{state:n,key:e&&e.key||s||Y9()})}function pm(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Zi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Q9(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:o=!1}=s,i=r.history,a=$n.Pop,l=null,u=c();u==null&&(u=0,i.replaceState(vn({},i.state,{idx:u}),""));function c(){return(i.state||{idx:null}).idx}function d(){a=$n.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function h(g,y){a=$n.Push;let b=Tp(m.location,g,y);n&&n(b,g),u=c()+1;let v=UI(b,u),x=m.createHref(b);try{i.pushState(v,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;r.location.assign(x)}o&&l&&l({action:a,location:m.location,delta:1})}function f(g,y){a=$n.Replace;let b=Tp(m.location,g,y);n&&n(b,g),u=c();let v=UI(b,u),x=m.createHref(b);i.replaceState(v,"",x),o&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof g=="string"?g:pm(g);return b=b.replace(/ $/,"%20"),Ct(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return t(r,i)},listen(g){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(VI,d),l=g,()=>{r.removeEventListener(VI,d),l=null}},createHref(g){return e(r,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(g){return i.go(g)}};return m}var yn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yn||(yn={}));const Z9=new Set(["lazy","caseSensitive","path","id","index","children"]);function J9(t){return t.index===!0}function ES(t,e,n,s){return n===void 0&&(n=[]),s===void 0&&(s={}),t.map((r,o)=>{let i=[...n,o],a=typeof r.id=="string"?r.id:i.join("-");if(Ct(r.index!==!0||!r.children,"Cannot specify children on an index route"),Ct(!s[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),J9(r)){let l=vn({},r,e(r),{id:a});return s[a]=l,l}else{let l=vn({},r,e(r),{id:a,children:void 0});return s[a]=l,r.children&&(l.children=ES(r.children,e,i,s)),l}})}function Rc(t,e,n){n===void 0&&(n="/");let s=typeof e=="string"?Zi(e):e,r=mm(s.pathname||"/",n);if(r==null)return null;let o=TO(t);tU(o);let i=null;for(let a=0;i==null&&a<o.length;++a){let l=fU(r);i=cU(o[a],l)}return i}function eU(t,e){let{route:n,pathname:s,params:r}=t;return{id:n.id,pathname:s,params:r,data:e[n.id],handle:n.handle}}function TO(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(Ct(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let u=Ha([s,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(Ct(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),TO(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:lU(u,o.index),routesMeta:c})};return t.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))r(o,i);else for(let l of $O(o.path))r(o,i,l)}),e}function $O(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let i=$O(s.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),r&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function tU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uU(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const nU=/^:[\w-]+$/,sU=3,rU=2,oU=1,iU=10,aU=-2,WI=t=>t==="*";function lU(t,e){let n=t.split("/"),s=n.length;return n.some(WI)&&(s+=aU),e&&(s+=rU),n.filter(r=>!WI(r)).reduce((r,o)=>r+(nU.test(o)?sU:o===""?oU:iU),s)}function uU(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function cU(t,e){let{routesMeta:n}=t,s={},r="/",o=[];for(let i=0;i<n.length;++i){let a=n[i],l=i===n.length-1,u=r==="/"?e:e.slice(r.length)||"/",c=dU({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(s,c.params);let d=a.route;o.push({params:s,pathname:Ha([r,c.pathname]),pathnameBase:gU(Ha([r,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(r=Ha([r,c.pathnameBase]))}return o}function dU(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=hU(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],i=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((u,c,d)=>{let{paramName:h,isOptional:f}=c;if(h==="*"){let m=a[d]||"";i=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:t}}function hU(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function fU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function pU(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Zi(t):t;return{pathname:n?n.startsWith("/")?n:mU(n,e):e,search:yU(s),hash:bU(r)}}function mU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Dx(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function IO(t,e){let n=EO(t);return e?n.map((s,r)=>r===t.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function RO(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=Zi(t):(r=vn({},t),Ct(!r.pathname||!r.pathname.includes("?"),Dx("?","pathname","search",r)),Ct(!r.pathname||!r.pathname.includes("#"),Dx("#","pathname","hash",r)),Ct(!r.search||!r.search.includes("#"),Dx("#","search","hash",r)));let o=t===""||r.pathname==="",i=o?"/":r.pathname,a;if(i==null)a=n;else{let d=e.length-1;if(!s&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=pU(r,a),u=i&&i!=="/"&&i.endsWith("/"),c=(o||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ha=t=>t.join("/").replace(/\/\/+/g,"/"),gU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Yk{constructor(e,n,s,r){r===void 0&&(r=!1),this.status=e,this.statusText=n||"",this.internal=r,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}}function _O(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AO=["post","put","patch","delete"],vU=new Set(AO),xU=["get",...AO],wU=new Set(xU),SU=new Set([301,302,303,307,308]),CU=new Set([307,308]),Ox={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kU={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ff={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},DO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NU=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),OO="remix-router-transitions";function TU(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",s=!n;Ct(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(t.mapRouteProperties)r=t.mapRouteProperties;else if(t.detectErrorBoundary){let U=t.detectErrorBoundary;r=Y=>({hasErrorBoundary:U(Y)})}else r=NU;let o={},i=ES(t.routes,r,void 0,o),a,l=t.basename||"/",u=vn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,h=null,f=null,p=null,m=t.hydrationData!=null,g=Rc(i,t.history.location,l),y=null;if(g==null){let U=Kr(404,{pathname:t.history.location.pathname}),{matches:Y,route:ce}=QI(i);g=Y,y={[ce.id]:U}}let b,v=g.some(U=>U.route.lazy),x=g.some(U=>U.route.loader);if(v)b=!1;else if(!x)b=!0;else if(u.v7_partialHydration){let U=t.hydrationData?t.hydrationData.loaderData:null,Y=t.hydrationData?t.hydrationData.errors:null,ce=ve=>ve.route.loader?ve.route.loader.hydrate===!0?!1:U&&U[ve.route.id]!==void 0||Y&&Y[ve.route.id]!==void 0:!0;if(Y){let ve=g.findIndex(Te=>Y[Te.route.id]!==void 0);b=g.slice(0,ve+1).every(ce)}else b=g.every(ce)}else b=t.hydrationData!=null;let w,S={historyAction:t.history.action,location:t.history.location,matches:g,initialized:b,navigation:Ox,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},k=$n.Pop,N=!1,$,I=!1,A=new Map,O=null,P=!1,F=!1,G=[],q=[],Z=new Map,B=0,H=-1,K=new Map,ne=new Set,D=new Map,X=new Map,te=new Set,ue=new Map,ie=new Map,me=!1;function xe(){if(c=t.history.listen(U=>{let{action:Y,location:ce,delta:ve}=U;if(me){me=!1;return}pd(ie.size===0||ve!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Te=J({currentLocation:S.location,nextLocation:ce,historyAction:Y});if(Te&&ve!=null){me=!0,t.history.go(ve*-1),re(Te,{state:"blocked",location:ce,proceed(){re(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:ce}),t.history.go(ve)},reset(){let Qe=new Map(S.blockers);Qe.set(Te,ff),Ie({blockers:Qe})}});return}return ot(Y,ce)}),n){PU(e,A);let U=()=>MU(e,A);e.addEventListener("pagehide",U),O=()=>e.removeEventListener("pagehide",U)}return S.initialized||ot($n.Pop,S.location,{initialHydration:!0}),w}function fe(){c&&c(),O&&O(),d.clear(),$&&$.abort(),S.fetchers.forEach((U,Y)=>Ft(Y)),S.blockers.forEach((U,Y)=>ca(Y))}function De(U){return d.add(U),()=>d.delete(U)}function Ie(U,Y){Y===void 0&&(Y={}),S=vn({},S,U);let ce=[],ve=[];u.v7_fetcherPersist&&S.fetchers.forEach((Te,Qe)=>{Te.state==="idle"&&(te.has(Qe)?ve.push(Qe):ce.push(Qe))}),[...d].forEach(Te=>Te(S,{deletedFetchers:ve,unstable_viewTransitionOpts:Y.viewTransitionOpts,unstable_flushSync:Y.flushSync===!0})),u.v7_fetcherPersist&&(ce.forEach(Te=>S.fetchers.delete(Te)),ve.forEach(Te=>Ft(Te)))}function Le(U,Y,ce){var ve,Te;let{flushSync:Qe}=ce===void 0?{}:ce,Ge=S.actionData!=null&&S.navigation.formMethod!=null&&Co(S.navigation.formMethod)&&S.navigation.state==="loading"&&((ve=U.state)==null?void 0:ve._isRedirect)!==!0,Xe;Y.actionData?Object.keys(Y.actionData).length>0?Xe=Y.actionData:Xe=null:Ge?Xe=S.actionData:Xe=null;let He=Y.loaderData?YI(S.loaderData,Y.loaderData,Y.matches||[],Y.errors):S.loaderData,dt=S.blockers;dt.size>0&&(dt=new Map(dt),dt.forEach((Gt,gs)=>dt.set(gs,ff)));let sn=N===!0||S.navigation.formMethod!=null&&Co(S.navigation.formMethod)&&((Te=U.state)==null?void 0:Te._isRedirect)!==!0;a&&(i=a,a=void 0),P||k===$n.Pop||(k===$n.Push?t.history.push(U,U.state):k===$n.Replace&&t.history.replace(U,U.state));let gt;if(k===$n.Pop){let Gt=A.get(S.location.pathname);Gt&&Gt.has(U.pathname)?gt={currentLocation:S.location,nextLocation:U}:A.has(U.pathname)&&(gt={currentLocation:U,nextLocation:S.location})}else if(I){let Gt=A.get(S.location.pathname);Gt?Gt.add(U.pathname):(Gt=new Set([U.pathname]),A.set(S.location.pathname,Gt)),gt={currentLocation:S.location,nextLocation:U}}Ie(vn({},Y,{actionData:Xe,loaderData:He,historyAction:k,location:U,initialized:!0,navigation:Ox,revalidation:"idle",restoreScrollPosition:Je(U,Y.matches||S.matches),preventScrollReset:sn,blockers:dt}),{viewTransitionOpts:gt,flushSync:Qe===!0}),k=$n.Pop,N=!1,I=!1,P=!1,F=!1,G=[],q=[]}async function Ke(U,Y){if(typeof U=="number"){t.history.go(U);return}let ce=IS(S.location,S.matches,l,u.v7_prependBasename,U,u.v7_relativeSplatPath,Y==null?void 0:Y.fromRouteId,Y==null?void 0:Y.relative),{path:ve,submission:Te,error:Qe}=jI(u.v7_normalizeFormMethod,!1,ce,Y),Ge=S.location,Xe=Tp(S.location,ve,Y&&Y.state);Xe=vn({},Xe,t.history.encodeLocation(Xe));let He=Y&&Y.replace!=null?Y.replace:void 0,dt=$n.Push;He===!0?dt=$n.Replace:He===!1||Te!=null&&Co(Te.formMethod)&&Te.formAction===S.location.pathname+S.location.search&&(dt=$n.Replace);let sn=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,gt=(Y&&Y.unstable_flushSync)===!0,Gt=J({currentLocation:Ge,nextLocation:Xe,historyAction:dt});if(Gt){re(Gt,{state:"blocked",location:Xe,proceed(){re(Gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Xe}),Ke(U,Y)},reset(){let gs=new Map(S.blockers);gs.set(Gt,ff),Ie({blockers:gs})}});return}return await ot(dt,Xe,{submission:Te,pendingError:Qe,preventScrollReset:sn,replace:Y&&Y.replace,enableViewTransition:Y&&Y.unstable_viewTransition,flushSync:gt})}function mt(){if(ye(),Ie({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){ot(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}ot(k||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation})}}async function ot(U,Y,ce){$&&$.abort(),$=null,k=U,P=(ce&&ce.startUninterruptedRevalidation)===!0,Pe(S.location,S.matches),N=(ce&&ce.preventScrollReset)===!0,I=(ce&&ce.enableViewTransition)===!0;let ve=a||i,Te=ce&&ce.overrideNavigation,Qe=Rc(ve,Y,l),Ge=(ce&&ce.flushSync)===!0;if(!Qe){let gs=Kr(404,{pathname:Y.pathname}),{matches:br,route:es}=QI(ve);be(),Le(Y,{matches:br,loaderData:{},errors:{[es.id]:gs}},{flushSync:Ge});return}if(S.initialized&&!F&&_U(S.location,Y)&&!(ce&&ce.submission&&Co(ce.submission.formMethod))){Le(Y,{matches:Qe},{flushSync:Ge});return}$=new AbortController;let Xe=mf(t.history,Y,$.signal,ce&&ce.submission),He,dt;if(ce&&ce.pendingError)dt={[ep(Qe).route.id]:ce.pendingError};else if(ce&&ce.submission&&Co(ce.submission.formMethod)){let gs=await rt(Xe,Y,ce.submission,Qe,{replace:ce.replace,flushSync:Ge});if(gs.shortCircuited)return;He=gs.pendingActionData,dt=gs.pendingActionError,Te=Fx(Y,ce.submission),Ge=!1,Xe=new Request(Xe.url,{signal:Xe.signal})}let{shortCircuited:sn,loaderData:gt,errors:Gt}=await ct(Xe,Y,Qe,Te,ce&&ce.submission,ce&&ce.fetcherSubmission,ce&&ce.replace,ce&&ce.initialHydration===!0,Ge,He,dt);sn||($=null,Le(Y,vn({matches:Qe},He?{actionData:He}:{},{loaderData:gt,errors:Gt})))}async function rt(U,Y,ce,ve,Te){Te===void 0&&(Te={}),ye();let Qe=FU(Y,ce);Ie({navigation:Qe},{flushSync:Te.flushSync===!0});let Ge,Xe=_S(ve,Y);if(!Xe.route.action&&!Xe.route.lazy)Ge={type:yn.error,error:Kr(405,{method:U.method,pathname:Y.pathname,routeId:Xe.route.id})};else if(Ge=await pf("action",U,Xe,ve,o,r,l,u.v7_relativeSplatPath),U.signal.aborted)return{shortCircuited:!0};if(Kl(Ge)){let He;return Te&&Te.replace!=null?He=Te.replace:He=Ge.location===S.location.pathname+S.location.search,await ke(S,Ge,{submission:ce,replace:He}),{shortCircuited:!0}}if(_c(Ge)){let He=ep(ve,Xe.route.id);return(Te&&Te.replace)!==!0&&(k=$n.Push),{pendingActionData:{},pendingActionError:{[He.route.id]:Ge.error}}}if(ql(Ge))throw Kr(400,{type:"defer-action"});return{pendingActionData:{[Xe.route.id]:Ge.data}}}async function ct(U,Y,ce,ve,Te,Qe,Ge,Xe,He,dt,sn){let gt=ve||Fx(Y,Te),Gt=Te||Qe||eR(gt),gs=a||i,[br,es]=GI(t.history,S,ce,Gt,Y,u.v7_partialHydration&&Xe===!0,F,G,q,te,D,ne,gs,l,dt,sn);if(be(At=>!(ce&&ce.some(zt=>zt.route.id===At))||br&&br.some(zt=>zt.route.id===At)),H=++B,br.length===0&&es.length===0){let At=Br();return Le(Y,vn({matches:ce,loaderData:{},errors:sn||null},dt?{actionData:dt}:{},At?{fetchers:new Map(S.fetchers)}:{}),{flushSync:He}),{shortCircuited:!0}}if(!P&&(!u.v7_partialHydration||!Xe)){es.forEach(zt=>{let Zs=S.fetchers.get(zt.key),p0=gf(void 0,Zs?Zs.data:void 0);S.fetchers.set(zt.key,p0)});let At=dt||S.actionData;Ie(vn({navigation:gt},At?Object.keys(At).length===0?{actionData:null}:{actionData:At}:{},es.length>0?{fetchers:new Map(S.fetchers)}:{}),{flushSync:He})}es.forEach(At=>{Z.has(At.key)&&Jn(At.key),At.controller&&Z.set(At.key,At.controller)});let ic=()=>es.forEach(At=>Jn(At.key));$&&$.signal.addEventListener("abort",ic);let{results:nx,loaderResults:ac,fetcherResults:da}=await we(S.matches,ce,br,es,U);if(U.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",ic),es.forEach(At=>Z.delete(At.key));let El=ZI(nx);if(El){if(El.idx>=br.length){let At=es[El.idx-br.length].key;ne.add(At)}return await ke(S,El.result,{replace:Ge}),{shortCircuited:!0}}let{loaderData:sx,errors:sf}=XI(S,ce,br,ac,sn,es,da,ue);ue.forEach((At,zt)=>{At.subscribe(Zs=>{(Zs||At.done)&&ue.delete(zt)})}),u.v7_partialHydration&&Xe&&S.errors&&Object.entries(S.errors).filter(At=>{let[zt]=At;return!br.some(Zs=>Zs.route.id===zt)}).forEach(At=>{let[zt,Zs]=At;sf=Object.assign(sf||{},{[zt]:Zs})});let rx=Br(),lc=Si(H),f0=rx||lc||es.length>0;return vn({loaderData:sx,errors:sf},f0?{fetchers:new Map(S.fetchers)}:{})}function z(U,Y,ce,ve){if(s)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Z.has(U)&&Jn(U);let Te=(ve&&ve.unstable_flushSync)===!0,Qe=a||i,Ge=IS(S.location,S.matches,l,u.v7_prependBasename,ce,u.v7_relativeSplatPath,Y,ve==null?void 0:ve.relative),Xe=Rc(Qe,Ge,l);if(!Xe){nt(U,Y,Kr(404,{pathname:Ge}),{flushSync:Te});return}let{path:He,submission:dt,error:sn}=jI(u.v7_normalizeFormMethod,!0,Ge,ve);if(sn){nt(U,Y,sn,{flushSync:Te});return}let gt=_S(Xe,He);if(N=(ve&&ve.preventScrollReset)===!0,dt&&Co(dt.formMethod)){oe(U,Y,He,gt,Xe,Te,dt);return}D.set(U,{routeId:Y,path:He}),ae(U,Y,He,gt,Xe,Te,dt)}async function oe(U,Y,ce,ve,Te,Qe,Ge){if(ye(),D.delete(U),!ve.route.action&&!ve.route.lazy){let zt=Kr(405,{method:Ge.formMethod,pathname:ce,routeId:Y});nt(U,Y,zt,{flushSync:Qe});return}let Xe=S.fetchers.get(U);Ee(U,LU(Ge,Xe),{flushSync:Qe});let He=new AbortController,dt=mf(t.history,ce,He.signal,Ge);Z.set(U,He);let sn=B,gt=await pf("action",dt,ve,Te,o,r,l,u.v7_relativeSplatPath);if(dt.signal.aborted){Z.get(U)===He&&Z.delete(U);return}if(u.v7_fetcherPersist&&te.has(U)){if(Kl(gt)||_c(gt)){Ee(U,va(void 0));return}}else{if(Kl(gt))if(Z.delete(U),H>sn){Ee(U,va(void 0));return}else return ne.add(U),Ee(U,gf(Ge)),ke(S,gt,{fetcherSubmission:Ge});if(_c(gt)){nt(U,Y,gt.error);return}}if(ql(gt))throw Kr(400,{type:"defer-action"});let Gt=S.navigation.location||S.location,gs=mf(t.history,Gt,He.signal),br=a||i,es=S.navigation.state!=="idle"?Rc(br,S.navigation.location,l):S.matches;Ct(es,"Didn't find any matches after fetcher action");let ic=++B;K.set(U,ic);let nx=gf(Ge,gt.data);S.fetchers.set(U,nx);let[ac,da]=GI(t.history,S,es,Ge,Gt,!1,F,G,q,te,D,ne,br,l,{[ve.route.id]:gt.data},void 0);da.filter(zt=>zt.key!==U).forEach(zt=>{let Zs=zt.key,p0=S.fetchers.get(Zs),B7=gf(void 0,p0?p0.data:void 0);S.fetchers.set(Zs,B7),Z.has(Zs)&&Jn(Zs),zt.controller&&Z.set(Zs,zt.controller)}),Ie({fetchers:new Map(S.fetchers)});let El=()=>da.forEach(zt=>Jn(zt.key));He.signal.addEventListener("abort",El);let{results:sx,loaderResults:sf,fetcherResults:rx}=await we(S.matches,es,ac,da,gs);if(He.signal.aborted)return;He.signal.removeEventListener("abort",El),K.delete(U),Z.delete(U),da.forEach(zt=>Z.delete(zt.key));let lc=ZI(sx);if(lc){if(lc.idx>=ac.length){let zt=da[lc.idx-ac.length].key;ne.add(zt)}return ke(S,lc.result)}let{loaderData:f0,errors:At}=XI(S,S.matches,ac,sf,void 0,da,rx,ue);if(S.fetchers.has(U)){let zt=va(gt.data);S.fetchers.set(U,zt)}Si(ic),S.navigation.state==="loading"&&ic>H?(Ct(k,"Expected pending action"),$&&$.abort(),Le(S.navigation.location,{matches:es,loaderData:f0,errors:At,fetchers:new Map(S.fetchers)})):(Ie({errors:At,loaderData:YI(S.loaderData,f0,es,At),fetchers:new Map(S.fetchers)}),F=!1)}async function ae(U,Y,ce,ve,Te,Qe,Ge){let Xe=S.fetchers.get(U);Ee(U,gf(Ge,Xe?Xe.data:void 0),{flushSync:Qe});let He=new AbortController,dt=mf(t.history,ce,He.signal);Z.set(U,He);let sn=B,gt=await pf("loader",dt,ve,Te,o,r,l,u.v7_relativeSplatPath);if(ql(gt)&&(gt=await PO(gt,dt.signal,!0)||gt),Z.get(U)===He&&Z.delete(U),!dt.signal.aborted){if(te.has(U)){Ee(U,va(void 0));return}if(Kl(gt))if(H>sn){Ee(U,va(void 0));return}else{ne.add(U),await ke(S,gt);return}if(_c(gt)){nt(U,Y,gt.error);return}Ct(!ql(gt),"Unhandled fetcher deferred data"),Ee(U,va(gt.data))}}async function ke(U,Y,ce){let{submission:ve,fetcherSubmission:Te,replace:Qe}=ce===void 0?{}:ce;Y.revalidate&&(F=!0);let Ge=Tp(U.location,Y.location,{_isRedirect:!0});if(Ct(Ge,"Expected a location on the redirect navigation"),n){let Gt=!1;if(Y.reloadDocument)Gt=!0;else if(DO.test(Y.location)){const gs=t.history.createURL(Y.location);Gt=gs.origin!==e.location.origin||mm(gs.pathname,l)==null}if(Gt){Qe?e.location.replace(Y.location):e.location.assign(Y.location);return}}$=null;let Xe=Qe===!0?$n.Replace:$n.Push,{formMethod:He,formAction:dt,formEncType:sn}=U.navigation;!ve&&!Te&&He&&dt&&sn&&(ve=eR(U.navigation));let gt=ve||Te;if(CU.has(Y.status)&&gt&&Co(gt.formMethod))await ot(Xe,Ge,{submission:vn({},gt,{formAction:Y.location}),preventScrollReset:N});else{let Gt=Fx(Ge,ve);await ot(Xe,Ge,{overrideNavigation:Gt,fetcherSubmission:Te,preventScrollReset:N})}}async function we(U,Y,ce,ve,Te){let Qe=await Promise.all([...ce.map(He=>pf("loader",Te,He,Y,o,r,l,u.v7_relativeSplatPath)),...ve.map(He=>He.matches&&He.match&&He.controller?pf("loader",mf(t.history,He.path,He.controller.signal),He.match,He.matches,o,r,l,u.v7_relativeSplatPath):{type:yn.error,error:Kr(404,{pathname:He.path})})]),Ge=Qe.slice(0,ce.length),Xe=Qe.slice(ce.length);return await Promise.all([JI(U,ce,Ge,Ge.map(()=>Te.signal),!1,S.loaderData),JI(U,ve.map(He=>He.match),Xe,ve.map(He=>He.controller?He.controller.signal:null),!0)]),{results:Qe,loaderResults:Ge,fetcherResults:Xe}}function ye(){F=!0,G.push(...be()),D.forEach((U,Y)=>{Z.has(Y)&&(q.push(Y),Jn(Y))})}function Ee(U,Y,ce){ce===void 0&&(ce={}),S.fetchers.set(U,Y),Ie({fetchers:new Map(S.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function nt(U,Y,ce,ve){ve===void 0&&(ve={});let Te=ep(S.matches,Y);Ft(U),Ie({errors:{[Te.route.id]:ce},fetchers:new Map(S.fetchers)},{flushSync:(ve&&ve.flushSync)===!0})}function _t(U){return u.v7_fetcherPersist&&(X.set(U,(X.get(U)||0)+1),te.has(U)&&te.delete(U)),S.fetchers.get(U)||kU}function Ft(U){let Y=S.fetchers.get(U);Z.has(U)&&!(Y&&Y.state==="loading"&&K.has(U))&&Jn(U),D.delete(U),K.delete(U),ne.delete(U),te.delete(U),S.fetchers.delete(U)}function Vn(U){if(u.v7_fetcherPersist){let Y=(X.get(U)||0)-1;Y<=0?(X.delete(U),te.add(U)):X.set(U,Y)}else Ft(U);Ie({fetchers:new Map(S.fetchers)})}function Jn(U){let Y=Z.get(U);Ct(Y,"Expected fetch controller: "+U),Y.abort(),Z.delete(U)}function zr(U){for(let Y of U){let ce=_t(Y),ve=va(ce.data);S.fetchers.set(Y,ve)}}function Br(){let U=[],Y=!1;for(let ce of ne){let ve=S.fetchers.get(ce);Ct(ve,"Expected fetcher: "+ce),ve.state==="loading"&&(ne.delete(ce),U.push(ce),Y=!0)}return zr(U),Y}function Si(U){let Y=[];for(let[ce,ve]of K)if(ve<U){let Te=S.fetchers.get(ce);Ct(Te,"Expected fetcher: "+ce),Te.state==="loading"&&(Jn(ce),K.delete(ce),Y.push(ce))}return zr(Y),Y.length>0}function po(U,Y){let ce=S.blockers.get(U)||ff;return ie.get(U)!==Y&&ie.set(U,Y),ce}function ca(U){S.blockers.delete(U),ie.delete(U)}function re(U,Y){let ce=S.blockers.get(U)||ff;Ct(ce.state==="unblocked"&&Y.state==="blocked"||ce.state==="blocked"&&Y.state==="blocked"||ce.state==="blocked"&&Y.state==="proceeding"||ce.state==="blocked"&&Y.state==="unblocked"||ce.state==="proceeding"&&Y.state==="unblocked","Invalid blocker state transition: "+ce.state+" -> "+Y.state);let ve=new Map(S.blockers);ve.set(U,Y),Ie({blockers:ve})}function J(U){let{currentLocation:Y,nextLocation:ce,historyAction:ve}=U;if(ie.size===0)return;ie.size>1&&pd(!1,"A router only supports one blocker at a time");let Te=Array.from(ie.entries()),[Qe,Ge]=Te[Te.length-1],Xe=S.blockers.get(Qe);if(!(Xe&&Xe.state==="proceeding")&&Ge({currentLocation:Y,nextLocation:ce,historyAction:ve}))return Qe}function be(U){let Y=[];return ue.forEach((ce,ve)=>{(!U||U(ve))&&(ce.cancel(),Y.push(ve),ue.delete(ve))}),Y}function _e(U,Y,ce){if(h=U,p=Y,f=ce||null,!m&&S.navigation===Ox){m=!0;let ve=Je(S.location,S.matches);ve!=null&&Ie({restoreScrollPosition:ve})}return()=>{h=null,p=null,f=null}}function Re(U,Y){return f&&f(U,Y.map(ve=>eU(ve,S.loaderData)))||U.key}function Pe(U,Y){if(h&&p){let ce=Re(U,Y);h[ce]=p()}}function Je(U,Y){if(h){let ce=Re(U,Y),ve=h[ce];if(typeof ve=="number")return ve}return null}function et(U){o={},a=ES(U,r,void 0,o)}return w={get basename(){return l},get future(){return u},get state(){return S},get routes(){return i},get window(){return e},initialize:xe,subscribe:De,enableScrollRestoration:_e,navigate:Ke,fetch:z,revalidate:mt,createHref:U=>t.history.createHref(U),encodeLocation:U=>t.history.encodeLocation(U),getFetcher:_t,deleteFetcher:Vn,dispose:fe,getBlocker:po,deleteBlocker:ca,_internalFetchControllers:Z,_internalActiveDeferreds:ue,_internalSetRoutes:et},w}function $U(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function IS(t,e,n,s,r,o,i,a){let l,u;if(i){l=[];for(let d of e)if(l.push(d),d.route.id===i){u=d;break}}else l=e,u=e[e.length-1];let c=RO(r||".",IO(l,o),mm(t.pathname,n)||t.pathname,a==="path");return r==null&&(c.search=t.search,c.hash=t.hash),(r==null||r===""||r===".")&&u&&u.route.index&&!Qk(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),s&&n!=="/"&&(c.pathname=c.pathname==="/"?n:Ha([n,c.pathname])),pm(c)}function jI(t,e,n,s){if(!s||!$U(s))return{path:n};if(s.formMethod&&!OU(s.formMethod))return{path:n,error:Kr(405,{method:s.formMethod})};let r=()=>({path:n,error:Kr(400,{type:"invalid-body"})}),o=s.formMethod||"get",i=t?o.toUpperCase():o.toLowerCase(),a=LO(n);if(s.body!==void 0){if(s.formEncType==="text/plain"){if(!Co(i))return r();let h=typeof s.body=="string"?s.body:s.body instanceof FormData||s.body instanceof URLSearchParams?Array.from(s.body.entries()).reduce((f,p)=>{let[m,g]=p;return""+f+m+"="+g+`
`},""):String(s.body);return{path:n,submission:{formMethod:i,formAction:a,formEncType:s.formEncType,formData:void 0,json:void 0,text:h}}}else if(s.formEncType==="application/json"){if(!Co(i))return r();try{let h=typeof s.body=="string"?JSON.parse(s.body):s.body;return{path:n,submission:{formMethod:i,formAction:a,formEncType:s.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}Ct(typeof FormData=="function","FormData is not available in this environment");let l,u;if(s.formData)l=RS(s.formData),u=s.formData;else if(s.body instanceof FormData)l=RS(s.body),u=s.body;else if(s.body instanceof URLSearchParams)l=s.body,u=KI(l);else if(s.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(s.body),u=KI(l)}catch{return r()}let c={formMethod:i,formAction:a,formEncType:s&&s.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Co(c.formMethod))return{path:n,submission:c};let d=Zi(n);return e&&d.search&&Qk(d.search)&&l.append("index",""),d.search="?"+l,{path:pm(d),submission:c}}function EU(t,e){let n=t;if(e){let s=t.findIndex(r=>r.route.id===e);s>=0&&(n=t.slice(0,s))}return n}function GI(t,e,n,s,r,o,i,a,l,u,c,d,h,f,p,m){let g=m?Object.values(m)[0]:p?Object.values(p)[0]:void 0,y=t.createURL(e.location),b=t.createURL(r),v=m?Object.keys(m)[0]:void 0,w=EU(n,v).filter((k,N)=>{let{route:$}=k;if($.lazy)return!0;if($.loader==null)return!1;if(o)return $.loader.hydrate?!0:e.loaderData[$.id]===void 0&&(!e.errors||e.errors[$.id]===void 0);if(IU(e.loaderData,e.matches[N],k)||a.some(O=>O===k.route.id))return!0;let I=e.matches[N],A=k;return HI(k,vn({currentUrl:y,currentParams:I.params,nextUrl:b,nextParams:A.params},s,{actionResult:g,defaultShouldRevalidate:i||y.pathname+y.search===b.pathname+b.search||y.search!==b.search||FO(I,A)}))}),S=[];return c.forEach((k,N)=>{if(o||!n.some(P=>P.route.id===k.routeId)||u.has(N))return;let $=Rc(h,k.path,f);if(!$){S.push({key:N,routeId:k.routeId,path:k.path,matches:null,match:null,controller:null});return}let I=e.fetchers.get(N),A=_S($,k.path),O=!1;d.has(N)?O=!1:l.includes(N)?O=!0:I&&I.state!=="idle"&&I.data===void 0?O=i:O=HI(A,vn({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},s,{actionResult:g,defaultShouldRevalidate:i})),O&&S.push({key:N,routeId:k.routeId,path:k.path,matches:$,match:A,controller:new AbortController})}),[w,S]}function IU(t,e,n){let s=!e||n.route.id!==e.route.id,r=t[n.route.id]===void 0;return s||r}function FO(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function HI(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function qI(t,e,n){if(!t.lazy)return;let s=await t.lazy();if(!t.lazy)return;let r=n[t.id];Ct(r,"No route found in manifest");let o={};for(let i in s){let l=r[i]!==void 0&&i!=="hasErrorBoundary";pd(!l,'Route "'+r.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!l&&!Z9.has(i)&&(o[i]=s[i])}Object.assign(r,o),Object.assign(r,vn({},e(r),{lazy:void 0}))}async function pf(t,e,n,s,r,o,i,a,l){l===void 0&&(l={});let u,c,d,h=m=>{let g,y=new Promise((b,v)=>g=v);return d=()=>g(),e.signal.addEventListener("abort",d),Promise.race([m({request:e,params:n.params,context:l.requestContext}),y])};try{let m=n.route[t];if(n.route.lazy)if(m){let g,y=await Promise.all([h(m).catch(b=>{g=b}),qI(n.route,o,r)]);if(g)throw g;c=y[0]}else if(await qI(n.route,o,r),m=n.route[t],m)c=await h(m);else if(t==="action"){let g=new URL(e.url),y=g.pathname+g.search;throw Kr(405,{method:e.method,pathname:y,routeId:n.route.id})}else return{type:yn.data,data:void 0};else if(m)c=await h(m);else{let g=new URL(e.url),y=g.pathname+g.search;throw Kr(404,{pathname:y})}Ct(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(m){u=yn.error,c=m}finally{d&&e.signal.removeEventListener("abort",d)}if(DU(c)){let m=c.status;if(SU.has(m)){let y=c.headers.get("Location");if(Ct(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!DO.test(y))y=IS(new URL(e.url),s.slice(0,s.indexOf(n)+1),i,!0,y,a);else if(!l.isStaticRequest){let b=new URL(e.url),v=y.startsWith("//")?new URL(b.protocol+y):new URL(y),x=mm(v.pathname,i)!=null;v.origin===b.origin&&x&&(y=v.pathname+v.search+v.hash)}if(l.isStaticRequest)throw c.headers.set("Location",y),c;return{type:yn.redirect,status:m,location:y,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===yn.error?yn.error:yn.data,response:c};let g;try{let y=c.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?c.body==null?g=null:g=await c.json():g=await c.text()}catch(y){return{type:yn.error,error:y}}return u===yn.error?{type:u,error:new Yk(m,c.statusText,g),headers:c.headers}:{type:yn.data,data:g,statusCode:c.status,headers:c.headers}}if(u===yn.error)return{type:u,error:c};if(AU(c)){var f,p;return{type:yn.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((p=c.init)==null?void 0:p.headers)&&new Headers(c.init.headers)}}return{type:yn.data,data:c}}function mf(t,e,n,s){let r=t.createURL(LO(e)).toString(),o={signal:n};if(s&&Co(s.formMethod)){let{formMethod:i,formEncType:a}=s;o.method=i.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(s.json)):a==="text/plain"?o.body=s.text:a==="application/x-www-form-urlencoded"&&s.formData?o.body=RS(s.formData):o.body=s.formData}return new Request(r,o)}function RS(t){let e=new URLSearchParams;for(let[n,s]of t.entries())e.append(n,typeof s=="string"?s:s.name);return e}function KI(t){let e=new FormData;for(let[n,s]of t.entries())e.append(n,s);return e}function RU(t,e,n,s,r){let o={},i=null,a,l=!1,u={};return n.forEach((c,d)=>{let h=e[d].route.id;if(Ct(!Kl(c),"Cannot handle redirect results in processLoaderData"),_c(c)){let f=ep(t,h),p=c.error;s&&(p=Object.values(s)[0],s=void 0),i=i||{},i[f.route.id]==null&&(i[f.route.id]=p),o[h]=void 0,l||(l=!0,a=_O(c.error)?c.error.status:500),c.headers&&(u[h]=c.headers)}else ql(c)?(r.set(h,c.deferredData),o[h]=c.deferredData.data):o[h]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(a=c.statusCode),c.headers&&(u[h]=c.headers)}),s&&(i=s,o[Object.keys(s)[0]]=void 0),{loaderData:o,errors:i,statusCode:a||200,loaderHeaders:u}}function XI(t,e,n,s,r,o,i,a){let{loaderData:l,errors:u}=RU(e,n,s,r,a);for(let c=0;c<o.length;c++){let{key:d,match:h,controller:f}=o[c];Ct(i!==void 0&&i[c]!==void 0,"Did not find corresponding fetcher result");let p=i[c];if(!(f&&f.signal.aborted))if(_c(p)){let m=ep(t.matches,h==null?void 0:h.route.id);u&&u[m.route.id]||(u=vn({},u,{[m.route.id]:p.error})),t.fetchers.delete(d)}else if(Kl(p))Ct(!1,"Unhandled fetcher revalidation redirect");else if(ql(p))Ct(!1,"Unhandled fetcher deferred data");else{let m=va(p.data);t.fetchers.set(d,m)}}return{loaderData:l,errors:u}}function YI(t,e,n,s){let r=vn({},e);for(let o of n){let i=o.route.id;if(e.hasOwnProperty(i)?e[i]!==void 0&&(r[i]=e[i]):t[i]!==void 0&&o.route.loader&&(r[i]=t[i]),s&&s.hasOwnProperty(i))break}return r}function ep(t,e){return(e?t.slice(0,t.findIndex(s=>s.route.id===e)+1):[...t]).reverse().find(s=>s.route.hasErrorBoundary===!0)||t[0]}function QI(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Kr(t,e){let{pathname:n,routeId:s,method:r,type:o}=e===void 0?{}:e,i="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(i="Bad Request",r&&n&&s?a="You made a "+r+' request to "'+n+'" but '+('did not provide a `loader` for route "'+s+'", ')+"so there is no way to handle the request.":o==="defer-action"?a="defer() is not supported in actions":o==="invalid-body"&&(a="Unable to encode submission body")):t===403?(i="Forbidden",a='Route "'+s+'" does not match URL "'+n+'"'):t===404?(i="Not Found",a='No route matches URL "'+n+'"'):t===405&&(i="Method Not Allowed",r&&n&&s?a="You made a "+r.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+s+'", ')+"so there is no way to handle the request.":r&&(a='Invalid request method "'+r.toUpperCase()+'"')),new Yk(t||500,i,new Error(a),!0)}function ZI(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Kl(n))return{result:n,idx:e}}}function LO(t){let e=typeof t=="string"?Zi(t):t;return pm(vn({},e,{hash:""}))}function _U(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function ql(t){return t.type===yn.deferred}function _c(t){return t.type===yn.error}function Kl(t){return(t&&t.type)===yn.redirect}function AU(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function DU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function OU(t){return wU.has(t.toLowerCase())}function Co(t){return vU.has(t.toLowerCase())}async function JI(t,e,n,s,r,o){for(let i=0;i<n.length;i++){let a=n[i],l=e[i];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!FO(u,l)&&(o&&o[l.route.id])!==void 0;if(ql(a)&&(r||c)){let d=s[i];Ct(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await PO(a,d,r).then(h=>{h&&(n[i]=h||n[i])})}}}async function PO(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:yn.data,data:t.deferredData.unwrappedData}}catch(r){return{type:yn.error,error:r}}return{type:yn.data,data:t.deferredData.data}}}function Qk(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function _S(t,e){let n=typeof e=="string"?Zi(e).search:e.search;if(t[t.length-1].route.index&&Qk(n||""))return t[t.length-1];let s=EO(t);return s[s.length-1]}function eR(t){let{formMethod:e,formAction:n,formEncType:s,text:r,formData:o,json:i}=t;if(!(!e||!n||!s)){if(r!=null)return{formMethod:e,formAction:n,formEncType:s,formData:void 0,json:void 0,text:r};if(o!=null)return{formMethod:e,formAction:n,formEncType:s,formData:o,json:void 0,text:void 0};if(i!==void 0)return{formMethod:e,formAction:n,formEncType:s,formData:void 0,json:i,text:void 0}}}function Fx(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function FU(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function gf(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function LU(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function va(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function PU(t,e){try{let n=t.sessionStorage.getItem(OO);if(n){let s=JSON.parse(n);for(let[r,o]of Object.entries(s||{}))o&&Array.isArray(o)&&e.set(r,new Set(o||[]))}}catch{}}function MU(t,e){if(e.size>0){let n={};for(let[s,r]of e)n[s]=[...r];try{t.sessionStorage.setItem(OO,JSON.stringify(n))}catch(s){pd(!1,"Failed to save applied view transitions in sessionStorage ("+s+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $p(){return $p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$p.apply(this,arguments)}const i2=_.createContext(null),MO=_.createContext(null),a2=_.createContext(null),l2=_.createContext(null),pl=_.createContext({outlet:null,matches:[],isDataRoute:!1}),zO=_.createContext(null);function u2(){return _.useContext(l2)!=null}function BO(){return u2()||Ct(!1),_.useContext(l2).location}function VO(t){_.useContext(a2).static||_.useLayoutEffect(t)}function mi(){let{isDataRoute:t}=_.useContext(pl);return t?JU():zU()}function zU(){u2()||Ct(!1);let t=_.useContext(i2),{basename:e,future:n,navigator:s}=_.useContext(a2),{matches:r}=_.useContext(pl),{pathname:o}=BO(),i=JSON.stringify(IO(r,n.v7_relativeSplatPath)),a=_.useRef(!1);return VO(()=>{a.current=!0}),_.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){s.go(u);return}let d=RO(u,JSON.parse(i),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ha([e,d.pathname])),(c.replace?s.replace:s.push)(d,c.state,c)},[e,s,i,o,t])}const BU=_.createContext(null);function VU(t){let e=_.useContext(pl).outlet;return e&&_.createElement(BU.Provider,{value:t},e)}function UU(){let{matches:t}=_.useContext(pl),e=t[t.length-1];return e?e.params:{}}function WU(t,e,n,s){u2()||Ct(!1);let{navigator:r}=_.useContext(a2),{matches:o}=_.useContext(pl),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=BO(),c;if(e){var d;let g=typeof e=="string"?Zi(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||Ct(!1),c=g}else c=u;let h=c.pathname||"/",f=h;if(l!=="/"){let g=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=Rc(t,{pathname:f}),m=KU(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Ha([l,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Ha([l,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,s);return e&&m?_.createElement(l2.Provider,{value:{location:$p({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:$n.Pop}},m):m}function jU(){let t=ZU(),e=_O(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:r},n):null,null)}const GU=_.createElement(jU,null);class HU extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(pl.Provider,{value:this.props.routeContext},_.createElement(zO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qU(t){let{routeContext:e,match:n,children:s}=t,r=_.useContext(i2);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(pl.Provider,{value:e},s)}function KU(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let i=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let c=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));c>=0||Ct(!1),i=i.slice(0,Math.min(i.length,c+1))}let l=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,d,h)=>{let f,p=!1,m=null,g=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||GU,l&&(u<0&&h===0?(eW("route-fallback",!1),p=!0,g=null):u===h&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,h+1)),b=()=>{let v;return f?v=m:p?v=g:d.route.Component?v=_.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=c,_.createElement(qU,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?_.createElement(HU,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var UO=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UO||{}),Jy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Jy||{});function XU(t){let e=_.useContext(i2);return e||Ct(!1),e}function YU(t){let e=_.useContext(MO);return e||Ct(!1),e}function QU(t){let e=_.useContext(pl);return e||Ct(!1),e}function WO(t){let e=QU(),n=e.matches[e.matches.length-1];return n.route.id||Ct(!1),n.route.id}function ZU(){var t;let e=_.useContext(zO),n=YU(Jy.UseRouteError),s=WO(Jy.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function JU(){let{router:t}=XU(UO.UseNavigateStable),e=WO(Jy.UseNavigateStable),n=_.useRef(!1);return VO(()=>{n.current=!0}),_.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,$p({fromRouteId:e},o)))},[t,e])}const tR={};function eW(t,e,n){!e&&!tR[t]&&(tR[t]=!0)}function tW(t){return VU(t.context)}function nW(t){let{basename:e="/",children:n=null,location:s,navigationType:r=$n.Pop,navigator:o,static:i=!1,future:a}=t;u2()&&Ct(!1);let l=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:l,navigator:o,static:i,future:$p({v7_relativeSplatPath:!1},a)}),[l,a,o,i]);typeof s=="string"&&(s=Zi(s));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=s,m=_.useMemo(()=>{let g=mm(c,l);return g==null?null:{location:{pathname:g,search:d,hash:h,state:f,key:p},navigationType:r}},[l,c,d,h,f,p,r]);return m==null?null:_.createElement(a2.Provider,{value:u},_.createElement(l2.Provider,{children:n,value:m}))}new Promise(()=>{});function sW(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:_.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:_.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:_.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function e1(){return e1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},e1.apply(this,arguments)}const rW="6";try{window.__reactRouterVersion=rW}catch{}function oW(t,e){return TU({basename:e==null?void 0:e.basename,future:e1({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:X9({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||iW(),routes:t,mapRouteProperties:sW,window:e==null?void 0:e.window}).initialize()}function iW(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=e1({},e,{errors:aW(e.errors)})),e}function aW(t){if(!t)return null;let e=Object.entries(t),n={};for(let[s,r]of e)if(r&&r.__type==="RouteErrorResponse")n[s]=new Yk(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let o=window[r.__subType];if(typeof o=="function")try{let i=new o(r.message);i.stack="",n[s]=i}catch{}}if(n[s]==null){let o=new Error(r.message);o.stack="",n[s]=o}}else n[s]=r;return n}const lW=_.createContext({isTransitioning:!1}),uW=_.createContext(new Map),cW="startTransition",nR=sV[cW],dW="flushSync",sR=K9[dW];function hW(t){nR?nR(t):t()}function yf(t){sR?sR(t):t()}class fW{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=s=>{this.status==="pending"&&(this.status="resolved",e(s))},this.reject=s=>{this.status==="pending"&&(this.status="rejected",n(s))}})}}function pW(t){let{fallbackElement:e,router:n,future:s}=t,[r,o]=_.useState(n.state),[i,a]=_.useState(),[l,u]=_.useState({isTransitioning:!1}),[c,d]=_.useState(),[h,f]=_.useState(),[p,m]=_.useState(),g=_.useRef(new Map),{v7_startTransition:y}=s||{},b=_.useCallback(k=>{y?hW(k):k()},[y]),v=_.useCallback((k,N)=>{let{deletedFetchers:$,unstable_flushSync:I,unstable_viewTransitionOpts:A}=N;$.forEach(P=>g.current.delete(P)),k.fetchers.forEach((P,F)=>{P.data!==void 0&&g.current.set(F,P.data)});let O=n.window==null||typeof n.window.document.startViewTransition!="function";if(!A||O){I?yf(()=>o(k)):b(()=>o(k));return}if(I){yf(()=>{h&&(c&&c.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:A.currentLocation,nextLocation:A.nextLocation})});let P=n.window.document.startViewTransition(()=>{yf(()=>o(k))});P.finished.finally(()=>{yf(()=>{d(void 0),f(void 0),a(void 0),u({isTransitioning:!1})})}),yf(()=>f(P));return}h?(c&&c.resolve(),h.skipTransition(),m({state:k,currentLocation:A.currentLocation,nextLocation:A.nextLocation})):(a(k),u({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}))},[n.window,h,c,g,b]);_.useLayoutEffect(()=>n.subscribe(v),[n,v]),_.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new fW)},[l]),_.useEffect(()=>{if(c&&i&&n.window){let k=i,N=c.promise,$=n.window.document.startViewTransition(async()=>{b(()=>o(k)),await N});$.finished.finally(()=>{d(void 0),f(void 0),a(void 0),u({isTransitioning:!1})}),f($)}},[b,i,c,n.window]),_.useEffect(()=>{c&&i&&r.location.key===i.location.key&&c.resolve()},[c,h,r.location,i]),_.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),u({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]),_.useEffect(()=>{},[]);let x=_.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:k=>n.navigate(k),push:(k,N,$)=>n.navigate(k,{state:N,preventScrollReset:$==null?void 0:$.preventScrollReset}),replace:(k,N,$)=>n.navigate(k,{replace:!0,state:N,preventScrollReset:$==null?void 0:$.preventScrollReset})}),[n]),w=n.basename||"/",S=_.useMemo(()=>({router:n,navigator:x,static:!1,basename:w}),[n,x,w]);return _.createElement(_.Fragment,null,_.createElement(i2.Provider,{value:S},_.createElement(MO.Provider,{value:r},_.createElement(uW.Provider,{value:g.current},_.createElement(lW.Provider,{value:l},_.createElement(nW,{basename:w,location:r.location,navigationType:r.historyAction,navigator:x,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},r.initialized||n.future.v7_partialHydration?_.createElement(mW,{routes:n.routes,future:n.future,state:r}):e))))),null)}function mW(t){let{routes:e,future:n,state:s}=t;return WU(e,void 0,s,n)}var rR;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rR||(rR={}));var oR;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oR||(oR={}));var jO={};function gW(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var yW=gW,yt=yW;function bW(t){return!!t&&typeof t.then=="function"}var Jt=bW;function vW(t,e){if(t!=null)return t;throw yt(e??"Got unexpected null or undefined")}var an=vW;function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class c2{getValue(){throw yt("BaseLoadable")}toPromise(){throw yt("BaseLoadable")}valueMaybe(){throw yt("BaseLoadable")}valueOrThrow(){throw yt(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw yt("BaseLoadable")}promiseOrThrow(){throw yt(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw yt("BaseLoadable")}errorOrThrow(){throw yt(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw yt("BaseLoadable")}}class xW extends c2{constructor(e){super(),ut(this,"state","hasValue"),ut(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Jt(n)?wu(n):md(n)?n:gm(n)}catch(n){return Jt(n)?wu(n.next(()=>this.map(e))):d2(n)}}}class wW extends c2{constructor(e){super(),ut(this,"state","hasError"),ut(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class GO extends c2{constructor(e){super(),ut(this,"state","loading"),ut(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return wu(this.contents.then(n=>{const s=e(n);if(md(s)){const r=s;switch(r.state){case"hasValue":return r.contents;case"hasError":throw r.contents;case"loading":return r.contents}}return s}).catch(n=>{if(Jt(n))return n.then(()=>this.map(e).contents);throw n}))}}function gm(t){return Object.freeze(new xW(t))}function d2(t){return Object.freeze(new wW(t))}function wu(t){return Object.freeze(new GO(t))}function HO(){return Object.freeze(new GO(new Promise(()=>{})))}function SW(t){return t.every(e=>e.state==="hasValue")?gm(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?d2(an(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):wu(Promise.all(t.map(e=>e.contents)))}function qO(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(r=>t[r])).map(r=>md(r)?r:Jt(r)?wu(r):gm(r)),s=SW(n);return Array.isArray(t)?s:s.map(r=>Object.getOwnPropertyNames(t).reduce((o,i,a)=>({...o,[i]:r[a]}),{}))}function md(t){return t instanceof c2}const CW={of:t=>Jt(t)?wu(t):md(t)?t:gm(t),error:t=>d2(t),loading:()=>HO(),all:qO,isLoadable:md};var Uu={loadableWithValue:gm,loadableWithError:d2,loadableWithPromise:wu,loadableLoading:HO,loadableAll:qO,isLoadable:md,RecoilLoadable:CW},kW=Uu.loadableWithValue,NW=Uu.loadableWithError,TW=Uu.loadableWithPromise,$W=Uu.loadableLoading,EW=Uu.loadableAll,IW=Uu.isLoadable,RW=Uu.RecoilLoadable,ym=Object.freeze({__proto__:null,loadableWithValue:kW,loadableWithError:NW,loadableWithPromise:TW,loadableLoading:$W,loadableAll:EW,isLoadable:IW,RecoilLoadable:RW});const AS={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function _W(t,e){var n,s;const r=(n=jO[t])===null||n===void 0||(s=n.toLowerCase())===null||s===void 0?void 0:s.trim();if(r==null||r==="")return;if(!["true","false"].includes(r))throw yt(`process.env.${t} value must be 'true', 'false', or empty: ${r}`);e(r==="true")}function AW(t,e){var n;const s=(n=jO[t])===null||n===void 0?void 0:n.trim();s==null||s===""||e(s.split(/\s*,\s*|\s+/))}function DW(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(_W("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{AS.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),AW("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{AS.RECOIL_GKS_ENABLED.add(n)})}))}DW();var Vd=AS;function h2(t){return Vd.RECOIL_GKS_ENABLED.has(t)}h2.setPass=t=>{Vd.RECOIL_GKS_ENABLED.add(t)};h2.setFail=t=>{Vd.RECOIL_GKS_ENABLED.delete(t)};h2.clear=()=>{Vd.RECOIL_GKS_ENABLED.clear()};var Ut=h2;function OW(t,e,{error:n}={}){return null}var FW=OW,Zk=FW,Lx,Px,Mx;const LW=(Lx=Ze.createMutableSource)!==null&&Lx!==void 0?Lx:Ze.unstable_createMutableSource,KO=(Px=Ze.useMutableSource)!==null&&Px!==void 0?Px:Ze.unstable_useMutableSource,XO=(Mx=Ze.useSyncExternalStore)!==null&&Mx!==void 0?Mx:Ze.unstable_useSyncExternalStore;function PW(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function MW(){return Ut("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Ut("recoil_sync_external_store")&&XO!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Ut("recoil_mutable_source")&&KO!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Ut("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Ut("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function zW(){return!1}var bm={createMutableSource:LW,useMutableSource:KO,useSyncExternalStore:XO,currentRendererSupportsUseSyncExternalStore:PW,reactMode:MW,isFastRefreshEnabled:zW};class Jk{constructor(e){ut(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class YO extends Jk{}class QO extends Jk{}function BW(t){return t instanceof YO||t instanceof QO}var f2={AbstractRecoilValue:Jk,RecoilState:YO,RecoilValueReadOnly:QO,isRecoilValue:BW},VW=f2.AbstractRecoilValue,UW=f2.RecoilState,WW=f2.RecoilValueReadOnly,jW=f2.isRecoilValue,gd=Object.freeze({__proto__:null,AbstractRecoilValue:VW,RecoilState:UW,RecoilValueReadOnly:WW,isRecoilValue:jW});function GW(t,e){return function*(){let n=0;for(const s of t)yield e(s,n++)}()}var p2=GW;class ZO{}const HW=new ZO,Su=new Map,eN=new Map;function qW(t){return p2(t,e=>an(eN.get(e)))}function KW(t){if(Su.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function XW(t){Vd.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&KW(t.key),Su.set(t.key,t);const e=t.set==null?new gd.RecoilValueReadOnly(t.key):new gd.RecoilState(t.key);return eN.set(t.key,e),e}class JO extends Error{}function YW(t){const e=Su.get(t);if(e==null)throw new JO(`Missing definition for RecoilValue: "${t}""`);return e}function QW(t){return Su.get(t)}const t1=new Map;function ZW(t){var e;if(!Ut("recoil_memory_managament_2020"))return;const n=Su.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var s;Su.delete(t),(s=e4(t))===null||s===void 0||s(),t1.delete(t)}}function JW(t,e){Ut("recoil_memory_managament_2020")&&(e===void 0?t1.delete(t):t1.set(t,e))}function e4(t){return t1.get(t)}var mr={nodes:Su,recoilValues:eN,registerNode:XW,getNode:YW,getNodeMaybe:QW,deleteNodeConfigIfPossible:ZW,setConfigDeletionHandler:JW,getConfigDeletionHandler:e4,recoilValuesForKeys:qW,NodeMissingError:JO,DefaultValue:ZO,DEFAULT_VALUE:HW};function ej(t,e){e()}var tj={enqueueExecution:ej};function nj(t,e){return e={exports:{}},t(e,e.exports),e.exports}var sj=nj(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},n={},s=5,r=Math.pow(2,s),o=r-1,i=r/2,a=r/4,l={},u=function(J){return function(){return J}},c=n.hash=function(re){var J=typeof re>"u"?"undefined":e(re);if(J==="number")return re;J!=="string"&&(re+="");for(var be=0,_e=0,Re=re.length;_e<Re;++_e){var Pe=re.charCodeAt(_e);be=(be<<5)-be+Pe|0}return be},d=function(J){return J-=J>>1&1431655765,J=(J&858993459)+(J>>2&858993459),J=J+(J>>4)&252645135,J+=J>>8,J+=J>>16,J&127},h=function(J,be){return be>>>J&o},f=function(J){return 1<<J},p=function(J,be){return d(J&be-1)},m=function(J,be,_e,Re){var Pe=Re;if(!J){var Je=Re.length;Pe=new Array(Je);for(var et=0;et<Je;++et)Pe[et]=Re[et]}return Pe[be]=_e,Pe},g=function(J,be,_e){var Re=_e.length-1,Pe=0,Je=0,et=_e;if(J)Pe=Je=be;else for(et=new Array(Re);Pe<be;)et[Je++]=_e[Pe++];for(++Pe;Pe<=Re;)et[Je++]=_e[Pe++];return J&&(et.length=Re),et},y=function(J,be,_e,Re){var Pe=Re.length;if(J){for(var Je=Pe;Je>=be;)Re[Je--]=Re[Je];return Re[be]=_e,Re}for(var et=0,U=0,Y=new Array(Pe+1);et<be;)Y[U++]=Re[et++];for(Y[be]=_e;et<Pe;)Y[++U]=Re[et++];return Y},b=1,v=2,x=3,w=4,S={__hamt_isEmpty:!0},k=function(J){return J===S||J&&J.__hamt_isEmpty},N=function(J,be,_e,Re){return{type:b,edit:J,hash:be,key:_e,value:Re,_modify:B}},$=function(J,be,_e){return{type:v,edit:J,hash:be,children:_e,_modify:H}},I=function(J,be,_e){return{type:x,edit:J,mask:be,children:_e,_modify:K}},A=function(J,be,_e){return{type:w,edit:J,size:be,children:_e,_modify:ne}},O=function(J){return J===S||J.type===b||J.type===v},P=function(J,be,_e,Re,Pe){for(var Je=[],et=Re,U=0,Y=0;et;++Y)et&1&&(Je[Y]=Pe[U++]),et>>>=1;return Je[be]=_e,A(J,U+1,Je)},F=function(J,be,_e,Re){for(var Pe=new Array(be-1),Je=0,et=0,U=0,Y=Re.length;U<Y;++U)if(U!==_e){var ce=Re[U];ce&&!k(ce)&&(Pe[Je++]=ce,et|=1<<U)}return I(J,et,Pe)},G=function re(J,be,_e,Re,Pe,Je){if(_e===Pe)return $(J,_e,[Je,Re]);var et=h(be,_e),U=h(be,Pe);return I(J,f(et)|f(U),et===U?[re(J,be+s,_e,Re,Pe,Je)]:et<U?[Re,Je]:[Je,Re])},q=function(J,be,_e,Re,Pe,Je,et,U){for(var Y=Pe.length,ce=0;ce<Y;++ce){var ve=Pe[ce];if(_e(et,ve.key)){var Te=ve.value,Qe=Je(Te);return Qe===Te?Pe:Qe===l?(--U.value,g(J,ce,Pe)):m(J,ce,N(be,Re,et,Qe),Pe)}}var Ge=Je();return Ge===l?Pe:(++U.value,m(J,Y,N(be,Re,et,Ge),Pe))},Z=function(J,be){return J===be.edit},B=function(J,be,_e,Re,Pe,Je,et){if(be(Je,this.key)){var U=Re(this.value);return U===this.value?this:U===l?(--et.value,S):Z(J,this)?(this.value=U,this):N(J,Pe,Je,U)}var Y=Re();return Y===l?this:(++et.value,G(J,_e,this.hash,this,Pe,N(J,Pe,Je,Y)))},H=function(J,be,_e,Re,Pe,Je,et){if(Pe===this.hash){var U=Z(J,this),Y=q(U,J,be,this.hash,this.children,Re,Je,et);return Y===this.children?this:Y.length>1?$(J,this.hash,Y):Y[0]}var ce=Re();return ce===l?this:(++et.value,G(J,_e,this.hash,this,Pe,N(J,Pe,Je,ce)))},K=function(J,be,_e,Re,Pe,Je,et){var U=this.mask,Y=this.children,ce=h(_e,Pe),ve=f(ce),Te=p(U,ve),Qe=U&ve,Ge=Qe?Y[Te]:S,Xe=Ge._modify(J,be,_e+s,Re,Pe,Je,et);if(Ge===Xe)return this;var He=Z(J,this),dt=U,sn=void 0;if(Qe&&k(Xe)){if(dt&=~ve,!dt)return S;if(Y.length<=2&&O(Y[Te^1]))return Y[Te^1];sn=g(He,Te,Y)}else if(!Qe&&!k(Xe)){if(Y.length>=i)return P(J,ce,Xe,U,Y);dt|=ve,sn=y(He,Te,Xe,Y)}else sn=m(He,Te,Xe,Y);return He?(this.mask=dt,this.children=sn,this):I(J,dt,sn)},ne=function(J,be,_e,Re,Pe,Je,et){var U=this.size,Y=this.children,ce=h(_e,Pe),ve=Y[ce],Te=(ve||S)._modify(J,be,_e+s,Re,Pe,Je,et);if(ve===Te)return this;var Qe=Z(J,this),Ge=void 0;if(k(ve)&&!k(Te))++U,Ge=m(Qe,ce,Te,Y);else if(!k(ve)&&k(Te)){if(--U,U<=a)return F(J,U,ce,Y);Ge=m(Qe,ce,S,Y)}else Ge=m(Qe,ce,Te,Y);return Qe?(this.size=U,this.children=Ge,this):A(J,U,Ge)};S._modify=function(re,J,be,_e,Re,Pe,Je){var et=_e();return et===l?S:(++Je.value,N(re,Re,Pe,et))};function D(re,J,be,_e,Re){this._editable=re,this._edit=J,this._config=be,this._root=_e,this._size=Re}D.prototype.setTree=function(re,J){return this._editable?(this._root=re,this._size=J,this):re===this._root?this:new D(this._editable,this._edit,this._config,re,J)};var X=n.tryGetHash=function(re,J,be,_e){for(var Re=_e._root,Pe=0,Je=_e._config.keyEq;;)switch(Re.type){case b:return Je(be,Re.key)?Re.value:re;case v:{if(J===Re.hash)for(var et=Re.children,U=0,Y=et.length;U<Y;++U){var ce=et[U];if(Je(be,ce.key))return ce.value}return re}case x:{var ve=h(Pe,J),Te=f(ve);if(Re.mask&Te){Re=Re.children[p(Re.mask,Te)],Pe+=s;break}return re}case w:{if(Re=Re.children[h(Pe,J)],Re){Pe+=s;break}return re}default:return re}};D.prototype.tryGetHash=function(re,J,be){return X(re,J,be,this)};var te=n.tryGet=function(re,J,be){return X(re,be._config.hash(J),J,be)};D.prototype.tryGet=function(re,J){return te(re,J,this)};var ue=n.getHash=function(re,J,be){return X(void 0,re,J,be)};D.prototype.getHash=function(re,J){return ue(re,J,this)},n.get=function(re,J){return X(void 0,J._config.hash(re),re,J)},D.prototype.get=function(re,J){return te(J,re,this)};var ie=n.has=function(re,J,be){return X(l,re,J,be)!==l};D.prototype.hasHash=function(re,J){return ie(re,J,this)};var me=n.has=function(re,J){return ie(J._config.hash(re),re,J)};D.prototype.has=function(re){return me(re,this)};var xe=function(J,be){return J===be};n.make=function(re){return new D(0,0,{keyEq:re&&re.keyEq||xe,hash:re&&re.hash||c},S,0)},n.empty=n.make();var fe=n.isEmpty=function(re){return re&&!!k(re._root)};D.prototype.isEmpty=function(){return fe(this)};var De=n.modifyHash=function(re,J,be,_e){var Re={value:_e._size},Pe=_e._root._modify(_e._editable?_e._edit:NaN,_e._config.keyEq,0,re,J,be,Re);return _e.setTree(Pe,Re.value)};D.prototype.modifyHash=function(re,J,be){return De(be,re,J,this)};var Ie=n.modify=function(re,J,be){return De(re,be._config.hash(J),J,be)};D.prototype.modify=function(re,J){return Ie(J,re,this)};var Le=n.setHash=function(re,J,be,_e){return De(u(be),re,J,_e)};D.prototype.setHash=function(re,J,be){return Le(re,J,be,this)};var Ke=n.set=function(re,J,be){return Le(be._config.hash(re),re,J,be)};D.prototype.set=function(re,J){return Ke(re,J,this)};var mt=u(l),ot=n.removeHash=function(re,J,be){return De(mt,re,J,be)};D.prototype.removeHash=D.prototype.deleteHash=function(re,J){return ot(re,J,this)};var rt=n.remove=function(re,J){return ot(J._config.hash(re),re,J)};D.prototype.remove=D.prototype.delete=function(re){return rt(re,this)};var ct=n.beginMutation=function(re){return new D(re._editable+1,re._edit+1,re._config,re._root,re._size)};D.prototype.beginMutation=function(){return ct(this)};var z=n.endMutation=function(re){return re._editable=re._editable&&re._editable-1,re};D.prototype.endMutation=function(){return z(this)};var oe=n.mutate=function(re,J){var be=ct(J);return re(be),z(be)};D.prototype.mutate=function(re){return oe(re,this)};var ae=function(J){return J&&ke(J[0],J[1],J[2],J[3],J[4])},ke=function(J,be,_e,Re,Pe){for(;_e<J;){var Je=be[_e++];if(Je&&!k(Je))return we(Je,Re,[J,be,_e,Re,Pe])}return ae(Pe)},we=function(J,be,_e){switch(J.type){case b:return{value:be(J),rest:_e};case v:case w:case x:var Re=J.children;return ke(Re.length,Re,0,be,_e);default:return ae(_e)}},ye={done:!0};function Ee(re){this.v=re}Ee.prototype.next=function(){if(!this.v)return ye;var re=this.v;return this.v=ae(re.rest),re},Ee.prototype[Symbol.iterator]=function(){return this};var nt=function(J,be){return new Ee(we(J._root,be))},_t=function(J){return[J.key,J.value]},Ft=n.entries=function(re){return nt(re,_t)};D.prototype.entries=D.prototype[Symbol.iterator]=function(){return Ft(this)};var Vn=function(J){return J.key},Jn=n.keys=function(re){return nt(re,Vn)};D.prototype.keys=function(){return Jn(this)};var zr=function(J){return J.value},Br=n.values=D.prototype.values=function(re){return nt(re,zr)};D.prototype.values=function(){return Br(this)};var Si=n.fold=function(re,J,be){var _e=be._root;if(_e.type===b)return re(J,_e.value,_e.key);for(var Re=[_e.children],Pe=void 0;Pe=Re.pop();)for(var Je=0,et=Pe.length;Je<et;){var U=Pe[Je++];U&&U.type&&(U.type===b?J=re(J,U.value,U.key):Re.push(U.children))}return J};D.prototype.fold=function(re,J){return Si(re,J,this)};var po=n.forEach=function(re,J){return Si(function(be,_e,Re){return re(_e,Re,J)},null,J)};D.prototype.forEach=function(re){return po(re,this)};var ca=n.count=function(re){return re._size};D.prototype.count=function(){return ca(this)},Object.defineProperty(D.prototype,"size",{get:D.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class rj{constructor(e){ut(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return nN(this)}toMap(){return new Map(this._map)}}class tN{constructor(e){if(ut(this,"_hamt",sj.empty.beginMutation()),e instanceof tN){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,s]of e.entries())this._hamt.set(n,s)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return nN(this)}toMap(){return new Map(this._hamt)}}function nN(t){return Ut("recoil_hamt_2020")?new tN(t):new rj(t)}var oj={persistentMap:nN},ij=oj.persistentMap,aj=Object.freeze({__proto__:null,persistentMap:ij});function lj(t,...e){const n=new Set;e:for(const s of t){for(const r of e)if(r.has(s))continue e;n.add(s)}return n}var tp=lj;function uj(t,e){const n=new Map;return t.forEach((s,r)=>{n.set(r,e(s,r))}),n}var n1=uj;function cj(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function dj(t){return{nodeDeps:n1(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:n1(t.nodeToNodeSubscriptions,e=>new Set(e))}}function zx(t,e,n,s){const{nodeDeps:r,nodeToNodeSubscriptions:o}=n,i=r.get(t);if(i&&s&&i!==s.nodeDeps.get(t))return;r.set(t,e);const a=i==null?e:tp(e,i);for(const l of a)o.has(l)||o.set(l,new Set),an(o.get(l)).add(t);if(i){const l=tp(i,e);for(const u of l){if(!o.has(u))return;const c=an(o.get(u));c.delete(t),c.size===0&&o.delete(u)}}}function hj(t,e,n,s){var r,o,i,a;const l=n.getState();s===l.currentTree.version||s===((r=l.nextTree)===null||r===void 0?void 0:r.version)||((o=l.previousTree)===null||o===void 0||o.version);const u=n.getGraph(s);if(zx(t,e,u),s===((i=l.previousTree)===null||i===void 0?void 0:i.version)){const d=n.getGraph(l.currentTree.version);zx(t,e,d,u)}if(s===((a=l.previousTree)===null||a===void 0?void 0:a.version)||s===l.currentTree.version){var c;const d=(c=l.nextTree)===null||c===void 0?void 0:c.version;if(d!==void 0){const h=n.getGraph(d);zx(t,e,h,u)}}}var vm={cloneGraph:dj,graph:cj,saveDepsToStore:hj};let fj=0;const pj=()=>fj++;let mj=0;const gj=()=>mj++;let yj=0;const bj=()=>yj++;var m2={getNextTreeStateVersion:pj,getNextStoreID:gj,getNextComponentID:bj};const{persistentMap:iR}=aj,{graph:vj}=vm,{getNextTreeStateVersion:t4}=m2;function n4(){const t=t4();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:iR(),nonvalidatedAtoms:iR()}}function xj(){const t=n4();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,vj()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var s4={makeEmptyTreeState:n4,makeEmptyStoreState:xj,getNextTreeStateVersion:t4};class r4{}function wj(){return new r4}var g2={RetentionZone:r4,retentionZone:wj};function Sj(t,e){const n=new Set(t);return n.add(e),n}function Cj(t,e){const n=new Set(t);return n.delete(e),n}function kj(t,e,n){const s=new Map(t);return s.set(e,n),s}function Nj(t,e,n){const s=new Map(t);return s.set(e,n(s.get(e))),s}function Tj(t,e){const n=new Map(t);return n.delete(e),n}function $j(t,e){const n=new Map(t);return e.forEach(s=>n.delete(s)),n}var o4={setByAddingToSet:Sj,setByDeletingFromSet:Cj,mapBySettingInMap:kj,mapByUpdatingInMap:Nj,mapByDeletingFromMap:Tj,mapByDeletingMultipleFromMap:$j};function*Ej(t,e){let n=0;for(const s of t)e(s,n++)&&(yield s)}var sN=Ej;function Ij(t,e){return new Proxy(t,{get:(s,r)=>(!(r in s)&&r in e&&(s[r]=e[r]()),s[r]),ownKeys:s=>Object.keys(s)})}var i4=Ij;const{getNode:xm,getNodeMaybe:Rj,recoilValuesForKeys:aR}=mr,{RetentionZone:lR}=g2,{setByAddingToSet:_j}=o4,Aj=Object.freeze(new Set);class Dj extends Error{}function Oj(t,e,n){if(!Ut("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:s}=t.getState().retention;function r(o){let i=s.get(o);i||s.set(o,i=new Set),i.add(e)}if(n instanceof lR)r(n);else if(Array.isArray(n))for(const o of n)r(o);return()=>{if(!Ut("recoil_memory_managament_2020"))return;const{retention:o}=t.getState();function i(a){const l=o.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&o.nodesRetainedByZone.delete(a)}if(n instanceof lR)i(n);else if(Array.isArray(n))for(const a of n)i(a)}}function rN(t,e,n,s){const r=t.getState();if(r.nodeCleanupFunctions.has(n))return;const o=xm(n),i=Oj(t,n,o.retainedBy),a=o.init(t,e,s);r.nodeCleanupFunctions.set(n,()=>{a(),i()})}function Fj(t,e,n){rN(t,t.getState().currentTree,e,n)}function Lj(t,e){var n;const s=t.getState();(n=s.nodeCleanupFunctions.get(e))===null||n===void 0||n(),s.nodeCleanupFunctions.delete(e)}function Pj(t,e,n){return rN(t,e,n,"get"),xm(n).get(t,e)}function a4(t,e,n){return xm(n).peek(t,e)}function Mj(t,e,n){var s;const r=Rj(e);return r==null||(s=r.invalidate)===null||s===void 0||s.call(r,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:_j(t.dirtyAtoms,e)}}function zj(t,e,n,s){const r=xm(n);if(r.set==null)throw new Dj(`Attempt to set read-only RecoilValue: ${n}`);const o=r.set;return rN(t,e,n,"set"),o(t,e,s)}function Bj(t,e,n){const s=t.getState(),r=t.getGraph(e.version),o=xm(n).nodeType;return i4({type:o},{loadable:()=>a4(t,e,n),isActive:()=>s.knownAtoms.has(n)||s.knownSelectors.has(n),isSet:()=>o==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var i;return aR((i=r.nodeDeps.get(n))!==null&&i!==void 0?i:[])},subscribers:()=>{var i,a;return{nodes:aR(sN(l4(t,e,new Set([n])),l=>l!==n)),components:p2((i=(a=s.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&i!==void 0?i:[],([l])=>({name:l}))}}})}function l4(t,e,n){const s=new Set,r=Array.from(n),o=t.getGraph(e.version);for(let a=r.pop();a;a=r.pop()){var i;s.add(a);const l=(i=o.nodeToNodeSubscriptions.get(a))!==null&&i!==void 0?i:Aj;for(const u of l)s.has(u)||r.push(u)}return s}var ml={getNodeLoadable:Pj,peekNodeLoadable:a4,setNodeValue:zj,initializeNode:Fj,cleanUpNode:Lj,setUnvalidatedAtomValue_DEPRECATED:Mj,peekNodeInfo:Bj,getDownstreamNodes:l4};let u4=null;function Vj(t){u4=t}function Uj(){var t;(t=u4)===null||t===void 0||t()}var c4={setInvalidateMemoizedSnapshot:Vj,invalidateMemoizedSnapshot:Uj};const{getDownstreamNodes:Wj,getNodeLoadable:d4,setNodeValue:jj}=ml,{getNextComponentID:Gj}=m2,{getNode:Hj,getNodeMaybe:h4}=mr,{DefaultValue:oN}=mr,{reactMode:qj}=bm,{AbstractRecoilValue:Kj,RecoilState:Xj,RecoilValueReadOnly:Yj,isRecoilValue:Qj}=gd,{invalidateMemoizedSnapshot:Zj}=c4;function Jj(t,{key:e},n=t.getState().currentTree){var s,r;const o=t.getState();n.version===o.currentTree.version||n.version===((s=o.nextTree)===null||s===void 0?void 0:s.version)||(n.version,(r=o.previousTree)===null||r===void 0||r.version);const i=d4(t,n,e);return i.state==="loading"&&i.contents.catch(()=>{}),i}function eG(t,e){const n=t.clone();return e.forEach((s,r)=>{s.state==="hasValue"&&s.contents instanceof oN?n.delete(r):n.set(r,s)}),n}function tG(t,e,{key:n},s){if(typeof s=="function"){const r=d4(t,e,n);if(r.state==="loading"){const o=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw yt(o)}else if(r.state==="hasError")throw r.contents;return s(r.contents)}else return s}function nG(t,e,n){if(n.type==="set"){const{recoilValue:r,valueOrUpdater:o}=n,i=tG(t,e,r,o),a=jj(t,e,r.key,i);for(const[l,u]of a.entries())DS(e,l,u)}else if(n.type==="setLoadable"){const{recoilValue:{key:r},loadable:o}=n;DS(e,r,o)}else if(n.type==="markModified"){const{recoilValue:{key:r}}=n;e.dirtyAtoms.add(r)}else if(n.type==="setUnvalidated"){var s;const{recoilValue:{key:r},unvalidatedValue:o}=n,i=h4(r);i==null||(s=i.invalidate)===null||s===void 0||s.call(i,e),e.atomValues.delete(r),e.nonvalidatedAtoms.set(r,o),e.dirtyAtoms.add(r)}else Zk(`Unknown action ${n.type}`)}function DS(t,e,n){n.state==="hasValue"&&n.contents instanceof oN?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function f4(t,e){t.replaceState(n=>{const s=p4(n);for(const r of e)nG(t,s,r);return m4(t,s),Zj(),s})}function y2(t,e){if(np.length){const n=np[np.length-1];let s=n.get(t);s||n.set(t,s=[]),s.push(e)}else f4(t,[e])}const np=[];function sG(){const t=new Map;return np.push(t),()=>{for(const[e,n]of t)f4(e,n);np.pop()}}function p4(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function m4(t,e){const n=Wj(t,e,e.dirtyAtoms);for(const o of n){var s,r;(s=h4(o))===null||s===void 0||(r=s.invalidate)===null||r===void 0||r.call(s,e)}}function g4(t,e,n){y2(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function rG(t,e,n){if(n instanceof oN)return g4(t,e,n);y2(t,{type:"setLoadable",recoilValue:e,loadable:n})}function oG(t,e){y2(t,{type:"markModified",recoilValue:e})}function iG(t,e,n){y2(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function aG(t,{key:e},n,s=null){const r=Gj(),o=t.getState();o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),an(o.nodeToComponentSubscriptions.get(e)).set(r,[s??"<not captured>",n]);const i=qj();if(i.early&&(i.mode==="LEGACY"||i.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(r)||(l.delete(r),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function lG(t,e){var n;const{currentTree:s}=t.getState(),r=Hj(e.key);(n=r.clearCache)===null||n===void 0||n.call(r,t,s)}var gi={RecoilValueReadOnly:Yj,AbstractRecoilValue:Kj,RecoilState:Xj,getRecoilValueAsLoadable:Jj,setRecoilValue:g4,setRecoilValueLoadable:rG,markRecoilValueModified:oG,setUnvalidatedRecoilValue:iG,subscribeToRecoilValue:aG,isRecoilValue:Qj,applyAtomValueWrites:eG,batchStart:sG,writeLoadableToTreeState:DS,invalidateDownstreams:m4,copyTreeState:p4,refreshRecoilValue:lG};function uG(t,e,n){const s=t.entries();let r=s.next();for(;!r.done;){const o=r.value;if(e.call(n,o[1],o[0],t))return!0;r=s.next()}return!1}var cG=uG;const{cleanUpNode:dG}=ml,{deleteNodeConfigIfPossible:hG,getNode:y4}=mr,{RetentionZone:b4}=g2,fG=12e4,v4=new Set;function x4(t,e){const n=t.getState(),s=n.currentTree;if(n.nextTree)return;const r=new Set;for(const i of e)if(i instanceof b4)for(const a of yG(n,i))r.add(a);else r.add(i);const o=pG(t,r);for(const i of o)gG(t,s,i)}function pG(t,e){const n=t.getState(),s=n.currentTree,r=t.getGraph(s.version),o=new Set,i=new Set;return a(e),o;function a(l){const u=new Set,c=mG(t,s,l,o,i);for(const p of c){var d;if(y4(p).retainedBy==="recoilRoot"){i.add(p);continue}if(((d=n.retention.referenceCounts.get(p))!==null&&d!==void 0?d:0)>0){i.add(p);continue}if(w4(p).some(g=>n.retention.referenceCounts.get(g))){i.add(p);continue}const m=r.nodeToNodeSubscriptions.get(p);if(m&&cG(m,g=>i.has(g))){i.add(p);continue}o.add(p),u.add(p)}const h=new Set;for(const p of u)for(const m of(f=r.nodeDeps.get(p))!==null&&f!==void 0?f:v4){var f;o.has(m)||h.add(m)}h.size&&a(h)}}function mG(t,e,n,s,r){const o=t.getGraph(e.version),i=[],a=new Set;for(;n.size>0;)l(an(n.values().next().value));return i;function l(u){if(s.has(u)||r.has(u)){n.delete(u);return}if(a.has(u))return;const c=o.nodeToNodeSubscriptions.get(u);if(c)for(const d of c)l(d);a.add(u),n.delete(u),i.push(u)}}function gG(t,e,n){if(!Ut("recoil_memory_managament_2020"))return;dG(t,n);const s=t.getState();s.knownAtoms.delete(n),s.knownSelectors.delete(n),s.nodeTransactionSubscriptions.delete(n),s.retention.referenceCounts.delete(n);const r=w4(n);for(const l of r){var o;(o=s.retention.nodesRetainedByZone.get(l))===null||o===void 0||o.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const i=s.graphsByVersion.get(e.version);if(i){const l=i.nodeDeps.get(n);if(l!==void 0){i.nodeDeps.delete(n);for(const u of l){var a;(a=i.nodeToNodeSubscriptions.get(u))===null||a===void 0||a.delete(n)}}i.nodeToNodeSubscriptions.delete(n)}hG(n)}function yG(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:v4}function w4(t){const e=y4(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof b4?[e]:e}function bG(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):x4(t,new Set([e]))}function vG(t,e,n){var s;if(!Ut("recoil_memory_managament_2020"))return;const r=t.getState().retention.referenceCounts,o=((s=r.get(e))!==null&&s!==void 0?s:0)+n;o===0?S4(t,e):r.set(e,o)}function S4(t,e){if(!Ut("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),bG(t,e)}function xG(t){if(!Ut("recoil_memory_managament_2020"))return;const e=t.getState();x4(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function wG(t){return t===void 0?"recoilRoot":t}var Wu={SUSPENSE_TIMEOUT_MS:fG,updateRetainCount:vG,updateRetainCountToZero:S4,releaseScheduledRetainablesNow:xG,retainedByOptionWithDefault:wG};const{unstable_batchedUpdates:SG}=Xk;var CG={unstable_batchedUpdates:SG};const{unstable_batchedUpdates:kG}=CG;var NG={unstable_batchedUpdates:kG};const{batchStart:TG}=gi,{unstable_batchedUpdates:$G}=NG;let iN=$G||(t=>t());const EG=t=>{iN=t},IG=()=>iN,RG=t=>{iN(()=>{let e=()=>{};try{e=TG(),t()}finally{e()}})};var b2={getBatcher:IG,setBatcher:EG,batchUpdates:RG};function*_G(t){for(const e of t)for(const n of e)yield n}var C4=_G;const k4=typeof Window>"u"||typeof window>"u",AG=t=>!k4&&(t===window||t instanceof Window),DG=typeof navigator<"u"&&navigator.product==="ReactNative";var v2={isSSR:k4,isReactNative:DG,isWindow:AG};function OG(t,e){let n;return(...s)=>{n||(n={});const r=e(...s);return Object.hasOwnProperty.call(n,r)||(n[r]=t(...s)),n[r]}}function FG(t,e){let n,s;return(...r)=>{const o=e(...r);return n===o||(n=o,s=t(...r)),s}}function LG(t,e){let n,s;return[(...i)=>{const a=e(...i);return n===a||(n=a,s=t(...i)),s},()=>{n=null}]}var PG={memoizeWithArgsHash:OG,memoizeOneWithArgsHash:FG,memoizeOneWithArgsHashAndInvalidation:LG};const{batchUpdates:OS}=b2,{initializeNode:MG,peekNodeInfo:zG}=ml,{graph:BG}=vm,{getNextStoreID:VG}=m2,{DEFAULT_VALUE:UG,recoilValues:uR,recoilValuesForKeys:cR}=mr,{AbstractRecoilValue:WG,getRecoilValueAsLoadable:jG,setRecoilValue:dR,setUnvalidatedRecoilValue:GG}=gi,{updateRetainCount:gy}=Wu,{setInvalidateMemoizedSnapshot:HG}=c4,{getNextTreeStateVersion:qG,makeEmptyStoreState:KG}=s4,{isSSR:XG}=v2,{memoizeOneWithArgsHashAndInvalidation:YG}=PG;class x2{constructor(e,n){ut(this,"_store",void 0),ut(this,"_refCount",1),ut(this,"getLoadable",s=>(this.checkRefCount_INTERNAL(),jG(this._store,s))),ut(this,"getPromise",s=>(this.checkRefCount_INTERNAL(),this.getLoadable(s).toPromise())),ut(this,"getNodes_UNSTABLE",s=>{if(this.checkRefCount_INTERNAL(),(s==null?void 0:s.isModified)===!0){if((s==null?void 0:s.isInitialized)===!1)return[];const i=this._store.getState().currentTree;return cR(i.dirtyAtoms)}const r=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(s==null?void 0:s.isInitialized)==null?uR.values():s.isInitialized===!0?cR(C4([r,o])):sN(uR.values(),({key:i})=>!r.has(i)&&!o.has(i))}),ut(this,"getInfo_UNSTABLE",({key:s})=>(this.checkRefCount_INTERNAL(),zG(this._store,this._store.getState().currentTree,s))),ut(this,"map",s=>{this.checkRefCount_INTERNAL();const r=new FS(this,OS);return s(r),r}),ut(this,"asyncMap",async s=>{this.checkRefCount_INTERNAL();const r=new FS(this,OS);return r.retain(),await s(r),r.autoRelease_INTERNAL(),r}),this._store={storeID:VG(),parentStoreID:n,getState:()=>e,replaceState:s=>{e.currentTree=s(e.currentTree)},getGraph:s=>{const r=e.graphsByVersion;if(r.has(s))return an(r.get(s));const o=BG();return r.set(s,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw yt("Cannot subscribe to Snapshots")}};for(const s of this._store.getState().knownAtoms)MG(this._store,s,"get"),gy(this._store,s,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){XG||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!Ut("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Ut("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function N4(t,e,n=!1){const s=t.getState(),r=n?qG():e.version;return{currentTree:{version:n?r:e.version,stateID:n?r:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(s.knownAtoms),knownSelectors:new Set(s.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(r,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(p2(s.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function QG(t){const e=new x2(KG());return t!=null?e.map(t):e}const[hR,T4]=YG((t,e)=>{var n;const s=t.getState(),r=e==="latest"?(n=s.nextTree)!==null&&n!==void 0?n:s.currentTree:an(s.previousTree);return new x2(N4(t,r),t.storeID)},(t,e)=>{var n,s;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((s=t.getState().previousTree)===null||s===void 0?void 0:s.version)});HG(T4);function ZG(t,e="latest"){const n=hR(t,e);return n.isRetained()?n:(T4(),hR(t,e))}class FS extends x2{constructor(e,n){super(N4(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),ut(this,"_batch",void 0),ut(this,"set",(s,r)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{gy(o,s.key,1),dR(this.getStore_INTERNAL(),s,r)})}),ut(this,"reset",s=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();this._batch(()=>{gy(r,s.key,1),dR(this.getStore_INTERNAL(),s,UG)})}),ut(this,"setUnvalidatedAtomValues_DEPRECATED",s=>{this.checkRefCount_INTERNAL();const r=this.getStore_INTERNAL();OS(()=>{for(const[o,i]of s.entries())gy(r,o,1),GG(r,new WG(o),i)})}),this._batch=n}}var w2={Snapshot:x2,MutableSnapshot:FS,freshSnapshot:QG,cloneSnapshot:ZG},JG=w2.Snapshot,eH=w2.MutableSnapshot,tH=w2.freshSnapshot,nH=w2.cloneSnapshot,S2=Object.freeze({__proto__:null,Snapshot:JG,MutableSnapshot:eH,freshSnapshot:tH,cloneSnapshot:nH});function sH(...t){const e=new Set;for(const n of t)for(const s of n)e.add(s);return e}var rH=sH;const{useRef:oH}=Ze;function iH(t){const e=oH(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var fR=iH;const{getNextTreeStateVersion:aH,makeEmptyStoreState:$4}=s4,{cleanUpNode:lH,getDownstreamNodes:uH,initializeNode:cH,setNodeValue:dH,setUnvalidatedAtomValue_DEPRECATED:hH}=ml,{graph:fH}=vm,{cloneGraph:pH}=vm,{getNextStoreID:E4}=m2,{createMutableSource:Bx,reactMode:I4}=bm,{applyAtomValueWrites:mH}=gi,{releaseScheduledRetainablesNow:R4}=Wu,{freshSnapshot:gH}=S2,{useCallback:yH,useContext:_4,useEffect:LS,useMemo:bH,useRef:vH,useState:xH}=Ze;function bf(){throw yt("This component must be used inside a <RecoilRoot> component.")}const A4=Object.freeze({storeID:E4(),getState:bf,replaceState:bf,getGraph:bf,subscribeToTransactions:bf,addTransactionMetadata:bf});let PS=!1;function pR(t){if(PS)throw yt("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){Ut("recoil_memory_managament_2020")&&Ut("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&R4(t);const n=e.currentTree.version,s=aH();e.nextTree={...e.currentTree,version:s,stateID:s,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(s,pH(an(e.graphsByVersion.get(n))))}}const D4=Ze.createContext({current:A4}),C2=()=>_4(D4),O4=Ze.createContext(null);function wH(){return _4(O4)}function aN(t,e,n){const s=uH(t,n,n.dirtyAtoms);for(const r of s){const o=e.nodeToComponentSubscriptions.get(r);if(o)for(const[i,[a,l]]of o)l(n)}}function F4(t){const e=t.getState(),n=e.currentTree,s=n.dirtyAtoms;if(s.size){for(const[r,o]of e.nodeTransactionSubscriptions)if(s.has(r))for(const[i,a]of o)a(t);for(const[r,o]of e.transactionSubscriptions)o(t);(!I4().early||e.suspendedComponentResolvers.size>0)&&(aN(t,e,n),e.suspendedComponentResolvers.forEach(r=>r()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(r=>r(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function SH(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,F4(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):Zk("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Ut("recoil_memory_managament_2020")&&n==null&&R4(t)}finally{e.commitDepth--}}function CH({setNotifyBatcherOfChange:t}){const e=C2(),[,n]=xH([]);return t(()=>n({})),LS(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),LS(()=>{tj.enqueueExecution("Batcher",()=>{SH(e.current)})}),null}function kH(t,e){const n=$4();return e({set:(s,r)=>{const o=n.currentTree,i=dH(t,o,s.key,r),a=new Set(i.keys()),l=o.nonvalidatedAtoms.clone();for(const u of a)l.delete(u);n.currentTree={...o,dirtyAtoms:rH(o.dirtyAtoms,a),atomValues:mH(o.atomValues,i),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:s=>{s.forEach((r,o)=>{n.currentTree=hH(n.currentTree,o,r)})}}),n}function NH(t){const e=gH(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(s=>s()),n.nodeCleanupFunctions.clear(),n}let mR=0;function TH({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:s}){let r;const o=f=>{const p=r.current.graphsByVersion;if(p.has(f))return an(p.get(f));const m=fH();return p.set(f,m),m},i=(f,p)=>{if(p==null){const{transactionSubscriptions:m}=d.current.getState(),g=mR++;return m.set(g,f),{release:()=>{m.delete(g)}}}else{const{nodeTransactionSubscriptions:m}=d.current.getState();m.has(p)||m.set(p,new Map);const g=mR++;return an(m.get(p)).set(g,f),{release:()=>{const y=m.get(p);y&&(y.delete(g),y.size===0&&m.delete(p))}}}},a=f=>{pR(d.current);for(const p of Object.keys(f))an(d.current.getState().nextTree).transactionMetadata[p]=f[p]},l=f=>{pR(d.current);const p=an(r.current.nextTree);let m;try{PS=!0,m=f(p)}finally{PS=!1}m!==p&&(r.current.nextTree=m,I4().early&&aN(d.current,r.current,m),an(u.current)())},u=vH(null),c=yH(f=>{u.current=f},[u]),d=fR(()=>n??{storeID:E4(),getState:()=>r.current,replaceState:l,getGraph:o,subscribeToTransactions:i,addTransactionMetadata:a});n!=null&&(d.current=n),r=fR(()=>t!=null?kH(d.current,t):e!=null?NH(e):$4());const h=bH(()=>Bx==null?void 0:Bx(r,()=>r.current.currentTree.version),[r]);return LS(()=>{const f=d.current;for(const p of new Set(f.getState().knownAtoms))cH(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)lH(f,p)}},[d]),Ze.createElement(D4.Provider,{value:d},Ze.createElement(O4.Provider,{value:h},Ze.createElement(CH,{setNotifyBatcherOfChange:c}),s))}function $H(t){const{override:e,...n}=t,s=C2();return e===!1&&s.current!==A4?t.children:Ze.createElement(TH,n)}function EH(){return C2().current.storeID}var Ji={RecoilRoot:$H,useStoreRef:C2,useRecoilMutableSource:wH,useRecoilStoreID:EH,notifyComponents_FOR_TESTING:aN,sendEndOfBatchNotifications_FOR_TESTING:F4};function IH(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,s=t.length;n<s;n++)if(t[n]!==e[n])return!1;return!0}var RH=IH;const{useEffect:_H,useRef:AH}=Ze;function DH(t){const e=AH();return _H(()=>{e.current=t}),e.current}var L4=DH;const{useStoreRef:OH}=Ji,{SUSPENSE_TIMEOUT_MS:FH}=Wu,{updateRetainCount:vf}=Wu,{RetentionZone:LH}=g2,{useEffect:PH,useRef:MH}=Ze,{isSSR:gR}=v2;function zH(t){if(Ut("recoil_memory_managament_2020"))return BH(t)}function BH(t){const n=(Array.isArray(t)?t:[t]).map(i=>i instanceof LH?i:i.key),s=OH();PH(()=>{if(!Ut("recoil_memory_managament_2020"))return;const i=s.current;if(r.current&&!gR)window.clearTimeout(r.current),r.current=null;else for(const a of n)vf(i,a,1);return()=>{for(const a of n)vf(i,a,-1)}},[s,...n]);const r=MH(),o=L4(n);if(!gR&&(o===void 0||!RH(o,n))){const i=s.current;for(const a of n)vf(i,a,1);if(o)for(const a of o)vf(i,a,-1);r.current&&window.clearTimeout(r.current),r.current=window.setTimeout(()=>{r.current=null;for(const a of n)vf(i,a,-1)},FH)}}var lN=zH;function VH(){return"<component name not available>"}var wm=VH;const{batchUpdates:UH}=b2,{DEFAULT_VALUE:P4}=mr,{currentRendererSupportsUseSyncExternalStore:WH,reactMode:Ud,useMutableSource:jH,useSyncExternalStore:GH}=bm,{useRecoilMutableSource:HH,useStoreRef:yi}=Ji,{AbstractRecoilValue:MS,getRecoilValueAsLoadable:Sm,setRecoilValue:s1,setUnvalidatedRecoilValue:qH,subscribeToRecoilValue:yd}=gi,{useCallback:cr,useEffect:bd,useMemo:M4,useRef:sp,useState:uN}=Ze,{setByAddingToSet:KH}=o4,{isSSR:XH}=v2;function cN(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(r=>{const o=n.current.getState().suspendedComponentResolvers;o.add(r),XH&&Jt(t.contents)&&t.contents.finally(()=>{o.delete(r)})}):t.state==="hasError"?t.contents:yt(`Invalid value of loadable atom "${e.key}"`)}function YH(){const t=wm(),e=yi(),[,n]=uN([]),s=sp(new Set);s.current=new Set;const r=sp(new Set),o=sp(new Map),i=cr(l=>{const u=o.current.get(l);u&&(u.release(),o.current.delete(l))},[o]),a=cr((l,u)=>{o.current.has(u)&&n([])},[]);return bd(()=>{const l=e.current;tp(s.current,r.current).forEach(u=>{if(o.current.has(u))return;const c=yd(l,new MS(u),h=>a(h,u),t);o.current.set(u,c),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),u)}):a(l.getState(),u)}),tp(r.current,s.current).forEach(u=>{i(u)}),r.current=s.current}),bd(()=>{const l=o.current;return tp(s.current,new Set(l.keys())).forEach(u=>{const c=yd(e.current,new MS(u),d=>a(d,u),t);l.set(u,c)}),()=>l.forEach((u,c)=>i(c))},[t,e,i,a]),M4(()=>{function l(p){return m=>{s1(e.current,p,m)}}function u(p){return()=>s1(e.current,p,P4)}function c(p){var m;s.current.has(p.key)||(s.current=KH(s.current,p.key));const g=e.current.getState();return Sm(e.current,p,Ud().early&&(m=g.nextTree)!==null&&m!==void 0?m:g.currentTree)}function d(p){const m=c(p);return cN(m,p,e)}function h(p){return[d(p),l(p)]}function f(p){return[c(p),l(p)]}return{getRecoilValue:d,getRecoilValueLoadable:c,getRecoilState:h,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:u}},[s,e])}const QH={current:0};function ZH(t){const e=yi(),n=wm(),s=cr(()=>{var a;const l=e.current,u=l.getState(),c=Ud().early&&(a=u.nextTree)!==null&&a!==void 0?a:u.currentTree;return{loadable:Sm(l,t,c),key:t.key}},[e,t]),r=cr(a=>{let l;return()=>{var u,c;const d=a();return(u=l)!==null&&u!==void 0&&u.loadable.is(d.loadable)&&((c=l)===null||c===void 0?void 0:c.key)===d.key?l:(l=d,d)}},[]),o=M4(()=>r(s),[s,r]),i=cr(a=>{const l=e.current;return yd(l,t,a,n).release},[e,t,n]);return GH(i,o,o).loadable}function JH(t){const e=yi(),n=cr(()=>{var u;const c=e.current,d=c.getState(),h=Ud().early&&(u=d.nextTree)!==null&&u!==void 0?u:d.currentTree;return Sm(c,t,h)},[e,t]),s=cr(()=>n(),[n]),r=wm(),o=cr((u,c)=>{const d=e.current;return yd(d,t,()=>{if(!Ut("recoil_suppress_rerender_in_callback"))return c();const f=n();l.current.is(f)||c(),l.current=f},r).release},[e,t,r,n]),i=HH();if(i==null)throw yt("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=jH(i,s,o),l=sp(a);return bd(()=>{l.current=a}),a}function zS(t){const e=yi(),n=wm(),s=cr(()=>{var l;const u=e.current,c=u.getState(),d=Ud().early&&(l=c.nextTree)!==null&&l!==void 0?l:c.currentTree;return Sm(u,t,d)},[e,t]),r=cr(()=>({loadable:s(),key:t.key}),[s,t.key]),o=cr(l=>{const u=r();return l.loadable.is(u.loadable)&&l.key===u.key?l:u},[r]);bd(()=>{const l=yd(e.current,t,u=>{a(o)},n);return a(o),l.release},[n,t,e,o]);const[i,a]=uN(r);return i.key!==t.key?r().loadable:i.loadable}function eq(t){const e=yi(),[,n]=uN([]),s=wm(),r=cr(()=>{var a;const l=e.current,u=l.getState(),c=Ud().early&&(a=u.nextTree)!==null&&a!==void 0?a:u.currentTree;return Sm(l,t,c)},[e,t]),o=r(),i=sp(o);return bd(()=>{i.current=o}),bd(()=>{const a=e.current,l=a.getState(),u=yd(a,t,d=>{var h;if(!Ut("recoil_suppress_rerender_in_callback"))return n([]);const f=r();(h=i.current)!==null&&h!==void 0&&h.is(f)||n(f),i.current=f},s);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{i.current=null,n([])});else{var c;if(!Ut("recoil_suppress_rerender_in_callback"))return n([]);const d=r();(c=i.current)!==null&&c!==void 0&&c.is(d)||n(d),i.current=d}return u.release},[s,r,t,e]),o}function dN(t){return Ut("recoil_memory_managament_2020")&&lN(t),{TRANSITION_SUPPORT:zS,SYNC_EXTERNAL_STORE:WH()?ZH:zS,MUTABLE_SOURCE:JH,LEGACY:eq}[Ud().mode](t)}function z4(t){const e=yi(),n=dN(t);return cN(n,t,e)}function k2(t){const e=yi();return cr(n=>{s1(e.current,t,n)},[e,t])}function tq(t){const e=yi();return cr(()=>{s1(e.current,t,P4)},[e,t])}function nq(t){return[z4(t),k2(t)]}function sq(t){return[dN(t),k2(t)]}function rq(){const t=yi();return(e,n={})=>{UH(()=>{t.current.addTransactionMetadata(n),e.forEach((s,r)=>qH(t.current,new MS(r),s))})}}function B4(t){return Ut("recoil_memory_managament_2020")&&lN(t),zS(t)}function V4(t){const e=yi(),n=B4(t);return cN(n,t,e)}function oq(t){return[V4(t),k2(t)]}var iq={recoilComponentGetRecoilValueCount_FOR_TESTING:QH,useRecoilInterface:YH,useRecoilState:nq,useRecoilStateLoadable:sq,useRecoilValue:z4,useRecoilValueLoadable:dN,useResetRecoilState:tq,useSetRecoilState:k2,useSetUnvalidatedAtomValues:rq,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:B4,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:V4,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:oq};function aq(t,e){const n=new Map;for(const[s,r]of t)e(r,s)&&n.set(s,r);return n}var lq=aq;function uq(t,e){const n=new Set;for(const s of t)e(s)&&n.add(s);return n}var cq=uq;function dq(...t){const e=new Map;for(let n=0;n<t.length;n++){const s=t[n].keys();let r;for(;!(r=s.next()).done;)e.set(r.value,t[n].get(r.value))}return e}var hq=dq;const{batchUpdates:fq}=b2,{DEFAULT_VALUE:pq,getNode:U4,nodes:mq}=mr,{useStoreRef:hN}=Ji,{AbstractRecoilValue:gq,setRecoilValueLoadable:yq}=gi,{SUSPENSE_TIMEOUT_MS:bq}=Wu,{cloneSnapshot:r1}=S2,{useCallback:N2,useEffect:W4,useRef:yR,useState:vq}=Ze,{isSSR:bR}=v2;function T2(t){const e=hN();W4(()=>e.current.subscribeToTransactions(t).release,[t,e])}function vR(t){const e=t.atomValues.toMap(),n=n1(lq(e,(s,r)=>{const i=U4(r).persistence_UNSTABLE;return i!=null&&i.type!=="none"&&s.state==="hasValue"}),s=>s.contents);return hq(t.nonvalidatedAtoms.toMap(),n)}function xq(t){T2(N2(e=>{let n=e.getState().previousTree;const s=e.getState().currentTree;n||(n=e.getState().currentTree);const r=vR(s),o=vR(n),i=n1(mq,l=>{var u,c,d,h;return{persistence_UNSTABLE:{type:(u=(c=l.persistence_UNSTABLE)===null||c===void 0?void 0:c.type)!==null&&u!==void 0?u:"none",backButton:(d=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&d!==void 0?d:!1}}}),a=cq(s.dirtyAtoms,l=>r.has(l)||o.has(l));t({atomValues:r,previousAtomValues:o,atomInfo:i,modifiedAtoms:a,transactionMetadata:{...s.transactionMetadata}})},[t]))}function wq(t){T2(N2(e=>{const n=r1(e,"latest"),s=r1(e,"previous");t({snapshot:n,previousSnapshot:s})},[t]))}function Sq(){const t=hN(),[e,n]=vq(()=>r1(t.current)),s=L4(e),r=yR(),o=yR();if(T2(N2(a=>n(r1(a)),[])),W4(()=>{const a=e.retain();if(r.current&&!bR){var l;window.clearTimeout(r.current),r.current=null,(l=o.current)===null||l===void 0||l.call(o),o.current=null}return()=>{window.setTimeout(a,10)}},[e]),s!==e&&!bR){if(r.current){var i;window.clearTimeout(r.current),r.current=null,(i=o.current)===null||i===void 0||i.call(o),o.current=null}o.current=e.retain(),r.current=window.setTimeout(()=>{var a;r.current=null,(a=o.current)===null||a===void 0||a.call(o),o.current=null},bq)}return e}function j4(t,e){var n;const s=t.getState(),r=(n=s.nextTree)!==null&&n!==void 0?n:s.currentTree,o=e.getStore_INTERNAL().getState().currentTree;fq(()=>{const i=new Set;for(const u of[r.atomValues.keys(),o.atomValues.keys()])for(const c of u){var a,l;((a=r.atomValues.get(c))===null||a===void 0?void 0:a.contents)!==((l=o.atomValues.get(c))===null||l===void 0?void 0:l.contents)&&U4(c).shouldRestoreFromSnapshots&&i.add(c)}i.forEach(u=>{yq(t,new gq(u),o.atomValues.has(u)?an(o.atomValues.get(u)):pq)}),t.replaceState(u=>({...u,stateID:e.getID()}))})}function Cq(){const t=hN();return N2(e=>j4(t.current,e),[t])}var G4={useRecoilSnapshot:Sq,gotoSnapshot:j4,useGotoRecoilSnapshot:Cq,useRecoilTransactionObserver:wq,useTransactionObservation_DEPRECATED:xq,useTransactionSubscription_DEPRECATED:T2};const{peekNodeInfo:kq}=ml,{useStoreRef:Nq}=Ji;function Tq(){const t=Nq();return({key:e})=>kq(t.current,t.current.getState().currentTree,e)}var $q=Tq;const{reactMode:Eq}=bm,{RecoilRoot:Iq,useStoreRef:Rq}=Ji,{useMemo:_q}=Ze;function Aq(){Eq().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=Rq().current;return _q(()=>{function e({children:n}){return Ze.createElement(Iq,{store_INTERNAL:t},n)}return e},[t])}var Dq=Aq;const{loadableWithValue:Oq}=ym,{initializeNode:Fq}=ml,{DEFAULT_VALUE:Lq,getNode:Pq}=mr,{copyTreeState:Mq,getRecoilValueAsLoadable:zq,invalidateDownstreams:Bq,writeLoadableToTreeState:Vq}=gi;function xR(t){return Pq(t.key).nodeType==="atom"}class Uq{constructor(e,n){ut(this,"_store",void 0),ut(this,"_treeState",void 0),ut(this,"_changes",void 0),ut(this,"get",s=>{if(this._changes.has(s.key))return this._changes.get(s.key);if(!xR(s))throw yt("Reading selectors within atomicUpdate is not supported");const r=zq(this._store,s,this._treeState);if(r.state==="hasValue")return r.contents;throw r.state==="hasError"?r.contents:yt(`Expected Recoil atom ${s.key} to have a value, but it is in a loading state.`)}),ut(this,"set",(s,r)=>{if(!xR(s))throw yt("Setting selectors within atomicUpdate is not supported");if(typeof r=="function"){const o=this.get(s);this._changes.set(s.key,r(o))}else Fq(this._store,s.key,"set"),this._changes.set(s.key,r)}),ut(this,"reset",s=>{this.set(s,Lq)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=Mq(this._treeState);for(const[n,s]of this._changes)Vq(e,n,Oq(s));return Bq(this._store,e),e}}function Wq(t){return e=>{t.replaceState(n=>{const s=new Uq(t,n);return e(s),s.newTreeState_INTERNAL()})}}var jq={atomicUpdater:Wq},Gq=jq.atomicUpdater,H4=Object.freeze({__proto__:null,atomicUpdater:Gq});function Hq(t,e){if(!t)throw new Error(e)}var qq=Hq,Pf=qq;const{atomicUpdater:Kq}=H4,{batchUpdates:Xq}=b2,{DEFAULT_VALUE:Yq}=mr,{useStoreRef:Qq}=Ji,{refreshRecoilValue:Zq,setRecoilValue:wR}=gi,{cloneSnapshot:Jq}=S2,{gotoSnapshot:eK}=G4,{useCallback:tK}=Ze;class q4{}const nK=new q4;function K4(t,e,n,s){let r=nK,o;if(Xq(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw yt(a);const l=i4({...s??{},set:(c,d)=>wR(t,c,d),reset:c=>wR(t,c,Yq),refresh:c=>Zq(t,c),gotoSnapshot:c=>eK(t,c),transact_UNSTABLE:c=>Kq(t)(c)},{snapshot:()=>{const c=Jq(t);return o=c.retain(),c}}),u=e(l);if(typeof u!="function")throw yt(a);r=u(...n)}),r instanceof q4&&Pf(!1),Jt(r))r=r.finally(()=>{var a;(a=o)===null||a===void 0||a()});else{var i;(i=o)===null||i===void 0||i()}return r}function sK(t,e){const n=Qq();return tK((...s)=>K4(n.current,t,s),e!=null?[...e,n]:void 0)}var X4={recoilCallback:K4,useRecoilCallback:sK};const{useStoreRef:rK}=Ji,{refreshRecoilValue:oK}=gi,{useCallback:iK}=Ze;function aK(t){const e=rK();return iK(()=>{const n=e.current;oK(n,t)},[t,e])}var lK=aK;const{atomicUpdater:uK}=H4,{useStoreRef:cK}=Ji,{useMemo:dK}=Ze;function hK(t,e){const n=cK();return dK(()=>(...s)=>{uK(n.current)(o=>{t(o)(...s)})},e!=null?[...e,n]:void 0)}var fK=hK;class pK{constructor(e){ut(this,"value",void 0),this.value=e}}var mK={WrappedValue:pK},gK=mK.WrappedValue,Y4=Object.freeze({__proto__:null,WrappedValue:gK});const{isFastRefreshEnabled:yK}=bm;class SR extends Error{}class bK{constructor(e){var n,s,r;ut(this,"_name",void 0),ut(this,"_numLeafs",void 0),ut(this,"_root",void 0),ut(this,"_onHit",void 0),ut(this,"_onSet",void 0),ut(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(s=e==null?void 0:e.onSet)!==null&&s!==void 0?s:()=>{},this._mapNodeValue=(r=e==null?void 0:e.mapNodeValue)!==null&&r!==void 0?r:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,n){var s;return(s=this.getLeafNode(e,n))===null||s===void 0?void 0:s.value}getLeafNode(e,n){if(this._root==null)return;let s=this._root;for(;s;){if(n==null||n.onNodeVisit(s),s.type==="leaf")return this._onHit(s),s;const r=this._mapNodeValue(e(s.nodeKey));s=s.branches.get(r)}}set(e,n,s){const r=()=>{var o,i,a,l;let u,c;for(const[g,y]of e){var d,h,f;const b=this._root;if((b==null?void 0:b.type)==="leaf")throw this.invalidCacheError();const v=u;if(u=v?v.branches.get(c):b,u=(d=u)!==null&&d!==void 0?d:{type:"branch",nodeKey:g,parent:v,branches:new Map,branchKey:c},u.type!=="branch"||u.nodeKey!==g)throw this.invalidCacheError();v==null||v.branches.set(c,u),s==null||(h=s.onNodeVisit)===null||h===void 0||h.call(s,u),c=this._mapNodeValue(y),this._root=(f=this._root)!==null&&f!==void 0?f:u}const p=u?(o=u)===null||o===void 0?void 0:o.branches.get(c):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==c))throw this.invalidCacheError();const m={type:"leaf",value:n,parent:u,branchKey:c};(i=u)===null||i===void 0||i.branches.set(c,m),this._root=(a=this._root)!==null&&a!==void 0?a:m,this._numLeafs++,this._onSet(m),s==null||(l=s.onNodeVisit)===null||l===void 0||l.call(s,m)};try{r()}catch(o){if(o instanceof SR)this.clear(),r();else throw o}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let s=e.parent,r=e.branchKey;for(;s;){var o;if(s.branches.delete(r),s===n)return s.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(s.branches.size>0)break;r=(o=s)===null||o===void 0?void 0:o.branchKey,s=s.parent}for(;s!==n;s=s.parent)if(s==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=yK()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Zk(e+(this._name!=null?` - ${this._name}`:"")),new SR}}var vK={TreeCache:bK},xK=vK.TreeCache,Q4=Object.freeze({__proto__:null,TreeCache:xK});class wK{constructor(e){var n;ut(this,"_maxSize",void 0),ut(this,"_size",void 0),ut(this,"_head",void 0),ut(this,"_tail",void 0),ut(this,"_map",void 0),ut(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:s=>s}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),s=this._map.get(n);if(s)return this.set(e,s.value),s.value}set(e,n){const s=this._keyMapper(e);this._map.get(s)&&this.delete(e);const o=this.head(),i={key:e,right:o,left:null,value:n};o?o.left=i:this._tail=i,this._map.set(s,i),this._head=i,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const s=an(this._map.get(n)),r=s.right,o=s.left;r&&(r.left=s.left),o&&(o.right=s.right),s===this.head()&&(this._head=r),s===this.tail()&&(this._tail=o),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var SK={LRUCache:wK},CK=SK.LRUCache,Z4=Object.freeze({__proto__:null,LRUCache:CK});const{LRUCache:kK}=Z4,{TreeCache:NK}=Q4;function TK({name:t,maxSize:e,mapNodeValue:n=s=>s}){const s=new kK({maxSize:e}),r=new NK({name:t,mapNodeValue:n,onHit:o=>{s.set(o,!0)},onSet:o=>{const i=s.tail();s.set(o,!0),i&&r.size()>e&&r.delete(i.key)}});return r}var CR=TK;function yo(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw yt("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var s;return(s=JSON.stringify(t))!==null&&s!==void 0?s:""}if(Jt(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((r,o)=>yo(r,e,o.toString()))}]`;if(typeof t.toJSON=="function")return yo(t.toJSON(n),e,n);if(t instanceof Map){const r={};for(const[o,i]of t)r[typeof o=="string"?o:yo(o,e)]=i;return yo(r,e,n)}return t instanceof Set?yo(Array.from(t).sort((r,o)=>yo(r,e).localeCompare(yo(o,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?yo(Array.from(t),e,n):`{${Object.keys(t).filter(r=>t[r]!==void 0).sort().map(r=>`${yo(r,e)}:${yo(t[r],e,r)}`).join(",")}}`}function $K(t,e={allowFunctions:!1}){return yo(t,e)}var $2=$K;const{TreeCache:EK}=Q4,D0={equality:"reference",eviction:"keep-all",maxSize:1/0};function IK({equality:t=D0.equality,eviction:e=D0.eviction,maxSize:n=D0.maxSize}=D0,s){const r=RK(t);return _K(e,n,r,s)}function RK(t){switch(t){case"reference":return e=>e;case"value":return e=>$2(e)}throw yt(`Unrecognized equality policy ${t}`)}function _K(t,e,n,s){switch(t){case"keep-all":return new EK({name:s,mapNodeValue:n});case"lru":return CR({name:s,maxSize:an(e),mapNodeValue:n});case"most-recent":return CR({name:s,maxSize:1,mapNodeValue:n})}throw yt(`Unrecognized eviction policy ${t}`)}var AK=IK;function DK(t){return()=>null}var OK={startPerfBlock:DK};const{isLoadable:FK,loadableWithError:O0,loadableWithPromise:LK,loadableWithValue:Vx}=ym,{WrappedValue:J4}=Y4,{getNodeLoadable:F0,peekNodeLoadable:PK,setNodeValue:MK}=ml,{saveDepsToStore:zK}=vm,{DEFAULT_VALUE:BK,getConfigDeletionHandler:VK,getNode:UK,registerNode:kR}=mr,{isRecoilValue:WK}=gd,{markRecoilValueModified:NR}=gi,{retainedByOptionWithDefault:jK}=Wu,{recoilCallback:GK}=X4,{startPerfBlock:HK}=OK;class eF{}const xf=new eF,wf=[],L0=new Map,qK=(()=>{let t=0;return()=>t++})();function tF(t){let e=null;const{key:n,get:s,cachePolicy_UNSTABLE:r}=t,o=t.set!=null?t.set:void 0,i=new Set,a=AK(r??{equality:"reference",eviction:"keep-all"},n),l=jK(t.retainedBy_UNSTABLE),u=new Map;let c=0;function d(){return!Ut("recoil_memory_managament_2020")||c>0}function h(D){return D.getState().knownSelectors.add(n),c++,()=>{c--}}function f(){return VK(n)!==void 0&&!d()}function p(D,X,te,ue,ie){q(X,ue,ie),m(D,te)}function m(D,X){F(D,X)&&P(D),y(X,!0)}function g(D,X){F(D,X)&&(an(I(D)).stateVersions.clear(),y(X,!1))}function y(D,X){const te=L0.get(D);if(te!=null){for(const ue of te)NR(ue,an(e));X&&L0.delete(D)}}function b(D,X){let te=L0.get(X);te==null&&L0.set(X,te=new Set),te.add(D)}function v(D,X,te,ue,ie,me){return X.then(xe=>{if(!d())throw P(D),xf;const fe=Vx(xe);return p(D,te,ie,fe,ue),xe}).catch(xe=>{if(!d())throw P(D),xf;if(Jt(xe))return x(D,xe,te,ue,ie,me);const fe=O0(xe);throw p(D,te,ie,fe,ue),xe})}function x(D,X,te,ue,ie,me){return X.then(xe=>{if(!d())throw P(D),xf;me.loadingDepKey!=null&&me.loadingDepPromise===X?te.atomValues.set(me.loadingDepKey,Vx(xe)):D.getState().knownSelectors.forEach(Le=>{te.atomValues.delete(Le)});const fe=k(D,te);if(fe&&fe.state!=="loading"){if((F(D,ie)||I(D)==null)&&m(D,ie),fe.state==="hasValue")return fe.contents;throw fe.contents}if(!F(D,ie)){const Le=$(D,te);if(Le!=null)return Le.loadingLoadable.contents}const[De,Ie]=S(D,te,ie);if(De.state!=="loading"&&p(D,te,ie,De,Ie),De.state==="hasError")throw De.contents;return De.contents}).catch(xe=>{if(xe instanceof eF)throw xf;if(!d())throw P(D),xf;const fe=O0(xe);throw p(D,te,ie,fe,ue),xe})}function w(D,X,te,ue){var ie,me,xe,fe;if(F(D,ue)||X.version===((ie=D.getState())===null||ie===void 0||(me=ie.currentTree)===null||me===void 0?void 0:me.version)||X.version===((xe=D.getState())===null||xe===void 0||(fe=xe.nextTree)===null||fe===void 0?void 0:fe.version)){var De,Ie,Le;zK(n,te,D,(De=(Ie=D.getState())===null||Ie===void 0||(Le=Ie.nextTree)===null||Le===void 0?void 0:Le.version)!==null&&De!==void 0?De:D.getState().currentTree.version)}for(const Ke of te)i.add(Ke)}function S(D,X,te){const ue=HK(n);let ie=!0,me=!0;const xe=()=>{ue(),me=!1};let fe,De=!1,Ie;const Le={loadingDepKey:null,loadingDepPromise:null},Ke=new Map;function mt({key:rt}){const ct=F0(D,X,rt);switch(Ke.set(rt,ct),ie||(w(D,X,new Set(Ke.keys()),te),g(D,te)),ct.state){case"hasValue":return ct.contents;case"hasError":throw ct.contents;case"loading":throw Le.loadingDepKey=rt,Le.loadingDepPromise=ct.contents,ct.contents}throw yt("Invalid Loadable state")}const ot=rt=>(...ct)=>{if(me)throw yt("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Pf(!1),GK(D,rt,ct,{node:e})};try{fe=s({get:mt,getCallback:ot}),fe=WK(fe)?mt(fe):fe,FK(fe)&&(fe.state==="hasError"&&(De=!0),fe=fe.contents),Jt(fe)?fe=v(D,fe,X,Ke,te,Le).finally(xe):xe(),fe=fe instanceof J4?fe.value:fe}catch(rt){fe=rt,Jt(fe)?fe=x(D,fe,X,Ke,te,Le).finally(xe):(De=!0,xe())}return De?Ie=O0(fe):Jt(fe)?Ie=LK(fe):Ie=Vx(fe),ie=!1,O(D,te,Ke),w(D,X,new Set(Ke.keys()),te),[Ie,Ke]}function k(D,X){let te=X.atomValues.get(n);if(te!=null)return te;const ue=new Set;try{te=a.get(me=>(typeof me!="string"&&Pf(!1),F0(D,X,me).contents),{onNodeVisit:me=>{me.type==="branch"&&me.nodeKey!==n&&ue.add(me.nodeKey)}})}catch(me){throw yt(`Problem with cache lookup for selector "${n}": ${me.message}`)}if(te){var ie;X.atomValues.set(n,te),w(D,X,ue,(ie=I(D))===null||ie===void 0?void 0:ie.executionID)}return te}function N(D,X){const te=k(D,X);if(te!=null)return P(D),te;const ue=$(D,X);if(ue!=null){var ie;return((ie=ue.loadingLoadable)===null||ie===void 0?void 0:ie.state)==="loading"&&b(D,ue.executionID),ue.loadingLoadable}const me=qK(),[xe,fe]=S(D,X,me);return xe.state==="loading"?(A(D,me,xe,fe,X),b(D,me)):(P(D),q(X,xe,fe)),xe}function $(D,X){const te=C4([u.has(D)?[an(u.get(D))]:[],p2(sN(u,([ie])=>ie!==D),([,ie])=>ie)]);function ue(ie){for(const[me,xe]of ie)if(!F0(D,X,me).is(xe))return!0;return!1}for(const ie of te){if(ie.stateVersions.get(X.version)||!ue(ie.depValuesDiscoveredSoFarDuringAsyncWork))return ie.stateVersions.set(X.version,!0),ie;ie.stateVersions.set(X.version,!1)}}function I(D){return u.get(D)}function A(D,X,te,ue,ie){u.set(D,{depValuesDiscoveredSoFarDuringAsyncWork:ue,executionID:X,loadingLoadable:te,stateVersions:new Map([[ie.version,!0]])})}function O(D,X,te){if(F(D,X)){const ue=I(D);ue!=null&&(ue.depValuesDiscoveredSoFarDuringAsyncWork=te)}}function P(D){u.delete(D)}function F(D,X){var te;return X===((te=I(D))===null||te===void 0?void 0:te.executionID)}function G(D){return Array.from(D.entries()).map(([X,te])=>[X,te.contents])}function q(D,X,te){D.atomValues.set(n,X);try{a.set(G(te),X)}catch(ue){throw yt(`Problem with setting cache for selector "${n}": ${ue.message}`)}}function Z(D){if(wf.includes(n)){const X=`Recoil selector has circular dependencies: ${wf.slice(wf.indexOf(n)).join("  ")}`;return O0(yt(X))}wf.push(n);try{return D()}finally{wf.pop()}}function B(D,X){const te=X.atomValues.get(n);return te??a.get(ue=>{var ie;return typeof ue!="string"&&Pf(!1),(ie=PK(D,X,ue))===null||ie===void 0?void 0:ie.contents})}function H(D,X){return Z(()=>N(D,X))}function K(D){D.atomValues.delete(n)}function ne(D,X){e==null&&Pf(!1);for(const ue of i){var te;const ie=UK(ue);(te=ie.clearCache)===null||te===void 0||te.call(ie,D,X)}i.clear(),K(X),a.clear(),NR(D,e)}return o!=null?e=kR({key:n,nodeType:"selector",peek:B,get:H,set:(X,te,ue)=>{let ie=!1;const me=new Map;function xe({key:Le}){if(ie)throw yt("Recoil: Async selector sets are not currently supported.");const Ke=F0(X,te,Le);if(Ke.state==="hasValue")return Ke.contents;if(Ke.state==="loading"){const mt=`Getting value of asynchronous atom or selector "${Le}" in a pending state while setting selector "${n}" is not yet supported.`;throw yt(mt)}else throw Ke.contents}function fe(Le,Ke){if(ie)throw yt("Recoil: Async selector sets are not currently supported.");const mt=typeof Ke=="function"?Ke(xe(Le)):Ke;MK(X,te,Le.key,mt).forEach((rt,ct)=>me.set(ct,rt))}function De(Le){fe(Le,BK)}const Ie=o({set:fe,get:xe,reset:De},ue);if(Ie!==void 0)throw Jt(Ie)?yt("Recoil: Async selector sets are not currently supported."):yt("Recoil: selector set should be a void function.");return ie=!0,me},init:h,invalidate:K,clearCache:ne,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=kR({key:n,nodeType:"selector",peek:B,get:H,init:h,invalidate:K,clearCache:ne,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}tF.value=t=>new J4(t);var vd=tF;const{isLoadable:KK,loadableWithError:Ux,loadableWithPromise:Wx,loadableWithValue:cc}=ym,{WrappedValue:nF}=Y4,{peekNodeInfo:XK}=ml,{DEFAULT_VALUE:Ml,DefaultValue:Sa,getConfigDeletionHandler:sF,registerNode:YK,setConfigDeletionHandler:QK}=mr,{isRecoilValue:ZK}=gd,{getRecoilValueAsLoadable:JK,markRecoilValueModified:eX,setRecoilValue:TR,setRecoilValueLoadable:tX}=gi,{retainedByOptionWithDefault:nX}=Wu,Sf=t=>t instanceof nF?t.value:t;function sX(t){const{key:e,persistence_UNSTABLE:n}=t,s=nX(t.retainedBy_UNSTABLE);let r=0;function o(b){return Wx(b.then(v=>(i=cc(v),v)).catch(v=>{throw i=Ux(v),v}))}let i=Jt(t.default)?o(t.default):KK(t.default)?t.default.state==="loading"?o(t.default.contents):t.default:cc(Sf(t.default));i.contents;let a;const l=new Map;function u(b){return b}function c(b,v){const x=v.then(w=>{var S,k;return((k=((S=b.getState().nextTree)!==null&&S!==void 0?S:b.getState().currentTree).atomValues.get(e))===null||k===void 0?void 0:k.contents)===x&&TR(b,y,w),w}).catch(w=>{var S,k;throw((k=((S=b.getState().nextTree)!==null&&S!==void 0?S:b.getState().currentTree).atomValues.get(e))===null||k===void 0?void 0:k.contents)===x&&tX(b,y,Ux(w)),w});return x}function d(b,v,x){var w;r++;const S=()=>{var I;r--,(I=l.get(b))===null||I===void 0||I.forEach(A=>A()),l.delete(b)};if(b.getState().knownAtoms.add(e),i.state==="loading"){const I=()=>{var A;((A=b.getState().nextTree)!==null&&A!==void 0?A:b.getState().currentTree).atomValues.has(e)||eX(b,y)};i.contents.finally(I)}const k=(w=t.effects)!==null&&w!==void 0?w:t.effects_UNSTABLE;if(k!=null){let I=function(K){if(F&&K.key===e){const ne=P;return ne instanceof Sa?h(b,v):Jt(ne)?Wx(ne.then(D=>D instanceof Sa?i.toPromise():D)):cc(ne)}return JK(b,K)},A=function(K){return I(K).toPromise()},O=function(K){var ne;const D=XK(b,(ne=b.getState().nextTree)!==null&&ne!==void 0?ne:b.getState().currentTree,K.key);return F&&K.key===e&&!(P instanceof Sa)?{...D,isSet:!0,loadable:I(K)}:D},P=Ml,F=!0,G=!1,q=null;const Z=K=>ne=>{if(F){const D=I(y),X=D.state==="hasValue"?D.contents:Ml;P=typeof ne=="function"?ne(X):ne,Jt(P)&&(P=P.then(te=>(q={effect:K,value:te},te)))}else{if(Jt(ne))throw yt("Setting atoms to async values is not implemented.");typeof ne!="function"&&(q={effect:K,value:Sf(ne)}),TR(b,y,typeof ne=="function"?D=>{const X=Sf(ne(D));return q={effect:K,value:X},X}:Sf(ne))}},B=K=>()=>Z(K)(Ml),H=K=>ne=>{var D;const{release:X}=b.subscribeToTransactions(te=>{var ue;let{currentTree:ie,previousTree:me}=te.getState();me||(me=ie);const xe=(ue=ie.atomValues.get(e))!==null&&ue!==void 0?ue:i;if(xe.state==="hasValue"){var fe,De,Ie,Le;const Ke=xe.contents,mt=(fe=me.atomValues.get(e))!==null&&fe!==void 0?fe:i,ot=mt.state==="hasValue"?mt.contents:Ml;((De=q)===null||De===void 0?void 0:De.effect)!==K||((Ie=q)===null||Ie===void 0?void 0:Ie.value)!==Ke?ne(Ke,ot,!ie.atomValues.has(e)):((Le=q)===null||Le===void 0?void 0:Le.effect)===K&&(q=null)}},e);l.set(b,[...(D=l.get(b))!==null&&D!==void 0?D:[],X])};for(const K of k)try{const ne=K({node:y,storeID:b.storeID,parentStoreID_UNSTABLE:b.parentStoreID,trigger:x,setSelf:Z(K),resetSelf:B(K),onSet:H(K),getPromise:A,getLoadable:I,getInfo_UNSTABLE:O});if(ne!=null){var N;l.set(b,[...(N=l.get(b))!==null&&N!==void 0?N:[],ne])}}catch(ne){P=ne,G=!0}if(F=!1,!(P instanceof Sa)){var $;const K=G?Ux(P):Jt(P)?Wx(c(b,P)):cc(Sf(P));K.contents,v.atomValues.set(e,K),($=b.getState().nextTree)===null||$===void 0||$.atomValues.set(e,K)}}return S}function h(b,v){var x,w;return(x=(w=v.atomValues.get(e))!==null&&w!==void 0?w:a)!==null&&x!==void 0?x:i}function f(b,v){if(v.atomValues.has(e))return an(v.atomValues.get(e));if(v.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return i;const x=v.nonvalidatedAtoms.get(e),w=n.validator(x,Ml);return a=w instanceof Sa?i:cc(w),a}else return i}function p(){a=void 0}function m(b,v,x){if(v.atomValues.has(e)){const w=an(v.atomValues.get(e));if(w.state==="hasValue"&&x===w.contents)return new Map}else if(!v.nonvalidatedAtoms.has(e)&&x instanceof Sa)return new Map;return a=void 0,new Map().set(e,cc(x))}function g(){return sF(e)!==void 0&&r<=0}const y=YK({key:e,nodeType:"atom",peek:h,get:f,set:m,init:d,invalidate:p,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:s});return y}function fN(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return ZK(n)?rX({...e,default:n}):sX({...e,default:n})}function rX(t){const e=fN({...t,default:Ml,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:s=>s instanceof Sa?s:an(t.persistence_UNSTABLE).validator(s,Ml)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=vd({key:`${t.key}__withFallback`,get:({get:s})=>{const r=s(e);return r instanceof Sa?t.default:r},set:({set:s},r)=>s(e,r),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return QK(n.key,sF(t.key)),n}fN.value=t=>new nF(t);var rF=fN;class oX{constructor(e){var n;ut(this,"_map",void 0),ut(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:s=>s}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var iX={MapCache:oX},aX=iX.MapCache,lX=Object.freeze({__proto__:null,MapCache:aX});const{LRUCache:$R}=Z4,{MapCache:uX}=lX,P0={equality:"reference",eviction:"none",maxSize:1/0};function cX({equality:t=P0.equality,eviction:e=P0.eviction,maxSize:n=P0.maxSize}=P0){const s=dX(t);return hX(e,n,s)}function dX(t){switch(t){case"reference":return e=>e;case"value":return e=>$2(e)}throw yt(`Unrecognized equality policy ${t}`)}function hX(t,e,n){switch(t){case"keep-all":return new uX({mapKey:n});case"lru":return new $R({mapKey:n,maxSize:an(e)});case"most-recent":return new $R({mapKey:n,maxSize:1})}throw yt(`Unrecognized eviction policy ${t}`)}var oF=cX;const{setConfigDeletionHandler:fX}=mr;function pX(t){var e,n;const s=oF({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return r=>{var o,i;const a=s.get(r);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...u}=t,c="default"in t?t.default:new Promise(()=>{}),d=rF({...u,key:`${t.key}__${(o=$2(r))!==null&&o!==void 0?o:"void"}`,default:typeof c=="function"?c(r):c,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(r):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(r):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(r):(i=t.effects)!==null&&i!==void 0?i:t.effects_UNSTABLE});return s.set(r,d),fX(d.key,()=>{s.delete(r)}),d}}var mX=pX;const{setConfigDeletionHandler:gX}=mr;let yX=0;function bX(t){var e,n;const s=oF({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return r=>{var o;let i;try{i=s.get(r)}catch(h){throw yt(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(i!=null)return i;const a=`${t.key}__selectorFamily/${(o=$2(r,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${yX++}`,l=h=>t.get(r)(h),u=t.cachePolicy_UNSTABLE,c=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(r):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const h=t.set;d=vd({key:a,get:l,set:(p,m)=>h(r)(p,m),cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else d=vd({key:a,get:l,cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return s.set(r,d),gX(d.key,()=>{s.delete(r)}),d}}var gl=bX;const vX=gl({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function xX(t){return vX(t)}var wX=xX;const SX=gl({key:"__error",get:t=>()=>{throw yt(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function CX(t){return SX(t)}var kX=CX;function NX(t){return t}var TX=NX;const{loadableWithError:iF,loadableWithPromise:aF,loadableWithValue:lF}=ym;function E2(t,e){const n=Array(e.length).fill(void 0),s=Array(e.length).fill(void 0);for(const[r,o]of e.entries())try{n[r]=t(o)}catch(i){s[r]=i}return[n,s]}function $X(t){return t!=null&&!Jt(t)}function I2(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function BS(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,s,r)=>({...n,[s]:e[r]}),{})}function Bc(t,e,n){const s=n.map((r,o)=>r==null?lF(e[o]):Jt(r)?aF(r):iF(r));return BS(t,s)}function EX(t,e){return e.map((n,s)=>n===void 0?t[s]:n)}const IX=gl({key:"__waitForNone",get:t=>({get:e})=>{const n=I2(t),[s,r]=E2(e,n);return Bc(t,s,r)},dangerouslyAllowMutability:!0}),RX=gl({key:"__waitForAny",get:t=>({get:e})=>{const n=I2(t),[s,r]=E2(e,n);return r.some(o=>!Jt(o))?Bc(t,s,r):new Promise(o=>{for(const[i,a]of r.entries())Jt(a)&&a.then(l=>{s[i]=l,r[i]=void 0,o(Bc(t,s,r))}).catch(l=>{r[i]=l,o(Bc(t,s,r))})})},dangerouslyAllowMutability:!0}),_X=gl({key:"__waitForAll",get:t=>({get:e})=>{const n=I2(t),[s,r]=E2(e,n);if(r.every(i=>i==null))return BS(t,s);const o=r.find($X);if(o!=null)throw o;return Promise.all(r).then(i=>BS(t,EX(s,i)))},dangerouslyAllowMutability:!0}),AX=gl({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=I2(t),[s,r]=E2(e,n);return r.every(o=>!Jt(o))?Bc(t,s,r):Promise.all(r.map((o,i)=>Jt(o)?o.then(a=>{s[i]=a,r[i]=void 0}).catch(a=>{s[i]=void 0,r[i]=a}):null)).then(()=>Bc(t,s,r))},dangerouslyAllowMutability:!0}),DX=gl({key:"__noWait",get:t=>({get:e})=>{try{return vd.value(lF(e(t)))}catch(n){return vd.value(Jt(n)?aF(n):iF(n))}},dangerouslyAllowMutability:!0});var OX={waitForNone:IX,waitForAny:RX,waitForAll:_X,waitForAllSettled:AX,noWait:DX};const{RecoilLoadable:FX}=ym,{DefaultValue:LX}=mr,{RecoilRoot:PX,useRecoilStoreID:MX}=Ji,{isRecoilValue:zX}=gd,{retentionZone:BX}=g2,{freshSnapshot:VX}=S2,{useRecoilState:UX,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:WX,useRecoilStateLoadable:jX,useRecoilValue:GX,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:HX,useRecoilValueLoadable:qX,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:KX,useResetRecoilState:XX,useSetRecoilState:YX}=iq,{useGotoRecoilSnapshot:QX,useRecoilSnapshot:ZX,useRecoilTransactionObserver:JX}=G4,{useRecoilCallback:eY}=X4,{noWait:tY,waitForAll:nY,waitForAllSettled:sY,waitForAny:rY,waitForNone:oY}=OX;var R2={DefaultValue:LX,isRecoilValue:zX,RecoilLoadable:FX,RecoilEnv:Vd,RecoilRoot:PX,useRecoilStoreID:MX,useRecoilBridgeAcrossReactRoots_UNSTABLE:Dq,atom:rF,selector:vd,atomFamily:mX,selectorFamily:gl,constSelector:wX,errorSelector:kX,readOnlySelector:TX,noWait:tY,waitForNone:oY,waitForAny:rY,waitForAll:nY,waitForAllSettled:sY,useRecoilValue:GX,useRecoilValueLoadable:qX,useRecoilState:UX,useRecoilStateLoadable:jX,useSetRecoilState:YX,useResetRecoilState:XX,useGetRecoilValueInfo_UNSTABLE:$q,useRecoilRefresher_UNSTABLE:lK,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:KX,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:HX,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:WX,useRecoilCallback:eY,useRecoilTransaction_UNSTABLE:fK,useGotoRecoilSnapshot:QX,useRecoilSnapshot:ZX,useRecoilTransactionObserver_UNSTABLE:JX,snapshot_UNSTABLE:VX,useRetain:lN,retentionZone:BX},iY=R2.RecoilRoot,aY=R2.atom,lY=R2.useRecoilValue,uY=R2.useRecoilState;const cY=_.createContext(null),jx={didCatch:!1,error:null};class dY extends _.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=jx}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,s,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(n=(s=this.props).onReset)===null||n===void 0||n.call(s,{args:o,reason:"imperative-api"}),this.setState(jx)}}componentDidCatch(e,n){var s,r;(s=(r=this.props).onError)===null||s===void 0||s.call(r,e,n)}componentDidUpdate(e,n){const{didCatch:s}=this.state,{resetKeys:r}=this.props;if(s&&n.error!==null&&hY(e.resetKeys,r)){var o,i;(o=(i=this.props).onReset)===null||o===void 0||o.call(i,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(jx)}}render(){const{children:e,fallbackRender:n,FallbackComponent:s,fallback:r}=this.props,{didCatch:o,error:i}=this.state;let a=e;if(o){const l={error:i,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(l);else if(s)a=_.createElement(s,l);else if(r===null||_.isValidElement(r))a=r;else throw i}return _.createElement(cY.Provider,{value:{didCatch:o,error:i,resetErrorBoundary:this.resetErrorBoundary}},a)}}function hY(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,s)=>!Object.is(n,e[s]))}const Ti=()=>{const t=mi(),e=()=>{t(-1)};return R.jsxs("div",{id:"error-page",children:[R.jsx("p",{children:"   "}),R.jsx("button",{onClick:e,children:" "})]})},fY=({children:t})=>R.jsx(dY,{FallbackComponent:Ti,children:t}),pY=({children:t})=>R.jsx(_.Suspense,{fallback:R.jsx(R.Fragment,{children:""}),children:t}),mY={main:"/",example:"/example",example2:"/example2",camera:"/camera",search:"/search/:query"},Il=()=>{const t=mi(),e=()=>{t(mY.main,{replace:!0})};return R.jsxs("div",{id:"error-page",className:"flex flex-col justify-center align-center p-20 text-center h-screen",children:[R.jsx("p",{className:"text-3xl",children:" "}),R.jsx("p",{className:"text-3xl",children:"."}),R.jsx("div",{className:"m-10 w-25",children:R.jsx("button",{className:"text-2xl bg-gray-100 p-4 rounded-lg",onClick:e,children:R.jsx("p",{children:" "})})})]})},gY="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d_80_270)'%3e%3cpath%20d='M46.6643%209.33325H9.33097C6.75731%209.33325%204.66431%2011.4263%204.66431%2013.9999V41.9999C4.66431%2044.5736%206.75731%2046.6666%209.33097%2046.6666H46.6643C49.238%2046.6666%2051.331%2044.5736%2051.331%2041.9999V13.9999C51.331%2011.4263%2049.238%209.33325%2046.6643%209.33325ZM15.1643%2016.3333C16.0926%2016.3333%2016.9828%2016.702%2017.6392%2017.3584C18.2956%2018.0148%2018.6643%2018.905%2018.6643%2019.8333C18.6643%2020.7615%2018.2956%2021.6517%2017.6392%2022.3081C16.9828%2022.9645%2016.0926%2023.3333%2015.1643%2023.3333C14.236%2023.3333%2013.3458%2022.9645%2012.6894%2022.3081C12.0331%2021.6517%2011.6643%2020.7615%2011.6643%2019.8333C11.6643%2018.905%2012.0331%2018.0148%2012.6894%2017.3584C13.3458%2016.702%2014.236%2016.3333%2015.1643%2016.3333V16.3333ZM27.9976%2039.6666H11.6643L20.9976%2027.9999L24.4976%2032.6666L31.4976%2023.3333L44.331%2039.6666H27.9976Z'%20fill='%23F7F7F7'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d_80_270'%20x='-4'%20y='0'%20width='64'%20height='64'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset%20dy='4'/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeComposite%20in2='hardAlpha'%20operator='out'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.25%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow_80_270'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow_80_270'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",yY="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M28%2021C24.206%2021%2021%2024.206%2021%2028C21%2031.794%2024.206%2035%2028%2035C31.794%2035%2035%2031.794%2035%2028C35%2024.206%2031.794%2021%2028%2021Z'%20fill='%23F7F7F7'/%3e%3cpath%20d='M46.6667%2011.6668H40.6327L34.3164%205.35042C34.1001%205.13332%2033.843%204.96115%2033.5599%204.84381C33.2767%204.72648%2032.9732%204.66631%2032.6667%204.66675H23.3334C23.0269%204.66631%2022.7234%204.72648%2022.4403%204.84381C22.1572%204.96115%2021.9001%205.13332%2021.6837%205.35042L15.3674%2011.6668H9.33341C6.75975%2011.6668%204.66675%2013.7597%204.66675%2016.3334V42.0001C4.66675%2044.5738%206.75975%2046.6668%209.33341%2046.6668H46.6667C49.2404%2046.6668%2051.3334%2044.5738%2051.3334%2042.0001V16.3334C51.3334%2013.7597%2049.2404%2011.6668%2046.6667%2011.6668ZM28.0001%2039.6667C21.6767%2039.6667%2016.3334%2034.3234%2016.3334%2028.0001C16.3334%2021.6767%2021.6767%2016.3334%2028.0001%2016.3334C34.3234%2016.3334%2039.6667%2021.6767%2039.6667%2028.0001C39.6667%2034.3234%2034.3234%2039.6667%2028.0001%2039.6667Z'%20fill='%23F7F7F7'/%3e%3c/svg%3e";function uF(t,e){return function(){return t.apply(e,arguments)}}const{toString:bY}=Object.prototype,{getPrototypeOf:pN}=Object,_2=(t=>e=>{const n=bY.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bi=t=>(t=t.toLowerCase(),e=>_2(e)===t),A2=t=>e=>typeof e===t,{isArray:Wd}=Array,Ep=A2("undefined");function vY(t){return t!==null&&!Ep(t)&&t.constructor!==null&&!Ep(t.constructor)&&oo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const cF=bi("ArrayBuffer");function xY(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&cF(t.buffer),e}const wY=A2("string"),oo=A2("function"),dF=A2("number"),D2=t=>t!==null&&typeof t=="object",SY=t=>t===!0||t===!1,yy=t=>{if(_2(t)!=="object")return!1;const e=pN(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},CY=bi("Date"),kY=bi("File"),NY=bi("Blob"),TY=bi("FileList"),$Y=t=>D2(t)&&oo(t.pipe),EY=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||oo(t.append)&&((e=_2(t))==="formdata"||e==="object"&&oo(t.toString)&&t.toString()==="[object FormData]"))},IY=bi("URLSearchParams"),RY=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),Wd(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(s=0;s<i;s++)a=o[s],e.call(null,t[a],a,t)}}function hF(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const fF=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pF=t=>!Ep(t)&&t!==fF;function VS(){const{caseless:t}=pF(this)&&this||{},e={},n=(s,r)=>{const o=t&&hF(e,r)||r;yy(e[o])&&yy(s)?e[o]=VS(e[o],s):yy(s)?e[o]=VS({},s):Wd(s)?e[o]=s.slice():e[o]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Cm(arguments[s],n);return e}const _Y=(t,e,n,{allOwnKeys:s}={})=>(Cm(e,(r,o)=>{n&&oo(r)?t[o]=uF(r,n):t[o]=r},{allOwnKeys:s}),t),AY=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),DY=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},OY=(t,e,n,s)=>{let r,o,i;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)i=r[o],(!s||s(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&pN(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},FY=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},LY=t=>{if(!t)return null;if(Wd(t))return t;let e=t.length;if(!dF(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},PY=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pN(Uint8Array)),MY=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=s.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},zY=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},BY=bi("HTMLFormElement"),VY=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),ER=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),UY=bi("RegExp"),mF=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Cm(n,(r,o)=>{let i;(i=e(r,o,t))!==!1&&(s[o]=i||r)}),Object.defineProperties(t,s)},WY=t=>{mF(t,(e,n)=>{if(oo(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(oo(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jY=(t,e)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return Wd(t)?s(t):s(String(t).split(e)),n},GY=()=>{},HY=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Gx="abcdefghijklmnopqrstuvwxyz",IR="0123456789",gF={DIGIT:IR,ALPHA:Gx,ALPHA_DIGIT:Gx+Gx.toUpperCase()+IR},qY=(t=16,e=gF.ALPHA_DIGIT)=>{let n="";const{length:s}=e;for(;t--;)n+=e[Math.random()*s|0];return n};function KY(t){return!!(t&&oo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const XY=t=>{const e=new Array(10),n=(s,r)=>{if(D2(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const o=Wd(s)?[]:{};return Cm(s,(i,a)=>{const l=n(i,r+1);!Ep(l)&&(o[a]=l)}),e[r]=void 0,o}}return s};return n(t,0)},YY=bi("AsyncFunction"),QY=t=>t&&(D2(t)||oo(t))&&oo(t.then)&&oo(t.catch),he={isArray:Wd,isArrayBuffer:cF,isBuffer:vY,isFormData:EY,isArrayBufferView:xY,isString:wY,isNumber:dF,isBoolean:SY,isObject:D2,isPlainObject:yy,isUndefined:Ep,isDate:CY,isFile:kY,isBlob:NY,isRegExp:UY,isFunction:oo,isStream:$Y,isURLSearchParams:IY,isTypedArray:PY,isFileList:TY,forEach:Cm,merge:VS,extend:_Y,trim:RY,stripBOM:AY,inherits:DY,toFlatObject:OY,kindOf:_2,kindOfTest:bi,endsWith:FY,toArray:LY,forEachEntry:MY,matchAll:zY,isHTMLForm:BY,hasOwnProperty:ER,hasOwnProp:ER,reduceDescriptors:mF,freezeMethods:WY,toObjectSet:jY,toCamelCase:VY,noop:GY,toFiniteNumber:HY,findKey:hF,global:fF,isContextDefined:pF,ALPHABET:gF,generateString:qY,isSpecCompliantForm:KY,toJSONObject:XY,isAsyncFn:YY,isThenable:QY};function $t(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r)}he.inherits($t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yF=$t.prototype,bF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bF[t]={value:t}});Object.defineProperties($t,bF);Object.defineProperty(yF,"isAxiosError",{value:!0});$t.from=(t,e,n,s,r,o)=>{const i=Object.create(yF);return he.toFlatObject(t,i,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),$t.call(i,t.message,e,n,s,r),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const ZY=null;function US(t){return he.isPlainObject(t)||he.isArray(t)}function vF(t){return he.endsWith(t,"[]")?t.slice(0,-2):t}function RR(t,e,n){return t?t.concat(e).map(function(r,o){return r=vF(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function JY(t){return he.isArray(t)&&!t.some(US)}const eQ=he.toFlatObject(he,{},null,function(e){return/^is[A-Z]/.test(e)});function O2(t,e,n){if(!he.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=he.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!he.isUndefined(g[m])});const s=n.metaTokens,r=n.visitor||c,o=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(e);if(!he.isFunction(r))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(he.isDate(p))return p.toISOString();if(!l&&he.isBlob(p))throw new $t("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(p)||he.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(he.endsWith(m,"{}"))m=s?m:m.slice(0,-2),p=JSON.stringify(p);else if(he.isArray(p)&&JY(p)||(he.isFileList(p)||he.endsWith(m,"[]"))&&(y=he.toArray(p)))return m=vF(m),y.forEach(function(v,x){!(he.isUndefined(v)||v===null)&&e.append(i===!0?RR([m],x,o):i===null?m:m+"[]",u(v))}),!1}return US(p)?!0:(e.append(RR(g,m,o),u(p)),!1)}const d=[],h=Object.assign(eQ,{defaultVisitor:c,convertValue:u,isVisitable:US});function f(p,m){if(!he.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),he.forEach(p,function(y,b){(!(he.isUndefined(y)||y===null)&&r.call(e,y,he.isString(b)?b.trim():b,m,h))===!0&&f(y,m?m.concat(b):[b])}),d.pop()}}if(!he.isObject(t))throw new TypeError("data must be an object");return f(t),e}function _R(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function mN(t,e){this._pairs=[],t&&O2(t,this,e)}const xF=mN.prototype;xF.append=function(e,n){this._pairs.push([e,n])};xF.toString=function(e){const n=e?function(s){return e.call(this,s,_R)}:_R;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function tQ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wF(t,e,n){if(!e)return t;const s=n&&n.encode||tQ,r=n&&n.serialize;let o;if(r?o=r(e,n):o=he.isURLSearchParams(e)?e.toString():new mN(e,n).toString(s),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class AR{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){he.forEach(this.handlers,function(s){s!==null&&e(s)})}}const SF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nQ=typeof URLSearchParams<"u"?URLSearchParams:mN,sQ=typeof FormData<"u"?FormData:null,rQ=typeof Blob<"u"?Blob:null,oQ={isBrowser:!0,classes:{URLSearchParams:nQ,FormData:sQ,Blob:rQ},protocols:["http","https","file","blob","url","data"]},CF=typeof window<"u"&&typeof document<"u",iQ=(t=>CF&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),aQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:CF,hasStandardBrowserEnv:iQ,hasStandardBrowserWebWorkerEnv:aQ},Symbol.toStringTag,{value:"Module"})),Zo={...lQ,...oQ};function uQ(t,e){return O2(t,new Zo.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,o){return Zo.isNode&&he.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function cQ(t){return he.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function dQ(t){const e={},n=Object.keys(t);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],e[o]=t[o];return e}function kF(t){function e(n,s,r,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),l=o>=n.length;return i=!i&&he.isArray(r)?r.length:i,l?(he.hasOwnProp(r,i)?r[i]=[r[i],s]:r[i]=s,!a):((!r[i]||!he.isObject(r[i]))&&(r[i]=[]),e(n,s,r[i],o)&&he.isArray(r[i])&&(r[i]=dQ(r[i])),!a)}if(he.isFormData(t)&&he.isFunction(t.entries)){const n={};return he.forEachEntry(t,(s,r)=>{e(cQ(s),r,n,0)}),n}return null}function hQ(t,e,n){if(he.isString(t))try{return(e||JSON.parse)(t),he.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const gN={transitional:SF,adapter:["xhr","http"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=he.isObject(e);if(o&&he.isHTMLForm(e)&&(e=new FormData(e)),he.isFormData(e))return r?JSON.stringify(kF(e)):e;if(he.isArrayBuffer(e)||he.isBuffer(e)||he.isStream(e)||he.isFile(e)||he.isBlob(e))return e;if(he.isArrayBufferView(e))return e.buffer;if(he.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return uQ(e,this.formSerializer).toString();if((a=he.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return O2(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),hQ(e)):e}],transformResponse:[function(e){const n=this.transitional||gN.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&he.isString(e)&&(s&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?$t.from(a,$t.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zo.classes.FormData,Blob:Zo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],t=>{gN.headers[t]={}});const yN=gN,fQ=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pQ=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),s=i.substring(r+1).trim(),!(!n||e[n]&&fQ[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},DR=Symbol("internals");function Cf(t){return t&&String(t).trim().toLowerCase()}function by(t){return t===!1||t==null?t:he.isArray(t)?t.map(by):String(t)}function mQ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const gQ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hx(t,e,n,s,r){if(he.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!he.isString(e)){if(he.isString(s))return e.indexOf(s)!==-1;if(he.isRegExp(s))return s.test(e)}}function yQ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function bQ(t,e){const n=he.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,o,i){return this[s].call(this,e,r,o,i)},configurable:!0})})}class F2{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function o(a,l,u){const c=Cf(l);if(!c)throw new Error("header name must be a non-empty string");const d=he.findKey(r,c);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||l]=by(a))}const i=(a,l)=>he.forEach(a,(u,c)=>o(u,c,l));return he.isPlainObject(e)||e instanceof this.constructor?i(e,n):he.isString(e)&&(e=e.trim())&&!gQ(e)?i(pQ(e),n):e!=null&&o(n,e,s),this}get(e,n){if(e=Cf(e),e){const s=he.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return mQ(r);if(he.isFunction(n))return n.call(this,r,s);if(he.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Cf(e),e){const s=he.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||Hx(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function o(i){if(i=Cf(i),i){const a=he.findKey(s,i);a&&(!n||Hx(s,s[a],a,n))&&(delete s[a],r=!0)}}return he.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!e||Hx(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,s={};return he.forEach(this,(r,o)=>{const i=he.findKey(s,o);if(i){n[i]=by(r),delete n[o];return}const a=e?yQ(o):String(o).trim();a!==o&&delete n[o],n[a]=by(r),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return he.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&he.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[DR]=this[DR]={accessors:{}}).accessors,r=this.prototype;function o(i){const a=Cf(i);s[a]||(bQ(r,i),s[a]=!0)}return he.isArray(e)?e.forEach(o):o(e),this}}F2.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(F2.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});he.freezeMethods(F2);const Mi=F2;function qx(t,e){const n=this||yN,s=e||n,r=Mi.from(s.headers);let o=s.data;return he.forEach(t,function(a){o=a.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function NF(t){return!!(t&&t.__CANCEL__)}function km(t,e,n){$t.call(this,t??"canceled",$t.ERR_CANCELED,e,n),this.name="CanceledError"}he.inherits(km,$t,{__CANCEL__:!0});function vQ(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new $t("Request failed with status code "+n.status,[$t.ERR_BAD_REQUEST,$t.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const xQ=Zo.hasStandardBrowserEnv?{write(t,e,n,s,r,o){const i=[t+"="+encodeURIComponent(e)];he.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),he.isString(s)&&i.push("path="+s),he.isString(r)&&i.push("domain="+r),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wQ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function SQ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function TF(t,e){return t&&!wQ(e)?SQ(t,e):e}const CQ=Zo.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function r(o){let i=o;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=r(window.location.href),function(i){const a=he.isString(i)?r(i):i;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function kQ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function NQ(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,o=0,i;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=s[o];i||(i=u),n[r]=l,s[r]=u;let d=o,h=0;for(;d!==r;)h+=n[d++],d=d%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),u-i<e)return;const f=c&&u-c;return f?Math.round(h*1e3/f):void 0}}function OR(t,e){let n=0;const s=NQ(50,250);return r=>{const o=r.loaded,i=r.lengthComputable?r.total:void 0,a=o-n,l=s(a),u=o<=i;n=o;const c={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:l||void 0,estimated:l&&i&&u?(i-o)/l:void 0,event:r};c[e?"download":"upload"]=!0,t(c)}}const TQ=typeof XMLHttpRequest<"u",$Q=TQ&&function(t){return new Promise(function(n,s){let r=t.data;const o=Mi.from(t.headers).normalize();let{responseType:i,withXSRFToken:a}=t,l;function u(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let c;if(he.isFormData(r)){if(Zo.hasStandardBrowserEnv||Zo.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((c=o.getContentType())!==!1){const[m,...g]=c?c.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([m||"multipart/form-data",...g].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(m+":"+g))}const h=TF(t.baseURL,t.url);d.open(t.method.toUpperCase(),wF(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function f(){if(!d)return;const m=Mi.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),y={data:!i||i==="text"||i==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:m,config:t,request:d};vQ(function(v){n(v),u()},function(v){s(v),u()},y),d=null}if("onloadend"in d?d.onloadend=f:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(f)},d.onabort=function(){d&&(s(new $t("Request aborted",$t.ECONNABORTED,t,d)),d=null)},d.onerror=function(){s(new $t("Network Error",$t.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||SF;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),s(new $t(g,y.clarifyTimeoutError?$t.ETIMEDOUT:$t.ECONNABORTED,t,d)),d=null},Zo.hasStandardBrowserEnv&&(a&&he.isFunction(a)&&(a=a(t)),a||a!==!1&&CQ(h))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&xQ.read(t.xsrfCookieName);m&&o.set(t.xsrfHeaderName,m)}r===void 0&&o.setContentType(null),"setRequestHeader"in d&&he.forEach(o.toJSON(),function(g,y){d.setRequestHeader(y,g)}),he.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),i&&i!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",OR(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",OR(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{d&&(s(!m||m.type?new km(null,t,d):m),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const p=kQ(h);if(p&&Zo.protocols.indexOf(p)===-1){s(new $t("Unsupported protocol "+p+":",$t.ERR_BAD_REQUEST,t));return}d.send(r||null)})},WS={http:ZY,xhr:$Q};he.forEach(WS,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const FR=t=>`- ${t}`,EQ=t=>he.isFunction(t)||t===null||t===!1,$F={getAdapter:t=>{t=he.isArray(t)?t:[t];const{length:e}=t;let n,s;const r={};for(let o=0;o<e;o++){n=t[o];let i;if(s=n,!EQ(n)&&(s=WS[(i=String(n)).toLowerCase()],s===void 0))throw new $t(`Unknown adapter '${i}'`);if(s)break;r[i||"#"+o]=s}if(!s){const o=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(FR).join(`
`):" "+FR(o[0]):"as no adapter specified";throw new $t("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:WS};function Kx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new km(null,t)}function LR(t){return Kx(t),t.headers=Mi.from(t.headers),t.data=qx.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$F.getAdapter(t.adapter||yN.adapter)(t).then(function(s){return Kx(t),s.data=qx.call(t,t.transformResponse,s),s.headers=Mi.from(s.headers),s},function(s){return NF(s)||(Kx(t),s&&s.response&&(s.response.data=qx.call(t,t.transformResponse,s.response),s.response.headers=Mi.from(s.response.headers))),Promise.reject(s)})}const PR=t=>t instanceof Mi?{...t}:t;function xd(t,e){e=e||{};const n={};function s(u,c,d){return he.isPlainObject(u)&&he.isPlainObject(c)?he.merge.call({caseless:d},u,c):he.isPlainObject(c)?he.merge({},c):he.isArray(c)?c.slice():c}function r(u,c,d){if(he.isUndefined(c)){if(!he.isUndefined(u))return s(void 0,u,d)}else return s(u,c,d)}function o(u,c){if(!he.isUndefined(c))return s(void 0,c)}function i(u,c){if(he.isUndefined(c)){if(!he.isUndefined(u))return s(void 0,u)}else return s(void 0,c)}function a(u,c,d){if(d in e)return s(u,c);if(d in t)return s(void 0,u)}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,c)=>r(PR(u),PR(c),!0)};return he.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=l[c]||r,h=d(t[c],e[c],c);he.isUndefined(h)&&d!==a||(n[c]=h)}),n}const EF="1.6.8",bN={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{bN[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const MR={};bN.transitional=function(e,n,s){function r(o,i){return"[Axios v"+EF+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,a)=>{if(e===!1)throw new $t(r(i," has been removed"+(n?" in "+n:"")),$t.ERR_DEPRECATED);return n&&!MR[i]&&(MR[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,a):!0}};function IQ(t,e,n){if(typeof t!="object")throw new $t("options must be an object",$t.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const o=s[r],i=e[o];if(i){const a=t[o],l=a===void 0||i(a,o,t);if(l!==!0)throw new $t("option "+o+" must be "+l,$t.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new $t("Unknown option "+o,$t.ERR_BAD_OPTION)}}const jS={assertOptions:IQ,validators:bN},fa=jS.validators;class o1{constructor(e){this.defaults=e,this.interceptors={request:new AR,response:new AR}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=xd(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&jS.assertOptions(s,{silentJSONParsing:fa.transitional(fa.boolean),forcedJSONParsing:fa.transitional(fa.boolean),clarifyTimeoutError:fa.transitional(fa.boolean)},!1),r!=null&&(he.isFunction(r)?n.paramsSerializer={serialize:r}:jS.assertOptions(r,{encode:fa.function,serialize:fa.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&he.merge(o.common,o[n.method]);o&&he.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=Mi.concat(i,o);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let c,d=0,h;if(!l){const p=[LR.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),h=p.length,c=Promise.resolve(n);d<h;)c=c.then(p[d++],p[d++]);return c}h=a.length;let f=n;for(d=0;d<h;){const p=a[d++],m=a[d++];try{f=p(f)}catch(g){m.call(this,g);break}}try{c=LR.call(this,f)}catch(p){return Promise.reject(p)}for(d=0,h=u.length;d<h;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=xd(this.defaults,e);const n=TF(e.baseURL,e.url);return wF(n,e.params,e.paramsSerializer)}}he.forEach(["delete","get","head","options"],function(e){o1.prototype[e]=function(n,s){return this.request(xd(s||{},{method:e,url:n,data:(s||{}).data}))}});he.forEach(["post","put","patch"],function(e){function n(s){return function(o,i,a){return this.request(xd(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}o1.prototype[e]=n(),o1.prototype[e+"Form"]=n(!0)});const vy=o1;class vN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const i=new Promise(a=>{s.subscribe(a),o=a}).then(r);return i.cancel=function(){s.unsubscribe(o)},i},e(function(o,i,a){s.reason||(s.reason=new km(o,i,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new vN(function(r){e=r}),cancel:e}}}const RQ=vN;function _Q(t){return function(n){return t.apply(null,n)}}function AQ(t){return he.isObject(t)&&t.isAxiosError===!0}const GS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(GS).forEach(([t,e])=>{GS[e]=t});const DQ=GS;function IF(t){const e=new vy(t),n=uF(vy.prototype.request,e);return he.extend(n,vy.prototype,e,{allOwnKeys:!0}),he.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return IF(xd(t,r))},n}const Sn=IF(yN);Sn.Axios=vy;Sn.CanceledError=km;Sn.CancelToken=RQ;Sn.isCancel=NF;Sn.VERSION=EF;Sn.toFormData=O2;Sn.AxiosError=$t;Sn.Cancel=Sn.CanceledError;Sn.all=function(e){return Promise.all(e)};Sn.spread=_Q;Sn.isAxiosError=AQ;Sn.mergeConfig=xd;Sn.AxiosHeaders=Mi;Sn.formToJSON=t=>kF(he.isHTMLForm(t)?new FormData(t):t);Sn.getAdapter=$F.getAdapter;Sn.HttpStatusCode=DQ;Sn.default=Sn;const OQ=(t,e="",n=512)=>{const s=atob(t.split(",")[1]),r=[];for(let o=0;o<s.length;o+=n){const i=s.slice(o,o+n),a=new Array(i.length);for(let u=0;u<i.length;u++)a[u]=i.charCodeAt(u);const l=new Uint8Array(a);r.push(l)}return new Blob(r,{type:e})};var FQ={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const LQ=async t=>{const e=new FormData,n=`${FQ.VITE_REACT_APP_SERVER}/api/v1/search/ocr`;if(t.ocrImage&&t.ocrImage.includes(",")){const s=t.ocrImage.split(";")[0].split(":")[1],r=OQ(t.ocrImage,s);e.append("ocrImage",r,"ocrImage.jpg")}else throw new Error("Invalid image data");try{return(await Sn.post(n,e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw console.error("Error posting OCR image data:",s),s}},PQ=()=>{const[t,e]=_.useState(null),n=_.useRef(null),[s,r]=_.useState(!1),o=mi(),i=c=>{var h;const d=(h=c.target.files)==null?void 0:h[0];if(d){const f=new FileReader;f.onloadend=()=>{const p=f.result;e(p),u(p)},f.readAsDataURL(d)}},a=()=>{r(!0),navigator.mediaDevices.getUserMedia({video:!0}).then(c=>{const d=n.current;d&&(d.srcObject=c,d.play())}).catch(c=>console.error("Camera access error:",c))},l=()=>{const c=n.current;if(c){const d=document.createElement("canvas");d.width=c.videoWidth,d.height=c.videoHeight;const h=d.getContext("2d");if(h){h.drawImage(c,0,0,d.width,d.height);const m=d.toDataURL("image/png");e(m),u(m)}c.srcObject.getTracks().forEach(m=>m.stop()),r(!1)}},u=async c=>{try{const d=await LQ({ocrImage:c});if(console.log("OCR Response:",d),d&&d.data&&d.data.length>0){const h=d.data[0].foodName;o(`/search/${encodeURIComponent(h)}`)}}catch(d){console.error("Error processing image:",d)}};return console.log("imageData:",t),R.jsxs("div",{className:"mx-2",children:[R.jsx("div",{className:"flex w-full justify-center items-center space-x-2 mt-3 bg-customYellow rounded-3xl p-4 py-7 shadow-custom",children:R.jsxs("div",{className:"inline-flex flex-1",children:[R.jsxs("div",{className:"flex-1 flex justify-center items-center",children:[R.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:R.jsx("img",{src:gY,alt:"Import Image",className:"w-10 h-10"})}),R.jsx("input",{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:i})]}),R.jsx("div",{className:"w-px h-12 bg-white"}),R.jsx("div",{className:"flex-1 flex justify-center items-center",children:R.jsx("button",{onClick:a,className:"cursor-pointer",children:R.jsx("img",{src:yY,alt:"Camera",className:"w-10 h-10"})})})]})}),s&&R.jsxs("div",{className:"fixed inset-0 flex justify-center items-center z-50",children:[R.jsx("video",{ref:n,className:"w-[430px] h-full rounded-lg shadow-md",autoPlay:!0,playsInline:!0}),R.jsx("button",{onClick:l,className:"absolute bottom-10 bg-customYellow p-2 rounded-full shadow-lg",children:""})]})]})};var MQ={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const zQ=MQ.VITE_AI_DATA,BQ=async t=>(await Sn.post("https://api.openai.com/v1/chat/completions",{model:"gpt-4o-mini",messages:[{role:"user",content:t}]},{headers:{Authorization:`Bearer ${zQ}`,"Content-Type":"application/json"}})).data.choices[0].message.content;function HS(){return HS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},HS.apply(this,arguments)}var VQ={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(t){},onComplete:function(t){},preStringTyped:function(t,e){},onStringTyped:function(t,e){},onLastStringBackspaced:function(t){},onTypingPaused:function(t,e){},onTypingResumed:function(t,e){},onReset:function(t){},onStop:function(t,e){},onStart:function(t,e){},onDestroy:function(t){}},UQ=new(function(){function t(){}var e=t.prototype;return e.load=function(n,s,r){if(n.el=typeof r=="string"?document.querySelector(r):r,n.options=HS({},VQ,s),n.isInput=n.el.tagName.toLowerCase()==="input",n.attr=n.options.attr,n.bindInputFocusEvents=n.options.bindInputFocusEvents,n.showCursor=!n.isInput&&n.options.showCursor,n.cursorChar=n.options.cursorChar,n.cursorBlinking=!0,n.elContent=n.attr?n.el.getAttribute(n.attr):n.el.textContent,n.contentType=n.options.contentType,n.typeSpeed=n.options.typeSpeed,n.startDelay=n.options.startDelay,n.backSpeed=n.options.backSpeed,n.smartBackspace=n.options.smartBackspace,n.backDelay=n.options.backDelay,n.fadeOut=n.options.fadeOut,n.fadeOutClass=n.options.fadeOutClass,n.fadeOutDelay=n.options.fadeOutDelay,n.isPaused=!1,n.strings=n.options.strings.map(function(u){return u.trim()}),n.stringsElement=typeof n.options.stringsElement=="string"?document.querySelector(n.options.stringsElement):n.options.stringsElement,n.stringsElement){n.strings=[],n.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var o=Array.prototype.slice.apply(n.stringsElement.children),i=o.length;if(i)for(var a=0;a<i;a+=1)n.strings.push(o[a].innerHTML.trim())}for(var l in n.strPos=0,n.currentElContent=this.getCurrentElContent(n),n.currentElContent&&n.currentElContent.length>0&&(n.strPos=n.currentElContent.length-1,n.strings.unshift(n.currentElContent)),n.sequence=[],n.strings)n.sequence[l]=l;n.arrayPos=0,n.stopNum=0,n.loop=n.options.loop,n.loopCount=n.options.loopCount,n.curLoop=0,n.shuffle=n.options.shuffle,n.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},n.typingComplete=!1,n.autoInsertCss=n.options.autoInsertCss,n.autoInsertCss&&(this.appendCursorAnimationCss(n),this.appendFadeOutAnimationCss(n))},e.getCurrentElContent=function(n){return n.attr?n.el.getAttribute(n.attr):n.isInput?n.el.value:n.contentType==="html"?n.el.innerHTML:n.el.textContent},e.appendCursorAnimationCss=function(n){var s="data-typed-js-cursor-css";if(n.showCursor&&!document.querySelector("["+s+"]")){var r=document.createElement("style");r.setAttribute(s,"true"),r.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(r)}},e.appendFadeOutAnimationCss=function(n){var s="data-typed-fadeout-js-css";if(n.fadeOut&&!document.querySelector("["+s+"]")){var r=document.createElement("style");r.setAttribute(s,"true"),r.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(r)}},t}()),zR=new(function(){function t(){}var e=t.prototype;return e.typeHtmlChars=function(n,s,r){if(r.contentType!=="html")return s;var o=n.substring(s).charAt(0);if(o==="<"||o==="&"){var i;for(i=o==="<"?">":";";n.substring(s+1).charAt(0)!==i&&!(1+ ++s>n.length););s++}return s},e.backSpaceHtmlChars=function(n,s,r){if(r.contentType!=="html")return s;var o=n.substring(s).charAt(0);if(o===">"||o===";"){var i;for(i=o===">"?"<":"&";n.substring(s-1).charAt(0)!==i&&!(--s<0););s--}return s},t}()),WQ=function(){function t(n,s){UQ.load(this,s,n),this.begin()}var e=t.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(n){n===void 0&&(n=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,n&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var n=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){n.strPos===0?n.typewrite(n.strings[n.sequence[n.arrayPos]],n.strPos):n.backspace(n.strings[n.sequence[n.arrayPos]],n.strPos)},this.startDelay)},e.typewrite=function(n,s){var r=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var o=this.humanizer(this.typeSpeed),i=1;this.pause.status!==!0?this.timeout=setTimeout(function(){s=zR.typeHtmlChars(n,s,r);var a=0,l=n.substring(s);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var u=1;u+=(l=/\d+/.exec(l)[0]).length,a=parseInt(l),r.temporaryPause=!0,r.options.onTypingPaused(r.arrayPos,r),n=n.substring(0,s)+n.substring(s+u),r.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;n.substring(s+i).charAt(0)!=="`"&&(i++,!(s+i>n.length)););var c=n.substring(0,s),d=n.substring(c.length+1,s+i),h=n.substring(s+i+1);n=c+d+h,i--}r.timeout=setTimeout(function(){r.toggleBlinking(!1),s>=n.length?r.doneTyping(n,s):r.keepTyping(n,s,i),r.temporaryPause&&(r.temporaryPause=!1,r.options.onTypingResumed(r.arrayPos,r))},a)},o):this.setPauseStatus(n,s,!0)},e.keepTyping=function(n,s,r){s===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var o=n.substring(0,s+=r);this.replaceText(o),this.typewrite(n,s)},e.doneTyping=function(n,s){var r=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){r.backspace(n,s)},this.backDelay))},e.backspace=function(n,s){var r=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var o=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){s=zR.backSpaceHtmlChars(n,s,r);var i=n.substring(0,s);if(r.replaceText(i),r.smartBackspace){var a=r.strings[r.arrayPos+1];r.stopNum=a&&i===a.substring(0,s)?s:0}s>r.stopNum?(s--,r.backspace(n,s)):s<=r.stopNum&&(r.arrayPos++,r.arrayPos===r.strings.length?(r.arrayPos=0,r.options.onLastStringBackspaced(),r.shuffleStringsIfNeeded(),r.begin()):r.typewrite(r.strings[r.sequence[r.arrayPos]],s))},o)}else this.setPauseStatus(n,s,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(n,s,r){this.pause.typewrite=r,this.pause.curString=n,this.pause.curStrPos=s},e.toggleBlinking=function(n){this.cursor&&(this.pause.status||this.cursorBlinking!==n&&(this.cursorBlinking=n,n?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(n){return Math.round(Math.random()*n/2)+n},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var n=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){n.arrayPos++,n.replaceText(""),n.strings.length>n.arrayPos?n.typewrite(n.strings[n.sequence[n.arrayPos]],0):(n.typewrite(n.strings[0],0),n.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(n){this.attr?this.el.setAttribute(this.attr,n):this.isInput?this.el.value=n:this.contentType==="html"?this.el.innerHTML=n:this.el.textContent=n},e.bindFocusEvents=function(){var n=this;this.isInput&&(this.el.addEventListener("focus",function(s){n.stop()}),this.el.addEventListener("blur",function(s){n.el.value&&n.el.value.length!==0||n.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},t}();const jQ=_.memo(({style:t,className:e,typedRef:n,parseRef:s,stopped:r,children:o,startWhenVisible:i,...a})=>{const l=_.useRef(null),u=_.useMemo(()=>{var d;return[...Object.values(a).filter(h=>typeof h=="boolean"||typeof h=="number"||typeof h=="string"),(d=a.strings)==null?void 0:d.join(",")]},[a]);_.useEffect(()=>{const d=s&&s(l)||l.current,h=new WQ(d,{...a});if((r||i)&&(h==null||h.stop()),i){const f=new IntersectionObserver(([p])=>{p.isIntersecting&&(h==null||h.start(),f.disconnect())});f.observe(d)}return n&&h&&n(h),()=>{h.destroy()}},u);const c=o?Ze.cloneElement(o,{ref:l}):Ze.createElement("span",{style:t,ref:l});return Ze.createElement("span",{style:t,className:e,"data-testid":"react-typed"},c)}),BR="/assets/Spinner-DmW-7JUz.gif",GQ="data:image/svg+xml,%3csvg%20width='77'%20height='60'%20viewBox='0%200%2077%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d_186_1184)'%3e%3cpath%20d='M45%2050C31.746%2050%2021%2040.598%2021%2029C21%2017.402%2031.746%208%2045%208C58.254%208%2069%2017.402%2069%2029C69%2034.28%2066.771%2039.11%2063.09%2042.8C63%2046%2065%2048.5%2066.403%2050.698C66.64%2051.256%2066.181%2051.88%2065.584%2051.784C58.5%2051.784%2053.793%2049.97%2052.044%2049.082C49.7463%2049.6948%2047.378%2050.0035%2045%2050Z'%20fill='%2349C09C'/%3e%3c/g%3e%3cpath%20d='M52.5833%2025.5H37.4167C36.7723%2025.5%2036.25%2026.0223%2036.25%2026.6667V38.3333C36.25%2038.9777%2036.7723%2039.5%2037.4167%2039.5H52.5833C53.2277%2039.5%2053.75%2038.9777%2053.75%2038.3333V26.6667C53.75%2026.0223%2053.2277%2025.5%2052.5833%2025.5Z'%20stroke='%23F3F3F3'%20stroke-width='2'/%3e%3cpath%20d='M40.9167%2032.5C41.561%2032.5%2042.0833%2031.9776%2042.0833%2031.3333C42.0833%2030.689%2041.561%2030.1666%2040.9167%2030.1666C40.2723%2030.1666%2039.75%2030.689%2039.75%2031.3333C39.75%2031.9776%2040.2723%2032.5%2040.9167%2032.5Z'%20fill='%23F3F3F3'/%3e%3cpath%20d='M49.0834%2032.5C49.7277%2032.5%2050.2501%2031.9776%2050.2501%2031.3333C50.2501%2030.689%2049.7277%2030.1666%2049.0834%2030.1666C48.4391%2030.1666%2047.9167%2030.689%2047.9167%2031.3333C47.9167%2031.9776%2048.4391%2032.5%2049.0834%2032.5Z'%20fill='%23F3F3F3'/%3e%3cpath%20d='M42.0833%2034.25L44.6285%2035.2681C44.8669%2035.3635%2045.1329%2035.3635%2045.3713%2035.2681L47.9166%2034.25'%20stroke='%23F3F3F3'%20stroke-width='1.6'%20stroke-linecap='round'/%3e%3cpath%20d='M45%2020.8334V25.5'%20stroke='%23F3F3F3'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M33.3333%2030.1666V34.8333'%20stroke='%23F3F3F3'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M56.6667%2030.1666V34.8333'%20stroke='%23F3F3F3'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M44.9999%2020.8333C45.6443%2020.8333%2046.1666%2020.311%2046.1666%2019.6667C46.1666%2019.0223%2045.6443%2018.5%2044.9999%2018.5C44.3556%2018.5%2043.8333%2019.0223%2043.8333%2019.6667C43.8333%2020.311%2044.3556%2020.8333%2044.9999%2020.8333Z'%20stroke='%23F3F3F3'%20stroke-width='2'/%3e%3cpath%20d='M6.26221%2019.2841L14.8925%2021.8372'%20stroke='%2349C09C'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cpath%20d='M12.5259%208.2041L18.9473%2014.5101'%20stroke='%2349C09C'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cpath%20d='M5.61914%2031.9167L14.1019%2028.9095'%20stroke='%2349C09C'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cdefs%3e%3cfilter%20id='filter0_d_186_1184'%20x='13'%20y='0'%20width='64'%20height='59.7938'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='4'/%3e%3cfeComposite%20in2='hardAlpha'%20operator='out'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.286275%200%200%200%200%200.752941%200%200%200%200%200.611765%200%200%200%200.4%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow_186_1184'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow_186_1184'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",HQ="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_154_856)'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.9464%201.02895C24.0009%200.892657%2024.0143%200.743347%2023.9848%200.599533C23.9553%200.455718%2023.8842%200.323724%2023.7804%200.219914C23.6766%200.116105%2023.5446%200.0450444%2023.4008%200.0155432C23.257%20-0.013958%2023.1077%20-0.00060275%2022.9714%200.0539533L22.8289%200.110953L1.15089%208.78095L1.14939%208.78245L0.471392%209.05245C0.342978%209.10368%200.23122%209.1894%200.148466%209.30015C0.0657109%209.4109%200.0151792%209.54237%200.00245241%209.68004C-0.0102744%209.8177%200.015299%209.95621%200.0763477%2010.0803C0.137396%2010.2043%200.231545%2010.3091%200.348392%2010.383L0.963392%2010.773L0.964892%2010.776L7.80939%2015.1305L8.45739%2015.543L8.86989%2016.191L13.2244%2023.0355L13.2274%2023.0385L13.6174%2023.6535C13.6915%2023.7699%2013.7963%2023.8635%2013.9203%2023.9242C14.0442%2023.9849%2014.1825%2024.0102%2014.3199%2023.9973C14.4573%2023.9844%2014.5885%2023.9339%2014.699%2023.8512C14.8096%2023.7686%2014.8952%2023.6571%2014.9464%2023.529L15.2179%2022.8495L23.8894%201.16995L23.9464%201.02745V1.02895ZM21.1969%203.86395L21.9034%202.09695L20.1364%202.80345L8.89539%2014.0445L9.40239%2014.367C9.49543%2014.426%209.5743%2014.5049%209.63339%2014.598L9.95589%2015.105L21.1969%203.86395V3.86395Z'%20fill='%2349C09C'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_154_856'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",qQ=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"<br/>"),RF=({position:t="default"})=>{const[e,n]=_.useState(!1),[s,r]=_.useState(!1),[o,i]=_.useState([]),[a,l]=_.useState(""),[u,c]=_.useState(0),[d,h]=_.useState(!1),f=_.useRef(null),p=_.useRef(null),m=_.useRef(null),g=()=>{r(!1),n(!0),f.current&&f.current.focus()},y=()=>{r(!0),setTimeout(()=>{n(!1)},500)},b=()=>{m.current&&m.current.scrollIntoView({behavior:"smooth"})},v=k=>{l(k.target.value)},x=async()=>{if(a.trim()==="")return;const k={sender:"user",text:a};i(N=>[...N,k]),l(""),h(!0);try{const $={sender:"bot",text:await BQ(a)};i(I=>[...I,$])}catch(N){console.error("OpenAI API    :",N),i($=>[...$,{sender:"bot",text:" .  ."}])}finally{h(!1)}},w=k=>{k.key==="Enter"&&(k.preventDefault(),x())};_.useEffect(()=>{const k=()=>{const N=window.innerHeight,$=window.outerHeight;c($-N)};return window.addEventListener("resize",k),k(),()=>{window.removeEventListener("resize",k)}},[]),_.useEffect(()=>{const k=N=>{p.current&&!p.current.contains(N.target)&&y()};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[p]),_.useEffect(()=>{b()},[o]);const S=t==="bottom-right"?"fixed bottom-5 left-1/2 transform translate-x-[250px]":"absolute bottom-[-20px] left-[-20px]";return R.jsxs("div",{className:"relative",children:[R.jsx("button",{onClick:g,className:`${S} z-50`,children:R.jsx("img",{src:GQ,alt:"Chatbot",className:"w-14 h-14"})}),e&&R.jsx("div",{className:"fixed z-50 inset-0 flex justify-center items-end bg-black bg-opacity-50",onClick:y,children:R.jsxs("div",{ref:p,className:`w-[430px] max-h-[85vh] md:h-[800px] bg-customChatBackground shadow-lg border border-gray-300 rounded-t-lg flex flex-col transform ${s?"animate-slide-down":"animate-slide-up"}`,onClick:k=>k.stopPropagation(),style:{minHeight:`calc(85vh - ${u}px)`,paddingBottom:u},children:[R.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[o.map((k,N)=>R.jsx("div",{className:`mb-2 ${k.sender==="user"?"text-right":"text-left"}`,children:R.jsx("span",{className:`inline-block p-2 ${k.sender==="user"?"bg-customMint text-white p-3 px-5 rounded-3xl rounded-br-none":"bg-white text-customMint p-3 px-5 rounded-3xl rounded-bl-none "}`,children:k.sender==="bot"?R.jsxs(R.Fragment,{children:[R.jsx(jQ,{strings:[qQ(k.text)],typeSpeed:40,showCursor:!1,onStringTyped:b,onComplete:b}),d&&R.jsx("img",{src:BR,alt:"Loading...",className:"inline-block ml-2 w-4 h-4"})]}):k.text})},N)),d&&R.jsx("div",{className:"text-left mb-2",children:R.jsx("span",{className:"inline-block p-2 rounded-lg text-black",children:R.jsx("img",{src:BR,alt:"Loading...",className:"inline-block w-4 h-4"})})}),R.jsx("div",{ref:m})]}),R.jsx("div",{className:"relative w-full mt-1",children:R.jsxs("div",{className:"mx-4",children:[R.jsx("input",{type:"text",value:a,onChange:v,onKeyDown:w,className:"w-full p-4 pr-10 border rounded-full",ref:f}),R.jsx("button",{onClick:x,className:"absolute right-10 top-1/2 transform -translate-y-1/2",children:R.jsx("img",{src:HQ,alt:"Send",className:"w-5 h-5"})})]})})]})})]})};function us(){return us=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},us.apply(this,arguments)}function KQ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function _F(...t){return e=>t.forEach(n=>KQ(n,e))}function Cu(...t){return _.useCallback(_F(...t),t)}const Ip=_.forwardRef((t,e)=>{const{children:n,...s}=t,r=_.Children.toArray(n),o=r.find(YQ);if(o){const i=o.props.children,a=r.map(l=>l===o?_.Children.count(i)>1?_.Children.only(null):_.isValidElement(i)?i.props.children:null:l);return _.createElement(qS,us({},s,{ref:e}),_.isValidElement(i)?_.cloneElement(i,void 0,a):null)}return _.createElement(qS,us({},s,{ref:e}),n)});Ip.displayName="Slot";const qS=_.forwardRef((t,e)=>{const{children:n,...s}=t;return _.isValidElement(n)?_.cloneElement(n,{...QQ(s,n.props),ref:e?_F(e,n.ref):n.ref}):_.Children.count(n)>1?_.Children.only(null):null});qS.displayName="SlotClone";const XQ=({children:t})=>_.createElement(_.Fragment,null,t);function YQ(t){return _.isValidElement(t)&&t.type===XQ}function QQ(t,e){const n={...e};for(const s in e){const r=t[s],o=e[s];/^on[A-Z]/.test(s)?r&&o?n[s]=(...a)=>{o(...a),r(...a)}:r&&(n[s]=r):s==="style"?n[s]={...r,...o}:s==="className"&&(n[s]=[r,o].filter(Boolean).join(" "))}return{...t,...n}}function AF(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=AF(t[e]))&&(s&&(s+=" "),s+=n);else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function ZQ(){for(var t,e,n=0,s="";n<arguments.length;)(t=arguments[n++])&&(e=AF(t))&&(s&&(s+=" "),s+=e);return s}const VR=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,UR=ZQ,DF=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return UR(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:o}=e,i=Object.keys(r).map(u=>{const c=n==null?void 0:n[u],d=o==null?void 0:o[u];if(c===null)return null;const h=VR(c)||VR(d);return r[u][h]}),a=n&&Object.entries(n).reduce((u,c)=>{let[d,h]=c;return h===void 0||(u[d]=h),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,c)=>{let{class:d,className:h,...f}=c;return Object.entries(f).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...o,...a}[m]):{...o,...a}[m]===g})?[...u,d,h]:u},[]);return UR(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};function OF(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=OF(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function JQ(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=OF(t))&&(s&&(s+=" "),s+=e);return s}const xN="-";function eZ(t){const e=nZ(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;function r(i){const a=i.split(xN);return a[0]===""&&a.length!==1&&a.shift(),FF(a,e)||tZ(i)}function o(i,a){const l=n[i]||[];return a&&s[i]?[...l,...s[i]]:l}return{getClassGroupId:r,getConflictingClassGroupIds:o}}function FF(t,e){var i;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?FF(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const o=t.join(xN);return(i=e.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId}const WR=/^\[(.+)\]$/;function tZ(t){if(WR.test(t)){const e=WR.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function nZ(t){const{theme:e,prefix:n}=t,s={nextPart:new Map,validators:[]};return rZ(Object.entries(t.classGroups),n).forEach(([o,i])=>{KS(i,s,o,e)}),s}function KS(t,e,n,s){t.forEach(r=>{if(typeof r=="string"){const o=r===""?e:jR(e,r);o.classGroupId=n;return}if(typeof r=="function"){if(sZ(r)){KS(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([o,i])=>{KS(i,jR(e,o),n,s)})})}function jR(t,e){let n=t;return e.split(xN).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n}function sZ(t){return t.isThemeGetter}function rZ(t,e){return e?t.map(([n,s])=>{const r=s.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[e+i,a])):o);return[n,r]}):t}function oZ(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;function r(o,i){n.set(o,i),e++,e>t&&(e=0,s=n,n=new Map)}return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return r(o,i),i},set(o,i){n.has(o)?n.set(o,i):r(o,i)}}}const LF="!";function iZ(t){const e=t.separator,n=e.length===1,s=e[0],r=e.length;return function(i){const a=[];let l=0,u=0,c;for(let m=0;m<i.length;m++){let g=i[m];if(l===0){if(g===s&&(n||i.slice(m,m+r)===e)){a.push(i.slice(u,m)),u=m+r;continue}if(g==="/"){c=m;continue}}g==="["?l++:g==="]"&&l--}const d=a.length===0?i:i.substring(u),h=d.startsWith(LF),f=h?d.substring(1):d,p=c&&c>u?c-u:void 0;return{modifiers:a,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}}}function aZ(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(s=>{s[0]==="["?(e.push(...n.sort(),s),n=[]):n.push(s)}),e.push(...n.sort()),e}function lZ(t){return{cache:oZ(t.cacheSize),splitModifiers:iZ(t),...eZ(t)}}const uZ=/\s+/;function cZ(t,e){const{splitModifiers:n,getClassGroupId:s,getConflictingClassGroupIds:r}=e,o=new Set;return t.trim().split(uZ).map(i=>{const{modifiers:a,hasImportantModifier:l,baseClassName:u,maybePostfixModifierPosition:c}=n(i);let d=s(c?u.substring(0,c):u),h=!!c;if(!d){if(!c)return{isTailwindClass:!1,originalClassName:i};if(d=s(u),!d)return{isTailwindClass:!1,originalClassName:i};h=!1}const f=aZ(a).join(":");return{isTailwindClass:!0,modifierId:l?f+LF:f,classGroupId:d,originalClassName:i,hasPostfixModifier:h}}).reverse().filter(i=>{if(!i.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:u}=i,c=a+l;return o.has(c)?!1:(o.add(c),r(l,u).forEach(d=>o.add(a+d)),!0)}).reverse().map(i=>i.originalClassName).join(" ")}function dZ(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=PF(e))&&(s&&(s+=" "),s+=n);return s}function PF(t){if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=PF(t[s]))&&(n&&(n+=" "),n+=e);return n}function hZ(t,...e){let n,s,r,o=i;function i(l){const u=e.reduce((c,d)=>d(c),t());return n=lZ(u),s=n.cache.get,r=n.cache.set,o=a,a(l)}function a(l){const u=s(l);if(u)return u;const c=cZ(l,n);return r(l,c),c}return function(){return o(dZ.apply(null,arguments))}}function Yt(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const MF=/^\[(?:([a-z-]+):)?(.+)\]$/i,fZ=/^\d+\/\d+$/,pZ=new Set(["px","full","screen"]),mZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Ci(t){return Xl(t)||pZ.has(t)||fZ.test(t)}function pa(t){return jd(t,"length",$Z)}function Xl(t){return!!t&&!Number.isNaN(Number(t))}function M0(t){return jd(t,"number",Xl)}function kf(t){return!!t&&Number.isInteger(Number(t))}function xZ(t){return t.endsWith("%")&&Xl(t.slice(0,-1))}function ht(t){return MF.test(t)}function ma(t){return mZ.test(t)}const wZ=new Set(["length","size","percentage"]);function SZ(t){return jd(t,wZ,zF)}function CZ(t){return jd(t,"position",zF)}const kZ=new Set(["image","url"]);function NZ(t){return jd(t,kZ,IZ)}function TZ(t){return jd(t,"",EZ)}function Nf(){return!0}function jd(t,e,n){const s=MF.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):n(s[2]):!1}function $Z(t){return gZ.test(t)&&!yZ.test(t)}function zF(){return!1}function EZ(t){return bZ.test(t)}function IZ(t){return vZ.test(t)}function RZ(){const t=Yt("colors"),e=Yt("spacing"),n=Yt("blur"),s=Yt("brightness"),r=Yt("borderColor"),o=Yt("borderRadius"),i=Yt("borderSpacing"),a=Yt("borderWidth"),l=Yt("contrast"),u=Yt("grayscale"),c=Yt("hueRotate"),d=Yt("invert"),h=Yt("gap"),f=Yt("gradientColorStops"),p=Yt("gradientColorStopPositions"),m=Yt("inset"),g=Yt("margin"),y=Yt("opacity"),b=Yt("padding"),v=Yt("saturate"),x=Yt("scale"),w=Yt("sepia"),S=Yt("skew"),k=Yt("space"),N=Yt("translate"),$=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",ht,e],O=()=>[ht,e],P=()=>["",Ci,pa],F=()=>["auto",Xl,ht],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],B=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",ht],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[Xl,M0],D=()=>[Xl,ht];return{cacheSize:500,separator:":",theme:{colors:[Nf],spacing:[Ci,pa],blur:["none","",ma,ht],brightness:ne(),borderColor:[t],borderRadius:["none","","full",ma,ht],borderSpacing:O(),borderWidth:P(),contrast:ne(),grayscale:H(),hueRotate:D(),invert:H(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[xZ,pa],inset:A(),margin:A(),opacity:ne(),padding:O(),saturate:ne(),scale:ne(),sepia:H(),skew:D(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",ht]}],container:["container"],columns:[{columns:[ma]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),ht]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",kf,ht]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ht]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",kf,ht]}],"grid-cols":[{"grid-cols":[Nf]}],"col-start-end":[{col:["auto",{span:["full",kf,ht]},ht]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Nf]}],"row-start-end":[{row:["auto",{span:[kf,ht]},ht]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ht]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ht]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ht,e]}],"min-w":[{"min-w":[ht,e,"min","max","fit"]}],"max-w":[{"max-w":[ht,e,"none","full","min","max","fit","prose",{screen:[ma]},ma]}],h:[{h:[ht,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ht,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ht,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ht,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ma,pa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",M0]}],"font-family":[{font:[Nf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ht]}],"line-clamp":[{"line-clamp":["none",Xl,M0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ci,ht]}],"list-image":[{"list-image":["none",ht]}],"list-style-type":[{list:["none","disc","decimal",ht]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ci,pa]}],"underline-offset":[{"underline-offset":["auto",Ci,ht]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ht]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),CZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",SZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},NZ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:q()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Ci,ht]}],"outline-w":[{outline:[Ci,pa]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ci,pa]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ma,TZ]}],"shadow-color":[{shadow:[Nf]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":Z()}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ma,ht]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ht]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",ht]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",ht]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[kf,ht]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ht]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ht]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ht]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ci,pa,M0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const _Z=hZ(RZ);function yl(...t){return _Z(JQ(t))}const AZ=DF("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 dark:bg-slate-50 dark:text-slate-900 ",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),BF=_.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},o)=>{const i=s?Ip:"button";return R.jsx(i,{className:yl(AZ({variant:e,size:n,className:t})),ref:o,...r})});BF.displayName="Button";const VF=_.forwardRef(({className:t,type:e,...n},s)=>R.jsx("input",{type:e,className:yl("flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",t),ref:s,...n}));VF.displayName="Input";const DZ="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.58333%2015.8334C13.4953%2015.8334%2016.6667%2012.6621%2016.6667%208.75008C16.6667%204.83808%2013.4953%201.66675%209.58333%201.66675C5.67133%201.66675%202.5%204.83808%202.5%208.75008C2.5%2012.6621%205.67133%2015.8334%209.58333%2015.8334Z'%20stroke='%23FBFBFB'%20stroke-width='2.4'%20stroke-linejoin='round'/%3e%3cpath%20d='M14.6758%2013.8423L18.2113%2017.3778'%20stroke='%23FBFBFB'%20stroke-width='2.4'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var Nm=t=>t.type==="checkbox",Ac=t=>t instanceof Date,Ms=t=>t==null;const UF=t=>typeof t=="object";var Kn=t=>!Ms(t)&&!Array.isArray(t)&&UF(t)&&!Ac(t),OZ=t=>Kn(t)&&t.target?Nm(t.target)?t.target.checked:t.target.value:t,FZ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,LZ=(t,e)=>t.has(FZ(e)),PZ=t=>{const e=t.constructor&&t.constructor.prototype;return Kn(e)&&e.hasOwnProperty("isPrototypeOf")},wN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wr(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(wN&&(t instanceof Blob||t instanceof FileList))&&(n||Kn(t)))if(e=n?[]:{},!n&&!PZ(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Wr(t[s]));else return t;return e}var Tm=t=>Array.isArray(t)?t.filter(Boolean):[],En=t=>t===void 0,We=(t,e,n)=>{if(!e||!Kn(t))return n;const s=Tm(e.split(/[,[\].]+?/)).reduce((r,o)=>Ms(r)?r:r[o],t);return En(s)||s===t?En(t[e])?n:t[e]:s},Ii=t=>typeof t=="boolean";const GR={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$o={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ki={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ze.createContext(null);var MZ=(t,e,n,s=!0)=>{const r={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(r,o,{get:()=>{const i=o;return e._proxyFormState[i]!==$o.all&&(e._proxyFormState[i]=!s||$o.all),n&&(n[i]=!0),t[i]}});return r},xr=t=>Kn(t)&&!Object.keys(t).length,zZ=(t,e,n,s)=>{n(t);const{name:r,...o}=t;return xr(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(i=>e[i]===(!s||$o.all))},Xx=t=>Array.isArray(t)?t:[t];function BZ(t){const e=Ze.useRef(t);e.current=t,Ze.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Jo=t=>typeof t=="string",VZ=(t,e,n,s,r)=>Jo(t)?(s&&e.watch.add(t),We(n,t,r)):Array.isArray(t)?t.map(o=>(s&&e.watch.add(o),We(n,o))):(s&&(e.watchAll=!0),n),SN=t=>/^\w*$/.test(t),WF=t=>Tm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Zt=(t,e,n)=>{let s=-1;const r=SN(e)?[e]:WF(e),o=r.length,i=o-1;for(;++s<o;){const a=r[s];let l=n;if(s!==i){const u=t[a];l=Kn(u)||Array.isArray(u)?u:isNaN(+r[s+1])?{}:[]}t[a]=l,t=t[a]}return t},UZ=(t,e,n,s,r)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[s]:r||!0}}:{},HR=t=>({isOnSubmit:!t||t===$o.onSubmit,isOnBlur:t===$o.onBlur,isOnChange:t===$o.onChange,isOnAll:t===$o.all,isOnTouch:t===$o.onTouched}),qR=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const rp=(t,e,n,s)=>{for(const r of n||Object.keys(t)){const o=We(t,r);if(o){const{_f:i,...a}=o;if(i){if(i.refs&&i.refs[0]&&e(i.refs[0],r)&&!s)break;if(i.ref&&e(i.ref,i.name)&&!s)break;rp(a,e)}else Kn(a)&&rp(a,e)}}};var WZ=(t,e,n)=>{const s=Tm(We(t,n));return Zt(s,"root",e[n]),Zt(t,n,s),t},CN=t=>t.type==="file",Oa=t=>typeof t=="function",i1=t=>{if(!wN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},xy=t=>Jo(t),kN=t=>t.type==="radio",a1=t=>t instanceof RegExp;const KR={value:!1,isValid:!1},XR={value:!0,isValid:!0};var jF=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!En(t[0].attributes.value)?En(t[0].value)||t[0].value===""?XR:{value:t[0].value,isValid:!0}:XR:KR}return KR};const YR={isValid:!1,value:null};var GF=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,YR):YR;function QR(t,e,n="validate"){if(xy(t)||Array.isArray(t)&&t.every(xy)||Ii(t)&&!t)return{type:n,message:xy(t)?t:"",ref:e}}var dc=t=>Kn(t)&&!a1(t)?t:{value:t,message:""},ZR=async(t,e,n,s,r)=>{const{ref:o,refs:i,required:a,maxLength:l,minLength:u,min:c,max:d,pattern:h,validate:f,name:p,valueAsNumber:m,mount:g,disabled:y}=t._f,b=We(e,p);if(!g||y)return{};const v=i?i[0]:o,x=O=>{s&&v.reportValidity&&(v.setCustomValidity(Ii(O)?"":O||""),v.reportValidity())},w={},S=kN(o),k=Nm(o),N=S||k,$=(m||CN(o))&&En(o.value)&&En(b)||i1(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,I=UZ.bind(null,p,n,w),A=(O,P,F,G=ki.maxLength,q=ki.minLength)=>{const Z=O?P:F;w[p]={type:O?G:q,message:Z,ref:o,...I(O?G:q,Z)}};if(r?!Array.isArray(b)||!b.length:a&&(!N&&($||Ms(b))||Ii(b)&&!b||k&&!jF(i).isValid||S&&!GF(i).isValid)){const{value:O,message:P}=xy(a)?{value:!!a,message:a}:dc(a);if(O&&(w[p]={type:ki.required,message:P,ref:v,...I(ki.required,P)},!n))return x(P),w}if(!$&&(!Ms(c)||!Ms(d))){let O,P;const F=dc(d),G=dc(c);if(!Ms(b)&&!isNaN(b)){const q=o.valueAsNumber||b&&+b;Ms(F.value)||(O=q>F.value),Ms(G.value)||(P=q<G.value)}else{const q=o.valueAsDate||new Date(b),Z=K=>new Date(new Date().toDateString()+" "+K),B=o.type=="time",H=o.type=="week";Jo(F.value)&&b&&(O=B?Z(b)>Z(F.value):H?b>F.value:q>new Date(F.value)),Jo(G.value)&&b&&(P=B?Z(b)<Z(G.value):H?b<G.value:q<new Date(G.value))}if((O||P)&&(A(!!O,F.message,G.message,ki.max,ki.min),!n))return x(w[p].message),w}if((l||u)&&!$&&(Jo(b)||r&&Array.isArray(b))){const O=dc(l),P=dc(u),F=!Ms(O.value)&&b.length>+O.value,G=!Ms(P.value)&&b.length<+P.value;if((F||G)&&(A(F,O.message,P.message),!n))return x(w[p].message),w}if(h&&!$&&Jo(b)){const{value:O,message:P}=dc(h);if(a1(O)&&!b.match(O)&&(w[p]={type:ki.pattern,message:P,ref:o,...I(ki.pattern,P)},!n))return x(P),w}if(f){if(Oa(f)){const O=await f(b,e),P=QR(O,v);if(P&&(w[p]={...P,...I(ki.validate,P.message)},!n))return x(P.message),w}else if(Kn(f)){let O={};for(const P in f){if(!xr(O)&&!n)break;const F=QR(await f[P](b,e),v,P);F&&(O={...F,...I(P,F.message)},x(F.message),n&&(w[p]=O))}if(!xr(O)&&(w[p]={ref:v,...O},!n))return w}}return x(!0),w};function jZ(t,e){const n=e.slice(0,-1).length;let s=0;for(;s<n;)t=En(t)?s++:t[e[s++]];return t}function GZ(t){for(const e in t)if(t.hasOwnProperty(e)&&!En(t[e]))return!1;return!0}function Un(t,e){const n=Array.isArray(e)?e:SN(e)?[e]:WF(e),s=n.length===1?t:jZ(t,n),r=n.length-1,o=n[r];return s&&delete s[o],r!==0&&(Kn(s)&&xr(s)||Array.isArray(s)&&GZ(s))&&Un(t,n.slice(0,-1)),t}var Yx=()=>{let t=[];return{get observers(){return t},next:r=>{for(const o of t)o.next&&o.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(o=>o!==r)}}),unsubscribe:()=>{t=[]}}},l1=t=>Ms(t)||!UF(t);function Yl(t,e){if(l1(t)||l1(e))return t===e;if(Ac(t)&&Ac(e))return t.getTime()===e.getTime();const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const r of n){const o=t[r];if(!s.includes(r))return!1;if(r!=="ref"){const i=e[r];if(Ac(o)&&Ac(i)||Kn(o)&&Kn(i)||Array.isArray(o)&&Array.isArray(i)?!Yl(o,i):o!==i)return!1}}return!0}var HF=t=>t.type==="select-multiple",HZ=t=>kN(t)||Nm(t),Qx=t=>i1(t)&&t.isConnected,qF=t=>{for(const e in t)if(Oa(t[e]))return!0;return!1};function u1(t,e={}){const n=Array.isArray(t);if(Kn(t)||n)for(const s in t)Array.isArray(t[s])||Kn(t[s])&&!qF(t[s])?(e[s]=Array.isArray(t[s])?[]:{},u1(t[s],e[s])):Ms(t[s])||(e[s]=!0);return e}function KF(t,e,n){const s=Array.isArray(t);if(Kn(t)||s)for(const r in t)Array.isArray(t[r])||Kn(t[r])&&!qF(t[r])?En(e)||l1(n[r])?n[r]=Array.isArray(t[r])?u1(t[r],[]):{...u1(t[r])}:KF(t[r],Ms(e)?{}:e[r],n[r]):n[r]=!Yl(t[r],e[r]);return n}var z0=(t,e)=>KF(t,e,u1(e)),XF=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:s})=>En(t)?t:e?t===""?NaN:t&&+t:n&&Jo(t)?new Date(t):s?s(t):t;function Zx(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return CN(e)?e.files:kN(e)?GF(t.refs).value:HF(e)?[...e.selectedOptions].map(({value:n})=>n):Nm(e)?jF(t.refs).value:XF(En(e.value)?t.ref.value:e.value,t)}var qZ=(t,e,n,s)=>{const r={};for(const o of t){const i=We(e,o);i&&Zt(r,o,i._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:s}},Tf=t=>En(t)?t:a1(t)?t.source:Kn(t)?a1(t.value)?t.value.source:t.value:t,KZ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function JR(t,e,n){const s=We(t,n);if(s||SN(n))return{error:s,name:n};const r=n.split(".");for(;r.length;){const o=r.join("."),i=We(e,o),a=We(t,o);if(i&&!Array.isArray(i)&&n!==o)return{name:n};if(a&&a.type)return{name:o,error:a};r.pop()}return{name:n}}var XZ=(t,e,n,s,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(e||t):(n?s.isOnBlur:r.isOnBlur)?!t:(n?s.isOnChange:r.isOnChange)?t:!0,YZ=(t,e)=>!Tm(We(t,e)).length&&Un(t,e);const QZ={mode:$o.onSubmit,reValidateMode:$o.onChange,shouldFocusError:!0};function ZZ(t={}){let e={...QZ,...t},n={submitCount:0,isDirty:!1,isLoading:Oa(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},r=Kn(e.defaultValues)||Kn(e.values)?Wr(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Wr(r),i={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:Yx(),array:Yx(),state:Yx()},h=HR(e.mode),f=HR(e.reValidateMode),p=e.criteriaMode===$o.all,m=z=>oe=>{clearTimeout(u),u=setTimeout(z,oe)},g=async z=>{if(c.isValid||z){const oe=e.resolver?xr((await N()).errors):await I(s,!0);oe!==n.isValid&&d.state.next({isValid:oe})}},y=(z,oe)=>{(c.isValidating||c.validatingFields)&&((z||Array.from(a.mount)).forEach(ae=>{ae&&(oe?Zt(n.validatingFields,ae,oe):Un(n.validatingFields,ae))}),d.state.next({validatingFields:n.validatingFields,isValidating:!xr(n.validatingFields)}))},b=(z,oe=[],ae,ke,we=!0,ye=!0)=>{if(ke&&ae){if(i.action=!0,ye&&Array.isArray(We(s,z))){const Ee=ae(We(s,z),ke.argA,ke.argB);we&&Zt(s,z,Ee)}if(ye&&Array.isArray(We(n.errors,z))){const Ee=ae(We(n.errors,z),ke.argA,ke.argB);we&&Zt(n.errors,z,Ee),YZ(n.errors,z)}if(c.touchedFields&&ye&&Array.isArray(We(n.touchedFields,z))){const Ee=ae(We(n.touchedFields,z),ke.argA,ke.argB);we&&Zt(n.touchedFields,z,Ee)}c.dirtyFields&&(n.dirtyFields=z0(r,o)),d.state.next({name:z,isDirty:O(z,oe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Zt(o,z,oe)},v=(z,oe)=>{Zt(n.errors,z,oe),d.state.next({errors:n.errors})},x=z=>{n.errors=z,d.state.next({errors:n.errors,isValid:!1})},w=(z,oe,ae,ke)=>{const we=We(s,z);if(we){const ye=We(o,z,En(ae)?We(r,z):ae);En(ye)||ke&&ke.defaultChecked||oe?Zt(o,z,oe?ye:Zx(we._f)):G(z,ye),i.mount&&g()}},S=(z,oe,ae,ke,we)=>{let ye=!1,Ee=!1;const nt={name:z},_t=!!(We(s,z)&&We(s,z)._f.disabled);if(!ae||ke){c.isDirty&&(Ee=n.isDirty,n.isDirty=nt.isDirty=O(),ye=Ee!==nt.isDirty);const Ft=_t||Yl(We(r,z),oe);Ee=!!(!_t&&We(n.dirtyFields,z)),Ft||_t?Un(n.dirtyFields,z):Zt(n.dirtyFields,z,!0),nt.dirtyFields=n.dirtyFields,ye=ye||c.dirtyFields&&Ee!==!Ft}if(ae){const Ft=We(n.touchedFields,z);Ft||(Zt(n.touchedFields,z,ae),nt.touchedFields=n.touchedFields,ye=ye||c.touchedFields&&Ft!==ae)}return ye&&we&&d.state.next(nt),ye?nt:{}},k=(z,oe,ae,ke)=>{const we=We(n.errors,z),ye=c.isValid&&Ii(oe)&&n.isValid!==oe;if(t.delayError&&ae?(l=m(()=>v(z,ae)),l(t.delayError)):(clearTimeout(u),l=null,ae?Zt(n.errors,z,ae):Un(n.errors,z)),(ae?!Yl(we,ae):we)||!xr(ke)||ye){const Ee={...ke,...ye&&Ii(oe)?{isValid:oe}:{},errors:n.errors,name:z};n={...n,...Ee},d.state.next(Ee)}},N=async z=>{y(z,!0);const oe=await e.resolver(o,e.context,qZ(z||a.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return y(z),oe},$=async z=>{const{errors:oe}=await N(z);if(z)for(const ae of z){const ke=We(oe,ae);ke?Zt(n.errors,ae,ke):Un(n.errors,ae)}else n.errors=oe;return oe},I=async(z,oe,ae={valid:!0})=>{for(const ke in z){const we=z[ke];if(we){const{_f:ye,...Ee}=we;if(ye){const nt=a.array.has(ye.name);y([ke],!0);const _t=await ZR(we,o,p,e.shouldUseNativeValidation&&!oe,nt);if(y([ke]),_t[ye.name]&&(ae.valid=!1,oe))break;!oe&&(We(_t,ye.name)?nt?WZ(n.errors,_t,ye.name):Zt(n.errors,ye.name,_t[ye.name]):Un(n.errors,ye.name))}Ee&&await I(Ee,oe,ae)}}return ae.valid},A=()=>{for(const z of a.unMount){const oe=We(s,z);oe&&(oe._f.refs?oe._f.refs.every(ae=>!Qx(ae)):!Qx(oe._f.ref))&&ie(z)}a.unMount=new Set},O=(z,oe)=>(z&&oe&&Zt(o,z,oe),!Yl(ne(),r)),P=(z,oe,ae)=>VZ(z,a,{...i.mount?o:En(oe)?r:Jo(z)?{[z]:oe}:oe},ae,oe),F=z=>Tm(We(i.mount?o:r,z,t.shouldUnregister?We(r,z,[]):[])),G=(z,oe,ae={})=>{const ke=We(s,z);let we=oe;if(ke){const ye=ke._f;ye&&(!ye.disabled&&Zt(o,z,XF(oe,ye)),we=i1(ye.ref)&&Ms(oe)?"":oe,HF(ye.ref)?[...ye.ref.options].forEach(Ee=>Ee.selected=we.includes(Ee.value)):ye.refs?Nm(ye.ref)?ye.refs.length>1?ye.refs.forEach(Ee=>(!Ee.defaultChecked||!Ee.disabled)&&(Ee.checked=Array.isArray(we)?!!we.find(nt=>nt===Ee.value):we===Ee.value)):ye.refs[0]&&(ye.refs[0].checked=!!we):ye.refs.forEach(Ee=>Ee.checked=Ee.value===we):CN(ye.ref)?ye.ref.value="":(ye.ref.value=we,ye.ref.type||d.values.next({name:z,values:{...o}})))}(ae.shouldDirty||ae.shouldTouch)&&S(z,we,ae.shouldTouch,ae.shouldDirty,!0),ae.shouldValidate&&K(z)},q=(z,oe,ae)=>{for(const ke in oe){const we=oe[ke],ye=`${z}.${ke}`,Ee=We(s,ye);(a.array.has(z)||!l1(we)||Ee&&!Ee._f)&&!Ac(we)?q(ye,we,ae):G(ye,we,ae)}},Z=(z,oe,ae={})=>{const ke=We(s,z),we=a.array.has(z),ye=Wr(oe);Zt(o,z,ye),we?(d.array.next({name:z,values:{...o}}),(c.isDirty||c.dirtyFields)&&ae.shouldDirty&&d.state.next({name:z,dirtyFields:z0(r,o),isDirty:O(z,ye)})):ke&&!ke._f&&!Ms(ye)?q(z,ye,ae):G(z,ye,ae),qR(z,a)&&d.state.next({...n}),d.values.next({name:i.mount?z:void 0,values:{...o}})},B=async z=>{i.mount=!0;const oe=z.target;let ae=oe.name,ke=!0;const we=We(s,ae),ye=()=>oe.type?Zx(we._f):OZ(z),Ee=nt=>{ke=Number.isNaN(nt)||nt===We(o,ae,nt)};if(we){let nt,_t;const Ft=ye(),Vn=z.type===GR.BLUR||z.type===GR.FOCUS_OUT,Jn=!KZ(we._f)&&!e.resolver&&!We(n.errors,ae)&&!we._f.deps||XZ(Vn,We(n.touchedFields,ae),n.isSubmitted,f,h),zr=qR(ae,a,Vn);Zt(o,ae,Ft),Vn?(we._f.onBlur&&we._f.onBlur(z),l&&l(0)):we._f.onChange&&we._f.onChange(z);const Br=S(ae,Ft,Vn,!1),Si=!xr(Br)||zr;if(!Vn&&d.values.next({name:ae,type:z.type,values:{...o}}),Jn)return c.isValid&&g(),Si&&d.state.next({name:ae,...zr?{}:Br});if(!Vn&&zr&&d.state.next({...n}),e.resolver){const{errors:po}=await N([ae]);if(Ee(Ft),ke){const ca=JR(n.errors,s,ae),re=JR(po,s,ca.name||ae);nt=re.error,ae=re.name,_t=xr(po)}}else y([ae],!0),nt=(await ZR(we,o,p,e.shouldUseNativeValidation))[ae],y([ae]),Ee(Ft),ke&&(nt?_t=!1:c.isValid&&(_t=await I(s,!0)));ke&&(we._f.deps&&K(we._f.deps),k(ae,_t,nt,Br))}},H=(z,oe)=>{if(We(n.errors,oe)&&z.focus)return z.focus(),1},K=async(z,oe={})=>{let ae,ke;const we=Xx(z);if(e.resolver){const ye=await $(En(z)?z:we);ae=xr(ye),ke=z?!we.some(Ee=>We(ye,Ee)):ae}else z?(ke=(await Promise.all(we.map(async ye=>{const Ee=We(s,ye);return await I(Ee&&Ee._f?{[ye]:Ee}:Ee)}))).every(Boolean),!(!ke&&!n.isValid)&&g()):ke=ae=await I(s);return d.state.next({...!Jo(z)||c.isValid&&ae!==n.isValid?{}:{name:z},...e.resolver||!z?{isValid:ae}:{},errors:n.errors}),oe.shouldFocus&&!ke&&rp(s,H,z?we:a.mount),ke},ne=z=>{const oe={...r,...i.mount?o:{}};return En(z)?oe:Jo(z)?We(oe,z):z.map(ae=>We(oe,ae))},D=(z,oe)=>({invalid:!!We((oe||n).errors,z),isDirty:!!We((oe||n).dirtyFields,z),isTouched:!!We((oe||n).touchedFields,z),isValidating:!!We((oe||n).validatingFields,z),error:We((oe||n).errors,z)}),X=z=>{z&&Xx(z).forEach(oe=>Un(n.errors,oe)),d.state.next({errors:z?n.errors:{}})},te=(z,oe,ae)=>{const ke=(We(s,z,{_f:{}})._f||{}).ref;Zt(n.errors,z,{...oe,ref:ke}),d.state.next({name:z,errors:n.errors,isValid:!1}),ae&&ae.shouldFocus&&ke&&ke.focus&&ke.focus()},ue=(z,oe)=>Oa(z)?d.values.subscribe({next:ae=>z(P(void 0,oe),ae)}):P(z,oe,!0),ie=(z,oe={})=>{for(const ae of z?Xx(z):a.mount)a.mount.delete(ae),a.array.delete(ae),oe.keepValue||(Un(s,ae),Un(o,ae)),!oe.keepError&&Un(n.errors,ae),!oe.keepDirty&&Un(n.dirtyFields,ae),!oe.keepTouched&&Un(n.touchedFields,ae),!oe.keepIsValidating&&Un(n.validatingFields,ae),!e.shouldUnregister&&!oe.keepDefaultValue&&Un(r,ae);d.values.next({values:{...o}}),d.state.next({...n,...oe.keepDirty?{isDirty:O()}:{}}),!oe.keepIsValid&&g()},me=({disabled:z,name:oe,field:ae,fields:ke,value:we})=>{if(Ii(z)){const ye=z?void 0:En(we)?Zx(ae?ae._f:We(ke,oe)._f):we;Zt(o,oe,ye),S(oe,ye,!1,!1,!0)}},xe=(z,oe={})=>{let ae=We(s,z);const ke=Ii(oe.disabled);return Zt(s,z,{...ae||{},_f:{...ae&&ae._f?ae._f:{ref:{name:z}},name:z,mount:!0,...oe}}),a.mount.add(z),ae?me({field:ae,disabled:oe.disabled,name:z,value:oe.value}):w(z,!0,oe.value),{...ke?{disabled:oe.disabled}:{},...e.progressive?{required:!!oe.required,min:Tf(oe.min),max:Tf(oe.max),minLength:Tf(oe.minLength),maxLength:Tf(oe.maxLength),pattern:Tf(oe.pattern)}:{},name:z,onChange:B,onBlur:B,ref:we=>{if(we){xe(z,oe),ae=We(s,z);const ye=En(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,Ee=HZ(ye),nt=ae._f.refs||[];if(Ee?nt.find(_t=>_t===ye):ye===ae._f.ref)return;Zt(s,z,{_f:{...ae._f,...Ee?{refs:[...nt.filter(Qx),ye,...Array.isArray(We(r,z))?[{}]:[]],ref:{type:ye.type,name:z}}:{ref:ye}}}),w(z,!1,void 0,ye)}else ae=We(s,z,{}),ae._f&&(ae._f.mount=!1),(e.shouldUnregister||oe.shouldUnregister)&&!(LZ(a.array,z)&&i.action)&&a.unMount.add(z)}}},fe=()=>e.shouldFocusError&&rp(s,H,a.mount),De=z=>{Ii(z)&&(d.state.next({disabled:z}),rp(s,(oe,ae)=>{let ke=z;const we=We(s,ae);we&&Ii(we._f.disabled)&&(ke||(ke=we._f.disabled)),oe.disabled=ke},0,!1))},Ie=(z,oe)=>async ae=>{let ke;ae&&(ae.preventDefault&&ae.preventDefault(),ae.persist&&ae.persist());let we=Wr(o);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:ye,values:Ee}=await N();n.errors=ye,we=Ee}else await I(s);if(Un(n.errors,"root"),xr(n.errors)){d.state.next({errors:{}});try{await z(we,ae)}catch(ye){ke=ye}}else oe&&await oe({...n.errors},ae),fe(),setTimeout(fe);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xr(n.errors)&&!ke,submitCount:n.submitCount+1,errors:n.errors}),ke)throw ke},Le=(z,oe={})=>{We(s,z)&&(En(oe.defaultValue)?Z(z,Wr(We(r,z))):(Z(z,oe.defaultValue),Zt(r,z,Wr(oe.defaultValue))),oe.keepTouched||Un(n.touchedFields,z),oe.keepDirty||(Un(n.dirtyFields,z),n.isDirty=oe.defaultValue?O(z,Wr(We(r,z))):O()),oe.keepError||(Un(n.errors,z),c.isValid&&g()),d.state.next({...n}))},Ke=(z,oe={})=>{const ae=z?Wr(z):r,ke=Wr(ae),we=xr(z),ye=we?r:ke;if(oe.keepDefaultValues||(r=ae),!oe.keepValues){if(oe.keepDirtyValues)for(const Ee of a.mount)We(n.dirtyFields,Ee)?Zt(ye,Ee,We(o,Ee)):Z(Ee,We(ye,Ee));else{if(wN&&En(z))for(const Ee of a.mount){const nt=We(s,Ee);if(nt&&nt._f){const _t=Array.isArray(nt._f.refs)?nt._f.refs[0]:nt._f.ref;if(i1(_t)){const Ft=_t.closest("form");if(Ft){Ft.reset();break}}}}s={}}o=t.shouldUnregister?oe.keepDefaultValues?Wr(r):{}:Wr(ye),d.array.next({values:{...ye}}),d.values.next({values:{...ye}})}a={mount:oe.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!c.isValid||!!oe.keepIsValid||!!oe.keepDirtyValues,i.watch=!!t.shouldUnregister,d.state.next({submitCount:oe.keepSubmitCount?n.submitCount:0,isDirty:we?!1:oe.keepDirty?n.isDirty:!!(oe.keepDefaultValues&&!Yl(z,r)),isSubmitted:oe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:we?[]:oe.keepDirtyValues?oe.keepDefaultValues&&o?z0(r,o):n.dirtyFields:oe.keepDefaultValues&&z?z0(r,z):{},touchedFields:oe.keepTouched?n.touchedFields:{},errors:oe.keepErrors?n.errors:{},isSubmitSuccessful:oe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},mt=(z,oe)=>Ke(Oa(z)?z(o):z,oe);return{control:{register:xe,unregister:ie,getFieldState:D,handleSubmit:Ie,setError:te,_executeSchema:N,_getWatch:P,_getDirty:O,_updateValid:g,_removeUnmounted:A,_updateFieldArray:b,_updateDisabledField:me,_getFieldArray:F,_reset:Ke,_resetDefaultValues:()=>Oa(e.defaultValues)&&e.defaultValues().then(z=>{mt(z,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:z=>{n={...n,...z}},_disableForm:De,_subjects:d,_proxyFormState:c,_setErrors:x,get _fields(){return s},get _formValues(){return o},get _state(){return i},set _state(z){i=z},get _defaultValues(){return r},get _names(){return a},set _names(z){a=z},get _formState(){return n},set _formState(z){n=z},get _options(){return e},set _options(z){e={...e,...z}}},trigger:K,register:xe,handleSubmit:Ie,watch:ue,setValue:Z,getValues:ne,reset:mt,resetField:Le,clearErrors:X,unregister:ie,setError:te,setFocus:(z,oe={})=>{const ae=We(s,z),ke=ae&&ae._f;if(ke){const we=ke.refs?ke.refs[0]:ke.ref;we.focus&&(we.focus(),oe.shouldSelect&&we.select())}},getFieldState:D}}function JZ(t={}){const e=Ze.useRef(),n=Ze.useRef(),[s,r]=Ze.useState({isDirty:!1,isValidating:!1,isLoading:Oa(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Oa(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...ZZ(t),formState:s});const o=e.current.control;return o._options=t,BZ({subject:o._subjects.state,next:i=>{zZ(i,o._proxyFormState,o._updateFormState,!0)&&r({...o._formState})}}),Ze.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Ze.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==s.isDirty&&o._subjects.state.next({isDirty:i})}},[o,s.isDirty]),Ze.useEffect(()=>{t.values&&!Yl(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,r(i=>({...i}))):o._resetDefaultValues()},[t.values,o]),Ze.useEffect(()=>{t.errors&&o._setErrors(t.errors)},[t.errors,o]),Ze.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),Ze.useEffect(()=>{t.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=MZ(s,o),e.current}function YF({mt:t="0px",placeholder:e="Search directly"}){const{register:n,handleSubmit:s,formState:{errors:r}}=JZ(),o=mi(),i=a=>{const{query:l}=a;o(`/search/${l}`)};return R.jsx("div",{className:`flex bg-customBackground w-full items-center space-x-2 ${t}`,children:R.jsxs("form",{onSubmit:s(i),className:"relative flex w-full mx-4 bg-customBackground",children:[R.jsx(VF,{type:"search",placeholder:e,...n("query",{required:"Search query is required"}),className:"pr-12 bg-white text-xl text-left font-semibold placeholder:text-center placeholder:text-customYellow rounded-2xl py-6"}),R.jsx(BF,{type:"submit",className:"bg-customYellow w-[40px] h-[40px] rounded-full absolute inset-y-1 right-0 flex items-center justify-center mr-2",children:R.jsx("img",{src:DZ,alt:"search",className:"max-w-5"})}),r.query&&R.jsx("p",{className:"text-red-500 text-sm absolute left-0 bottom-[-20px]",children:r.query.message})]})})}const e3=({text:t,align:e,marginTop:n,marginBottom:s})=>R.jsx(R.Fragment,{children:R.jsx("p",{className:`text-customBrown text-size24 ${e} ${n} ${s} font-semibold leading-6`,children:t})}),eJ="/assets/Love-tRX8J2cK.svg",B0=({height:t,grid:e,children:n})=>R.jsx("div",{className:`${t} ${e} rounded-2xl bg-[#fbfbfb] p-3 shadow-GridDiv`,children:n}),Dn={Pregnancy_Care:{Early_Pregnancy:{Month_1:{f:"Start taking folic acid supplements. Consume fresh fruits and vegetables daily.",s:"Completely stop smoking and drinking. Reduce caffeine intake.",f1:"Fresh fruits (e.g., apple, banana)",f2:"Vegetables (e.g., spinach, broccoli)",f3:"Nuts (e.g., almonds, walnuts)"},Month_2:{f:"Gather information about fetal development. Read books or materials about childbirth.",s:"Visit the obstetrician for the first time, schedule an ultrasound.",f1:"Protein-rich foods (e.g., eggs, chicken breast)",f2:"Oatmeal (high in fiber)",f3:"Dairy products (e.g., yogurt, cheese)"},Month_3:{f:"Start light walking. Consider joining yoga or Pilates classes.",s:"Discuss the birth plan with your partner.",f1:"Sweet potatoes (rich in vitamins and minerals)",f2:"Chicken soup (nutrient boost)",f3:"Avocado (healthy fats)"}},Mid_Pregnancy:{Month_4:{f:"Increase protein intake with meat, fish, and tofu. Increase water intake.",s:"Consume high-fiber foods to prevent pregnancy-related constipation.",f1:"Fish (e.g., salmon, mackerel)",f2:"Legumes (e.g., lentils, chickpeas)",f3:"Whole grains (e.g., brown rice, oats)"},Month_5:{f:"Participate in pregnancy yoga classes. Engage in exercises to strengthen your body for weight gain.",s:"Listen to prenatal music to foster a bond with the baby.",f1:"Colorful vegetables (e.g., carrots, bell peppers)",f2:"Lean meats (e.g., turkey, beef)",f3:"Fruit smoothies (for vitamins and hydration)"},Month_6:{f:"Enroll in childbirth classes. Practice breathing and relaxation techniques.",s:"Start shopping for baby supplies, and create a list of essential items.",f1:"Yogurt (probiotics)",f2:"Chicken (protein source)",f3:"Spinach (iron and folate)"}},Late_Pregnancy:{Month_7:{f:"Choose easily digestible foods and have light snacks occasionally.",s:"Start preparing your hospital bag. Check necessary documents and items.",f1:"Bananas (potassium source)",f2:"Almonds (healthy fats)",f3:"Soft grains (e.g., oats, rice)"},Month_8:{f:"Elevate your legs to reduce ankle swelling. Wear comfortable clothing.",s:"Build a support network for after the birth (family, friends, etc.).",f1:"Fish (e.g., tuna, salmon)",f2:"Smoothies (with fruits and vegetables)",f3:"Chamomile tea (calming effect)"},Month_9:{f:"Make final decisions about the hospital and birthing method.",s:"Recheck items needed for the hospital visit.",f1:"Sweet potatoes (energy source)",f2:"Lentils (protein and fiber)",f3:"Soft vegetables (e.g., squash, broccoli)"}},Postpartum:{"0-1_Month":{f:"Maintain a balanced diet, focusing on protein and vitamin C. Stay hydrated during breastfeeding.",s:"Seek help from family and friends. Increase skin-to-skin contact with the baby.",f1:"Chicken (protein boost)",f2:"Salmon (omega-3 fatty acids)",f3:"Variety of fruits (e.g., strawberries, blueberries)"},"1-3_Months":{f:"Start light exercise after 6 weeks postpartum. Join postpartum exercise classes.",s:"Schedule postpartum check-ups with your obstetrician.",f1:"High-protein smoothies (with protein powder)",f2:"Eggs (nutrient-rich)",f3:"Vegetable soup (easy to digest)"},"4-6_Months":{f:"Introduce a variety of foods to support your babys taste development.",s:"Join parenting groups for information sharing and emotional support.",f1:"Avocado (healthy fats)",f2:"Quinoa (protein and fiber)",f3:"Fresh fruits (e.g., apple, pear)"},"7-12_Months":{f:"Maintain physical activity through walks and play with the baby.",s:"Continue learning about your babys growth and development.",f1:"Chicken breast (low-fat protein)",f2:"Green vegetables (e.g., broccoli, spinach)",f3:"Whole grains (e.g., brown rice, oats)"}}}},tJ=t=>{const e=new Date,s=new Date(t).getTime()-e.getTime(),r=Math.ceil(s/(1e3*60*60*24)),o=Math.floor((280-r)/7);return Math.max(o,0)},$f=t=>{var a,l,u,c,d,h,f,p,m,g,y,b,v,x,w,S,k,N,$,I;const e=tJ(t);let n="",s="",r="",o="",i="";if(e<13){const A=`Month_${Math.floor(e/4)+1}`;n=`
      ${((a=Dn.Pregnancy_Care.Early_Pregnancy[A])==null?void 0:a.f)||""}
    `,s=`
      ${((l=Dn.Pregnancy_Care.Early_Pregnancy[A])==null?void 0:l.s)||""}
    `,r=`
      ${((u=Dn.Pregnancy_Care.Early_Pregnancy[A])==null?void 0:u.f1)||""}
  `,o=`
      ${((c=Dn.Pregnancy_Care.Early_Pregnancy[A])==null?void 0:c.f2)||""}
  `,i=`
      ${((d=Dn.Pregnancy_Care.Early_Pregnancy[A])==null?void 0:d.f3)||""}
  `}else if(e<27){const A=`Month_${Math.floor((e-13)/4)+4}`;n=`
      ${((h=Dn.Pregnancy_Care.Mid_Pregnancy[A])==null?void 0:h.f)||""}
    `,s=`
      ${((f=Dn.Pregnancy_Care.Mid_Pregnancy[A])==null?void 0:f.s)||""}
    `,r=`
      ${((p=Dn.Pregnancy_Care.Mid_Pregnancy[A])==null?void 0:p.f1)||""}
  `,o=`
      ${((m=Dn.Pregnancy_Care.Mid_Pregnancy[A])==null?void 0:m.f2)||""}
  `,i=`
      ${((g=Dn.Pregnancy_Care.Mid_Pregnancy[A])==null?void 0:g.f3)||""}
  `}else if(e<41){const A=`Month_${Math.floor((e-27)/4)+7}`;n=`
      ${((y=Dn.Pregnancy_Care.Late_Pregnancy[A])==null?void 0:y.f)||""}
    `,s=`
      ${((b=Dn.Pregnancy_Care.Late_Pregnancy[A])==null?void 0:b.s)||""}
    `,r=`
      ${((v=Dn.Pregnancy_Care.Late_Pregnancy[A])==null?void 0:v.f1)||""}
  `,o=`
      ${((x=Dn.Pregnancy_Care.Late_Pregnancy[A])==null?void 0:x.f2)||""}
  `,i=`
      ${((w=Dn.Pregnancy_Care.Late_Pregnancy[A])==null?void 0:w.f3)||""}
  `}else{const A=e===40?"0-1_Month":e<=52?`${Math.floor((e-40)/3)}-3_Months`:"4-6_Months";n=`
      ${((S=Dn.Pregnancy_Care.Postpartum[A])==null?void 0:S.f)||""}
    `,s=`
      ${((k=Dn.Pregnancy_Care.Postpartum[A])==null?void 0:k.s)||""}
    `,r=`
      ${((N=Dn.Pregnancy_Care.Postpartum[A])==null?void 0:N.f1)||""}
  `,o=`
      ${(($=Dn.Pregnancy_Care.Postpartum[A])==null?void 0:$.f2)||""}
  `,i=`
      ${((I=Dn.Pregnancy_Care.Postpartum[A])==null?void 0:I.f3)||""}
  `}return{firstText:n,secondText:s,f1:r,f2:o,f3:i}},nJ=21e3,sJ="",Mf=Sn.create({baseURL:sJ,timeout:nJ});Mf.interceptors.request.use(t=>t,t=>{Promise.reject(t)});const NN={get:(t,e)=>Mf.get(t,{...e}),post:(t,e,n)=>Mf.post(t,e,{...n}),patch:(t,e)=>Mf.patch(t,e),delete:t=>Mf.delete(t)};var QF={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ZF=async t=>{const e=`${QF.VITE_REACT_APP_SERVER}/api/v1/users`;try{return(await NN.get(e,{withCredentials:!0,headers:{"Access-Control-Allow-Credentials":"true","ngrok-skip-brower-warning":"true",Authorization:`Bearer ${t}`}})).data}catch(n){throw console.error(":",n),new Error("Failed to fetch user info data")}},rJ=async(t,e,n,s,r)=>{const o=`${QF.VITE_REACT_APP_SERVER}/api/v1/users`;console.log(e,n,s,r);try{const i=await NN.post(o,{name:e,babyName:n,monthAfterbirth:s,dueDate:r},{withCredentials:!0,headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"69420",Authorization:`Bearer ${t}`}});console.log("Response:",i.data)}catch(i){throw console.error("  :",i),new Error("  ")}},oJ=t=>{const e=new Date,s=new Date(t).getTime()-e.getTime(),r=Math.ceil(s/(1e3*60*60*24)),o=Math.floor((280-r)/7);return Math.max(o,0)};function iJ(){const[t,e]=_.useState(),n=mi();_.useEffect(()=>{(async()=>{const o=localStorage.getItem("accessToken");if(o)try{const i=await ZF(o);e(i.data)}catch(i){n("/login"),console.error("   :",i)}else n("/login")})()},[]);const s=(t==null?void 0:t.dueDate)||(t==null?void 0:t.monthAfterBirth)||"";return R.jsx("div",{className:"flex-1 flex-col w-full flex justify-center h-auto scrollbar-hide overflow-y-auto",children:R.jsxs("main",{className:"max-w-[430px] w-full bg-[#FBFBFB] relative mx-auto pb-[180px] ",children:[R.jsx("div",{className:"relative w-full h-auto overflow-hidden px-4",children:R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"py-[8%] flex justify-between",children:[R.jsxs("div",{className:"px-4",children:[R.jsxs(R.Fragment,{children:[R.jsx(e3,{text:"Hi",align:""}),R.jsx(e3,{text:t==null?void 0:t.name,align:""})]}),R.jsx("p",{className:"text-[#49C09C] mt-7",children:t==null?void 0:t.babyName})]}),R.jsxs("div",{className:"relative",children:[R.jsx("img",{className:"mr-2",src:eJ,alt:"x"}),R.jsx(RF,{})," "]})]}),R.jsxs("div",{className:"grid grid-rows-[200px,1fr,1fr] gap-2",children:[R.jsxs(B0,{height:"h-[200px]",children:[(t==null?void 0:t.dueDate)&&R.jsx("p",{className:"text-customGrey",children:oJ(t==null?void 0:t.dueDate)}),(t==null?void 0:t.monthAfterBirth)&&R.jsx("p",{className:"text-customGrey",children:getAgeText(t==null?void 0:t.monthAfterBirth)}),R.jsxs("p",{className:"",children:["- ",$f(s).firstText]}),R.jsxs("p",{className:"",children:[" - ",$f(s).secondText]})]}),R.jsxs("div",{className:"grid grid-cols-[1.7fr_1.3fr] gap-2 row-span-1 h-full",children:[R.jsxs(B0,{height:"h-40",grid:"col-span-1",children:[" ",R.jsxs("p",{className:"",children:[" - ",$f(s).f1]}),R.jsxs("p",{className:"",children:[" - ",$f(s).f2]}),R.jsxs("p",{className:"",children:[" - ",$f(s).f3]})]}),R.jsxs(B0,{height:"h-40",children:[" ",R.jsxs("p",{className:"text-customGrey",children:["Last weeks ",R.jsx("br",{}),"score"]})]})]}),R.jsx(B0,{height:"h-40"})]})]})}),R.jsxs("div",{className:"fixed bottom-0 w-full max-w-[430px]",children:[R.jsx(YF,{}),R.jsx(PQ,{})]})]})})}function Sr(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function JF(t,e=[]){let n=[];function s(o,i){const a=_.createContext(i),l=n.length;n=[...n,i];function u(d){const{scope:h,children:f,...p}=d,m=(h==null?void 0:h[t][l])||a,g=_.useMemo(()=>p,Object.values(p));return _.createElement(m.Provider,{value:g},f)}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=_.useContext(f);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,c]}const r=()=>{const o=n.map(i=>_.createContext(i));return function(a){const l=(a==null?void 0:a[t])||o;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[s,aJ(r,...e)]}function aJ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=s.reduce((a,{useScope:l,scopeName:u})=>{const d=l(o)[`__scope${u}`];return{...a,...d}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function lJ(t){const e=t+"CollectionProvider",[n,s]=JF(e),[r,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=f=>{const{scope:p,children:m}=f,g=Ze.useRef(null),y=Ze.useRef(new Map).current;return Ze.createElement(r,{scope:p,itemMap:y,collectionRef:g},m)},a=t+"CollectionSlot",l=Ze.forwardRef((f,p)=>{const{scope:m,children:g}=f,y=o(a,m),b=Cu(p,y.collectionRef);return Ze.createElement(Ip,{ref:b},g)}),u=t+"CollectionItemSlot",c="data-radix-collection-item",d=Ze.forwardRef((f,p)=>{const{scope:m,children:g,...y}=f,b=Ze.useRef(null),v=Cu(p,b),x=o(u,m);return Ze.useEffect(()=>(x.itemMap.set(b,{ref:b,...y}),()=>void x.itemMap.delete(b))),Ze.createElement(Ip,{[c]:"",ref:v},g)});function h(f){const p=o(t+"CollectionConsumer",f);return Ze.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((x,w)=>y.indexOf(x.ref.current)-y.indexOf(w.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},h,s]}const uJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vi=uJ.reduce((t,e)=>{const n=_.forwardRef((s,r)=>{const{asChild:o,...i}=s,a=o?Ip:e;return _.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),_.createElement(a,us({},i,{ref:r}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function eL(t,e){t&&Bd.flushSync(()=>t.dispatchEvent(e))}function ji(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var s;return(s=e.current)===null||s===void 0?void 0:s.call(e,...n)},[])}function cJ(t,e=globalThis==null?void 0:globalThis.document){const n=ji(t);_.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)},[n,e])}const XS="dismissableLayer.update",dJ="dismissableLayer.pointerDownOutside",hJ="dismissableLayer.focusOutside";let t3;const tL=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fJ=_.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...u}=t,c=_.useContext(tL),[d,h]=_.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=_.useState({}),m=Cu(e,N=>h(N)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),v=d?g.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,w=v>=b,S=mJ(N=>{const $=N.target,I=[...c.branches].some(A=>A.contains($));!w||I||(o==null||o(N),a==null||a(N),N.defaultPrevented||l==null||l())},f),k=gJ(N=>{const $=N.target;[...c.branches].some(A=>A.contains($))||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},f);return cJ(N=>{v===c.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),_.useEffect(()=>{if(d)return s&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(t3=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),n3(),()=>{s&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=t3)}},[d,f,s,c]),_.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),n3())},[d,c]),_.useEffect(()=>{const N=()=>p({});return document.addEventListener(XS,N),()=>document.removeEventListener(XS,N)},[]),_.createElement(vi.div,us({},u,{ref:m,style:{pointerEvents:x?w?"auto":"none":void 0,...t.style},onFocusCapture:Sr(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Sr(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Sr(t.onPointerDownCapture,S.onPointerDownCapture)}))}),pJ=_.forwardRef((t,e)=>{const n=_.useContext(tL),s=_.useRef(null),r=Cu(e,s);return _.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),_.createElement(vi.div,us({},t,{ref:r}))});function mJ(t,e=globalThis==null?void 0:globalThis.document){const n=ji(t),s=_.useRef(!1),r=_.useRef(()=>{});return _.useEffect(()=>{const o=a=>{if(a.target&&!s.current){let c=function(){nL(dJ,n,u,{discrete:!0})};var l=c;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);s.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function gJ(t,e=globalThis==null?void 0:globalThis.document){const n=ji(t),s=_.useRef(!1);return _.useEffect(()=>{const r=o=>{o.target&&!s.current&&nL(hJ,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function n3(){const t=new CustomEvent(XS);document.dispatchEvent(t)}function nL(t,e,n,{discrete:s}){const r=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?eL(r,o):r.dispatchEvent(o)}const yJ=fJ,bJ=pJ,vJ=_.forwardRef((t,e)=>{var n;const{container:s=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...r}=t;return s?Xk.createPortal(_.createElement(vi.div,us({},r,{ref:e})),s):null}),YS=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{};function xJ(t,e){return _.useReducer((n,s)=>{const r=e[n][s];return r??n},t)}const sL=t=>{const{present:e,children:n}=t,s=wJ(e),r=typeof n=="function"?n({present:s.isPresent}):_.Children.only(n),o=Cu(s.ref,r.ref);return typeof n=="function"||s.isPresent?_.cloneElement(r,{ref:o}):null};sL.displayName="Presence";function wJ(t){const[e,n]=_.useState(),s=_.useRef({}),r=_.useRef(t),o=_.useRef("none"),i=t?"mounted":"unmounted",[a,l]=xJ(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const u=V0(s.current);o.current=a==="mounted"?u:"none"},[a]),YS(()=>{const u=s.current,c=r.current;if(c!==t){const h=o.current,f=V0(u);t?l("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),YS(()=>{if(e){const u=d=>{const f=V0(s.current).includes(d.animationName);d.target===e&&f&&Bd.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===e&&(o.current=V0(s.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(u=>{u&&(s.current=getComputedStyle(u)),n(u)},[])}}function V0(t){return(t==null?void 0:t.animationName)||"none"}function SJ({prop:t,defaultProp:e,onChange:n=()=>{}}){const[s,r]=CJ({defaultProp:e,onChange:n}),o=t!==void 0,i=o?t:s,a=ji(n),l=_.useCallback(u=>{if(o){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[o,t,r,a]);return[i,l]}function CJ({defaultProp:t,onChange:e}){const n=_.useState(t),[s]=n,r=_.useRef(s),o=ji(e);return _.useEffect(()=>{r.current!==s&&(o(s),r.current=s)},[s,r,o]),n}const rL=_.forwardRef((t,e)=>_.createElement(vi.span,us({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),oL="ToastProvider",[TN,kJ,NJ]=lJ("Toast"),[iL,n3e]=JF("Toast",[NJ]),[TJ,L2]=iL(oL),aL=t=>{const{__scopeToast:e,label:n="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:o=50,children:i}=t,[a,l]=_.useState(null),[u,c]=_.useState(0),d=_.useRef(!1),h=_.useRef(!1);return _.createElement(TN.Provider,{scope:e},_.createElement(TJ,{scope:e,label:n,duration:s,swipeDirection:r,swipeThreshold:o,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:_.useCallback(()=>c(f=>f+1),[]),onToastRemove:_.useCallback(()=>c(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h},i))};aL.propTypes={label(t){if(t.label&&typeof t.label=="string"&&!t.label.trim()){const e=`Invalid prop \`label\` supplied to \`${oL}\`. Expected non-empty \`string\`.`;return new Error(e)}return null}};const $J="ToastViewport",EJ=["F8"],QS="toast.viewportPause",ZS="toast.viewportResume",IJ=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:s=EJ,label:r="Notifications ({hotkey})",...o}=t,i=L2($J,n),a=kJ(n),l=_.useRef(null),u=_.useRef(null),c=_.useRef(null),d=_.useRef(null),h=Cu(e,d,i.onViewportChange),f=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;_.useEffect(()=>{const g=y=>{var b;s.every(x=>y[x]||y.code===x)&&((b=d.current)===null||b===void 0||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s]),_.useEffect(()=>{const g=l.current,y=d.current;if(p&&g&&y){const b=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(QS);y.dispatchEvent(S),i.isClosePausedRef.current=!0}},v=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(ZS);y.dispatchEvent(S),i.isClosePausedRef.current=!1}},x=S=>{!g.contains(S.relatedTarget)&&v()},w=()=>{g.contains(document.activeElement)||v()};return g.addEventListener("focusin",b),g.addEventListener("focusout",x),g.addEventListener("pointermove",b),g.addEventListener("pointerleave",w),window.addEventListener("blur",b),window.addEventListener("focus",v),()=>{g.removeEventListener("focusin",b),g.removeEventListener("focusout",x),g.removeEventListener("pointermove",b),g.removeEventListener("pointerleave",w),window.removeEventListener("blur",b),window.removeEventListener("focus",v)}}},[p,i.isClosePausedRef]);const m=_.useCallback(({tabbingDirection:g})=>{const b=a().map(v=>{const x=v.ref.current,w=[x,...GJ(x)];return g==="forwards"?w:w.reverse()});return(g==="forwards"?b.reverse():b).flat()},[a]);return _.useEffect(()=>{const g=d.current;if(g){const y=b=>{const v=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!v){const N=document.activeElement,$=b.shiftKey;if(b.target===g&&$){var w;(w=u.current)===null||w===void 0||w.focus();return}const O=m({tabbingDirection:$?"backwards":"forwards"}),P=O.findIndex(F=>F===N);if(Jx(O.slice(P+1)))b.preventDefault();else{var S,k;$?(S=u.current)===null||S===void 0||S.focus():(k=c.current)===null||k===void 0||k.focus()}}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[a,m]),_.createElement(bJ,{ref:l,role:"region","aria-label":r.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"}},p&&_.createElement(s3,{ref:u,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"forwards"});Jx(g)}}),_.createElement(TN.Slot,{scope:n},_.createElement(vi.ol,us({tabIndex:-1},o,{ref:h}))),p&&_.createElement(s3,{ref:c,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"backwards"});Jx(g)}}))}),RJ="ToastFocusProxy",s3=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...r}=t,o=L2(RJ,n);return _.createElement(rL,us({"aria-hidden":!0,tabIndex:0},r,{ref:e,style:{position:"fixed"},onFocus:i=>{var a;const l=i.relatedTarget;!((a=o.viewport)!==null&&a!==void 0&&a.contains(l))&&s()}}))}),P2="Toast",_J="toast.swipeStart",AJ="toast.swipeMove",DJ="toast.swipeCancel",OJ="toast.swipeEnd",FJ=_.forwardRef((t,e)=>{const{forceMount:n,open:s,defaultOpen:r,onOpenChange:o,...i}=t,[a=!0,l]=SJ({prop:s,defaultProp:r,onChange:o});return _.createElement(sL,{present:n||a},_.createElement(lL,us({open:a},i,{ref:e,onClose:()=>l(!1),onPause:ji(t.onPause),onResume:ji(t.onResume),onSwipeStart:Sr(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Sr(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Sr(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Sr(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})))}),[LJ,PJ]=iL(P2,{onClose(){}}),lL=_.forwardRef((t,e)=>{const{__scopeToast:n,type:s="foreground",duration:r,open:o,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...p}=t,m=L2(P2,n),[g,y]=_.useState(null),b=Cu(e,F=>y(F)),v=_.useRef(null),x=_.useRef(null),w=r||m.duration,S=_.useRef(0),k=_.useRef(w),N=_.useRef(0),{onToastAdd:$,onToastRemove:I}=m,A=ji(()=>{var F;(g==null?void 0:g.contains(document.activeElement))&&((F=m.viewport)===null||F===void 0||F.focus()),i()}),O=_.useCallback(F=>{!F||F===1/0||(window.clearTimeout(N.current),S.current=new Date().getTime(),N.current=window.setTimeout(A,F))},[A]);_.useEffect(()=>{const F=m.viewport;if(F){const G=()=>{O(k.current),u==null||u()},q=()=>{const Z=new Date().getTime()-S.current;k.current=k.current-Z,window.clearTimeout(N.current),l==null||l()};return F.addEventListener(QS,q),F.addEventListener(ZS,G),()=>{F.removeEventListener(QS,q),F.removeEventListener(ZS,G)}}},[m.viewport,w,l,u,O]),_.useEffect(()=>{o&&!m.isClosePausedRef.current&&O(w)},[o,w,m.isClosePausedRef,O]),_.useEffect(()=>($(),()=>I()),[$,I]);const P=_.useMemo(()=>g?hL(g):null,[g]);return m.viewport?_.createElement(_.Fragment,null,P&&_.createElement(MJ,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0},P),_.createElement(LJ,{scope:n,onClose:A},Bd.createPortal(_.createElement(TN.ItemSlot,{scope:n},_.createElement(yJ,{asChild:!0,onEscapeKeyDown:Sr(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||A(),m.isFocusedToastEscapeKeyDownRef.current=!1})},_.createElement(vi.li,us({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection},p,{ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Sr(t.onKeyDown,F=>{F.key==="Escape"&&(a==null||a(F.nativeEvent),F.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:Sr(t.onPointerDown,F=>{F.button===0&&(v.current={x:F.clientX,y:F.clientY})}),onPointerMove:Sr(t.onPointerMove,F=>{if(!v.current)return;const G=F.clientX-v.current.x,q=F.clientY-v.current.y,Z=!!x.current,B=["left","right"].includes(m.swipeDirection),H=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,K=B?H(0,G):0,ne=B?0:H(0,q),D=F.pointerType==="touch"?10:2,X={x:K,y:ne},te={originalEvent:F,delta:X};Z?(x.current=X,U0(AJ,d,te,{discrete:!1})):r3(X,m.swipeDirection,D)?(x.current=X,U0(_J,c,te,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(G)>D||Math.abs(q)>D)&&(v.current=null)}),onPointerUp:Sr(t.onPointerUp,F=>{const G=x.current,q=F.target;if(q.hasPointerCapture(F.pointerId)&&q.releasePointerCapture(F.pointerId),x.current=null,v.current=null,G){const Z=F.currentTarget,B={originalEvent:F,delta:G};r3(G,m.swipeDirection,m.swipeThreshold)?U0(OJ,f,B,{discrete:!0}):U0(DJ,h,B,{discrete:!0}),Z.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})))),m.viewport))):null});lL.propTypes={type(t){if(t.type&&!["foreground","background"].includes(t.type)){const e=`Invalid prop \`type\` supplied to \`${P2}\`. Expected \`foreground | background\`.`;return new Error(e)}return null}};const MJ=t=>{const{__scopeToast:e,children:n,...s}=t,r=L2(P2,e),[o,i]=_.useState(!1),[a,l]=_.useState(!1);return WJ(()=>i(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:_.createElement(vJ,{asChild:!0},_.createElement(rL,s,o&&_.createElement(_.Fragment,null,r.label," ",n)))},zJ=_.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t;return _.createElement(vi.div,us({},s,{ref:e}))}),BJ=_.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t;return _.createElement(vi.div,us({},s,{ref:e}))}),VJ="ToastAction",uL=_.forwardRef((t,e)=>{const{altText:n,...s}=t;return n?_.createElement(dL,{altText:n,asChild:!0},_.createElement(cL,us({},s,{ref:e}))):null});uL.propTypes={altText(t){return t.altText?null:new Error(`Missing prop \`altText\` expected on \`${VJ}\``)}};const UJ="ToastClose",cL=_.forwardRef((t,e)=>{const{__scopeToast:n,...s}=t,r=PJ(UJ,n);return _.createElement(dL,{asChild:!0},_.createElement(vi.button,us({type:"button"},s,{ref:e,onClick:Sr(t.onClick,r.onClose)})))}),dL=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:s,...r}=t;return _.createElement(vi.div,us({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0},r,{ref:e}))});function hL(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),jJ(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!r)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...hL(s))}}),e}function U0(t,e,n,{discrete:s}){const r=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?eL(r,o):r.dispatchEvent(o)}const r3=(t,e,n=0)=>{const s=Math.abs(t.x),r=Math.abs(t.y),o=s>r;return e==="left"||e==="right"?o&&s>n:!o&&r>n};function WJ(t=()=>{}){const e=ji(t);YS(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[e])}function jJ(t){return t.nodeType===t.ELEMENT_NODE}function GJ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jx(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}const HJ=aL,fL=IJ,pL=FJ,mL=zJ,gL=BJ,yL=uL,bL=cL;/**
 * @license lucide-react v0.360.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.360.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.360.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=(t,e)=>{const n=_.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:a="",children:l,...u},c)=>_.createElement("svg",{ref:c,...qJ,width:r,height:r,stroke:s,strokeWidth:i?Number(o)*24/Number(r):o,className:["lucide",`lucide-${KJ(t)}`,a].join(" "),...u},[...e.map(([d,h])=>_.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.360.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=XJ("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),QJ=HJ,vL=_.forwardRef(({className:t,...e},n)=>R.jsx(fL,{ref:n,className:yl("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));vL.displayName=fL.displayName;const ZJ=DF("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-slate-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-slate-800",{variants:{variant:{default:"border bg-white text-slate-950 dark:bg-slate-950 dark:text-slate-50",destructive:"destructive group border-red-500 bg-red-500 text-slate-50 dark:border-red-900 dark:bg-red-900 dark:text-slate-50"}},defaultVariants:{variant:"default"}}),xL=_.forwardRef(({className:t,variant:e,...n},s)=>R.jsx(pL,{ref:s,className:yl(ZJ({variant:e}),t),...n}));xL.displayName=pL.displayName;const JJ=_.forwardRef(({className:t,...e},n)=>R.jsx(yL,{ref:n,className:yl("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-slate-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-slate-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-slate-50 group-[.destructive]:focus:ring-red-500 dark:border-slate-800 dark:ring-offset-slate-950 dark:hover:bg-slate-800 dark:focus:ring-slate-300 dark:group-[.destructive]:border-slate-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-slate-50 dark:group-[.destructive]:focus:ring-red-900",t),...e}));JJ.displayName=yL.displayName;const wL=_.forwardRef(({className:t,...e},n)=>R.jsx(bL,{ref:n,className:yl("absolute right-2 top-2 rounded-md p-1 text-slate-950/50 opacity-0 transition-opacity hover:text-slate-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-slate-50/50 dark:hover:text-slate-50",t),"toast-close":"",...e,children:R.jsx(YJ,{className:"h-4 w-4"})}));wL.displayName=bL.displayName;const SL=_.forwardRef(({className:t,...e},n)=>R.jsx(mL,{ref:n,className:yl("text-sm font-semibold",t),...e}));SL.displayName=mL.displayName;const CL=_.forwardRef(({className:t,...e},n)=>R.jsx(gL,{ref:n,className:yl("text-sm opacity-90",t),...e}));CL.displayName=gL.displayName;const eee=1,tee=1e6;let ew=0;function nee(){return ew=(ew+1)%Number.MAX_SAFE_INTEGER,ew.toString()}const tw=new Map,o3=t=>{if(tw.has(t))return;const e=setTimeout(()=>{tw.delete(t),op({type:"REMOVE_TOAST",toastId:t})},tee);tw.set(t,e)},see=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,eee)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?o3(n):t.toasts.forEach(s=>{o3(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},wy=[];let Sy={toasts:[]};function op(t){Sy=see(Sy,t),wy.forEach(e=>{e(Sy)})}function ree({...t}){const e=nee(),n=r=>op({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>op({type:"DISMISS_TOAST",toastId:e});return op({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:n}}function oee(){const[t,e]=_.useState(Sy);return _.useEffect(()=>(wy.push(e),()=>{const n=wy.indexOf(e);n>-1&&wy.splice(n,1)}),[t]),{...t,toast:ree,dismiss:n=>op({type:"DISMISS_TOAST",toastId:n})}}function iee(){const{toasts:t}=oee();return R.jsxs(QJ,{children:[t.map(function({id:e,title:n,description:s,action:r,...o}){return R.jsxs(xL,{...o,children:[R.jsxs("div",{className:"grid gap-1",children:[n&&R.jsx(SL,{children:n}),s&&R.jsx(CL,{children:s})]}),r,R.jsx(wL,{})]},e)}),R.jsx(vL,{})]})}const aee=({buttonText:t,iconUrl:e,background:n,link:s,handleLogin:r})=>R.jsxs("button",{className:" flex items-center justify-center text-gray-800 font-semibold py-4 px-[88px] rounded-[40px] hover:bg-opacity-80 active:bg-opacity-70 transition duration-300",style:{background:n},onClick:()=>r(s),children:[R.jsx("img",{className:"mr-2",src:e,alt:"Logo",width:"24",height:"24"}),t]}),lee="/assets/Logo-DcpbSMUK.svg",uee="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9%2016.0344C13.9706%2016.0344%2018%2012.6016%2018%208.36705C18%204.13249%2013.9706%200.699707%209%200.699707C4.02944%200.699707%200%204.13249%200%208.36705C0%2010.7429%201.26848%2012.8664%203.25996%2014.2728L2.83524%2016.7985C2.69028%2017.6605%203.60558%2018.3051%204.32771%2017.8496L7.3976%2015.9132C7.9176%2015.9928%208.4531%2016.0344%209%2016.0344Z'%20fill='black'/%3e%3c/svg%3e",cee="data:image/svg+xml,%3csvg%20width='18'%20height='19'%20viewBox='0%200%2018%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_186_1240)'%3e%3cmask%20id='mask0_186_1240'%20style='mask-type:luminance'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='18'%20height='19'%3e%3cpath%20d='M17.6676%207.87635H9.28125V11.4735H14.1085C13.6585%2013.7588%2011.7767%2015.0707%209.28125%2015.0707C6.3358%2015.0707%203.96307%2012.6162%203.96307%209.56914C3.96307%206.52211%206.3358%204.06757%209.28125%204.06757C10.5494%204.06757%2011.6949%204.53309%2012.5949%205.29484L15.2131%202.58638C13.6176%201.1475%2011.5722%200.258789%209.28125%200.258789C4.29034%200.258789%200.28125%204.40613%200.28125%209.56914C0.28125%2014.7321%204.29034%2018.8795%209.28125%2018.8795C13.7813%2018.8795%2017.8722%2015.4939%2017.8722%209.56914C17.8722%209.01898%2017.7903%208.4265%2017.6676%207.87635Z'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_186_1240)'%3e%3cpath%20d='M-0.537109%2015.0708V4.06763L6.41744%209.5692L-0.537109%2015.0708Z'%20fill='%23FBBC05'/%3e%3c/g%3e%3cmask%20id='mask1_186_1240'%20style='mask-type:luminance'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='18'%20height='19'%3e%3cpath%20d='M17.6676%207.87635H9.28125V11.4735H14.1085C13.6585%2013.7588%2011.7767%2015.0707%209.28125%2015.0707C6.3358%2015.0707%203.96307%2012.6162%203.96307%209.56914C3.96307%206.52211%206.3358%204.06757%209.28125%204.06757C10.5494%204.06757%2011.6949%204.53309%2012.5949%205.29484L15.2131%202.58638C13.6176%201.1475%2011.5722%200.258789%209.28125%200.258789C4.29034%200.258789%200.28125%204.40613%200.28125%209.56914C0.28125%2014.7321%204.29034%2018.8795%209.28125%2018.8795C13.7813%2018.8795%2017.8722%2015.4939%2017.8722%209.56914C17.8722%209.01898%2017.7903%208.4265%2017.6676%207.87635Z'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask1_186_1240)'%3e%3cpath%20d='M-0.537109%204.06753L6.41744%209.5691L9.28108%206.98759L19.0993%205.33712V-0.587646H-0.537109V4.06753Z'%20fill='%23EA4335'/%3e%3c/g%3e%3cmask%20id='mask2_186_1240'%20style='mask-type:luminance'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='18'%20height='19'%3e%3cpath%20d='M17.6676%207.87635H9.28125V11.4735H14.1085C13.6585%2013.7588%2011.7767%2015.0707%209.28125%2015.0707C6.3358%2015.0707%203.96307%2012.6162%203.96307%209.56914C3.96307%206.52211%206.3358%204.06757%209.28125%204.06757C10.5494%204.06757%2011.6949%204.53309%2012.5949%205.29484L15.2131%202.58638C13.6176%201.1475%2011.5722%200.258789%209.28125%200.258789C4.29034%200.258789%200.28125%204.40613%200.28125%209.56914C0.28125%2014.7321%204.29034%2018.8795%209.28125%2018.8795C13.7813%2018.8795%2017.8722%2015.4939%2017.8722%209.56914C17.8722%209.01898%2017.7903%208.4265%2017.6676%207.87635Z'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask2_186_1240)'%3e%3cpath%20d='M-0.537109%2015.0707L11.7356%205.33712L14.9674%205.76032L19.0993%20-0.587646V19.7258H-0.537109V15.0707Z'%20fill='%2334A853'/%3e%3c/g%3e%3cmask%20id='mask3_186_1240'%20style='mask-type:luminance'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='18'%20height='19'%3e%3cpath%20d='M17.6676%207.87635H9.28125V11.4735H14.1085C13.6585%2013.7588%2011.7767%2015.0707%209.28125%2015.0707C6.3358%2015.0707%203.96307%2012.6162%203.96307%209.56914C3.96307%206.52211%206.3358%204.06757%209.28125%204.06757C10.5494%204.06757%2011.6949%204.53309%2012.5949%205.29484L15.2131%202.58638C13.6176%201.1475%2011.5722%200.258789%209.28125%200.258789C4.29034%200.258789%200.28125%204.40613%200.28125%209.56914C0.28125%2014.7321%204.29034%2018.8795%209.28125%2018.8795C13.7813%2018.8795%2017.8722%2015.4939%2017.8722%209.56914C17.8722%209.01898%2017.7903%208.4265%2017.6676%207.87635Z'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask3_186_1240)'%3e%3cpath%20d='M19.0994%2019.7259L6.41761%209.5692L4.78125%208.2996L19.0994%204.06763V19.7259Z'%20fill='%234285F4'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_186_1240'%3e%3crect%20width='18'%20height='18.6207'%20fill='white'%20transform='translate(0%200.258789)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";var dee={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const hee=()=>{const t=n=>{localStorage.removeItem("accessToken"),window.location.href=`${dee.VITE_REACT_APP_SERVER}/oauth2/authorization/${n}`},e=[{buttonText:"Continue with Kakao",icon:uee,background:"#FFC400",link:"kakao"},{buttonText:"Continue with Google",icon:cee,background:"#fff",link:"google"}];return R.jsx("div",{className:"flex items-center justify-center h-screen",children:R.jsx("main",{className:"max-w-[430px] w-full bg-customPink relative mx-auto p-4 h-screen",children:R.jsxs("div",{className:"flex flex-col",children:[R.jsx("img",{className:"h-[400px] mt-[10%] mx-auto ",src:lee,alt:"Logo"}),R.jsx("div",{className:"flex flex-col items-center justify-center space-y-4",children:e.map((n,s)=>R.jsx(aee,{buttonText:n.buttonText,iconUrl:n.icon,background:n.background,link:n.link,handleLogin:t},s))})]})})})},cu=({children:t})=>R.jsx(R.Fragment,{children:R.jsx("div",{className:"flex-1 flex-col w-full flex justify-center h-auto scrollbar-hide overflow-y-auto",children:R.jsx("main",{className:"max-w-[430px] w-full bg-customBackground relative mx-auto ",children:R.jsx("div",{className:"flex-grow overflow-hidden scrollbar-hide",children:t})})})}),Cy=({placeholder:t,marginTop:e,value:n,onChange:s})=>R.jsx(R.Fragment,{children:R.jsx("input",{className:`rounded-lg border border-[#5ECDC7] p-2 w-full
        focus:outline-none focus:ring-0 focus:border-[#5ECDC7] transition duration-200
        ${e}
        `,placeholder:t,style:{transform:"scale(1)",transition:"none"},value:n,onChange:s})}),JS=({text:t,align:e,marginTop:n,marginBottom:s})=>R.jsx(R.Fragment,{children:R.jsx("p",{className:`text-customBrown text-size24 ${e} ${n} ${s} font-semibold leading-6`,children:t})}),fee="data:image/svg+xml,%3csvg%20width='16'%20height='9'%20viewBox='0%200%2016%209'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%201L8%208L15%201'%20stroke='%23D8D8D8'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",pee="data:image/svg+xml,%3csvg%20width='16'%20height='9'%20viewBox='0%200%2016%209'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%208L8%201L15%208'%20stroke='%23D8D8D8'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var mee={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const i3=t=>{let e;const n=new Set,s=(c,d)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,f))}},r=()=>e,l={setState:s,getState:r,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(mee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(s,r,l);return l},gee=t=>t?i3(t):i3;var kL={exports:{}},NL={},TL={exports:{}},$L={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=_;function yee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bee=typeof Object.is=="function"?Object.is:yee,vee=wd.useState,xee=wd.useEffect,wee=wd.useLayoutEffect,See=wd.useDebugValue;function Cee(t,e){var n=e(),s=vee({inst:{value:n,getSnapshot:e}}),r=s[0].inst,o=s[1];return wee(function(){r.value=n,r.getSnapshot=e,nw(r)&&o({inst:r})},[t,n,e]),xee(function(){return nw(r)&&o({inst:r}),t(function(){nw(r)&&o({inst:r})})},[t]),See(n),n}function nw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bee(t,n)}catch{return!0}}function kee(t,e){return e()}var Nee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kee:Cee;$L.useSyncExternalStore=wd.useSyncExternalStore!==void 0?wd.useSyncExternalStore:Nee;TL.exports=$L;var Tee=TL.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2=_,$ee=Tee;function Eee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Iee=typeof Object.is=="function"?Object.is:Eee,Ree=$ee.useSyncExternalStore,_ee=M2.useRef,Aee=M2.useEffect,Dee=M2.useMemo,Oee=M2.useDebugValue;NL.useSyncExternalStoreWithSelector=function(t,e,n,s,r){var o=_ee(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Dee(function(){function l(f){if(!u){if(u=!0,c=f,f=s(f),r!==void 0&&i.hasValue){var p=i.value;if(r(p,f))return d=p}return d=f}if(p=d,Iee(c,f))return p;var m=s(f);return r!==void 0&&r(p,m)?p:(c=f,d=m)}var u=!1,c,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,s,r]);var a=Ree(t,o[0],o[1]);return Aee(function(){i.hasValue=!0,i.value=a},[a]),Oee(a),a};kL.exports=NL;var Fee=kL.exports;const Lee=W1(Fee);var $N={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Pee}=Ze,{useSyncExternalStoreWithSelector:Mee}=Lee;let a3=!1;const zee=t=>t;function Bee(t,e=zee,n){($N?"production":void 0)!=="production"&&n&&!a3&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),a3=!0);const s=Mee(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Pee(s),s}const l3=t=>{($N?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?gee(t):t,n=(s,r)=>Bee(e,s,r);return Object.assign(n,e),n},Vee=t=>t?l3(t):l3;var Uee=t=>(($N?"production":void 0)!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),Vee(t));const EN=Uee(t=>({currentPage:1,nextPage:()=>t(e=>({currentPage:Math.min(e.currentPage+1,3)})),prevPage:()=>t(e=>({currentPage:Math.max(e.currentPage-1,1)})),nickname:"",setNickname:e=>t({nickname:e}),babyname:"",setBabyname:e=>t({babyname:e}),dueDate:"",setDueDate:e=>t({dueDate:e}),monthAfterBirth:"",setMonthAfterBirth:e=>t({monthAfterBirth:e})})),Wee="data:image/svg+xml,%3csvg%20width='14'%20height='24'%20viewBox='0%200%2014%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.545455%2013.4328L10.9091%2023.4627C11.6364%2024.1791%2012.7273%2024.1791%2013.4545%2023.4627C14.1818%2022.7463%2014.1818%2021.6716%2013.4545%2020.9552L4.54545%2012L13.4545%203.04478C14.1818%202.32836%2014.1818%201.25373%2013.4545%200.537313C13.0909%200.179104%2012.7273%200%2012.1818%200C11.6364%200%2011.2727%200.179104%2010.9091%200.537313L0.545455%2010.5672C-0.181818%2011.4627%20-0.181818%2012.5373%200.545455%2013.4328C0.545455%2013.2537%200.545455%2013.2537%200.545455%2013.4328Z'%20fill='%23675143'/%3e%3c/svg%3e",jee=()=>{const t=mi(),e=localStorage.getItem("accessToken"),{nickname:n,babyname:s,setBabyname:r,dueDate:o,setDueDate:i,monthAfterBirth:a,setMonthAfterBirth:l,prevPage:u}=EN(),c=[{text:"Please enter "},{text:"your baby's information "}],[d,h]=_.useState(!1),[f,p]=_.useState("When is the due date"),m=["When is the due date","Months after birth"],g=b=>{p(b),h(!1)};_.useEffect(()=>{l(""),i("")},[f]);const y=async()=>{if(n&&s&&(o.length===10||a))try{const b=await rJ(String(e),n,s,a,o);t("/"),console.log("   :",b)}catch(b){console.error("   :",b),alert("   .   .")}else alert("    .")};return R.jsxs(cu,{children:[R.jsxs("div",{className:"flex flex-col h-screen px-7",children:[R.jsxs("div",{className:"mt-[10%] mb-[120px]",children:[R.jsx("img",{className:"cursor-pointer mb-[15%]",onClick:u,src:Wee,alt:"x"}),c.map((b,v)=>R.jsx(JS,{text:b.text,align:""},v))]}),R.jsxs("div",{children:[R.jsx("p",{className:"text-costomMint",children:"Whats the babys name"}),R.jsx(Cy,{placeholder:"name",value:s,onChange:b=>r(b.target.value)})]}),R.jsxs("div",{className:"p-2 w-auto rounded-[8px] border border-[#EAEAEA] bg-[#F7F7F7] mt-7 mb-1",children:[R.jsxs("div",{className:"flex-row space-x-2 cursor-pointer",onClick:()=>h(b=>!b),children:[R.jsx("button",{children:R.jsx("img",{src:d?pee:fee,alt:"Toggle options"})}),R.jsx("span",{className:"text-costomMint",children:f})]}),d&&R.jsx("div",{children:m.filter(b=>b!==f).map((b,v)=>R.jsx("p",{className:"text-[#D8D8D8] mx-6",style:{cursor:"pointer",color:"black"},onClick:()=>g(b),children:b},v))})]}),f==="When is the due date"?R.jsx(Cy,{placeholder:"due date (format: YYYY-MM-DD)",value:o,onChange:b=>i(b.target.value)}):R.jsx(Cy,{placeholder:"Months after birth (only number)",value:a,onChange:b=>{const v=b.target.value;/^\d*$/.test(v)&&l(v)}})]}),R.jsx("button",{className:`fixed bottom-10 left-0 right-0 mx-auto max-w-[430px] text-center cursor-pointer py-[18px] px-[42px]
        ${s&&(o||a)?"bg-customPink text-white hover:bg-opacity-80 active:bg-opacity-70":"bg-[#FFF] text-customPink border border-[#EF8491] opacity-50 cursor-not-allowed"}
        w-[124px] h-[60px] flex items-center justify-center rounded-[40px] transition duration-200`,onClick:s&&(o||a)?y:void 0,children:R.jsx("span",{className:"w-10",children:"Next"})})]})},Gee="/assets/WelcomLogo-Bemv6VvY.svg",Hee=()=>{const t=[{text:"Please enter "},{text:"your nickname "}],{nickname:e,setNickname:n,nextPage:s}=EN(),r=()=>{e?s():alert(" .")};return R.jsxs(cu,{children:[R.jsxs("div",{className:"flex flex-col h-screen px-6",children:[" ",R.jsx(JS,{text:"Welcom !",align:"text-center",marginTop:"mt-[20%]",marginBottom:"mb-[36px]"}),R.jsxs("div",{className:"flex justify-center mb-[60px]",children:[" ",R.jsx("img",{className:"w-[140px] h-[150px]",src:Gee,alt:"Welcome Logo"})]}),t.map((o,i)=>R.jsx(JS,{text:o.text,align:""},i)),R.jsx(Cy,{placeholder:"nickname",marginTop:"mt-6",value:e,onChange:o=>n(o.target.value)})]}),R.jsx("button",{className:`fixed bottom-10 left-0 right-0 mx-auto max-w-[430px] text-center cursor-pointer py-[18px] px-[42px]
    ${e?"bg-customPink text-white hover:bg-opacity-80 active:bg-opacity-70":"bg-[#FFF] text-customPink border border-[#EF8491] opacity-50"}
    w-[124px] h-[60px] flex items-center justify-center rounded-[40px]`,onClick:r,children:R.jsx("span",{className:"w-10",children:"Next"})})]})},qee=()=>{const{currentPage:t}=EN();return R.jsxs(R.Fragment,{children:[t===1&&R.jsx(Hee,{}),t===2&&R.jsx(jee,{})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kee=1e-7,Xee=1e-4;class IN{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class z2{refCount(e){return Js("refCount")}incRef(e){return Js("incRef")}timerAvailable(){return!0}time(e){return Js("time")}read(e){return Js("read")}readSync(e){return Js("readSync")}readToGPU(e,n){return Js("readToGPU")}numDataIds(){return Js("numDataIds")}disposeData(e,n){return Js("disposeData")}write(e,n,s){return Js("write")}move(e,n,s,r,o){return Js("move")}createTensorFromGPUData(e,n,s){return Js("createTensorFromGPUData")}memory(){return Js("memory")}floatPrecision(){return Js("floatPrecision")}epsilon(){return this.floatPrecision()===32?Kee:Xee}dispose(){return Js("dispose")}}function Js(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RN(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Di(t,e,n)}function Yee(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,s=0;for(;n>0;)s=Math.random()*n|0,n--,Di(t,n,s),Di(e,n,s)}function Ja(t,e,n){return Math.max(t,Math.min(e,n))}function B2(t){return t%2===0?t:t+1}function Di(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function EL(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Qee(t,e){const n=Math.random();return e*n+(1-n)*t}function Zee(t,e){let n=0;for(let s=0;s<t.length;s++){const r=Number(t[s])-Number(e[s]);n+=r*r}return n}function T(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ds(t,e,n=""){T(vt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function ju(t){T(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function le(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Jee(t){return t.length===0}function IL(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function vt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ku(t){return t%1===0}function ete(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function c1(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function tte(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return RN(e),e}function du(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function eC(t,e=r=>0,n,s){return new Promise((r,o)=>{let i=0;const a=()=>{if(t()){r();return}i++;const l=e(i);if(n!=null&&i>=n){o();return}s!=null?s(a,l):setTimeout(a,l)};a()})}function _N(t,e){let n=1,s=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${o}`);s=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(s===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const r=t.slice();return r[s]=e/n,r}function pt(t,e){const n=e.length;return t=t==null?e.map((s,r)=>r):[].concat(t),T(t.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),T(t.every(s=>ku(s)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(s=>s<0?n+s:s)}function ea(t,e){const n=[],s=[],r=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||r?null:pt(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(o!=null){if(o[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(o[i]==null||o[i]>a)&&t[a]===1&&(n.push(t[a]),s.push(a)),o[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),s.push(a))}return{newShape:n,keptDims:s}}function Xn(t,e){return fn(t,e)}function fn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function RL(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${e} being uploaded contains ${s}.`)}}function _L(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function AN(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Rp(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function AL(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ei(t){return typeof t=="string"||t instanceof String}function DL(t){return typeof t=="boolean"}function d1(t){return typeof t=="number"}function Gu(t){return Array.isArray(t)?Gu(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":d1(t)?"float32":ei(t)?"string":DL(t)?"bool":"float32"}function el(t){return!!(t&&t.constructor&&t.call&&t.apply)}function h1(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function je(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let s=e-3;s>=0;--s)n[s]=n[s+1]*t[s+1];return n}function OL(t,e,n,s=!1){const r=new Array;if(e.length===1){const o=e[0]*(s?2:1);for(let i=0;i<o;i++)r[i]=n[t+i]}else{const o=e[0],i=e.slice(1),a=i.reduce((l,u)=>l*u)*(s?2:1);for(let l=0;l<o;l++)r[l]=OL(t+l*a,i,n,s)}return r}function Rr(t,e,n=!1){if(t.length===0)return e[0];const s=t.reduce((r,o)=>r*o)*(n?2:1);if(s===0)return[];if(s!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return OL(0,t,e,n)}function FL(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function V2(t,e){const n=cs(t,e);for(let s=0;s<n.length;s++)n[s]=1;return n}function cs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function DN(t,e){const n=t.reduce((s,r)=>s*r,1);if(e==null||e==="float32")return Rr(t,new Float32Array(n));if(e==="int32")return Rr(t,new Int32Array(n));if(e==="bool")return Rr(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function gr(t){t.forEach(e=>{T(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ro(t,e,n){if(e===0)return 0;if(e===1)return t[0];let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=n[r]*t[r];return s}function Hu(t,e,n){if(e===0)return[];if(e===1)return[t];const s=new Array(e);for(let r=0;r<s.length-1;++r)s[r]=Math.floor(t/n[r]),t-=s[r]*n[r];return s[s.length-1]=t,s}function tl(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u3="tfjsflags";class LL{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=nte,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(se().getBool("IS_TEST")||se().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,s){if(this.flagRegistry[e]={evaluationFn:n,setHook:s},this.urlFlags[e]!=null){const r=this.urlFlags[e];se().getBool("IS_TEST")||se().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${r}.`),this.set(e,r)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(tl(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);u3 in e&&e[u3].split(",").forEach(s=>{const[r,o]=s.split(":");this.urlFlags[r]=rte(r,o)})}}function nte(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(ste(e,s[0],s[1]),s.join("="))),e}function ste(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function rte(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function se(){return ON}let ON=null;function ote(t){ON=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sw;function PL(){if(sw==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");sw=t}return sw}function ite(){const t=PL();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function FN(t,e){const n=ite();if(n.has(t))return n.get(t);{const s=e();return n.set(t,s),n.get(t)}}const $m="Abs",Gd="Acos",Hd="Acosh",qu="Add",Em="AddN",U2="All",W2="Any",Im="ArgMax",Rm="ArgMin",qd="Asin",Kd="Asinh",Xd="Atan",Yd="Atanh",Qd="Atan2",_m="AvgPool",j2="AvgPoolGrad",Am="AvgPool3D",G2="AvgPool3DGrad",Dm="BatchMatMul",Om="BatchToSpaceND",H2="Bincount",Fm="BitwiseAnd",ML="BroadcastTo",q2="BroadcastArgs",Zd="Cast",Jd="Ceil",eh="ClipByValue",K2="Complex",Lm="ComplexAbs",Pm="Concat",Mm="Conv2D",X2="Conv2DBackpropFilter",zm="Conv2DBackpropInput",Bm="Conv3D",Y2="Conv3DBackpropFilterV2",Q2="Conv3DBackpropInputV2",th="Cos",nh="Cosh",Z2="Cumprod",Vm="Cumsum",J2="CropAndResize",eb="DenseBincount",tb="DepthToSpace",Um="DepthwiseConv2dNative",nb="DepthwiseConv2dNativeBackpropFilter",sb="DepthwiseConv2dNativeBackpropInput",rb="Diag",Wm="Dilation2D",f1="Dilation2DBackpropInput",p1="Dilation2DBackpropFilter",ob="Draw",sh="RealDiv",ib="Einsum",rh="Elu",ab="EluGrad",oh="Erf",jm="Equal",ih="Exp",Gm="ExpandDims",ah="Expm1",lb="FFT",ub="Fill",cb="FlipLeftRight",lh="Floor",uh="FloorDiv",Hm="FusedBatchNorm",qm="GatherV2",db="GatherNd",Km="Greater",ch="GreaterEqual",dh="Identity",hb="IFFT",fb="Imag",hh="IsFinite",fh="IsInf",ph="IsNan",Xm="LeakyRelu",Ym="Less",Qm="LessEqual",pb="LinSpace",mh="Log",gh="Log1p",Zm="LogicalAnd",Jm="LogicalNot",eg="LogicalOr",ate="LogicalXor",zL="LogSoftmax",lte="LowerBound",tg="LRN",mb="LRNGrad",ute="MatrixBandPart",ng="Max",yh="Maximum",sg="MaxPool",gb="MaxPoolGrad",rg="MaxPool3D",yb="MaxPool3DGrad",bb="MaxPoolWithArgmax",og="Mean",ig="Min",bh="Minimum",ag="MirrorPad",vh="Mod",vb="Multinomial",xh="Multiply",lg="Neg",ug="NotEqual",xb="NonMaxSuppressionV3",wb="NonMaxSuppressionV4",Sb="NonMaxSuppressionV5",cg="OnesLike",dg="OneHot",hg="Pack",fg="PadV2",cte="Pool",wh="Pow",pg="Prelu",mg="Prod",Cb="RaggedGather",kb="RaggedRange",Nb="RaggedTensorToTensor",Tb="Range",$b="Real",Sh="Reciprocal",Ch="Relu",gg="Reshape",yg="ResizeNearestNeighbor",Eb="ResizeNearestNeighborGrad",bg="ResizeBilinear",Ib="ResizeBilinearGrad",kh="Relu6",vg="Reverse",Nh="Round",Th="Rsqrt",Rb="ScatterNd",_b="TensorScatterUpdate",Ab="SearchSorted",xg="Select",$h="Selu",wg="Slice",Eh="Sin",Ih="Sinh",Rh="Sign",_h="Sigmoid",Ah="Softplus",Dh="Sqrt",Sg="Sum",Cg="SpaceToBatchND",kg="SplitV",Ng="Softmax",Db="SparseFillEmptyRows",Ob="SparseReshape",Fb="SparseSegmentMean",Lb="SparseSegmentSum",Pb="SparseToDense",Oh="SquaredDifference",Mb="Square",Tg="StaticRegexReplace",zb="StridedSlice",Bb="StringNGrams",Vb="StringSplit",Ub="StringToHashBucketFast",Fh="Sub",Lh="Tan",Ph="Tanh",Mh="Tile",Wb="TopK",jb="Transform",hu="Transpose",Gb="Unique",$g="Unpack",Eg="UnsortedSegmentSum",dte="UpperBound",Ig="ZerosLike",zh="Step",m1="FromPixels",Hb="RotateWithOffset",_p="_FusedMatMul",Ap="FusedConv2D",Dp="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(...t){se().getBool("IS_TEST")||se().getBool("PROD")||console.warn(...t)}function hte(...t){se().getBool("IS_TEST")||se().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sd=FN("kernelRegistry",()=>new Map),Op=FN("gradRegistry",()=>new Map);function Fp(t,e){const n=LN(t,e);return Sd.get(n)}function tC(t){return Op.get(t)}function g1(t){const e=Sd.entries(),n=[];for(;;){const{done:s,value:r}=e.next();if(s)break;const[o,i]=r,[a]=o.split("_");a===t&&n.push(i)}return n}function qb(t){const{kernelName:e,backendName:n}=t,s=LN(e,n);Sd.has(s)&&Cr(`The kernel '${e}' for backend '${n}' is already registered`),Sd.set(s,t)}function BL(t){const{kernelName:e}=t;Op.has(e)&&se().getBool("DEBUG")&&Cr(`Overriding the gradient for '${e}'`),Op.set(e,t)}function fte(t,e){const n=LN(t,e);if(!Sd.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Sd.delete(n)}function pte(t){if(!Op.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Op.delete(t)}function mte(t,e){g1(t).forEach(s=>{const r=Object.assign({},s,{backendName:e});qb(r)})}function LN(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VL(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var UL=Kt,Jr=null;try{Jr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Kt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Kt.prototype.__isLong__;Object.defineProperty(Kt.prototype,"__isLong__",{value:!0});function yr(t){return(t&&t.__isLong__)===!0}Kt.isLong=yr;var c3={},d3={};function Ku(t,e){var n,s,r;return e?(t>>>=0,(r=0<=t&&t<256)&&(s=d3[t],s)?s:(n=Xt(t,(t|0)<0?-1:0,!0),r&&(d3[t]=n),n)):(t|=0,(r=-128<=t&&t<128)&&(s=c3[t],s)?s:(n=Xt(t,t<0?-1:0,!1),r&&(c3[t]=n),n))}Kt.fromInt=Ku;function eo(t,e){if(isNaN(t))return e?Ql:to;if(e){if(t<0)return Ql;if(t>=WL)return HL}else{if(t<=-f3)return ir;if(t+1>=f3)return GL}return t<0?eo(-t,e).neg():Xt(t%Cd|0,t/Cd|0,e)}Kt.fromNumber=eo;function Xt(t,e,n){return new Kt(t,e,n)}Kt.fromBits=Xt;var y1=Math.pow;function PN(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return to;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return PN(t.substring(1),e,n).neg();for(var r=eo(y1(n,8)),o=to,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+a),n);if(a<8){var u=eo(y1(n,a));o=o.mul(u).add(eo(l))}else o=o.mul(r),o=o.add(eo(l))}return o.unsigned=e,o}Kt.fromString=PN;function Mo(t,e){return typeof t=="number"?eo(t,e):typeof t=="string"?PN(t,e):Xt(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Kt.fromValue=Mo;var h3=65536,gte=1<<24,Cd=h3*h3,WL=Cd*Cd,f3=WL/2,p3=Ku(gte),to=Ku(0);Kt.ZERO=to;var Ql=Ku(0,!0);Kt.UZERO=Ql;var Dc=Ku(1);Kt.ONE=Dc;var jL=Ku(1,!0);Kt.UONE=jL;var nC=Ku(-1);Kt.NEG_ONE=nC;var GL=Xt(-1,2147483647,!1);Kt.MAX_VALUE=GL;var HL=Xt(-1,-1,!0);Kt.MAX_UNSIGNED_VALUE=HL;var ir=Xt(0,-2147483648,!1);Kt.MIN_VALUE=ir;var $e=Kt.prototype;$e.toInt=function(){return this.unsigned?this.low>>>0:this.low};$e.toNumber=function(){return this.unsigned?(this.high>>>0)*Cd+(this.low>>>0):this.high*Cd+(this.low>>>0)};$e.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ir)){var n=eo(e),s=this.div(n),r=s.mul(n).sub(this);return s.toString(e)+r.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=eo(y1(e,6),this.unsigned),i=this,a="";;){var l=i.div(o),u=i.sub(l.mul(o)).toInt()>>>0,c=u.toString(e);if(i=l,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};$e.getHighBits=function(){return this.high};$e.getHighBitsUnsigned=function(){return this.high>>>0};$e.getLowBits=function(){return this.low};$e.getLowBitsUnsigned=function(){return this.low>>>0};$e.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ir)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};$e.isZero=function(){return this.high===0&&this.low===0};$e.eqz=$e.isZero;$e.isNegative=function(){return!this.unsigned&&this.high<0};$e.isPositive=function(){return this.unsigned||this.high>=0};$e.isOdd=function(){return(this.low&1)===1};$e.isEven=function(){return(this.low&1)===0};$e.equals=function(e){return yr(e)||(e=Mo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};$e.eq=$e.equals;$e.notEquals=function(e){return!this.eq(e)};$e.neq=$e.notEquals;$e.ne=$e.notEquals;$e.lessThan=function(e){return this.comp(e)<0};$e.lt=$e.lessThan;$e.lessThanOrEqual=function(e){return this.comp(e)<=0};$e.lte=$e.lessThanOrEqual;$e.le=$e.lessThanOrEqual;$e.greaterThan=function(e){return this.comp(e)>0};$e.gt=$e.greaterThan;$e.greaterThanOrEqual=function(e){return this.comp(e)>=0};$e.gte=$e.greaterThanOrEqual;$e.ge=$e.greaterThanOrEqual;$e.compare=function(e){if(yr(e)||(e=Mo(e)),this.eq(e))return 0;var n=this.isNegative(),s=e.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};$e.comp=$e.compare;$e.negate=function(){return!this.unsigned&&this.eq(ir)?ir:this.not().add(Dc)};$e.neg=$e.negate;$e.add=function(e){yr(e)||(e=Mo(e));var n=this.high>>>16,s=this.high&65535,r=this.low>>>16,o=this.low&65535,i=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,d=0,h=0,f=0;return f+=o+u,h+=f>>>16,f&=65535,h+=r+l,d+=h>>>16,h&=65535,d+=s+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,Xt(h<<16|f,c<<16|d,this.unsigned)};$e.subtract=function(e){return yr(e)||(e=Mo(e)),this.add(e.neg())};$e.sub=$e.subtract;$e.multiply=function(e){if(this.isZero())return to;if(yr(e)||(e=Mo(e)),Jr){var n=Jr.mul(this.low,this.high,e.low,e.high);return Xt(n,Jr.get_high(),this.unsigned)}if(e.isZero())return to;if(this.eq(ir))return e.isOdd()?ir:to;if(e.eq(ir))return this.isOdd()?ir:to;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(p3)&&e.lt(p3))return eo(this.toNumber()*e.toNumber(),this.unsigned);var s=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,f=0,p=0;return p+=i*c,f+=p>>>16,p&=65535,f+=o*c,h+=f>>>16,f&=65535,f+=i*u,h+=f>>>16,f&=65535,h+=r*c,d+=h>>>16,h&=65535,h+=o*u,d+=h>>>16,h&=65535,h+=i*l,d+=h>>>16,h&=65535,d+=s*c+r*u+o*l+i*a,d&=65535,Xt(f<<16|p,d<<16|h,this.unsigned)};$e.mul=$e.multiply;$e.divide=function(e){if(yr(e)||(e=Mo(e)),e.isZero())throw Error("division by zero");if(Jr){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Jr.div_u:Jr.div_s)(this.low,this.high,e.low,e.high);return Xt(n,Jr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ql:to;var s,r,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ql;if(e.gt(this.shru(1)))return jL;o=Ql}else{if(this.eq(ir)){if(e.eq(Dc)||e.eq(nC))return ir;if(e.eq(ir))return Dc;var i=this.shr(1);return s=i.div(e).shl(1),s.eq(to)?e.isNegative()?Dc:nC:(r=this.sub(e.mul(s)),o=s.add(r.div(e)),o)}else if(e.eq(ir))return this.unsigned?Ql:to;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=to}for(r=this;r.gte(e);){s=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(s)/Math.LN2),l=a<=48?1:y1(2,a-48),u=eo(s),c=u.mul(e);c.isNegative()||c.gt(r);)s-=l,u=eo(s,this.unsigned),c=u.mul(e);u.isZero()&&(u=Dc),o=o.add(u),r=r.sub(c)}return o};$e.div=$e.divide;$e.modulo=function(e){if(yr(e)||(e=Mo(e)),Jr){var n=(this.unsigned?Jr.rem_u:Jr.rem_s)(this.low,this.high,e.low,e.high);return Xt(n,Jr.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};$e.mod=$e.modulo;$e.rem=$e.modulo;$e.not=function(){return Xt(~this.low,~this.high,this.unsigned)};$e.and=function(e){return yr(e)||(e=Mo(e)),Xt(this.low&e.low,this.high&e.high,this.unsigned)};$e.or=function(e){return yr(e)||(e=Mo(e)),Xt(this.low|e.low,this.high|e.high,this.unsigned)};$e.xor=function(e){return yr(e)||(e=Mo(e)),Xt(this.low^e.low,this.high^e.high,this.unsigned)};$e.shiftLeft=function(e){return yr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Xt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Xt(0,this.low<<e-32,this.unsigned)};$e.shl=$e.shiftLeft;$e.shiftRight=function(e){return yr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Xt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Xt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};$e.shr=$e.shiftRight;$e.shiftRightUnsigned=function(e){if(yr(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var s=this.low;return Xt(s>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Xt(n,0,this.unsigned):Xt(n>>>e-32,0,this.unsigned)};$e.shru=$e.shiftRightUnsigned;$e.shr_u=$e.shiftRightUnsigned;$e.toSigned=function(){return this.unsigned?Xt(this.low,this.high,!1):this};$e.toUnsigned=function(){return this.unsigned?this:Xt(this.low,this.high,!0)};$e.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};$e.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};$e.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Kt.fromBytes=function(e,n,s){return s?Kt.fromBytesLE(e,n):Kt.fromBytesBE(e,n)};Kt.fromBytesLE=function(e,n){return new Kt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Kt.fromBytesBE=function(e,n){return new Kt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const qL=W1(UL),yte=XC({__proto__:null,default:qL},[UL]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zl=qL||yte;function Rg(t){return zl.fromString(t,!0,16)}const KL=Rg("c3a5c85c97cb3127"),Ll=Rg("b492b66fbe98f273"),Es=Rg("9ae16a3b2f90404f");function sC(t){return t.xor(t.shru(47))}function XL(t,e,n){const s=t.slice(e,e+n);return zl.fromBytes(Array.from(s),!0,!0)}function Vt(t,e){return XL(t,e,8)}function m3(t,e){return XL(t,e,4)}function jn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function qa(t,e,n=Rg("9ddfea08eb382d69")){let s=t.xor(e).mul(n);s=s.xor(s.shru(47));let r=e.xor(s).mul(n);return r=r.xor(r.shru(47)),r=r.mul(n),r}function bte(t,e,n,s,r,o){r=r.add(t),o=jn(o.add(r).add(s),21);const i=r;return r=r.add(e),r=r.add(n),o=o.add(jn(r,44)),[r.add(s),o.add(i)]}function W0(t,e,n,s){return bte(Vt(t,e),Vt(t,e+8),Vt(t,e+16),Vt(t,e+24),n,s)}function vte(t,e=t.length){if(e>=8){const n=Es.add(e*2),s=Vt(t,0).add(Es),r=Vt(t,e-8),o=jn(r,37).mul(n).add(s),i=jn(s,25).add(r).mul(n);return qa(o,i,n)}if(e>=4){const n=Es.add(e*2),s=m3(t,0);return qa(s.shl(3).add(e),m3(t,e-4),n)}if(e>0){const n=t[0],s=t[e>>1],r=t[e-1],o=n+(s<<8),i=e+(r<<2);return sC(Es.mul(o).xor(KL.mul(i))).mul(Es)}return Es}function xte(t,e=t.length){const n=Es.add(e*2),s=Vt(t,0).mul(Ll),r=Vt(t,8),o=Vt(t,e-8).mul(n),i=Vt(t,e-16).mul(Es);return qa(jn(s.add(r),43).add(jn(o,30)).add(i),s.add(jn(r.add(Es),18)).add(o),n)}function wte(t,e=t.length){const n=Es.add(e*2),s=Vt(t,0).mul(Es),r=Vt(t,8),o=Vt(t,e-8).mul(n),i=Vt(t,e-16).mul(Es),a=jn(s.add(r),43).add(jn(o,30)).add(i),l=qa(a,s.add(jn(r.add(Es),18)).add(o),n),u=Vt(t,16).mul(n),c=Vt(t,24),d=a.add(Vt(t,e-32)).mul(n),h=l.add(Vt(t,e-24)).mul(n);return qa(jn(u.add(c),43).add(jn(d,30)).add(h),u.add(jn(c.add(s),18)).add(d),n)}function YL(t,e=t.length){const n=zl.fromNumber(81,!0);if(e<=32)return e<=16?vte(t,e):xte(t,e);if(e<=64)return wte(t,e);let s=n,r=n.mul(Ll).add(113),o=sC(r.mul(Es).add(113)).mul(Es),i=[zl.UZERO,zl.UZERO],a=[zl.UZERO,zl.UZERO];s=s.mul(Es).add(Vt(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do s=jn(s.add(r).add(i[0]).add(Vt(t,l+8)),37).mul(Ll),r=jn(r.add(i[1]).add(Vt(t,l+48)),42).mul(Ll),s=s.xor(a[1]),r=r.add(i[0]).add(Vt(t,l+40)),o=jn(o.add(a[0]),33).mul(Ll),i=W0(t,l,i[1].mul(Ll),s.add(a[0])),a=W0(t,l+32,o.add(a[1]),r.add(Vt(t,l+16))),[o,s]=[s,o],l+=64;while(l!==u);const d=Ll.add(o.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),s=jn(s.add(r).add(i[0]).add(Vt(t,l+8)),37).mul(d),r=jn(r.add(i[1]).add(Vt(t,l+48)),42).mul(d),s=s.xor(a[1].mul(9)),r=r.add(i[0].mul(9).add(Vt(t,l+40))),o=jn(o.add(a[0]),33).mul(d),i=W0(t,l,i[1].mul(d),s.add(a[0])),a=W0(t,l+32,o.add(a[1]),r.add(Vt(t,l+16))),[o,s]=[s,o],qa(qa(i[0],a[0],d).add(sC(r).mul(KL)).add(o),qa(i[1],a[1],d).add(s),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ta(t,e){return e==="string"?ri(t):bl([t],e)}function Ste(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function bl(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ui(t)),se().getBool("DEBUG")&&RL(t,e),Ste(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let s=0;s<n.length;++s)Math.round(t[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${e}`)}function bs(){return se().platform.now()}function Cte(t,e){return se().platform.fetch(t,e)}function ri(t,e="utf-8"){return e=e||"utf-8",se().platform.encode(t,e)}function Gi(t,e="utf-8"){return e=e||"utf-8",se().platform.decode(t,e)}function Gn(t){return se().platform.isTypedArray!=null?se().platform.isTypedArray(t):VL(t)}function ui(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||tl(t)||t==null||Gn(t)&&n)e.push(t);else if(Array.isArray(t)||Gn(t))for(let s=0;s<t.length;++s)ui(t[s],e,n);else{let s=-1;for(const r of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(r)&&(s=Math.max(s,Number(r)));for(let r=0;r<=s;r++)ui(t[r],e,n)}return e}const kte=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:vt,arraysEqualWithNull:IL,assert:T,assertNonNegativeIntegerDimensions:gr,assertNonNull:ju,assertShapesMatch:ds,bytesFromStringArray:AL,bytesPerElement:Rp,checkConversionForErrors:RL,clamp:Ja,computeStrides:je,convertBackendValuesAndArrayBuffer:FL,createScalarValue:ta,createShuffledIndices:tte,decodeString:Gi,distSquared:Zee,encodeString:ri,fetch:Cte,fingerPrint64:YL,flatten:ui,getArrayFromDType:fn,getTypedArrayFromDType:Xn,hasEncodingLoss:AN,hexToLong:Rg,indexToLoc:Hu,inferDtype:Gu,inferFromImplicitShape:_N,isBoolean:DL,isFunction:el,isInt:ku,isNumber:d1,isPromise:tl,isScalarShape:Jee,isString:ei,isTypedArray:Gn,isValidDtype:_L,locToIndex:Ro,makeOnesTypedArray:V2,makeZerosNestedTypedArray:DN,makeZerosTypedArray:cs,nearestDivisor:h1,nearestLargerEven:B2,now:bs,parseAxisParam:pt,randUniform:Qee,repeatedTry:eC,rightPad:du,shuffle:RN,shuffleCombo:Yee,sizeFromShape:le,sizeToSquarishShape:c1,squeezeShape:ea,sum:EL,swap:Di,tanh:ete,toNestedArray:Rr,toTypedArray:bl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nte{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new $te)}profileKernel(e,n,s){let r;const o=()=>{r=s()};let i;const a=bs();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();for(const u of r)u.dataSync();i=Promise.resolve({kernelMs:bs()-a})}if(se().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<r.length;u++){const c=r[u];c.data().then(d=>{Tte(d,c.dtype,e)})}return{kernelName:e,outputs:r,inputs:n,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:s,timeMs:r,inputs:o,extraInfo:i}=e;s.forEach(a=>{Promise.all([a.data(),r,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],o,l[2])})})}}function Tte(t,e,n){if(e!=="float32")return!1;for(let s=0;s<t.length;s++){const r=t[s];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class $te{logKernelProfile(e,n,s,r,o,i){const a=typeof r=="number"?du(`${r}ms`,9):r.error,l=du(e,25),u=n.rank,c=n.size,d=du(n.shape.toString(),14);let h="";for(const f in o){const p=o[f];if(p!=null){const m=p.shape||n.shape,g=m.length;h+=`${f}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${h}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t,e,n){const s={},r={};for(let l=0;l<e.length;l++)s[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const h=c[d];let f=!1;for(let p=0;p<e.length;p++)if(s[h.id]){u.outputs.forEach(m=>s[m.id]=!0),f=!0,r[u.id]=!0;break}if(f)break}}const o={};o[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(o[u.outputs[d].id]){for(const h in c)o[c[h].id]=!0,i[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(r[u.id]&&i[u.id]){const c={};for(const h in u.inputs){const f=u.inputs[h];s[f.id]&&(c[h]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function Ite(t,e,n,s){for(let r=e.length-1;r>=0;r--){const o=e[r],i=[];if(o.outputs.forEach(l=>{const u=t[l.id];u!=null?i.push(u):i.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const a=o.gradient(i);for(const l in o.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=o.inputs[l];if(!vt(u.shape,c.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=s(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3=20,Ef=3,rw=7;function Rte(t,e,n,s){const r=je(e),o=_te(t,e,n,r),i=e.length,a=ky(t,e,n,r,o),l=["Tensor"];return s&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function _te(t,e,n,s){const r=le(e),o=s[s.length-1],i=new Array(o).fill(0),a=e.length,l=n==="complex64"?Bf(t):t;if(a>1)for(let u=0;u<r/o;u++){const c=u*o;for(let d=0;d<o;d++)i[d]=Math.max(i[d],zf(l[c+d],0,n).length)}return i}function zf(t,e,n){let s;return Array.isArray(t)?s=`${parseFloat(t[0].toFixed(rw))} + ${parseFloat(t[1].toFixed(rw))}j`:ei(t)?s=`'${t}'`:n==="bool"?s=QL(t):s=parseFloat(t.toFixed(rw)).toString(),du(s,e)}function QL(t){return t===0?"false":"true"}function ky(t,e,n,s,r,o=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Bf(t);return[zf(m[0],0,n)]}return n==="bool"?[QL(t[0])]:[t[0].toString()]}if(l===1){if(a>g3){const g=Ef*i;let y=Array.from(t.slice(0,g)),b=Array.from(t.slice((a-Ef)*i,a*i));return n==="complex64"&&(y=Bf(y),b=Bf(b)),["["+y.map((v,x)=>zf(v,r[x],n)).join(", ")+", ..., "+b.map((v,x)=>zf(v,r[a-Ef+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?Bf(t):Array.from(t)).map((g,y)=>zf(g,r[y],n)).join(", ")+"]"]}const u=e.slice(1),c=s.slice(1),d=s[0]*i,h=[];if(a>g3){for(let m=0;m<Ef;m++){const g=m*d,y=g+d;h.push(...ky(t.slice(g,y),u,n,c,r,!1))}h.push("...");for(let m=a-Ef;m<a;m++){const g=m*d,y=g+d;h.push(...ky(t.slice(g,y),u,n,c,r,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,y=g+d;h.push(...ky(t.slice(g,y),u,n,c,r,m===a-1))}const f=l===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(o?"":p),h}function Bf(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _n{constructor(e,n,s){if(this.dtype=n,this.shape=e.slice(),this.size=le(e),s!=null){const r=s.length;T(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||fn(n,this.size),this.strides=je(e)}set(e,...n){n.length===0&&(n=[0]),T(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const r of e){if(r<0||r>=this.shape[n]){const o=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(o)}n++}let s=e[e.length-1];for(let r=0;r<e.length-1;++r)s+=this.strides[r]*e[r];return this.values[s]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let s=0;s<e.length-1;++s)n+=this.strides[s]*e[s];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(e/this.strides[s]),e-=n[s]*this.strides[s];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return No().makeTensor(this.values,this.shape,this.dtype)}}let No=null,mc=null;function Ate(t){No=t}function Dte(t){mc=t}class Et{constructor(e,n,s,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=le(e),this.strides=je(e),this.dataId=s,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return mc.buffer(this.shape,this.dtype,e)}bufferSync(){return mc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Rr(this.shape,e,this.dtype==="complex64")}arraySync(){return Rr(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=No().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(s=>Gi(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),No().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=No().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Gi(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await No().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),No().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return mc.print(this,e)}clone(){return this.throwIfDisposed(),mc.clone(this)}toString(e=!1){const n=this.dataSync();return Rte(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),mc.cast(this,e)}variable(e=!0,n,s){return this.throwIfDisposed(),No().makeVariable(this,e,n,s)}}Object.defineProperty(Et,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function de(){return FN("Tensor",()=>Et)}de();class Lp extends Et{constructor(e,n,s,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=n,this.name=s}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!vt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);No().disposeTensor(this),this.dataId=e.dataId,No().incRef(this,null)}dispose(){No().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Lp,Symbol.hasInstance,{value:t=>t instanceof Et&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var rC;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(rC||(rC={}));var oC;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(oC||(oC={}));var iC;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(iC||(iC={}));var aC;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(aC||(aC={}));var lC;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(lC||(lC={}));const Ote={float32:aC,int32:oC,bool:iC,complex64:lC};function Ws(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Ote[t][e]}function Kb(t){return Ws(t,"int32")}function ZL(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function JL(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ws(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function eP(t,e){T(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Xb(t,e){return e.some(n=>n.id===t.id)}function Hi(t){const e=[];return tP(t,e,new Set),e}function tP(t,e,n){if(t==null)return;if(t instanceof Et){e.push(t);return}if(!Fte(t))return;const s=t;for(const r in s){const o=s[r];n.has(o)||(n.add(o),tP(o,e,n))}}function Fte(t){return Array.isArray(t)||typeof t=="object"}const Lte=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:eP,getTensorsInContainer:Hi,isTensorInList:Xb,makeTypesMatch:cn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ow(t){return t.kernelName!=null}class y3{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class kd{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new y3}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,s=1){return e in this.registryFactory?(Cr(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:s},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(e);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Nte(this.backendInstance),!0}setupRegisteredKernels(){g1(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){g1(e).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof z2)&&typeof s.then=="function"){const r=++this.pendingBackendInitId,o=s.then(i=>r<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,Cr(`Initialization of backend ${e} failed`),Cr(i.stack||i.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=s,{success:!0,asyncInit:!1}}catch(s){return Cr(`Initialization of backend ${e} failed`),Cr(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n],{success:r,asyncInit:o}=this.initializeBackend(s);if(o||r)return{name:s,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const s=this.state.tensorInfo.get(n),r=s.backend,o=this.readSync(n),i=r.refCount(n);r.disposeData(n,!0),s.backend=e,e.move(n,o,s.shape,s.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let s=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}let r;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(r),()=>(r=n(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,n,s){e();try{const r=s();return n(),r}catch(r){throw n(),r}}nextTensorId(){return kd.nextTensorId++}nextVariableId(){return kd.nextVariableId++}clone(e){const n=L.runKernel(dh,{x:e}),s={x:e},r=i=>({x:()=>{const a="float32",l={x:i},u={dtype:a};return L.runKernel(Zd,l,u)}}),o=[];return this.addTapeNode(this.state.activeScope.name,s,[n],r,o,{}),n}runKernel(e,n,s){if(this.backendName==null&&this.backend,!(Fp(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,s){const r=this.backend.numDataIds();let o=0;s.forEach(l=>{o+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-n-o-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,s=[];const r=this.isTapeOn(),o=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=ow(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(ow(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=Fp(p,this.backendName);T(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const v=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,v);const x=v.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(r){const w=this.getTensorsForGradient(p,m,x);s=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:p}=e,m=g=>{r&&(s=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:d}=e,h=ow(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),r&&this.addTapeNode(u,c,n,h,s,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(e,n,s){const r=tC(e);if(r!=null){const o=r.inputsToSave||[],i=r.outputsToSave||[];let a;r.saveAllInputs?(T(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=o.map(u=>n[u]);const l=s.filter((u,c)=>i[c]);return a.concat(l)}return[]}makeTensor(e,n,s,r){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",r=r||this.backend;let o=e;s==="string"&&ei(e[0])&&(o=e.map(l=>ri(l)));const i=r.write(o,n,s),a=new Et(n,s,i,this.nextTensorId());if(this.trackTensor(a,r),s==="string"){const l=this.state.tensorInfo.get(i),u=AL(o);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,s,r){s=s||"float32";const o={dataId:e,shape:n,dtype:s};return this.makeTensorFromTensorInfo(o,r)}makeTensorFromTensorInfo(e,n){const{dataId:s,shape:r,dtype:o}=e,i=new Et(r,o,s,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,s,r){s=s||this.nextVariableId().toString(),r!=null&&r!==e.dtype&&(e=e.cast(r));const o=new Lp(e,n,s,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let s=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(s=e.size*Rp(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof Lp||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const s=e.size*Rp(e.dtype);this.state.numBytes-=s}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(r=>r.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,s,r,o,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:s,saved:o},l=tC(e);l!=null&&(r=l.gradFunc),r!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const h=s[d],f=cs(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return c}),r(u.length>1?u:u[0],o,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Hi(e),s=new Set(n.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const i=this.state.activeScope.track[o];!i.kept&&!s.has(i.id)&&i.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(o=>{!o.kept&&o.scopeId===r.id&&this.track(o)})}gradients(e,n,s,r=!1){if(T(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));T(o instanceof Et,()=>"The result y returned by f() must be a tensor.");const i=Ete(this.state.activeTape,n,o);if(!r&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[o.id]=s??Pte(o.shape),Ite(a,i,u=>this.tidy(u),Mte);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:o,grads:l}})}customGrad(e){return T(el(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{T(n.every(a=>a instanceof Et),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const r={};n.forEach((a,l)=>{r[l]=a});const o=(a,l)=>(s=e(...n,l),T(s.value instanceof Et,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),T(el(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),i=(a,l)=>{const u=s.gradFunc(a,l),c=Array.isArray(u)?u:[u];T(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),T(c.every(h=>h instanceof Et),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:o,backwardsFunc:i,inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=bs(),s=await this.backend.time(e);return s.wallMs=bs()-n,s}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new y3;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}kd.nextTensorId=0;kd.nextVariableId=0;function Pte(t){const e=V2(le(t),"float32");return L.makeTensor(e,t,"float32")}function nP(){const t=PL();if(t._tfengine==null){const e=new LL(t);t._tfengine=new kd(e)}return ote(t._tfengine.ENV),Ate(()=>t._tfengine),t._tfengine}const L=nP();function Mte(t,e){const n={a:t,b:e};return L.runKernel(qu,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zte(){return typeof navigator<"u"&&navigator!=null}let uC;function Bte(t){uC=t}function MN(t){if(uC!==void 0)return uC;if(t||zte()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function zN(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Vte=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:zN,isMobile:MN,mockIsMobile:Bte},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const js=se();js.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});js.registerFlag("IS_BROWSER",()=>zN());js.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");js.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));js.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));js.registerFlag("PROD",()=>!1);js.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>js.getBool("DEBUG"));js.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);js.registerFlag("IS_TEST",()=>!1);js.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>js.getBool("DEBUG"));js.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);js.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);js.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(t,e){let n=t;if(Gn(t))return e==="string"?[]:[t.length];if(ZL(t)){const r=t.channels||"RGBA";return[t.height,t.width*r.length]}else if(JL(t))return[t.buffer.size/(e==null?4:Rp(e))];if(!Array.isArray(t))return[];const s=[];for(;Array.isArray(n)||Gn(n)&&e!=="string";)s.push(n.length),n=n[0];return Array.isArray(t)&&se().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&sP(t,s,[]),s}function sP(t,e,n){if(n=n||[],!Array.isArray(t)&&!Gn(t)){T(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}T(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),T(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const s=e.slice(1);for(let r=0;r<t.length;++r)sP(t[r],s,n.concat(r))}function b3(t,e,n,s){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${t} tensor, but got ${e} tensor`)}}function E(t,e,n,s="numeric"){if(t instanceof de())return b3(s,t.dtype,e,n),t;let r=Gu(t);if(r!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(r=s),b3(s,r,e,n),t==null||!Gn(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const o=ci(t,r);!Gn(t)&&!Array.isArray(t)&&(t=[t]);const a=r!=="string"?bl(t,r):ui(t,[],!0);return L.makeTensor(a,o,r)}function Pp(t,e,n,s="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((o,i)=>E(o,`${e}[${i}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BN="__op";function M(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const s=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+BN;const r=(...o)=>{L.startScope(n);try{const i=s(...o);return tl(i)&&console.error("Cannot return a Promise inside of tidy."),L.endScope(i),i}catch(i){throw L.endScope(null),i}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t,e){const n=E(t,"real","complex"),s=E(e,"imag","complex");ds(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const r={real:n,imag:s};return L.runKernel(K2,r)}const qi=M({complex_:Ute});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vl(t,e,n,s){if(s==null)s=Gu(t);else if(s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(JL(t)||ZL(t)){if(s!=="float32"&&s!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return L.backend.createTensorFromGPUData(t,e||n,s)}if(!Gn(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){gr(e);const r=le(e),o=le(n);T(r===o,()=>`Based on the provided shape, [${e}], the tensor should have ${r} values but has ${o}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==le(e.slice(i)):!0;T(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Gn(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=s!=="string"?bl(t,s):ui(t,[],!0),L.makeTensor(t,e,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function io(t,e,n){const s=ci(t,n);return vl(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nu={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class zo{static join(e){return new zo(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(s=>Gn(s)?s.buffer:s),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let s=0;s<e.length;s++){const r=e[s];s!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=n+r.byteLength;this.shards.push({buffer:r,start:n,end:o}),n=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const s=this.findShardForByte(e);if(s===-1)throw new Error(`Could not find start shard for byte ${e}`);const r=n-e,o=new ArrayBuffer(r),i=new Uint8Array(o);let a=0;for(let l=s;l<this.shards.length;l++){const u=this.shards[l],d=e+a-u.start,h=a,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,d,p-d);if(i.set(m,h),a+=m.length,n<u.end)break}return o}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(r){return e<r.start?-1:e>=r.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const s=Wte(this.shards,n);return s===-1?-1:(this.previousShardIndex=s,this.previousShardIndex)}}function Wte(t,e){let n=0,s=t.length;for(;n<=s;){const r=Math.floor((s-n)/2)+n,o=e(t[r]);if(o===0)return r;o<0?s=r:n=r+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jte(){se().set("PROD",!0)}function Gte(){se().set("DEBUG",!0)}function Hte(){se().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function qte(t){se().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Kte(){L.disposeVariables()}function xo(){return L}function b1(){return L.memory()}function Xte(t){return L.profile(t)}function ee(t,e){return L.tidy(t,e)}function at(t){Hi(t).forEach(n=>n.dispose())}function Fn(t){return L.keep(t)}function Yte(t){return L.time(t)}function Qte(t){return L.setBackend(t)}function Zte(){return L.ready()}function rP(){return L.backendName}function Jte(t){L.removeBackend(t)}function ene(t){return L.findBackend(t)}function tne(t){return L.findBackendFactory(t)}function VN(t,e,n=1){return L.registerBackend(t,e,n)}function UN(){return L.backend}function nne(t,e){se().setPlatform(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nl=4;async function cC(t,e){const n=[],s=[],r=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<r.length;++i){const a=r[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((g,y)=>g+y.length,0)+nl*h.length,p=new Uint8Array(f);let m=0;for(let g=0;g<h.length;g++){const y=h[g],b=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(b,m),m+=nl,p.set(y,m),m+=y.length}d(p)});s.push(c)}else s.push(l.data());e!=null&&(u.group=e),n.push(u)}const o=await Promise.all(s);return{data:one(o),specs:n}}function oP(t,e){const n=new zo(t),s={};let r=0;for(const o of e){const i=sne(o,(a,l)=>n.slice(r+a,r+l));s[o.name]=iP(o,n.slice(r,r+i)),r+=i}return s}function sne(t,e){const n=le(t.shape);let s;if("quantization"in t){const r=t.quantization;s=Nu[r.dtype]}else if(t.dtype==="string"){let r=0;for(let o=0;o<n;o++)r+=nl+new Uint32Array(e(r,r+nl))[0];return r}else s=Nu[t.dtype];return n*s}async function rne(t,e){const n=le(t.shape);let s;if("quantization"in t){const r=t.quantization;s=Nu[r.dtype]}else if(t.dtype==="string"){let r=0;for(let o=0;o<n;o++)r+=nl+new Uint32Array(await e(r,r+nl))[0];return r}else s=Nu[t.dtype];return n*s}function iP(t,e){const n=t.name,s=t.dtype,r=t.shape,o=le(r);let i,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=Nu[l.dtype],c=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(s==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];i[d]=h*l.scale+l.min}}else if(l.dtype==="float16")i=dne()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(s==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];i[d]=Math.round(h*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);a+=o*u}else if(s==="string"){const l=le(t.shape);i=[];for(let u=0;u<l;u++){const c=new Uint32Array(e.slice(a,a+nl))[0];a+=nl;const d=new Uint8Array(e.slice(a,a+c));i.push(d),a+=c}}else{const l=Nu[s];if(s==="float32")i=new Float32Array(e);else if(s==="int32")i=new Int32Array(e);else if(s==="bool")i=new Uint8Array(e);else if(s==="complex64"){i=new Float32Array(e);const u=new Float32Array(i.length/2),c=new Float32Array(i.length/2);for(let p=0;p<u.length;p++)u[p]=i[p*2],c[p]=i[p*2+1];const d=io(u,r,"float32"),h=io(c,r,"float32"),f=qi(d,h);return d.dispose(),h.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);a+=o*l}return io(i,r,s)}async function v3(t,e,n){let s=new Uint8Array(e);for(;s.byteLength<n;){const{done:r,value:o}=await t.read();if(r&&o==null){const a=n-s.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const i=new Uint8Array(s.length+o.byteLength);i.set(s,0),i.set(new Uint8Array(o),s.length),s=i}return s.buffer}async function aP(t,e){const n={},s=t.getReader();let r=new ArrayBuffer(0);for(const o of e){const i=await rne(o,async(u,c)=>(r=await v3(s,r,c),r.slice(u,c)));r=await v3(s,r,i);const a=r.slice(0,i);r=r.slice(i);const l=iP(o,a);if(n[o.name]=l,rP()==="webgpu"){const u=UN();"uploadToGPU"in u&&le(l.shape)>=se().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function one(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(o=>{if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});const s=new Uint8Array(e);let r=0;return n.forEach(o=>{s.set(new Uint8Array(o.buffer),r),r+=o.byteLength}),s.buffer}const WN=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function x3(t){return WN?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function ine(t){if(WN)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let s=0,r=e.length;s<r;s++)n+=String.fromCharCode(e[s]);return btoa(n)}function ane(t){if(WN){const s=Buffer.from(t,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;++s)n.set([e.charCodeAt(s)],s);return n.buffer}function lP(t){return zo.join(t)}function w3(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function uP(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function cP(t,e,n){const s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(s.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");s.weightSpecs=e,s.weightData=n}return t.signature!=null&&(s.signature=t.signature),t.userDefinedMetadata!=null&&(s.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(s.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(s.initializerSignature=t.initializerSignature),s}async function jN(t,e){let n,s;return t.weightsManifest!=null&&([n,s]=await e(t.weightsManifest)),cP(t,n,s)}function _g(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:x3(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:x3(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new zo(t.weightData).byteLength}}function dC(t){const e=[];for(const n of t)e.push(...n.weights);return e}function lne(){const t=n=>{let s=n<<13,r=0;for(;!(s&8388608);)r-=8388608,s<<=1;return s&=-8388609,r+=947912704,s|r},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function une(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function cne(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function dne(){const t=lne(),e=une(),n=cne();return s=>{const r=new ArrayBuffer(4*s.length),o=new Uint32Array(r);for(let i=0;i<s.length;i++){const a=s[i],l=t[n[a>>10]+(a&1023)]+e[a>>10];o[i]=l}return new Float32Array(r)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return rn.instance==null&&(rn.instance=new rn),rn.instance}static registerSaveRouter(e){rn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){rn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return rn.getHandlers(e,"save")}static getLoadHandlers(e,n){return rn.getHandlers(e,"load",n)}static getHandlers(e,n,s){const r=[];return(n==="load"?rn.getInstance().loadRouters:rn.getInstance().saveRouters).forEach(i=>{const a=i(e,s);a!==null&&r.push(a)}),r}}const hne=t=>rn.registerSaveRouter(t),fne=t=>rn.registerLoadRouter(t),dP=t=>rn.getSaveHandlers(t),pne=(t,e)=>rn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hC="tensorflowjs",fC=1,Zl="models_store",Fa="model_info_store";function hP(){if(!se().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function pC(t){const e=t.result;e.createObjectStore(Zl,{keyPath:"modelPath"}),e.createObjectStore(Fa,{keyPath:"modelPath"})}class Tu{constructor(e){if(this.indexedDB=hP(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((s,r)=>{const o=this.indexedDB.open(hC,fC);o.onupgradeneeded=()=>pC(o),o.onsuccess=()=>{const i=o.result;if(n==null){const a=i.transaction(Zl,"readonly"),u=a.objectStore(Zl).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=c=>(i.close(),r(u.error)),a.oncomplete=()=>i.close()}else{n.weightData=zo.join(n.weightData);const a=_g(n),l=i.transaction(Fa,"readwrite");let u=l.objectStore(Fa),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return r(h)}let d;c.onsuccess=()=>{d=i.transaction(Zl,"readwrite");const h=d.objectStore(Zl);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return r(p)}f.onsuccess=()=>s({modelArtifactsInfo:a}),f.onerror=p=>{u=l.objectStore(Fa);const m=u.delete(this.modelPath);m.onsuccess=()=>(i.close(),r(f.error)),m.onerror=g=>(i.close(),r(f.error))}},c.onerror=h=>(i.close(),r(c.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},o.onerror=i=>r(o.error)})}}Tu.URL_SCHEME="indexeddb://";const fP=t=>se().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Tu.URL_SCHEME)?mne(t.slice(Tu.URL_SCHEME.length)):null;rn.registerSaveRouter(fP);rn.registerLoadRouter(fP);function mne(t){return new Tu(t)}function gne(t){return t.startsWith(Tu.URL_SCHEME)?t.slice(Tu.URL_SCHEME.length):t}class yne{constructor(){this.indexedDB=hP()}async listModels(){return new Promise((e,n)=>{const s=this.indexedDB.open(hC,fC);s.onupgradeneeded=()=>pC(s),s.onsuccess=()=>{const r=s.result,o=r.transaction(Fa,"readonly"),a=o.objectStore(Fa).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(r.close(),n(a.error)),o.oncomplete=()=>r.close()},s.onerror=r=>n(s.error)})}async removeModel(e){return e=gne(e),new Promise((n,s)=>{const r=this.indexedDB.open(hC,fC);r.onupgradeneeded=()=>pC(r),r.onsuccess=()=>{const o=r.result,i=o.transaction(Fa,"readwrite"),a=i.objectStore(Fa),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return o.close(),s(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{u=o.transaction(Zl,"readwrite");const f=u.objectStore(Zl).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=p=>s(l.error)};c.onsuccess=d,c.onerror=h=>(d(),o.close(),s(l.error))}},l.onerror=c=>(o.close(),s(l.error)),i.oncomplete=()=>{u==null?o.close():u.oncomplete=()=>o.close()}},r.onerror=o=>s(r.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oi="/",gc="tensorflowjs_models",pP="info",bne="model_topology",vne="weight_specs",xne="weight_data",wne="model_metadata";function mP(t){return{info:[gc,t,pP].join(Oi),topology:[gc,t,bne].join(Oi),weightSpecs:[gc,t,vne].join(Oi),weightData:[gc,t,xne].join(Oi),modelMetadata:[gc,t,wne].join(Oi)}}function gP(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Sne(t){const e=t.split(Oi);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Oi)}function Cne(t){return t.startsWith($u.URL_SCHEME)?t.slice($u.URL_SCHEME.length):t}class $u{constructor(e){if(!se().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=mP(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),r=_g(e),o=zo.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,ine(o));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:r}}catch{throw gP(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(r==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const a=JSON.parse(o);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=ane(i),n}}$u.URL_SCHEME="localstorage://";const yP=t=>se().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith($u.URL_SCHEME)?kne(t.slice($u.URL_SCHEME.length)):null;rn.registerSaveRouter(yP);rn.registerLoadRouter(yP);function kne(t){return new $u(t)}class Nne{constructor(){T(se().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),T(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=gc+Oi,s=Oi+pP;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(n)&&o.endsWith(s)){const i=Sne(o);e[i]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){e=Cne(e);const n=mP(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const s=JSON.parse(this.LS.getItem(n.info));return gP(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vc="://";class Ts{constructor(){this.managers={}}static getInstance(){return Ts.instance==null&&(Ts.instance=new Ts),Ts.instance}static registerManager(e,n){T(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Vc)&&(e=e.slice(0,e.indexOf(Vc))),T(e.length>0,()=>"scheme must not be an empty string.");const s=Ts.getInstance();T(s.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),s.managers[e]=n}static getManager(e){const n=Ts.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ts.getInstance().managers)}}function Ny(t){if(t.indexOf(Vc)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ts.getSchemes().join(",")}`);return{scheme:t.split(Vc)[0],path:t.split(Vc)[1]}}async function bP(t,e,n=!1){T(t!==e,()=>`Old path and new path are the same: '${t}'`);const s=rn.getLoadHandlers(t);T(s.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),T(s.length<2,()=>`Copying failed because more than one (${s.length}) load handlers for source URL ${t}.`);const r=s[0],o=rn.getSaveHandlers(e);T(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),T(o.length<2,()=>`Copying failed because more than one (${s.length}) save handlers for destination URL ${e}.`);const i=o[0],a=Ny(t).scheme,l=Ny(t).path,u=a===Ny(t).scheme,c=await r.load();n&&u&&await Ts.getManager(a).removeModel(l);const d=await i.save(c);return n&&!u&&await Ts.getManager(a).removeModel(l),d.modelArtifactsInfo}async function Tne(){const t=Ts.getSchemes(),e={};for(const n of t){const s=await Ts.getManager(n).listModels();for(const r in s){const o=n+Vc+r;e[o]=s[r]}}return e}async function $ne(t){const e=Ny(t);return Ts.getManager(e.scheme).removeModel(e.path)}async function Ene(t,e){return bP(t,e,!1)}async function Ine(t,e){return bP(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rne{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!se().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",s=>{if(s.source===window&&s.data.name===this.messageName){s.stopPropagation();const r=this.functionRefs[s.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return VL(e)}}if(se().get("IS_BROWSER")){se().setPlatform("browser",new Rne);try{Ts.registerManager($u.URL_SCHEME,new Nne)}catch{}try{Ts.registerManager(Tu.URL_SCHEME,new yne)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ne={importFetch:()=>require("node-fetch")};let iw;class Ane{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return se().global.fetch!=null?se().global.fetch(e,n):(iw==null&&(iw=_ne.importFetch()),iw(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}se().get("IS_NODE")&&!se().get("IS_BROWSER")&&se().setPlatform("node",new Ane);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(t,e="float32",n){return e=e||"float32",gr(t),new _n(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(t,e){const n=E(t,"x","cast");if(!_L(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},r={dtype:e};return L.runKernel(Zd,s,r)}const Ce=M({cast_:Dne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function One(t){const n={x:E(t,"x","clone","string_or_numeric")};return L.runKernel(dh,n)}const oi=M({clone_:One});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GN(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */nP();const Fne={buffer:lt,cast:Ce,clone:oi,print:GN};Dte(Fne);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lne(t,e){let n=E(t,"a","add"),s=E(e,"b","add");[n,s]=cn(n,s);const r={a:n,b:s};return L.runKernel(qu,r)}const pe=M({add_:Lne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pne(t,e){let n=E(t,"a","floorDiv"),s=E(e,"b","floorDiv");[n,s]=cn(n,s);const r={a:n,b:s};return L.runKernel(uh,r)}const Yb=M({floorDiv_:Pne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mne(t,e){let n=E(t,"a","div"),s=E(e,"b","div");if([n,s]=cn(n,s),n.dtype==="int32"&&s.dtype==="int32")return Yb(n,s);const r={a:n,b:s},o={};return L.runKernel(sh,r,o)}const Ue=M({div_:Mne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zne(t,e){let n=E(t,"a","mul"),s=E(e,"b","mul");[n,s]=cn(n,s);const r={a:n,b:s};return L.runKernel(xh,r)}const V=M({mul_:zne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bne(t){const e=E(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return L.runKernel(Lm,n)}else{const n={x:e};return L.runKernel($m,n)}}const In=M({abs_:Bne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vne(t){const n={x:E(t,"x","acos")};return L.runKernel(Gd,n)}const HN=M({acos_:Vne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Une(t){const n={x:E(t,"x","acosh")};return L.runKernel(Hd,n)}const qN=M({acosh_:Une});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wne(t){T(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),T(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((r,o)=>E(r,`tensors${o}`,"addN")),n=e[0];e.forEach(r=>{if(r.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(r=>{if(!vt(r.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const s=e;return L.runKernel(Em,s)}const vP=M({addN_:Wne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jne(t,e=null,n=!1){const r={x:E(t,"x","all","bool")},o={axis:e,keepDims:n};return L.runKernel(U2,r,o)}const Qb=M({all_:jne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gne(t,e=null,n=!1){const r={x:E(t,"x","any","bool")},o={axis:e,keepDims:n};return L.runKernel(W2,r,o)}const Mp=M({any_:Gne});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hne(t,e=0){const s={x:E(t,"x","argMax")},r={axis:e};return L.runKernel(Im,s,r)}const Eu=M({argMax_:Hne});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qne(t,e=0){const s={x:E(t,"x","argMin")},r={axis:e};return L.runKernel(Rm,s,r)}const KN=M({argMin_:qne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kne(t){const n={x:E(t,"x","asin")};return L.runKernel(qd,n)}const XN=M({asin_:Kne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xne(t){const n={x:E(t,"x","asinh")};return L.runKernel(Kd,n)}const YN=M({asinh_:Xne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yne(t){const n={x:E(t,"x","atan")};return L.runKernel(Xd,n)}const QN=M({atan_:Yne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(t,e){let n=E(t,"a","atan2"),s=E(e,"b","atan2");[n,s]=cn(n,s);const r={a:n,b:s};return L.runKernel(Qd,r)}const ZN=M({atan2_:Qne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zne(t){const n={x:E(t,"x","atanh")};return L.runKernel(Yd,n)}const JN=M({atanh_:Zne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ag(t,e,n,s,r="NHWC",o){const i=t[3],a=[...e,i],l=sa(r);return Qn(t,a,n,o,s,null,null,l)}function co(t,e,n,s,r,o,i="channelsLast"){const[a,l]=zp(e);let u;if(i==="channelsLast")u=[a,l,t[3],t[3]];else if(i==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Qn(t,u,n,s,r,o,!1,i)}function na(t,e,n,s,r,o,i="NDHWC"){const[a,l,u]=mC(e);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,l,u,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return xl(t,c,n,s,r,!1,d,o)}function Qn(t,e,n,s,r,o,i=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=t;else if(a==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,f,,p]=e,[m,g]=zp(n),[y,b]=zp(s),v=Uc(h,y),x=Uc(f,b),{padInfo:w,outHeight:S,outWidth:k}=tse(r,u,c,m,g,v,x,o,a),N=i?p*d:p;let $;return a==="channelsFirst"?$=[l,N,S,k]:a==="channelsLast"&&($=[l,S,k,N]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:S,outWidth:k,outChannels:N,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:f,effectiveFilterHeight:v,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:b,inShape:t,outShape:$,filterShape:e}}function xl(t,e,n,s,r,o=!1,i="channelsLast",a){let[l,u,c,d,h]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d,h]=t;else if(i==="channelsFirst")[l,h,u,c,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[f,p,m,,g]=e,[y,b,v]=mC(n),[x,w,S]=mC(s),k=Uc(f,x),N=Uc(p,w),$=Uc(m,S),{padInfo:I,outDepth:A,outHeight:O,outWidth:P}=nse(r,u,c,d,y,b,v,k,N,$,a),F=o?g*h:g;let G;return i==="channelsFirst"?G=[l,F,A,O,P]:i==="channelsLast"&&(G=[l,A,O,P,F]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:h,outDepth:A,outHeight:O,outWidth:P,outChannels:F,padInfo:I,strideDepth:y,strideHeight:b,strideWidth:v,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:N,effectiveFilterWidth:$,dilationDepth:x,dilationHeight:w,dilationWidth:S,inShape:t,outShape:G,filterShape:e}}function Jne(t,e,n,s,r){s==null&&(s=eT(t,e,n));const o=t[0],i=t[1],a=Bp((o-e+2*s)/n+1,r),l=Bp((i-e+2*s)/n+1,r);return[a,l]}function ese(t,e,n,s,r,o){r==null&&(r=eT(t,e[0],s[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*r>=e[a]&&(i[a]=Bp((t[a]-e[a]+2*r)/s[a]+1,o));return i}function eT(t,e,n,s=1){const r=Uc(e,s);return Math.floor((t[0]*(n-1)-n+r)/2)}function zp(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function mC(t){return typeof t=="number"?[t,t,t]:t}function Uc(t,e){return e<=1?t:t+(t-1)*(e-1)}function tse(t,e,n,s,r,o,i,a,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=Jne([e,n],o,s,t,a);c=f[0],d=f[1]}else if(t==="same"){c=Math.ceil(e/s),d=Math.ceil(n/r);const h=Math.max(0,(c-1)*s+o-e),f=Math.max(0,(d-1)*r+i-n),p=Math.floor(h/2),m=h-p,g=Math.floor(f/2),y=f-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-o+1)/s),d=Math.ceil((n-i+1)/r);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=Bp((e-o+h+f)/s+1,a),d=Bp((n-i+p+m)/r+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function nse(t,e,n,s,r,o,i,a,l,u,c){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=ese([e,n,s,1],[a,l,u],1,[r,o,i],t,c);h=g[0],f=g[1],p=g[2]}else if(t==="same"){h=Math.ceil(e/r),f=Math.ceil(n/o),p=Math.ceil(s/i);const m=(h-1)*r+a-e,g=(f-1)*o+l-n,y=(p-1)*i+u-s,b=Math.floor(m/2),v=m-b,x=Math.floor(g/2),w=g-x,S=Math.floor(y/2),k=y-S;d={top:x,bottom:w,left:S,right:k,front:b,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function Bp(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function sl(t){const[e,n,s]=zp(t);return e===1&&n===1&&s===1}function hs(t,e){return sl(t)||sl(e)}function Iu(t){return zp(t).every(e=>e>0)}function sa(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ds(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")T(ku(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(s=>{s.forEach(r=>{T(ku(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sse(t,e){const s={x:E(t,"x","reshape","string_or_numeric")},r={shape:e};return L.runKernel(gg,s,r)}const W=M({reshape_:sse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rse(t,e,n,s,r){const o=E(t,"x","avgPool","float32"),i=1;T(hs(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=o,l=!1;o.rank===3&&(l=!0,a=W(o,[1,o.shape[0],o.shape[1],o.shape[2]])),T(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ds("avgPool",s,r);const u={x:a},c={filterSize:e,strides:n,pad:s,dimRoundingMode:r};let d=L.runKernel(_m,u,c);return d=Ce(d,o.dtype),l?W(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Dg=M({avgPool_:rse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ose(t,e,n,s,r,o="NDHWC"){const i=E(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=W(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),T(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),T(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),T(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ds("avgPool3d",s,r);const u={x:a},c={filterSize:e,strides:n,pad:s,dimRoundingMode:r,dataFormat:o};let d=L.runKernel(Am,u,c);return d=Ce(d,a.dtype),l?W(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const tT=M({avgPool3d_:ose});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ise(t,e=0){T(t.length>=1,()=>"Pass at least one tensor to concat");const n=Pp(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),n.length===1)return oi(n[0]);const s=n,r={axis:e};return L.runKernel(Pm,s,r)}const wn=M({concat_:ise});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ase(t,e,n=!1,s=!1){let r=E(t,"a","matMul"),o=E(e,"b","matMul");[r,o]=cn(r,o);const i={a:r,b:o},a={transposeA:n,transposeB:s};return L.runKernel(Dm,i,a)}const ft=M({matMul_:ase});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lse(t){const n={x:E(t,"x","sigmoid","float32")};return L.runKernel(_h,n)}const _o=M({sigmoid_:lse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function use(t,e,n){const s=E(t,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const r={x:s},o={begin:e,size:n};return L.runKernel(wg,r,o)}const xt=M({slice_:use});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cse(t){const n={x:E(t,"x","tanh","float32")};return L.runKernel(Ph,n)}const rl=M({tanh_:cse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(t,e,n,s,r,o){const i=E(t,"forgetBias","basicLSTMCell"),a=E(e,"lstmKernel","basicLSTMCell"),l=E(n,"lstmBias","basicLSTMCell"),u=E(s,"data","basicLSTMCell"),c=E(r,"c","basicLSTMCell"),d=E(o,"h","basicLSTMCell"),h=wn([u,d],1),f=ft(h,a),p=pe(f,l),m=p.shape[0],g=p.shape[1]/4,y=[m,g],b=xt(p,[0,0],y),v=xt(p,[0,g],y),x=xt(p,[0,g*2],y),w=xt(p,[0,g*3],y),S=pe(V(_o(b),rl(v)),V(c,_o(pe(i,x)))),k=V(rl(S),_o(w));return[S,k]}const xP=M({basicLSTMCell_:dse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hse(t,e,n){const s=E(t,"x","batchToSpaceND"),r=e.reduce((a,l)=>a*l);T(s.rank>=1+e.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${e.length}`),T(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),T(s.shape[0]%r===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${r}`);const o={x:s},i={blockShape:e,crops:n};return L.runKernel(Om,o,i)}const Og=M({batchToSpaceND_:hse});function fse(t){let e;return t.rank===0||t.rank===1?e=W(t,[1,1,1,t.size]):t.rank===2?e=W(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=W(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pse(t,e,n,s,r,o){o==null&&(o=.001);const i=E(t,"x","batchNorm"),a=E(e,"mean","batchNorm"),l=E(n,"variance","batchNorm");let u;r!=null&&(u=E(r,"scale","batchNorm"));let c;s!=null&&(c=E(s,"offset","batchNorm")),T(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),T(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),T(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:fse(i),scale:u,offset:c,mean:a,variance:l},f={varianceEpsilon:o},p=L.runKernel(Hm,h,f);return W(p,i.shape)}const Bh=M({batchNorm_:pse});function mse(t,e,n,s,r,o){const i=E(t,"x","batchNorm"),a=E(e,"mean","batchNorm"),l=E(n,"variance","batchNorm");let u;r!=null&&(u=E(r,"scale","batchNorm"));let c;return s!=null&&(c=E(s,"offset","batchNorm")),T(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),T(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),T(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&T(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&T(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Bh(i,a,l,c,u,o)}const nT=M({batchNorm2d_:mse});function gse(t,e,n,s,r,o){const i=E(t,"x","batchNorm"),a=E(e,"mean","batchNorm"),l=E(n,"variance","batchNorm");let u;r!=null&&(u=E(r,"scale","batchNorm"));let c;return s!=null&&(c=E(s,"offset","batchNorm")),T(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),T(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),T(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&T(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&T(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Bh(i,a,l,c,u,o)}const sT=M({batchNorm3d_:gse});function yse(t,e,n,s,r,o){const i=E(t,"x","batchNorm"),a=E(e,"mean","batchNorm"),l=E(n,"variance","batchNorm");let u;r!=null&&(u=E(r,"scale","batchNorm"));let c;return s!=null&&(c=E(s,"offset","batchNorm")),T(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),T(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),T(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&T(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&T(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Bh(i,a,l,c,u,o)}const rT=M({batchNorm4d_:yse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bse(t,e,n){const s=E(t,"x","bincount"),r=E(e,"weights","bincount");T(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),T(n>=0,()=>`size must be non-negative, but got ${n}.`),T(r.size===s.size||r.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${r.shape}.`);const o={x:s,weights:r},i={size:n};return L.runKernel(H2,o,i)}const oT=M({bincount_:bse});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vse(t,e){const n=E(t,"x","bitwiseAnd"),s=E(e,"y","bitwiseAnd");if(!vt(n.shape,s.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${s.shape}`);if(n.dtype!=="int32"||s.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${s.dtype}`);const r={a:n,b:s};return L.runKernel(Fm,r)}const wP=M({bitwiseAnd_:vse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(t,e){const n=E(t,"s0","broadcastArgs","int32"),s=E(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(s.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${s.rank}`);const r={s0:n,s1:s};return L.runKernel(q2,r)}const SP=M({broadcastArgs_:xse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wse(t,e){let n=E(t,"broadcastTo","x");const s=n.shape;if(gr(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=W(n,u)}const r=n.shape,o=Array.from(e);for(let u=e.length-1;u>=0;u--)if(r[u]===e[u])o[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${e}].`);if(o.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return oi(n);const a={x:n},l={reps:o};return L.runKernel(Mh,a,l)}const fu=M({broadcastTo_:wse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sse(t){const n={x:E(t,"x","ceil","float32")};return L.runKernel(Jd,n)}const iT=M({ceil_:Sse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xu(t,e,n){gr(t),n=n||Gu(e);const s={shape:t,value:e,dtype:n};return L.runKernel(ub,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(t,e,n){const s=E(t,"x","clipByValue");if(T(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Xu(s.shape,e,s.dtype);const r={x:s},o={clipValueMin:e,clipValueMax:n};return L.runKernel(eh,r,o)}const Gs=M({clipByValue_:Cse});function kse(t){return wn(t,0)}const aT=M({concat1d_:kse});function Nse(t,e){return wn(t,e)}const lT=M({concat2d_:Nse});function Tse(t,e){return wn(t,e)}const uT=M({concat3d_:Tse});function $se(t,e){return wn(t,e)}const cT=M({concat4d_:$se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t,e,n,s,r="NHWC",o=[1,1],i){const a=E(t,"x","conv2d","float32"),l=E(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=W(a,[1,a.shape[0],a.shape[1],a.shape[2]])),T(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),T(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ds("conv2d",s,i);const d=r==="NHWC"?u.shape[3]:u.shape[1];T(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),T(hs(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),T(Iu(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),T(Iu(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:u,filter:l},f={strides:n,pad:s,dataFormat:r,dilations:o,dimRoundingMode:i},p=L.runKernel(Mm,h,f);return c?W(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ki=M({conv2d_:Ese});function Ise(t,e,n,s,r="NWC",o=1,i){const a=E(t,"x","conv1d"),l=E(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=W(a,[1,a.shape[0],a.shape[1]])),T(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),T(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ds("conv1d",s,i),T(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),T(hs(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),T(Iu(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),T(Iu(n),()=>"Error in conv1D: Stride should be larger than 0."),T(r==="NWC",()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`);const d=W(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=W(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=Ki(h,d,[1,n],s,"NHWC",[1,o],i);return c?W(g,[g.shape[2],g.shape[3]]):W(g,[g.shape[0],g.shape[2],g.shape[3]])}const Zb=M({conv1d_:Ise});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rse(t,e,n,s,r,o="NHWC",i){T(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=W(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),T(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),T(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),T(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=o==="NHWC"?a[3]:a[1],d=o==="NHWC"?l.shape[3]:l.shape[1];T(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),T(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Ds("conv2dDerInput",r,i);const h={dy:l,filter:n},f={strides:s,pad:r,dataFormat:o,dimRoundingMode:i,inputShape:a},p=L.runKernel(zm,h,f);return u?W(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const dT=M({conv2DBackpropInput_:Rse});function _se(t,e,n,s,r,o){const i=E(t,"x","conv2dTranspose"),a=E(e,"filter","conv2dTranspose");return dT(n,i,a,s,r,"NHWC",o)}const Jb=M({conv2dTranspose_:_se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ase(t,e,n,s,r="NDHWC",o=[1,1,1]){const i=E(t,"x","conv3d"),a=E(e,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=W(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),T(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),T(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),T(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),T(hs(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),T(r==="NDHWC",()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`),T(Iu(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),T(Iu(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},d={strides:n,pad:s,dataFormat:r,dilations:o},h=L.runKernel(Bm,c,d);return u?W(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const hT=M({conv3d_:Ase});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dse(t,e,n,s,r){T(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,i=e,a=!1;e.rank===4&&(a=!0,i=W(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);const l=o[4],u=i.shape[4];T(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),T(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),T(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),T(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),T(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:r,strides:s,inputShape:o},h=L.runKernel(Q2,c,d);return a?W(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const CP=M({conv3DBackpropInput_:Dse});function Ose(t,e,n,s,r){const o=E(t,"x","conv3dTranspose"),i=E(e,"filter","conv3dTranspose");return CP(n,o,i,s,r)}const fT=M({conv3dTranspose_:Ose});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fse(t){const n={x:E(t,"x","cos","float32")};return L.runKernel(th,n)}const Fg=M({cos_:Fse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lse(t){const n={x:E(t,"x","cosh","float32")};return L.runKernel(nh,n)}const ev=M({cosh_:Lse});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pse(t,e=0,n=!1,s=!1){const o={x:E(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:s};return L.runKernel(Z2,o,i)}const Vp=M({cumprod_:Pse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mse(t,e=0,n=!1,s=!1){const o={x:E(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:s};return L.runKernel(Vm,o,i)}const tv=M({cumsum_:Mse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(t,e,n,s=!1){const r=E(t,"x","denseBincount"),o=E(e,"weights","denseBincount");T(r.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${r.dtype}`),T(r.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${r.rank}.`),T(n>=0,()=>`size must be non-negative, but got ${n}.`),T(o.size===r.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${r.shape}, weights shape: ${o.shape}.`);const i={x:r,weights:o},a={size:n,binaryOutput:s};return L.runKernel(eb,i,a)}const v1=M({denseBincount_:zse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bse(t,e,n="NHWC"){const s=E(t,"x","depthToSpace","float32"),r=n==="NHWC"?s.shape[1]:s.shape[2],o=n==="NHWC"?s.shape[2]:s.shape[3],i=n==="NHWC"?s.shape[3]:s.shape[1];T(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),T(r*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${e}  for depthToSpace with input shape
    ${s.shape}`),T(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e} for depthToSpace with input shape
        ${s.shape}`),T(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${s.shape}`);const a={x:s},l={blockSize:e,dataFormat:n};return L.runKernel(tb,a,l)}const pT=M({depthToSpace_:Bse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vse(t,e,n,s,r="NHWC",o=[1,1],i){const a=E(t,"x","depthwiseConv2d","float32"),l=E(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=W(a,[1,a.shape[0],a.shape[1],a.shape[2]])),T(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),T(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=r==="NHWC"?u.shape[3]:u.shape[1];T(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ds("depthwiseConv2d",s,i);const h={x:u,filter:l},f={strides:n,pad:s,dataFormat:r,dilations:o,dimRoundingMode:i},p=L.runKernel(Um,h,f);return c?W(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Vh=M({depthwiseConv2d_:Vse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Use(t){const n={x:E(t,"x","diag")};return L.runKernel(rb,n)}const kP=M({diag_:Use});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wse(t,e,n,s,r=[1,1],o="NHWC"){const i=E(t,"x","dilation2d"),a=E(e,"filter","dilation2d");T(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),T(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),T(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=i,u=!1;i.rank===3&&(l=W(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),T(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},d={strides:n,pad:s,dilations:r},h=L.runKernel(Wm,c,d);return u?W(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const mT=M({dilation2d_:Wse});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(t,e){const n=t.length,s=[];for(let r=0;r<n;r++){const o=n-1-r,i=t[o]||1;(e[e.length-1-r]||1)>1&&i===1&&s.unshift(o)}return s}function An(t,e){const n=[];for(let s=0;s<e.length;s++){const r=t[t.length-s-1],o=e.length-s-1,i=e[o];(r==null||r===1&&i>1)&&n.unshift(o)}return n}function st(t,e){const n=Math.max(t.length,e.length),s=new Array(n);for(let r=0;r<n;r++){let o=t[t.length-r-1];o==null&&(o=1);let i=e[e.length-r-1];if(i==null&&(i=1),o===1)s[n-r-1]=i;else if(i===1)s[n-r-1]=o;else if(o!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else s[n-r-1]=o}return s}const jse=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:st,getBroadcastDims:Ru,getReductionAxes:An},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gse(t,e){let n=E(t,"a","equal","string_or_numeric"),s=E(e,"b","equal","string_or_numeric");[n,s]=cn(n,s),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(jm,r)}const uo=M({equal_:Gse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hse(t,e,n){const s=E(e,"a","where"),r=E(n,"b","where"),o=E(t,"condition","where","bool"),i=st(st(o.shape,s.shape),r.shape),a=fu(o,i),l=fu(s,i),u=fu(r,i),c={condition:a,t:l,e:u};return L.runKernel(xg,c)}const ls=M({where_:Hse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qse(t){const n={x:E(t,"x","zerosLike")};return L.runKernel(Ig,n)}const St=M({zerosLike_:qse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kse(t,e){let n=E(t,"a","div"),s=E(e,"b","div");[n,s]=cn(n,s);const r=Ue(n,s),o=St(r),i=uo(s,o);return ls(i,o,r)}const gT=M({divNoNan_:Kse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xse(t,e){const n=E(t,"t1","dot"),s=E(e,"t2","dot");T((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const r=n.rank===1?n.size:n.shape[1],o=s.rank===1?s.size:s.shape[0];if(T(r===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${o}.`),n.rank===1&&s.rank===1){const i=W(n,[1,-1]),a=W(s,[-1,1]),l=ft(i,a);return W(l,[])}else if(n.rank===1&&s.rank===2){const i=W(n,[1,-1]),a=W(s,[s.shape[0],s.shape[1]]),l=ft(i,a);return W(l,[l.size])}else if(n.rank===2&&s.rank===1){const i=W(s,[-1,1]),a=ft(n,i);return W(a,[a.size])}else{const i=W(s,[s.shape[0],s.shape[1]]);return ft(n,i)}}const yT=M({dot_:Xse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yse(t,...e){const n=e.map((r,o)=>E(r,`tensors${o}`,"einsum")),s={equation:t};return L.runKernel(ib,n,s)}const Bl=M({einsum_:Yse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(t){const n={x:E(t,"x","elu","float32")};return L.runKernel(rh,n)}const Uh=M({elu_:Qse});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zse(t,e){const n=E(t,"x","ensureShape","string_or_numeric");if(!IL(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const NP=M({ensureShape_:Zse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jse(t){let e=E(t,"x","erf");T(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ce(e,"float32"));const n={x:e};return L.runKernel(oh,n)}const nv=M({erf_:Jse});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bT(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function TP(t,e,n){const s=t.length+e.length,r=[];let o=0,i=0;for(let a=0;a<s;a++)n.indexOf(a)===-1?r.push(t[o++]):r.push(e[i++]);return r}function Zn(t,e){const n=[],s=t.length;for(let o=0;o<s;o++)e.indexOf(o)===-1&&n.push(t[o]);const r=e.map(o=>t[o]);return[n,r]}function Cn(t,e){const n=e.map(s=>1);return TP(t,n,e)}function fs(t,e,n){T(bT(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function dn(t,e){if(bT(t,e))return null;const n=[];for(let s=0;s<e;++s)t.indexOf(s)===-1&&n.push(s);return t.forEach(s=>n.push(s)),n}function wl(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function kn(t,e){const n=[];for(let s=e-t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ere(t,e=null,n=!1){const r={x:E(t,"x","max")},o={reductionIndices:e,keepDims:n};return L.runKernel(ng,r,o)}const _r=M({max_:ere});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tre(t,e=null,n=!1){const r={x:E(t,"x","min")},o={axis:e,keepDims:n};return L.runKernel(ig,r,o)}const Nd=M({min_:tre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nre(t,e){let n=E(t,"base","pow"),s=E(e,"exp","pow");[n,s]=cn(n,s);const r={a:n,b:s};return L.runKernel(wh,r)}const di=M({pow_:nre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(t,e){if((Gn(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Gn(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return vl(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sre(t){const n={x:E(t,"x","sqrt","float32")};return L.runKernel(Dh,n)}const Yn=M({sqrt_:sre});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rre(t){const e=E(t,"x","square"),n={};return L.runKernel("Square",{x:e},n)}const Lt=M({square_:rre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ore(t,e=null,n=!1){let s=E(t,"x","sum");s.dtype==="bool"&&(s=Ce(s,"int32"));const r={x:s},o={axis:e,keepDims:n};return L.runKernel(Sg,r,o)}const ze=M({sum_:ore});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ire(t,e="euclidean",n=null,s=!1){t=E(t,"x","norm");const r=$P(t,e,n);let o=r.shape;if(s){const i=pt(n,t.shape);o=Cn(r.shape,i)}return W(r,o)}function $P(t,e,n=null){if(t.rank===0)return In(t);if(t.rank!==1&&n===null)return $P(W(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return ze(In(t),n);if(e===1/0)return _r(In(t),n);if(e===-1/0)return Nd(In(t),n);if(e==="euclidean"||e===2)return Yn(ze(di(In(t),qe(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return _r(ze(In(t),n[0]),n[1]-1);if(e===1/0)return _r(ze(In(t),n[1]),n[0]);if(e===-1/0)return Nd(ze(In(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Yn(ze(Lt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Wh=M({norm_:ire});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function are(t,e=null,n=!1){return Wh(t,"euclidean",e,n)}const vT=M({euclideanNorm_:are});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lre(t){const n={x:E(t,"x","exp")};return L.runKernel(ih,n)}const Hs=M({exp_:lre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ure(t,e=0){const n=E(t,"x","expandDims","string_or_numeric");T(e<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},r={dim:e};return L.runKernel(Gm,s,r)}const ss=M({expandDims_:ure});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cre(t){const n={x:E(t,"x","expm1")};return L.runKernel(ah,n)}const xT=M({expm1_:cre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dre(t,e){const n=E(t,"x","tile","string_or_numeric");T(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const s={x:n},r={reps:e};return L.runKernel(Mh,s,r)}const Tr=M({tile_:dre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hre(t,e,n,s="float32"){e==null&&(e=t);const r=lt([t,e],s),o=t<=e?t:e;for(let a=0;a<o;++a)r.set(1,a,a);const i=W(r.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Tr(ss(i,0),[n[0],1,1]);if(n.length===2)return Tr(ss(ss(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Tr(ss(ss(ss(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const sv=M({eye_:hre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fre(t){const n={x:E(t,"x","floor","float32")};return L.runKernel(lh,n)}const jh=M({floor_:fre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pre(t,e,n=0,s=0){const r=E(t,"x","gather"),o=E(e,"indices","gather","int32"),i={x:r,indices:o},a={axis:n,batchDims:s};return L.runKernel(qm,i,a)}const Gh=M({gather_:pre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mre(t,e){let n=E(t,"a","greater","string_or_numeric"),s=E(e,"b","greater","string_or_numeric");[n,s]=cn(n,s),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(Km,r)}const Qs=M({greater_:mre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gre(t,e){let n=E(t,"a","greaterEqual","string_or_numeric"),s=E(e,"b","greaterEqual","string_or_numeric");[n,s]=cn(n,s),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(ch,r)}const ra=M({greaterEqual_:gre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yre(t){const n={input:E(t,"input","imag")};return L.runKernel(fb,n)}const Lg=M({imag_:yre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(t){const n={x:E(t,"x","isFinite")};return L.runKernel(hh,n)}const wT=M({isFinite_:bre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vre(t){const n={x:E(t,"x","isInf")};return L.runKernel(fh,n)}const ST=M({isInf_:vre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(t){const n={x:E(t,"x","isNaN")};return L.runKernel(ph,n)}const CT=M({isNaN_:xre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wre(t,e=.2){const s={x:E(t,"x","leakyRelu")},r={alpha:e};return L.runKernel(Xm,s,r)}const Pg=M({leakyRelu_:wre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sre(t,e){let n=E(t,"a","less","string_or_numeric"),s=E(e,"b","less","string_or_numeric");[n,s]=cn(n,s),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(Ym,r)}const Td=M({less_:Sre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cre(t,e){let n=E(t,"a","lessEqual","string_or_numeric"),s=E(e,"b","lessEqual","string_or_numeric");[n,s]=cn(n,s),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(Qm,r)}const Sl=M({lessEqual_:Cre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EP(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const s={start:t,stop:e,num:n};return L.runKernel(pb,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kre(t,e=5,n=1,s=1,r=.5){const o=E(t,"x","localResponseNormalization");T(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),T(ku(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=o,a=!1;o.rank===3&&(a=!0,i=W(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:i},u={depthRadius:e,bias:n,alpha:s,beta:r},c=L.runKernel(tg,l,u);return a?W(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const kT=M({localResponseNormalization_:kre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nre(t){const n={x:E(t,"x","log","float32")};return L.runKernel(mh,n)}const dr=M({log_:Nre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tre(t){const n={x:E(t,"x","log1p")};return L.runKernel(gh,n)}const Mg=M({log1p_:Tre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $re(t){return T(el(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const s=E(e,"x","tf.grad","string_or_numeric"),r=n!=null?E(n,"dy","tf.grad"):null;return L.tidy(()=>{const{value:o,grads:i}=L.gradients(()=>t(s),[s],r);return r!=null&&ds(o.shape,r.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),rv(i),i[0]})}}function Ere(t){return T(el(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{T(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const s=Pp(e,"args","tf.grads","string_or_numeric"),r=n!=null?E(n,"dy","tf.grads"):null;return L.tidy(()=>{const{value:o,grads:i}=L.gradients(()=>t(...s),s,r);return r!=null&&ds(o.shape,r.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),rv(i),i})}}function Ire(t){return T(el(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{T(e instanceof Et,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),T(n==null||n instanceof Et,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:s,value:r}=L.gradients(()=>t(e),[e],n);return rv(s),{grad:s[0],value:r}}}function Rre(t){return T(el(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{T(Array.isArray(e)&&e.every(r=>r instanceof Et),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),T(n==null||n instanceof Et,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const s=L.gradients(()=>t(...e),e,n);return n!=null&&ds(s.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),rv(s.grads),s}}function IP(t,e){T(el(t),()=>"The f passed in variableGrads(f) must be a function"),T(e==null||Array.isArray(e)&&e.every(u=>u instanceof Lp),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in L.registeredVariables)e.push(L.registeredVariables[u])}const s=n?e.filter(u=>!u.trainable):null,r=e.length;e=e.filter(u=>u.trainable),T(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`);const o=!0,{value:i,grads:a}=L.gradients(t,e,null,o);T(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),T(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),s!=null&&s.forEach(u=>l[u.name]=null),{value:i,grads:l}}function hi(t){return L.customGrad(t)}function rv(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(t){const n={x:E(t,"x","neg")};return L.runKernel(lg,n)}const Wt=M({neg_:_re});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Are(t){const n={x:E(t,"x","softplus")};return L.runKernel(Ah,n)}const Yu=M({softplus_:Are});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dre(t){const e=E(t,"x","logSigmoid");return hi(s=>({value:Wt(Yu(Wt(s))),gradFunc:i=>V(i,_o(Wt(s)))}))(e)}const NT=M({logSigmoid_:Dre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ore(t,e){let n=E(t,"a","sub"),s=E(e,"b","sub");[n,s]=cn(n,s);const r={a:n,b:s};return L.runKernel(Fh,r)}const Oe=M({sub_:Ore});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(t,e=-1){const n=E(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return hi((r,o)=>{const a=_r(r,e,!0),l=Oe(r,a),u=Oe(Ce(l,"float32"),dr(ze(Hs(l),e,!0)));return o([u]),{value:u,gradFunc:(d,h)=>{const[f]=h,p=!0,m=Hs(f);return Oe(d,V(ze(d,e,p),m))}}})(n)}const ov=M({logSoftmax_:Fre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(t,e=null,n=!1){const s=E(t,"x","logSumExp"),r=pt(e,s.shape),o=_r(s,r,!0),i=Oe(s,o),a=Hs(i),l=ze(a,r),u=dr(l),c=pe(W(o,u.shape),u);if(n){const d=Cn(c.shape,r);return W(c,d)}return c}const zg=M({logSumExp_:Lre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pre(t,e){const n=E(t,"a","logicalAnd","bool"),s=E(e,"b","logicalAnd","bool");st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(Zm,r)}const Oo=M({logicalAnd_:Pre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mre(t){const n={x:E(t,"x","logicalNot","bool")};return L.runKernel(Jm,n)}const Bg=M({logicalNot_:Mre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zre(t,e){const n=E(t,"a","logicalOr","bool"),s=E(e,"b","logicalOr","bool");st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(eg,r)}const iv=M({logicalOr_:zre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bre(t,e){const n=E(t,"a","logicalXor","bool"),s=E(e,"b","logicalXor","bool");return st(n.shape,s.shape),Oo(iv(t,e),Bg(Oo(t,e)))}const TT=M({logicalXor_:Bre});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0=2147483648;function Vre(t,e,n="left"){const s=E(t,"sortedSequence","searchSorted"),r=E(e,"values","searchSorted"),o=s.shape[s.shape.length-1],i=r.shape[r.shape.length-1],a=W(s,[-1,o]),l=W(r,[-1,i]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(le(l.shape)>=j0)throw new Error(`values tensor size must less than ${j0}`);if(a.shape[1]>=j0)throw new Error(`trailing dim_size must less than ${j0} for int32 output type, was ${a.shape[1]}`);const u={sortedSequence:a,values:l},c={side:n};return L.runKernel(Ab,u,c)}const av=M({searchSorted_:Vre});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RP(t,e){return av(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ure(t,e,n,s,r){const o=E(t,"x","maxPool"),i=1;let a=o,l=!1;o.rank===3&&(l=!0,a=W(o,[1,o.shape[0],o.shape[1],o.shape[2]])),T(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),T(hs(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ds("maxPool",s,r);const u={x:a},c={filterSize:e,strides:n,pad:s,dimRoundingMode:r},d=L.runKernel(sg,u,c);return l?W(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Vg=M({maxPool_:Ure});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wre(t,e=[1,1,1],n,s,r,o="NDHWC"){const i=E(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=W(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),T(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),T(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Ds("maxPool3d",s,r);const u={x:a},c={filterSize:e,strides:n,pad:s,dimRoundingMode:r,dataFormat:o},d=L.runKernel(rg,u,c);return l?W(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const $T=M({maxPool3d_:Wre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jre(t,e,n,s,r=!1){const i={x:E(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:s,includeBatchInIndex:r},l=L.runKernel(bb,i,a);return{result:l[0],indexes:l[1]}}const _P=M({maxPoolWithArgmax_:jre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gre(t,e){let n=E(t,"a","maximum"),s=E(e,"b","maximum");[n,s]=cn(n,s),n.dtype==="bool"&&(n=Ce(n,"int32"),s=Ce(s,"int32")),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(yh,r)}const xi=M({maximum_:Gre});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hre(t,e=null,n=!1){const r={x:E(t,"x","mean")},o={axis:e,keepDims:n};return L.runKernel(og,r,o)}const ln=M({mean_:Hre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(t,e="float32"){if(gr(t),e==="complex64"){const s=xn(t,"float32"),r=xn(t,"float32");return qi(s,r)}const n=cs(le(t),e);return L.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bs(t,e="float32"){if(gr(t),e==="complex64"){const s=Bs(t,"float32"),r=xn(t,"float32");return qi(s,r)}const n=V2(le(t),e);return L.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AP(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let s=E(t,"x","meshgrid",t instanceof Et?t.dtype:"float32");if(e===void 0)return[s];let r=E(e,"y","meshgrid",e instanceof Et?e.dtype:"float32");const o=le(s.shape),i=le(r.shape);return n==="xy"?(s=W(s,[1,-1]),r=W(r,[-1,1]),[ft(Bs([i,1],s.dtype),s),ft(r,Bs([1,o],r.dtype))]):(s=W(s,[-1,1]),r=W(r,[1,-1]),[ft(s,Bs([1,i],s.dtype)),ft(Bs([o,1],r.dtype),r)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qre(t,e){let n=E(t,"a","minimum"),s=E(e,"b","minimum");[n,s]=cn(n,s),n.dtype==="bool"&&(n=Ce(n,"int32"),s=Ce(s,"int32")),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(bh,r)}const ol=M({minimum_:qre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kre(t,e,n){T(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=E(t,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");T(e.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${e.length}.`);const r=n==="reflect"?1:0;for(let a=0;a<s.rank;a++)T(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),T(e[a][0]>=0&&e[a][0]<=s.shape[a]-r&&e[a][1]>=0&&e[a][1]<=s.shape[a]-r,()=>`Padding in dimension ${a} cannot be greater than or equal to ${s.shape[a]-r} or less than 0 for input of shape ${s.shape}`);const o={paddings:e,mode:n},i={x:s};return L.runKernel(ag,i,o)}const ET=M({mirrorPad_:Kre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xre(t,e){let n=E(t,"a","mod"),s=E(e,"b","mod");[n,s]=cn(n,s);const r={a:n,b:s};return L.runKernel(vh,r)}const IT=M({mod_:Xre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yre(t,e=null,n=!1){t=E(t,"x","moments");const s=pt(e,t.shape),r=ln(t,s,n);let o=r.shape;n||(o=Cn(r.shape,s));const i=Lt(Oe(Ce(t,"float32"),W(r,o))),a=ln(i,s,n);return{mean:r,variance:a}}const Ug=M({moments_:Yre});function Qre(t,e,n,s){const r=E(e,"data","multiRNNCell"),o=Pp(n,"c","multiRNNCell"),i=Pp(s,"h","multiRNNCell");let a=r;const l=[];for(let d=0;d<t.length;d++){const h=t[d](a,o[d],i[d]);l.push(h[0]),l.push(h[1]),a=h[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const DP=M({multiRNNCell_:Qre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zre(t,e,n,s=!1){const r=E(t,"logits","multinomial"),o=r.size,i=r.rank;if(o<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const l={logits:i===1?W(r,[1,-1]):r},u={numSamples:e,seed:n,normalized:s},c=L.runKernel(vb,l,u);return i===1?W(c,[c.size]):c}const OP=M({multinomial_:Zre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jre(t,e){let n=E(t,"a","notEqual","string_or_numeric"),s=E(e,"b","notEqual","string_or_numeric");[n,s]=cn(n,s),st(n.shape,s.shape);const r={a:n,b:s};return L.runKernel(ug,r)}const _u=M({notEqual_:Jre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eoe(t,e,n=1,s=0,r="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:E(t,"indices","oneHot","int32")},a={dtype:r,depth:e,onValue:n,offValue:s};return L.runKernel(dg,i,a)}const $d=M({oneHot_:eoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function toe(t){const n={x:E(t,"x","onesLike")};return L.runKernel(cg,n)}const hr=M({onesLike_:toe});function noe(t,e){const n=E(t,"v1","outerProduct"),s=E(e,"v2","outerProduct");T(n.rank===1&&s.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${s.rank}.`);const r=W(n,[-1,1]),o=W(s,[1,-1]);return ft(r,o)}const FP=M({outerProduct_:noe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function soe(t,e,n=0){const s=E(t,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:e,constantValue:n},o={x:s};return L.runKernel(fg,o,r)}const oa=M({pad_:soe});function roe(t,e,n=0){return T(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),oa(t,[e],n)}const LP=M({pad1d_:roe});function ooe(t,e,n=0){return T(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),oa(t,e,n)}const PP=M({pad2d_:ooe});function ioe(t,e,n=0){return T(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),oa(t,e,n)}const MP=M({pad3d_:ioe});function aoe(t,e,n=0){return T(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),oa(t,e,n)}const zP=M({pad4d_:aoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function loe(t,e,n){const s=E(t,"x","spaceToBatchND");T(s.rank>=1+e.length,()=>`input rank ${s.rank} should be > than [blockShape] ${e.length}`),T(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),T(s.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const r={x:s},o={blockShape:e,paddings:n};return L.runKernel(Cg,r,o)}const Wg=M({spaceToBatchND_:loe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uoe(t,e,n,s,r,o,i){r==null&&(r=[1,1]),o==null&&(o=1),s===0&&(s="valid");const a=E(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=W(a,[1,a.shape[0],a.shape[1],a.shape[2]])),T(hs(o,r),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${r}'`);const c=co(l.shape,e,o,r,s),d=[c.dilationHeight,c.dilationWidth];let h;s==="same"?h=doe([c.filterHeight,c.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=coe([c.inHeight,c.inWidth],d,h),g=f?s:"valid",y=f?l:Wg(l,d,p),v=(n==="avg"?()=>Dg(y,e,o,g,i):()=>Vg(y,e,o,g,i))(),x=f?v:Og(v,d,m);return u?W(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function coe(t,e,n){const s=n.map(c=>c[0]),r=n.map(c=>c[1]),o=t.concat(s,r),i=e.map((c,d)=>(c-o[d]%c)%c),a=r.map((c,d)=>c+i[d]),l=e.map((c,d)=>[s[d],a[d]]),u=e.map((c,d)=>[0,i[d]]);return[l,u]}function doe(t,e){const s=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),r=s.map(i=>Math.floor(i/2)),o=s.map((i,a)=>i-r[a]);return s.map((i,a)=>[r[a],o[a]])}const RT=M({pool_:uoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hoe(t,e){const n=E(t,"x","prelu"),s=E(e,"alpha","prelu"),r={x:n,alpha:s};return L.runKernel(pg,r)}const jg=M({prelu_:hoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function foe(t,e=null,n=!1){let s=E(t,"x","prod");s.dtype==="bool"&&(s=Ce(s,"int32"));const r={x:s},o={axis:e,keepDims:n};return L.runKernel(mg,r,o)}const _T=M({prod_:foe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function poe(t,e,n,s){const r=t.map((c,d)=>E(c,`tensors${d}`,"raggedGather","int32")),o=E(e,"paramsDenseValues","raggedGather"),i=E(n,"indices","raggedGather","int32"),a={paramsNestedSplits:r,paramsDenseValues:o,indices:i},l={outputRaggedRank:s},u=L.runKernel(Cb,a,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const BP=M({raggedGather_:poe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moe(t,e,n){const s=E(t,"starts","raggedRange"),r=E(e,"limits","raggedRange",s.dtype),o=E(n,"deltas","raggedRange",s.dtype),i={starts:s,limits:r,deltas:o},a=L.runKernel(kb,i);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const VP=M({raggedRange_:moe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function goe(t,e,n,s,r){const o=E(t,"shape","raggedTensorToTensor","int32"),i=E(e,"values","raggedTensorToTensor"),a=E(n,"defaultValue","raggedTensorToTensor",i.dtype),l=s.map((d,h)=>E(d,`tensors${h}`,"raggedTensorToTensor","int32")),u={shape:o,values:i,defaultValue:a,rowPartitionTensors:l},c={rowPartitionTypes:r};return L.runKernel(Nb,u,c)}const UP=M({raggedTensorToTensor_:goe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yoe(t,e,n){gr(t);const s=le(t);let r=null;if(n==null||n==="float32")r=new Float32Array(s);else if(n==="int32")r=new Int32Array(s);else if(n==="bool")r=new Uint8Array(s);else throw new Error(`Unknown data type ${n}`);for(let o=0;o<s;o++)r[o]=e();return L.makeTensor(r,t,n)}const WP=M({rand_:yoe});var AT={exports:{}};AT.exports;(function(t){(function(e,n,s){function r(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function o(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new r(l),d=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&o(d,c),h.state=function(){return o(c,{})}),h}function a(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(zu,t,!1)})(AT);var boe=AT.exports,DT={exports:{}};DT.exports;(function(t){(function(e,n,s){function r(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new r(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(zu,t,!1)})(DT);var voe=DT.exports,OT={exports:{}};OT.exports;(function(t){(function(e,n,s){function r(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new r(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(zu,t,!1)})(OT);var xoe=OT.exports,FT={exports:{}};FT.exports;(function(t){(function(e,n,s){function r(a){var l=this;l.next=function(){var c=l.x,d=l.i,h,f;return h=c[d],h^=h>>>7,f=h^h<<24,h=c[d+1&7],f^=h^h>>>10,h=c[d+3&7],f^=h^h>>>3,h=c[d+4&7],f^=h^h<<7,h=c[d+7&7],h=h^h<<13,f^=h^h<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],c.x=f,c.i=0,h=256;h>0;--h)c.next()}u(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new r(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&o(c,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(zu,t,!1)})(FT);var woe=FT.exports,LT={exports:{}};LT.exports;(function(t){(function(e,n,s){function r(a){var l=this;l.next=function(){var c=l.w,d=l.X,h=l.i,f,p;return l.w=c=c+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(c^c>>>16)|0};function u(c,d){var h,f,p,m,g,y=[],b=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(g=g+1640531527|0,h=y[m&127]^=f+g,p=h==0?p+1:0);for(p>=128&&(y[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=y[p+34&127],h=y[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,y[p]=f^h;c.w=g,c.X=y,c.i=p}u(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new r(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&o(c,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(zu,t,!1)})(LT);var Soe=LT.exports,PT={exports:{}};PT.exports;(function(t){(function(e,n,s){function r(a){var l=this,u="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new r(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(zu,t,!1)})(PT);var Coe=PT.exports,jP={exports:{}};const koe={},Noe=Object.freeze(Object.defineProperty({__proto__:null,default:koe},Symbol.toStringTag,{value:"Module"})),Toe=V7(Noe);(function(t){(function(e,n,s){var r=256,o=6,i=52,a="random",l=s.pow(r,o),u=s.pow(2,i),c=u*2,d=r-1,h;function f(x,w,S){var k=[];w=w==!0?{entropy:!0}:w||{};var N=y(g(w.entropy?[x,v(n)]:x??b(),3),k),$=new p(k),I=function(){for(var A=$.g(o),O=l,P=0;A<u;)A=(A+P)*r,O*=r,P=$.g(1);for(;A>=c;)A/=2,O/=2,P>>>=1;return(A+P)/O};return I.int32=function(){return $.g(4)|0},I.quick=function(){return $.g(4)/4294967296},I.double=I,y(v($.S),n),(w.pass||S||function(A,O,P,F){return F&&(F.S&&m(F,$),A.state=function(){return m($,{})}),P?(s[a]=A,O):A})(I,N,"global"in w?w.global:this==s,w.state)}function p(x){var w,S=x.length,k=this,N=0,$=k.i=k.j=0,I=k.S=[];for(S||(x=[S++]);N<r;)I[N]=N++;for(N=0;N<r;N++)I[N]=I[$=d&$+x[N%S]+(w=I[N])],I[$]=w;(k.g=function(A){for(var O,P=0,F=k.i,G=k.j,q=k.S;A--;)O=q[F=d&F+1],P=P*r+q[d&(q[F]=q[G=d&G+O])+(q[G]=O)];return k.i=F,k.j=G,P})(r)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var S=[],k=typeof x,N;if(w&&k=="object")for(N in x)try{S.push(g(x[N],w-1))}catch{}return S.length?S:k=="string"?x:x+"\0"}function y(x,w){for(var S=x+"",k,N=0;N<S.length;)w[d&N]=d&(k^=w[d&N]*19)+S.charCodeAt(N++);return v(w)}function b(){try{var x;return h&&(x=h.randomBytes)?x=x(r):(x=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(x)),v(x)}catch{var w=e.navigator,S=w&&w.plugins;return[+new Date,e,S,e.screen,v(n)]}}function v(x){return String.fromCharCode.apply(0,x)}if(y(s.random(),n),t.exports){t.exports=f;try{h=Toe}catch{}}else s["seed"+a]=f})(typeof self<"u"?self:zu,[],Math)})(jP);var $oe=jP.exports,Eoe=boe,Ioe=voe,Roe=xoe,_oe=woe,Aoe=Soe,Doe=Coe,Qu=$oe;Qu.alea=Eoe;Qu.xor128=Ioe;Qu.xorwow=Roe;Qu.xorshift7=_oe;Qu.xor4096=Aoe;Qu.tychei=Doe;var Gg=Qu;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ooe=.001,GP=.1;function Foe(t,e,n){return n==null&&(n=MT()),gC(t,e,(s,r)=>zT(s,r,n))}function MT(){return L.backend.floatPrecision()===32?Ooe:GP}function gC(t,e,n){let s=!0;if((Gn(t)||Gn(e))&&(s=!1),Gn(t)&&Gn(e)&&(s=!0),s){const i=t.constructor.name,a=e.constructor.name;if(i!==a)throw new Error(`Arrays are of different type. Actual: ${i}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){const i=ci(t),a=ci(e);if(!vt(i,a))throw new Error(`Arrays have different shapes. Actual: [${i}]. Expected: [${a}]`)}const r=Gn(t)?t:ui(t),o=Gn(e)?e:ui(e);if(r.length!==o.length)throw new Error(`Arrays have different lengths actual: ${r.length} vs expected: ${o.length}.
Actual:   ${r}.
Expected: ${o}.`);for(let i=0;i<o.length;++i){const a=r[i],l=o[i];if(!n(a,l))throw new Error(`Arrays differ: actual[${i}] = ${a}, expected[${i}] = ${l}.
Actual:   ${r}.
Expected: ${o}.`)}typeof expect<"u"&&expect().nothing()}function Loe(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function Poe(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return ei(t)||ei(t[0])||ei(e)||ei(e[0])?gC(t,n,(s,r)=>s==r):gC(t,e,(s,r)=>zT(s,r,0))}function Moe(t,e,n){if(n==null&&(n=MT()),!zT(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function zT(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function zoe(t,e,n){for(let s=0;s<t.length;s++)if(t[s]<e||t[s]>n)throw new Error(`Value out of range:${t[s]} low: ${e}, high: ${n}`)}function Boe(t,e){const n=new Float32Array(t),s=new Float32Array(e);if(n.length!==s.length)throw new Error(`Expected ArrayBuffer to be of length ${s.length}, but it was ${n.length}`);for(let r=0;r<s.length;r++)if(n[r]!==s[r])throw new Error(`Expected ArrayBuffer value at ${r} to be ${s[r]} but got ${n[r]} instead`)}function HP(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?HP(n):t[e]=ri(n)}return t}function Voe(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",s=>n(e)),e.load()})}async function Uoe(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const Woe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:GP,createVideoElement:Voe,encodeStrings:HP,expectArrayBuffersEqual:Boe,expectArraysClose:Foe,expectArraysEqual:Poe,expectNumbersClose:Moe,expectPromiseToFail:Loe,expectValuesInRange:zoe,play:Uoe,testEpsilon:MT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BT{constructor(e,n,s,r,o){this.mean=e,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=o||Math.random();this.random=Gg.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const r=this.nextVal;return this.nextVal=NaN,r}let e,n,s=!1;for(;!s;){let r,o,i;do r=2*this.random()-1,o=2*this.random()-1,i=r*r+o*o;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*a,n=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(e))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class joe{constructor(e,n,s,r){this.alpha=e,this.beta=1/n,this.dtype=s;const o=r||Math.random();this.randu=Gg.alea(o.toString()),this.randn=new BT(0,1,s,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,s,r,o,i;for(;;){do r=this.randn.nextValue(),i=1+this.c*r;while(i<=0);if(i*=i*i,e=r*r,n=1-.331*e*e,s=.5*e+this.d*(1-i+Math.log(i)),o=this.randu(),o<n||Math.log(o)<s)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Goe{constructor(e=0,n=1,s,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=s,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Gg.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hoe(t,e,n=1,s="float32",r){if(gr(t),n==null&&(n=1),s==null&&(s="float32"),s!=="float32"&&s!=="int32")throw new Error(`Unsupported data type ${s}`);const o=new joe(e,n,s,r),i=lt(t,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const qP=M({randomGamma_:Hoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qoe(t,e=0,n=1,s,r){if(gr(t),s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const o=new BT(e,n,s,!1,r),i=lt(t,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const lv=M({randomNormal_:qoe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Koe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return lv(t,0,1,e,n)}const KP=M({randomStandardNormal_:Koe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xoe(t,e=0,n=1,s="float32",r){gr(t);const o=lt(t,s),i=new Goe(e,n,null,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const Cl=M({randomUniform_:Xoe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yoe(t,e,n,s){return Cl(t,e,n,"int32",s)}const XP=M({randomUniformInt_:Yoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Au(t,e,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const r={start:t,stop:e,step:n,dtype:s};return L.runKernel(Tb,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qoe(t){const n={input:E(t,"input","real")};return L.runKernel($b,n)}const Ed=M({real_:Qoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zoe(t){const n={x:E(t,"x","reciprocal")};return L.runKernel(Sh,n)}const VT=M({reciprocal_:Zoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Joe(t){const n={x:E(t,"x","relu")};return L.runKernel(Ch,n)}const Bo=M({relu_:Joe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(t){const n={x:E(t,"x","relu6")};return L.runKernel(kh,n)}const uv=M({relu6_:eie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tie(t,e){const s={x:E(t,"x","reverse")},r={dims:e};return L.runKernel(vg,s,r)}const Dr=M({reverse_:tie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nie(t){const e=E(t,"x","reverse");return T(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Dr(e,0)}const YP=M({reverse1d_:nie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sie(t,e){const n=E(t,"x","reverse");return T(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Dr(n,e)}const QP=M({reverse2d_:sie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rie(t,e){const n=E(t,"x","reverse");return T(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Dr(n,e)}const ZP=M({reverse3d_:rie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oie(t,e){const n=E(t,"x","reverse");return T(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Dr(n,e)}const JP=M({reverse4d_:oie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iie(t){const n={x:E(t,"x","round")};return L.runKernel(Nh,n)}const cv=M({round_:iie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aie(t){const n={x:E(t,"x","rsqrt","float32")};return L.runKernel(Th,n)}const dv=M({rsqrt_:aie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lie(t){const n={x:E(t,"x","selu")};return L.runKernel($h,n)}const hv=M({selu_:lie});function uie(t,e,n,s,r,o=[1,1],i="NHWC"){const a=E(t,"x","separableConv2d"),l=E(e,"depthwiseFilter","separableConv2d"),u=E(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=W(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");T(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),T(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),T(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),T(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),T(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const h=l.shape[2],f=l.shape[3];T(u.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${u.shape[2]}.`);const p=Vh(c,l,s,r,i,o),g=Ki(p,u,1,"valid",i);return d?W(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const fv=M({separableConv2d_:uie});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function cie(t,e){const n=E(t,"x","setdiff1d"),s=E(e,"y","setdiff1d");T(n.dtype===s.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${s.dtype}).`),T(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),T(s.rank===1,()=>`y should be 1D tensor, but got y (${s.shape}).`);const r=await n.data(),o=await s.data(),i=new Set(o);let a=0;for(let c=0;c<r.length;c++)i.has(r[c])||a++;const l=new _n([a],n.dtype),u=new _n([a],"int32");for(let c=0,d=0;c<r.length;c++)i.has(r[c])||(l.values[d]=r[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const eM=cie;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function die(t){const n={x:E(t,"x","sign")};return L.runKernel(Rh,n)}const UT=M({sign_:die});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hie(t){const n={x:E(t,"x","sin","float32")};return L.runKernel(Eh,n)}const pv=M({sin_:hie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fie(t){const n={x:E(t,"x","sinh")};return L.runKernel(Ih,n)}const mv=M({sinh_:fie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pie(t,e,n){const s=E(t,"x","slice1d");return T(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),xt(s,[e],[n])}const Hg=M({slice1d_:pie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(t,e,n){const s=E(t,"x","slice2d");return T(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const gv=M({slice2d_:mie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gie(t,e,n){const s=E(t,"x","slice3d");return T(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const qg=M({slice3d_:gie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yie(t,e,n){const s=E(t,"x","slice4d");return T(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const Id=M({slice4d_:yie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bie(t,e=-1){const n=E(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const s={logits:n},r={dim:e};return L.runKernel(Ng,s,r)}const Hh=M({softmax_:bie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vie(t){T(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return L.runKernel(lb,e)}const Kg=M({fft_:vie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xie(t){T(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return L.runKernel(hb,e)}const Rd=M({ifft_:xie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(t){const e=t.shape[t.shape.length-1],n=t.size/e;let s;if(e<=2){const r=W(t,[n,e]);s=Rd(r)}else{const r=[n,2*(e-1)],o=W(Ed(t),[n,e]),i=W(Lg(t),[n,e]),a=Dr(xt(o,[0,1],[n,e-2]),1),l=V(Dr(xt(i,[0,1],[n,e-2]),1),qe(-1)),u=wn([o,a],1),c=wn([i,l],1),d=W(qi(u,c),[r[0],r[1]]);s=Rd(d)}if(s=Ed(s),t.rank===3&&t.shape[0]!==0){const r=s,o=t.shape[0];s=W(s,[o,s.shape[0]/o,s.shape[1]]),r.dispose()}return s}const yv=M({irfft_:wie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sie(t,e,n=0){const r={x:E(t,"x","split")},o={numOrSizeSplits:e,axis:n};return L.runKernel(kg,r,o)}const Us=M({split_:Sie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cie(t,e){T(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const s=t.size/n;let r;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,r=xt(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,r=wn([t,xn(p)],t.shape.length-1),n=e}else r=t;const o=St(r),i=W(qi(r,o),[s,n]),a=Kg(i),l=Math.floor(n/2)+1,u=Ed(a),c=Lg(a),d=Us(u,[l,n-l],u.shape.length-1),h=Us(c,[l,n-l],c.shape.length-1),f=r.shape.slice();return f[r.shape.length-1]=l,W(qi(d[0],h[0]),f)}const Xg=M({rfft_:Cie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kie(t,e){let n=E(t,"a","squaredDifference"),s=E(e,"b","squaredDifference");[n,s]=cn(n,s),st(n.shape,s.shape);const r={a:n,b:s},o={};return L.runKernel(Oh,r,o)}const bv=M({squaredDifference_:kie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nie(t,e){const n=E(t,"x","squeeze","string_or_numeric");return W(n,ea(n.shape,e).newShape)}const ia=M({squeeze_:Nie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tie(t,e=0){const n=Pp(t,"tensors","stack","string_or_numeric");T(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&T(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,r={axis:e};return L.runKernel(hg,s,r)}const qs=M({stack_:Tie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ie(t,e=0){const s={x:E(t,"x","step")},r={alpha:e};return L.runKernel(zh,s,r)}const Zu=M({step_:$ie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eie(t,e,n,s,r=0,o=0,i=0,a=0,l=0){const c={x:E(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:s,beginMask:r,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return L.runKernel(zb,c,d)}const WT=M({stridedSlice_:Eie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iie(t){const n={x:E(t,"x","tan","float32")};return L.runKernel(Lh,n)}const jT=M({tan_:Iie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function is(t,e){ju(t);const n=ci(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vl(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ka(t,e,n){if(ju(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=ci(t,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vl(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GT(t,e,n){if(ju(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const s=ci(t,n);if(s.length!==3&&s.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vl(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tM(t,e,n){if(ju(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const s=ci(t,n);if(s.length!==4&&s.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vl(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nM(t,e,n){if(ju(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const s=ci(t,n);if(s.length!==5&&s.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vl(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sM(t,e,n){if(ju(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const s=ci(t,n);if(s.length!==6&&s.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||s,vl(t,e,s,n)}function HT(t,e,n){const s=e.rank>1?e.shape[e.rank-1]:1,r=e.rank>1?e.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${s}, and batchDim: ${r}.`;if(n.rank<r)throw new Error(o+` update.rank < ${r}. `);if(t.length<s+(n.rank-r))throw new Error(o+` Output shape length < ${s+(n.rank-r)}`);if(n.rank!==r+t.length-s)throw new Error(o+` update.rank != ${r+t.length-s}`);for(let i=0;i<r;++i)if(n.shape[i]!==e.shape[i])throw new Error(o+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-r;++i)if(n.shape[i+r]!==t[i+s])throw new Error(o+` updates.shape[${i+r}] (${n.shape[i+r]}) != shape[${i+r}] (${t[i+r]})`)}function vv(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}HT(n,e,t)}function kl(t,e,n){const s=e.shape.length,r=s>1?e.shape[s-1]:1,o=n.length;let i=1;for(let d=r;d<o;++d)i*=n[d];const a=r<1?1:r,l=le(e.shape)/a,u=[...je(n.slice(0,r)),1],c=le(n);return{sliceRank:r,numUpdates:l,sliceSize:i,strides:u,outputSize:c}}const Rie=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:kl,validateInput:vv,validateUpdateShape:HT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ie(t,e,n){const s=E(t,"tensor","tensorScatterupdate"),r=E(e,"indices","tensorScatterupdate","int32"),o=E(n,"updates","tensorScatterupdate");if(vv(o,r,s.shape),s.dtype!==o.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${s.dtype} and ${o.dtype}.`);const i={tensor:s,indices:r,updates:o},a={};return L.runKernel(_b,i,a)}const rM=M({tensorScatterUpdate_:_ie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aie(t,e=1,n=!0){const s=E(t,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const r=s.shape[s.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${e}`);const o={x:s},i={k:e,sorted:n},[a,l]=L.runKernel(Wb,o,i);return{values:a,indices:l}}const qT=M({topk_:Aie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Die(t,e=0,n=1,s,r){if(gr(t),s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const o=new BT(e,n,s,!0,r),i=lt(t,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const xv=M({truncatedNormal_:Die});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oie(t,e=0){const n=E(t,"x","unique","string_or_numeric");T(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},r={axis:e},[o,i]=L.runKernel(Gb,s,r);return{values:o,indices:i}}const KT=M({unique_:Oie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fie(t,e,n){const s=E(t,"x","unsortedSegmentSum"),r=E(e,"segmentIds","unsortedSegmentSum","int32");T(ku(n),()=>"numSegments must be of dtype int");const o={x:s,segmentIds:r},i={numSegments:n};return L.runKernel(Eg,o,i)}const wv=M({unsortedSegmentSum_:Fie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lie(t,e=0){const n=E(t,"x","unstack","string_or_numeric");T(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},r={axis:e};return L.runKernel($g,s,r)}const Or=M({unstack_:Lie});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oM(t,e){return av(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XT(t,e=!0,n,s){return L.makeVariable(t,e,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sv(t,e){const n=[];for(let o=0;o<e.length;o++)e[o]&&n.push(o);const s=lt(t,"int32"),r=lt([n.length,t.length],"int32");for(let o=0;o<n.length;o++){const i=s.indexToLoc(n[o]),a=o*t.length;r.values.set(i,a)}return r.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Pie(t){const e=E(t,"condition","whereAsync","bool"),n=await e.data(),s=Sv(e.shape,n);return t!==e&&e.dispose(),s}const YT=Pie;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Mie(t,e,n){const s=E(t,"tensor","boolMask"),r=E(e,"mask","boolMask","bool"),o=n??0,i=r.rank,a=s.shape;T(i>0,()=>"mask cannot be scalar"),ds(a.slice(o,o+i),r.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=o;m<o+i;m++)l*=a[m];const u=a.slice(0,o).concat([l],a.slice(o+i)),c=W(s,u),d=W(r,[-1]),h=await YT(d),f=ia(h,[1]),p=Gh(c,f,o);return t!==s&&s.dispose(),e!==r&&r.dispose(),f.dispose(),c.dispose(),d.dispose(),h.dispose(),p}const iM=Mie;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zie(t,e,n){const s=E(t,"x","transpose");if(e==null&&(e=s.shape.map((i,a)=>a).reverse()),T(s.rank===e.length,()=>`Error in transpose: rank of input ${s.rank} must match length of perm ${e}.`),e.forEach(i=>{T(i>=0&&i<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1} but got ${e}`)}),s.rank<=1)return s.clone();const r={x:s},o={perm:e};return s.dtype==="complex64"?ee(()=>{let i=Ed(s),a=Lg(s);return i=L.runKernel(hu,{x:i},o),a=L.runKernel(hu,{x:a},o),n&&(a=Wt(a)),qi(i,a)}):L.runKernel(hu,r,o)}const wt=M({transpose_:zie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bie(t,e,n,s,r=!0){const o=E(t,"v","movingAverage"),i=E(e,"x","movingAverage"),a=E(n,"decay","movingAverage");eP(o,i),T(vt(o.shape,i.shape),()=>"Shape mismatch in v and x");const l=qe(1),u=Oe(l,a);let c=V(Oe(i,o),u);if(r){T(s!=null,()=>"When using zeroDebias: true, step is required.");const d=E(s,"step","movingAverage");c=Ue(c,Oe(l,di(a,d)))}return pe(o,c)}const aM=M({movingAverage_:Bie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vie(t,e,n){gr(n);const s=E(t,"indices","scatterND","int32"),r=E(e,"updates","scatterND");vv(r,s,n);const o={indices:s,updates:r},i={shape:n};return L.runKernel(Rb,o,i)}const lM=M({scatterND_:Vie});function Uie(t,e,n,s){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const r=t.rank>0?t.shape[0]:1,o=t.rank>1?t.shape[1]:1;if(n.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===r))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${r}]`);if(e.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(t,e,n,s=0){gr(n);const r=E(t,"sparseIndices","sparseToDense","int32"),o=E(e,"sparseValues","sparseToDense","string_or_numeric"),i=E(s,"defaultValue","sparseToDense",o.dtype);Uie(r,o,n,i);const a={sparseIndices:r,sparseValues:o,defaultValue:i},l={outputShape:n};return L.runKernel(Pb,a,l)}const uM=M({sparseToDense_:Wie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jie(t,e){const n=E(e,"indices","gatherND","int32"),r={params:E(t,"x","gatherND","string_or_numeric"),indices:n};return L.runKernel(db,r)}const cM=M({gatherND_:jie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gie(t,e){if(e==null)return t.shape.slice();if(vt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let s=0;s<t.shape.length;s++)e[s]==null&&t.shape[s]!=null?n.push(t.shape[s]):n.push(e[s]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hie(t,e,n,s){const r=E(t,"x","dropout");if(T(r.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`),T(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Et?r.clone():r;const o=Gie(r,n),i=1-e,a=Ue(jh(pe(Cl(o,0,1,"float32",s),i)),i);return V(r,a)}const QT=M({dropout_:Hie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZT(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function Cv(t,e,n){const s=1-t%2,r=new Float32Array(t);for(let o=0;o<t;++o){const i=2*Math.PI*o/(t+s-1);r[o]=e-n*Math.cos(i)}return is(r,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function qie(t,e,n=1){const s=E(t,"predictions","inTopK"),r=E(e,"targets","inTopK");T(s.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${s.rank}`),T(s.rank-1===r.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${s.rank} and targets rank ${r.rank}`),ds(s.shape.slice(0,s.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=s.shape[s.shape.length-1];T(n>0&&n<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${n}`);const i=await s.data(),a=await r.data(),[l,u]=[i.length/o,o],c=Xn("bool",l);for(let d=0;d<l;d++){const h=d*u,f=i.subarray(h,h+u),p=[];for(let m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort((m,g)=>g.value-m.value),c[d]=0;for(let m=0;m<n;m++)if(p[m].index===a[d]){c[d]=1;break}}return t!==s&&s.dispose(),e!==r&&r.dispose(),io(c,r.shape,"bool")}const dM=qie;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kie(t,e,n,s,r,o="NHWC",i){let a=t;t.rank===3&&(a=W(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=W(e,[1,e.shape[0],e.shape[1],e.shape[2]])),T(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),T(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),T(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=o==="NHWC"?a.shape[3]:a.shape[1],c=o==="NHWC"?l.shape[3]:l.shape[1];T(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),T(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Ds("conv2dDerFilter",r,i);const d={x:a,dy:l},h={strides:s,pad:r,dataFormat:o,dimRoundingMode:i,filterShape:n};return L.runKernel(X2,d,h)}const JT=M({conv2DBackpropFilter_:Kie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kv(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return V(t,Zu(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Nv(t,e){let n=e;const s=An(t.shape,e.shape);return s.length>0&&(n=ze(n,s)),W(n,t.shape)}function Tv(t,e,n,s){if(e==="linear")return t;if(e==="relu")return Bo(t);if(e==="elu")return Uh(t);if(e==="relu6")return uv(t);if(e==="prelu")return jg(t,n);if(e==="leakyrelu")return Pg(t,s);if(e==="sigmoid")return _o(t);throw new Error(`Unknown fused activation ${e}.`)}const $v=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xie({x:t,filter:e,strides:n,pad:s,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",$v(L.state.gradientDepth,l)===!1){T(r==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${r} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=Ki(t,e,n,s,r,o,i);return a!=null&&(S=pe(S,a)),Tv(S,l,u,c)}const d=E(t,"x","conv2d","float32"),h=E(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=W(d,[1,d.shape[0],d.shape[1],d.shape[2]])),T(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),T(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Ds("fused conv2d",s,i);const m=r==="NHWC"?f.shape[3]:f.shape[1];T(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),T(hs(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const g=Qn(f.shape,h.shape,n,o,s,i);let y;a!=null&&(y=E(a,"bias","fused conv2d"),[y]=cn(y,d),r==="NHWC"?st(g.outShape,y.shape):(T(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),T(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let b;if(u!=null){const S=u.shape;if(T(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)T(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{st(S,g.outShape)}catch{const N=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(N)}b=E(u,"prelu weights","fused conv2d")}const v=(S,k)=>{T(r==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${r} but only NHWC is currently supported.`);const[N,$,I,A]=k,O=kv(S,I,l);T(sl(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const P=dT($.shape,O,N,n,s),F=JT($,O,N.shape,n,s),G=[P,F];if(A!=null){const q=Nv(A,O);G.push(q)}return G},x={x:f,filter:h,bias:y,preluActivationWeights:b},w={strides:n,pad:s,dataFormat:r,dilations:o,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?hi((k,N,$)=>{let I=L.runKernel(Ap,x,w);return $([N,k,I]),p&&(I=W(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:v}})(f,h):hi((k,N,$,I)=>{let A=L.runKernel(Ap,x,w);return I([N,k,A,$]),p&&(A=W(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:v}})(f,h,y)}const hM=M({fusedConv2d_:Xie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yie(t,e,n,s,r,o=[1,1],i){let a=t;t.rank===3&&(a=W(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=W(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:s,pad:r,dimRoundingMode:i,dilations:o,filterShape:n};return L.runKernel(nb,u,c)}const fM=M({depthwiseConv2dNativeBackpropFilter_:Yie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qie(t,e,n,s,r,o=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=W(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:s,pad:r,dimRoundingMode:i,dilations:o,inputShape:t},d=L.runKernel(sb,u,c);return l?W(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const pM=M({depthwiseConv2dNativeBackpropInput_:Qie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zie({x:t,filter:e,strides:n,pad:s,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if($v(L.state.gradientDepth,l)===!1){let w=Vh(t,e,n,s,r,o,i);return a!=null&&(w=pe(w,a)),Tv(w,l,u,c)}const d=E(t,"x","depthwiseConv2d","float32"),h=E(e,"filter","depthwiseConv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=W(d,[1,d.shape[0],d.shape[1],d.shape[2]])),T(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),T(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),T(f.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),o==null&&(o=[1,1]),T(hs(n,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Ds("fused depthwiseConv2d",s,i);const m=Qn(f.shape,h.shape,n,o,s,i,!0);let g;a!=null&&(g=E(a,"bias","fused conv2d"),[g]=cn(g,d),st(m.outShape,g.shape));let y;u!=null&&(y=E(u,"prelu weights","fused depthwiseConv2d"));const b=(w,S)=>{T(sl(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[k,N,$,I]=S,A=kv(w,$,l),O=pM(N.shape,A,k,n,s,o,i),P=fM(N,A,k.shape,n,s,o,i);if(I!=null){const F=Nv(g,A);return[O,P,F]}return[O,P]},v={x:f,filter:h,bias:g,preluActivationWeights:y},x={strides:n,pad:s,dataFormat:r,dilations:o,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?hi((S,k,N)=>{let $=L.runKernel(Dp,v,x);return N([k,S,$]),p&&($=W($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(f,h):hi((S,k,N,$)=>{let I=L.runKernel(Dp,v,x);return $([k,S,I,N]),p&&(I=W(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:b}})(f,h,g)}const Jie=M({fusedDepthwiseConv2d_:Zie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eae({a:t,b:e,transposeA:n=!1,transposeB:s=!1,bias:r,activation:o="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if($v(L.state.gradientDepth,o)===!1){let A=ft(t,e,n,s);return r!=null&&(A=pe(A,r)),Tv(A,o,i,a)}let l=E(t,"a","fused matMul"),u=E(e,"b","fused matMul");[l,u]=cn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=s?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=s?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=le(p),y=le(m);T(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${s} must match.`);const v=st(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,f]),x=n?W(l,[g,c,h]):W(l,[g,h,c]),w=s?W(u,[y,f,d]):W(u,[y,d,f]);let S;r!=null&&(S=E(r,"bias","fused matMul"),[S]=cn(S,l),st(v,S.shape));let k;i!=null&&(k=E(i,"prelu weights","fused matMul"));const N=(A,O)=>{const[P,F,G,q]=O,Z=kv(W(A,G.shape),G,o);let B,H;if(!n&&!s?(B=ft(Z,F,!1,!0),H=ft(P,Z,!0,!1)):!n&&s?(B=ft(Z,F,!1,!1),H=ft(Z,P,!0,!1)):n&&!s?(B=ft(F,Z,!1,!0),H=ft(P,Z,!1,!1)):(B=ft(F,Z,!0,!0),H=ft(Z,P,!0,!0)),r!=null){const K=Nv(q,Z);return[B,H,K]}else return[B,H]},$={a:x,b:w,bias:S,preluActivationWeights:k},I={transposeA:n,transposeB:s,activation:o,leakyreluAlpha:a};return r==null?hi((O,P,F)=>{const G=L.runKernel(_p,$,I);return F([O,P,G]),{value:W(G,v),gradFunc:N}})(x,w):hi((O,P,F,G)=>{const q=L.runKernel(_p,$,I);return G([O,P,q,F]),{value:W(q,v),gradFunc:N}})(x,w,S)}const yC=M({fusedMatMul_:eae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mM=Object.freeze(Object.defineProperty({__proto__:null,conv2d:hM,depthwiseConv2d:Jie,matMul:yC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tae(t){return Cv(t,.54,.46)}const nae=M({hammingWindow_:tae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sae(t){return Cv(t,.5,.5)}const gM=M({hannWindow_:sae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rae(t,e,n,s=!1,r=0){let o=0;const i=[];for(;o+e<=t.size;)i.push(xt(t,o,e)),o+=n;if(s)for(;o<t.size;){const a=o+e-t.size,l=wn([xt(t,o,e-a),Xu([a],r)]);i.push(l),o+=n}return i.length===0?Ka([],[0,e]):W(wn(i),[i.length,e])}const yM=M({frame_:rae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oae(t,e,n,s,r=gM){s==null&&(s=ZT(e));const o=yM(t,e,n),i=V(o,r(e));return Xg(i,s)}const iae=M({stft_:oae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aae(t,e,n,s,r="bilinear",o=0){const i=E(t,"image","cropAndResize"),a=E(e,"boxes","cropAndResize","float32"),l=E(n,"boxInd","cropAndResize","int32"),u=a.shape[0];T(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),T(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),T(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),T(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),T(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),T(r==="bilinear"||r==="nearest",()=>`method must be bilinear or nearest, but was ${r}`);const c={image:i,boxes:a,boxInd:l},d={method:r,extrapolationValue:o,cropSize:s};return L.runKernel(J2,c,d)}const lae=M({cropAndResize_:aae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uae(t){const e=E(t,"image","flipLeftRight","float32");T(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return L.runKernel(cb,n,{})}const cae=M({flipLeftRight_:uae});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dae(t){const e=E(t,"image","grayscaleToRGB"),n=e.rank-1,s=e.shape[n];T(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),T(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const r=new Array(e.rank);return r.fill(1,0,n),r[n]=3,Tr(e,r)}const hae=M({grayscaleToRGB_:dae});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fae(t){const e=E(t,"image","RGBToGrayscale"),n=e.rank-1,s=e.shape[n];T(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),T(s===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${s}.`);const r=e.dtype,o=Ce(e,"float32"),i=is([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Bl("ij,j->i",o,i);break;case 3:a=Bl("ijk,k->ij",o,i);break;case 4:a=Bl("ijkl,l->ijk",o,i);break;case 5:a=Bl("ijklm,m->ijkl",o,i);break;case 6:a=Bl("ijklmn,n->ijklm",o,i);break;default:throw new Error("Not a valid tensor rank.")}return a=ss(a,-1),Ce(a,r)}const pae=M({rgbToGrayscale_:fae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mae(t,e,n=0,s=.5){const r=E(t,"image","rotateWithOffset","float32");T(r.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`);const o={image:r},i={radians:e,fillValue:n,center:s};return L.runKernel(Hb,o,i)}const gae=M({rotateWithOffset_:mae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qh(t,e,n,s,r,o){s==null&&(s=.5),r==null&&(r=Number.NEGATIVE_INFINITY),o==null&&(o=0);const i=t.shape[0];return n=Math.min(n,i),T(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),T(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),T(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),T(e.rank===1,()=>"scores must be a 1D tensor"),T(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),T(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:r,softNmsSigma:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yae(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY){const o=E(t,"boxes","nonMaxSuppression","float32"),i=E(e,"scores","nonMaxSuppression","float32"),a=qh(o,i,n,s,r);n=a.maxOutputSize,s=a.iouThreshold,r=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:s,scoreThreshold:r};return L.runKernel(xb,{boxes:o,scores:i},l)}const bae=M({nonMaxSuppression_:yae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vae(t,e,n){const s=xae(t,e,n),r=s<0?-(s+1):s;t.splice(r,0,e)}function xae(t,e,n){return Sae(t,e,n||wae)}function wae(t,e){return t>e?1:t<e?-1:0}function Sae(t,e,n){let s=0,r=t.length,o=0,i=!1;for(;s<r;){o=s+(r-s>>>1);const a=n(e,t[o]);a>0?s=o+1:(r=o,i=!a)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ev(t,e,n,s,r){return e$(t,e,n,s,r,0)}function Iv(t,e,n,s,r,o){return e$(t,e,n,s,r,0,!1,o,!0)}function Rv(t,e,n,s,r,o){return e$(t,e,n,s,r,o,!0)}function e$(t,e,n,s,r,o,i=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>r&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(S3);const c=o>0?-.5/o:0,d=[],h=[];for(;d.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:b,suppressBeginIndex:v}=g;if(y<r)break;let x=!1;for(let w=d.length-1;w>=v;--w){const S=Cae(t,b,d[w]);if(S>=s){x=!0;break}if(g.score=g.score*kae(s,c,S),g.score<=r)break}g.suppressBeginIndex=d.length,x||(g.score===y?(d.push(b),h.push(g.score)):g.score>r&&vae(u,g,S3))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),l&&(m.validOutputs=f),m}function Cae(t,e,n){const s=t.subarray(e*4,e*4+4),r=t.subarray(n*4,n*4+4),o=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),a=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),u=Math.min(r[0],r[2]),c=Math.min(r[1],r[3]),d=Math.max(r[0],r[2]),h=Math.max(r[1],r[3]),f=(a-o)*(l-i),p=(d-u)*(h-c);if(f<=0||p<=0)return 0;const m=Math.max(o,u),g=Math.max(i,c),y=Math.min(a,d),b=Math.min(l,h),v=Math.max(y-m,0)*Math.max(b-g,0);return v/(f+p-v)}function kae(t,e,n){const s=Math.exp(e*n*n);return n<=t?s:0}function S3(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Nae(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY){const o=E(t,"boxes","nonMaxSuppressionAsync"),i=E(e,"scores","nonMaxSuppressionAsync"),a=qh(o,i,n,s,r);n=a.maxOutputSize,s=a.iouThreshold,r=a.scoreThreshold;const l=await Promise.all([o.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=Ev(u,c,n,s,r);return o!==t&&o.dispose(),i!==e&&i.dispose(),is(d,"int32")}const Tae=Nae;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ae(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,o=0){const i=E(t,"boxes","nonMaxSuppression"),a=E(e,"scores","nonMaxSuppression"),l=qh(i,a,n,s,r,o);n=l.maxOutputSize,s=l.iouThreshold,r=l.scoreThreshold,o=l.softNmsSigma;const u={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:s,scoreThreshold:r,softNmsSigma:o},d=L.runKernel(Sb,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const Eae=M({nonMaxSuppressionWithScore_:$ae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Iae(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,o=0){const i=E(t,"boxes","nonMaxSuppressionAsync"),a=E(e,"scores","nonMaxSuppressionAsync"),l=qh(i,a,n,s,r,o);n=l.maxOutputSize,s=l.iouThreshold,r=l.scoreThreshold,o=l.softNmsSigma;const u=await Promise.all([i.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:h,selectedScores:f}=Rv(c,d,n,s,r,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:is(h,"int32"),selectedScores:is(f)}}const Rae=Iae;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ae(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,o=!1){const i=E(t,"boxes","nonMaxSuppression"),a=E(e,"scores","nonMaxSuppression"),l=qh(i,a,n,s,r,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,h={boxes:i,scores:a},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:o},p=L.runKernel(wb,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const Aae=M({nonMaxSuppressionPadded_:_ae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Dae(t,e,n,s=.5,r=Number.NEGATIVE_INFINITY,o=!1){const i=E(t,"boxes","nonMaxSuppressionAsync"),a=E(e,"scores","nonMaxSuppressionAsync"),l=qh(i,a,n,s,r,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=Iv(h,f,u,c,d,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:is(p,"int32"),validOutputs:qe(m,"int32")}}const Oae=Dae;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fae(t,e,n=!1,s=!1){const r=E(t,"images","resizeBilinear");T(r.rank===3||r.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),T(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),T(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=r,i=!1;r.rank===3&&(i=!0,o=W(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:s,size:e},u=L.runKernel(bg,a,l);return i?W(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const bM=M({resizeBilinear_:Fae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(t,e,n=!1,s=!1){const r=E(t,"images","resizeNearestNeighbor");T(r.rank===3||r.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),T(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),T(r.dtype==="float32"||r.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),T(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=r,i=!1;r.rank===3&&(i=!0,o=W(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:s,size:e},u=L.runKernel(yg,a,l);return i?W(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const vM=M({resizeNearestNeighbor_:Lae});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pae(t,e="binary",n=!1,s=.5){const r=E(t,"image","threshold"),o=.2989,i=.587,a=.114,l=r.shape[0]*r.shape[1];let u=V(is([s]),255),c,d,h,f;if(T(r.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`),T(r.shape[2]===3||r.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`),T(r.dtype==="int32"||r.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`),T(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),r.shape[2]===3){[c,d,h]=Us(r,[1,1,1],-1);const g=V(c,o),y=V(d,i),b=V(h,a);f=pe(pe(g,y),b)}else f=t;if(e==="otsu"){const g=oT(Ce(cv(f),"int32"),io([]),256);u=Mae(g,l)}const p=n?Sl(f,u):Qs(f,u);return Ce(V(p,255),"int32")}function Mae(t,e){let n=is([-1]),s=is([0]),r=is([0]),o,i,a,l,u,c;for(let d=0;d<t.size-1;d++){o=xt(t,0,d+1),i=xt(t,d+1),u=Ue(ze(o),e),c=Ue(ze(i),e);const h=ze(V(o,Au(0,o.size)));a=Ue(h,ze(o));const f=Xu(i.shape,o.size),p=pe(Au(0,i.size),f),m=V(i,p);l=Ue(ze(m),ze(i));const g=Oe(a,l),y=Oe(a,l),b=V(u,c);r=V(V(b,g),y);const v=Qs(r,s);s=ls(v,r,s),n=ls(v,is([d]),n)}return n}const zae=M({threshold_:Pae});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bae(t,e,n="nearest",s="constant",r=0,o){const i=E(t,"image","transform","float32"),a=E(e,"transforms","transform","float32");T(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),T(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),T(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);const l={image:i,transforms:a},u={interpolation:n,fillMode:s,fillValue:r,outputShape:o};return L.runKernel(jb,l,u)}const Vae=M({transform_:Bae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uae(t,e,n){const s=E(t,"a","bandPart");T(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const r=s.shape,[o,i]=s.shape.slice(-2);let a,l;typeof e=="number"?(T(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),T(e<=o,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${o}).`),a=E(e<0?o:e,"numLower","bandPart")):(T(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=ls(Td(e,0),o,ol(e,o))),typeof n=="number"?(T(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),T(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=E(n<0?i:n,"numUpper","bandPart")):(T(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=ls(Td(n,0),i,ol(n,i)));const u=W(Au(0,o,1,"int32"),[-1,1]),c=Au(0,i,1,"int32"),d=Oe(u,c),h=Oo(Sl(d,a),ra(d,Wt(l))),f=xn([o,i],s.dtype);return W(qs(Or(W(s,[-1,o,i])).map(p=>ls(h,p,f))),r)}const Wae=M({bandPart_:Uae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jae(t){let e;if(Array.isArray(t)){e=!1,T(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const r=t[0].shape[0];for(let o=1;o<t.length;++o)T(t[o].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[o].shape[0]} vs. ${r})`)}else e=!0,t=Us(t,t.shape[0],0).map(r=>ia(r,[0]));T(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],s=t;for(let r=0;r<t.length;++r)n.push(L.tidy(()=>{let o=s[r];if(r>0)for(let i=0;i<r;++i){const a=V(ze(V(n[i],o)),n[i]);o=Oe(o,a)}return Ue(o,Wh(o,"euclidean"))}));return e?qs(n,0):n}const Gae=M({gramSchmidt_:jae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hae(t,e=!1){if(T(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return C3(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),s=Or(W(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),r=[],o=[];s.forEach(l=>{const[u,c]=C3(l,e);r.push(u),o.push(c)});const i=W(qs(r,0),t.shape),a=W(qs(o,0),t.shape);return[i,a]}}function C3(t,e=!1){return L.tidy(()=>{T(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],s=t.shape[1];let r=sv(n),o=oi(t);const i=Ka([[1]],[1,1]);let a=oi(i);const l=n>=s?s:n;for(let u=0;u<l;++u){const c=o,d=a,h=r;[a,o,r]=L.tidy(()=>{const f=xt(o,[u,u],[n-u,1]),p=Wh(f),m=xt(o,[u,u],[1,1]),g=ls(Qs(m,0),Ka([[-1]]),Ka([[1]])),y=Oe(m,V(g,p)),b=Ue(f,y);b.shape[0]===1?a=oi(i):a=wn([i,xt(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const v=Wt(Ue(ft(g,y),p)),x=xt(o,[u,0],[n-u,s]),w=V(v,a),S=wt(a);if(u===0)o=Oe(x,ft(w,ft(S,x)));else{const $=Oe(x,ft(w,ft(S,x)));o=wn([xt(o,[0,0],[u,s]),$],0)}const k=wt(w),N=xt(r,[0,u],[n,r.shape[1]-u]);if(u===0)r=Oe(N,ft(ft(N,a),k));else{const $=Oe(N,ft(ft(N,a),k));r=wn([xt(r,[0,0],[n,u]),$],1)}return[a,o,r]}),at([c,d,h])}return!e&&n>s&&(r=xt(r,[0,0],[n,s]),o=xt(o,[0,0],[s,s])),[r,o]})}const qae=M({qr_:Hae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Is;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Is||(Is={}));function Kae(t,e,n=Is.SUM_BY_NONZERO_WEIGHTS){const s=E(t,"losses","computeWeightedLoss");let r=null;e!=null&&(r=E(e,"weights","computeWeightedLoss"));const o=r==null?s:V(s,r);if(n===Is.NONE)return o;if(n===Is.SUM)return ze(o);if(n===Is.MEAN){if(r==null)return ln(o);{const i=s.size/r.size,a=Ue(ze(o),ze(r));return i>1?Ue(a,qe(i)):a}}if(n===Is.SUM_BY_NONZERO_WEIGHTS){if(r==null)return Ue(ze(o),qe(s.size));{const i=V(r,Bs(s.shape)),a=Ce(ze(_u(i,qe(0))),"float32");return Ue(ze(o),a)}}throw Error(`Unknown reduction: ${n}`)}const aa=M({computeWeightedLoss_:Kae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xae(t,e,n,s=Is.SUM_BY_NONZERO_WEIGHTS){const r=E(t,"labels","absoluteDifference"),o=E(e,"predictions","absoluteDifference");let i=null;n!=null&&(i=E(n,"weights","absoluteDifference")),ds(r.shape,o.shape,"Error in absoluteDifference: ");const a=In(Oe(r,o));return aa(a,i,s)}const Yae=M({absoluteDifference_:Xae});function Qae(t,e,n,s,r=Is.SUM_BY_NONZERO_WEIGHTS){const o=E(t,"labels","cosineDistance"),i=E(e,"predictions","cosineDistance");let a=null;s!=null&&(a=E(s,"weights","cosineDistance")),ds(o.shape,i.shape,"Error in cosineDistance: ");const l=qe(1),u=Oe(l,ze(V(o,i),n,!0));return aa(u,a,r)}const Zae=M({cosineDistance_:Qae});function Jae(t,e,n,s=Is.SUM_BY_NONZERO_WEIGHTS){let r=E(t,"labels","hingeLoss");const o=E(e,"predictions","hingeLoss");let i=null;n!=null&&(i=E(n,"weights","hingeLoss")),ds(r.shape,o.shape,"Error in hingeLoss: ");const a=qe(1);r=Oe(V(qe(2),r),a);const l=Bo(Oe(a,V(r,o)));return aa(l,i,s)}const ele=M({hingeLoss_:Jae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tle(t,e,n,s=1,r=Is.SUM_BY_NONZERO_WEIGHTS){const o=E(t,"labels","huberLoss"),i=E(e,"predictions","huberLoss");let a=null;n!=null&&(a=E(n,"weights","huberLoss")),ds(o.shape,i.shape,"Error in huberLoss: ");const l=qe(s),u=In(Oe(i,o)),c=ol(u,l),d=Oe(u,c),h=pe(V(qe(.5),Lt(c)),V(l,d));return aa(h,a,r)}const nle=M({huberLoss_:tle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sle(t,e,n,s=1e-7,r=Is.SUM_BY_NONZERO_WEIGHTS){const o=E(t,"labels","logLoss"),i=E(e,"predictions","logLoss");let a=null;n!=null&&(a=E(n,"weights","logLoss")),ds(o.shape,i.shape,"Error in logLoss: ");const l=qe(1),u=qe(s),c=Wt(V(o,dr(pe(i,u)))),d=V(Oe(l,o),dr(pe(Oe(l,i),u))),h=Oe(c,d);return aa(h,a,r)}const rle=M({logLoss_:sle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ole(t,e,n,s=Is.SUM_BY_NONZERO_WEIGHTS){const r=E(t,"labels","meanSquaredError"),o=E(e,"predictions","meanSquaredError");let i=null;n!=null&&(i=E(n,"weights","meanSquaredError")),ds(r.shape,o.shape,"Error in meanSquaredError: ");const a=bv(r,o);return aa(a,i,s)}const ile=M({meanSquaredError_:ole});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ale(t,e){const n=E(t,"labels","sigmoidCrossEntropyWithLogits"),s=E(e,"logits","sigmoidCrossEntropyWithLogits");ds(n.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const r=Bo(s),o=V(s,n),i=Mg(Hs(Wt(In(s))));return pe(Oe(r,o),i)}function lle(t,e,n,s=0,r=Is.SUM_BY_NONZERO_WEIGHTS){let o=E(t,"multiClassLabels","sigmoidCrossEntropy");const i=E(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=E(n,"weights","sigmoidCrossEntropy")),ds(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),s>0){const u=qe(s),c=qe(1),d=qe(.5);o=pe(V(o,Oe(c,u)),V(d,u))}const l=ale(o,i);return aa(l,a,r)}const ule=M({sigmoidCrossEntropy_:lle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cle(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return hi((r,o,i)=>{const l=zg(o,[n],!0),u=Oe(Ce(o,"float32"),l);i([r,u]);const c=Wt(V(u,r));return{value:ze(c,[n]),gradFunc:(f,p)=>{const[m,g]=p,y=Cn(f.shape,[n]);return[V(W(f,y),Oe(Ce(m,"float32"),Hs(g))),V(W(f,y),Oe(Hs(g),Ce(m,"float32")))]}}})(t,e)}function dle(t,e,n,s=0,r=Is.SUM_BY_NONZERO_WEIGHTS){let o=E(t,"onehotLabels","softmaxCrossEntropy");const i=E(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=E(n,"weights","softmaxCrossEntropy")),ds(o.shape,i.shape,"Error in softmaxCrossEntropy: "),s>0){const u=qe(s),c=qe(1),d=qe(o.shape[1]);o=pe(V(o,Oe(c,u)),Ue(u,d))}const l=cle(o,i);return aa(l,a,r)}const hle=M({softmaxCrossEntropy_:dle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fle(t,e,n,s){const r=E(t,"indices","sparseFillEmptyRows","int32"),o=E(e,"values","sparseFillEmptyRows"),i=E(n,"denseShape","sparseFillEmptyRows","int32"),a=E(s,"defaultValue","sparseFillEmptyRows",o.dtype);if(r.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:r,values:o,denseShape:i,defaultValue:a},u=L.runKernel(Db,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const ple=M({sparseFillEmptyRows_:fle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mle(t,e,n){const s=E(t,"inputIndices","sparseReshape","int32"),r=E(e,"inputShape","sparseReshape","int32"),o=E(n,"newShape","sparseReshape","int32");if(s.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${s.shape}`);if(r.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${r.shape}`);if(o.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${o.shape}`);const i={inputIndices:s,inputShape:r,newShape:o},a=L.runKernel(Ob,i);return{outputIndices:a[0],outputShape:a[1]}}const gle=M({sparseReshape_:mle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yle(t,e,n){const s=E(t,"data","sparseSegmentMean"),r=E(e,"indices","sparseSegmentMean","int32"),o=E(n,"segmentIds","sparseSegmentMean","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${r.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${o.shape}`);const i={data:s,indices:r,segmentIds:o};return L.runKernel(Fb,i)}const ble=M({sparseSegmentMean_:yle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vle(t,e,n){const s=E(t,"data","sparseSegmentSum"),r=E(e,"indices","sparseSegmentSum","int32"),o=E(n,"segmentIds","sparseSegmentSum","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${r.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${o.shape}`);const i={data:s,indices:r,segmentIds:o};return L.runKernel(Lb,i)}const xle=M({sparseSegmentSum_:vle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wle(t,e,n,s,r,o,i,a){const l=E(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=E(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:s,leftPad:r,rightPad:o,padWidth:i,preserveShortSequences:a},d={data:l,dataSplits:u},h=L.runKernel(Bb,d,c);return{nGrams:h[0],nGramsSplits:h[1]}}const Sle=M({stringNGrams_:wle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cle(t,e,n=!0){const s=E(t,"input","stringSplit","string"),r=E(e,"delimiter","stringSplit","string");if(s.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${s.shape}`);if(r.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${r.shape}`);const o={skipEmpty:n},i={input:s,delimiter:r},a=L.runKernel(Vb,i,o);return{indices:a[0],values:a[1],shape:a[2]}}const kle=M({stringSplit_:Cle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nle(t,e){const n=E(t,"input","stringToHashBucketFast","string"),s={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const r={input:n};return L.runKernel(Ub,r,s)}const Tle=M({stringToHashBucketFast_:Nle});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $le(t,e,n,s=!0){const r=E(t,"input","staticRegexReplace","string"),o={pattern:e,rewrite:n,replaceGlobal:s};return L.runKernel(Tg,{x:r},o)}const Ele=M({staticRegexReplace_:$le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xM={fft:Kg,ifft:Rd,rfft:Xg,irfft:yv},wM={hammingWindow:nae,hannWindow:gM,frame:yM,stft:iae},$r={flipLeftRight:cae,grayscaleToRGB:hae,resizeNearestNeighbor:vM,resizeBilinear:bM,rgbToGrayscale:pae,rotateWithOffset:gae,cropAndResize:lae,nonMaxSuppression:bae,nonMaxSuppressionAsync:Tae,nonMaxSuppressionWithScore:Eae,nonMaxSuppressionWithScoreAsync:Rae,nonMaxSuppressionPadded:Aae,nonMaxSuppressionPaddedAsync:Oae,threshold:zae,transform:Vae},t$={bandPart:Wae,gramSchmidt:Gae,qr:qae},SM={absoluteDifference:Yae,computeWeightedLoss:aa,cosineDistance:Zae,hingeLoss:ele,huberLoss:nle,logLoss:rle,meanSquaredError:ile,sigmoidCrossEntropy:ule,softmaxCrossEntropy:hle},CM={sparseFillEmptyRows:ple,sparseReshape:gle,sparseSegmentMean:ble,sparseSegmentSum:xle},kM={stringNGrams:Sle,stringSplit:kle,stringToHashBucketFast:Tle,staticRegexReplace:Ele};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ile=new Map,bC=new Map;class Ju{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class kr{constructor(){this.classNameMap={}}static getMap(){return kr.instance==null&&(kr.instance=new kr),kr.instance}static register(e){kr.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ge(t,e,n){T(t.className!=null,()=>"Class being registered does not have the static className property defined."),T(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),T(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const s=n,r=e+">"+s;return kr.register(t),Ile.set(r,t),bC.set(t,r),t}function Rle(t){return bC.has(t)?bC.get(t):t.className}const _le=Object.freeze(Object.defineProperty({__proto__:null,Serializable:Ju,SerializationMap:kr,getRegisteredName:Rle,registerClass:ge},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class la extends Ju{minimize(e,n=!1,s){const{value:r,grads:o}=this.computeGradients(e,s);if(s!=null){const i=s.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(i)}else this.applyGradients(o);return at(o),n?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return IP(e,n)}dispose(){this.iterations_!=null&&at(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:qe(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(la,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n$ extends la{static get className(){return"Adadelta"}constructor(e,n,s=null){super(),this.learningRate=e,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=L.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const o=L.registeredVariables[s],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${s}/accum_grad`,variable:ee(()=>St(o).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${s}/accum_var`,variable:ee(()=>St(o).variable(i))});const a=Array.isArray(e)?e[r].tensor:e[s];if(a==null)return;const l=this.accumulatedGrads[r].variable,u=this.accumulatedUpdates[r].variable;ee(()=>{const c=pe(V(l,this.rho),V(Lt(a),1-this.rho)),d=V(Ue(Yn(pe(u,this.epsilon)),Yn(pe(l,this.epsilon))),a),h=pe(V(u,this.rho),V(Lt(d),1-this.rho));l.assign(c),u.assign(h);const f=pe(V(d,-this.learningRate),o);o.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(at(this.accumulatedGrads.map(e=>e.variable)),at(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,s=!1;this.accumulatedGrads=e.slice(0,n).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedUpdates=e.slice(n,n*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s$ extends la{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const o=L.registeredVariables[s];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${s}/accumulator`,variable:ee(()=>Xu(o.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[s];if(i==null)return;const a=this.accumulatedGrads[r].variable;ee(()=>{const l=pe(a,Lt(i));a.assign(l);const u=pe(V(Ue(i,Yn(pe(l,L.backend.epsilon()))),-this.learningRate),o);o.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&at(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r$ extends la{static get className(){return"Adam"}constructor(e,n,s,r=null){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ee(()=>{this.accBeta1=qe(n).variable(),this.accBeta2=qe(s).variable()}),r==null&&(this.epsilon=L.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);ee(()=>{const s=Oe(1,this.accBeta1),r=Oe(1,this.accBeta2);n.forEach((o,i)=>{const a=L.registeredVariables[o],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:ee(()=>St(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${o}/v`,variable:ee(()=>St(a).variable(l))});const u=Array.isArray(e)?e[i].tensor:e[o];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,h=pe(V(c,this.beta1),V(u,1-this.beta1)),f=pe(V(d,this.beta2),V(Lt(u),1-this.beta2)),p=Ue(h,s),m=Ue(f,r);c.assign(h),d.assign(f);const g=pe(V(Ue(p,pe(Yn(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(V(this.accBeta1,this.beta1)),this.accBeta2.assign(V(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&at(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&at(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ee(()=>{this.accBeta1.assign(di(this.beta1,this.iterations_+1)),this.accBeta2.assign(di(this.beta2,this.iterations_+1))});const n=e.length/2,s=!1;this.accumulatedFirstMoment=e.slice(0,n).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o$ extends la{static get className(){return"Adamax"}constructor(e,n,s,r=null,o=0){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ee(()=>{this.iteration=qe(0).variable(),this.accBeta1=qe(n).variable()}),r==null&&(this.epsilon=L.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);ee(()=>{const s=Oe(1,this.accBeta1),r=Ue(-this.learningRate,pe(V(this.iteration,this.decay),1));n.forEach((o,i)=>{const a=L.registeredVariables[o],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:St(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${o}/v`,variable:St(a).variable(l)});const u=Array.isArray(e)?e[i].tensor:e[o];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,h=pe(V(c,this.beta1),V(u,1-this.beta1)),f=V(d,this.beta2),p=In(u),m=xi(f,p);c.assign(h),d.assign(m);const g=pe(V(Ue(r,s),Ue(h,pe(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(pe(this.iteration,1)),this.accBeta1.assign(V(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&at(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&at(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _v extends la{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const o=Array.isArray(e)?e[r].tensor:e[s];if(o==null)return;const i=L.registeredVariables[s];ee(()=>{const a=pe(V(this.c,o),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Fn(qe(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i$ extends _v{static get className(){return"Momentum"}constructor(e,n,s=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=qe(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const o=L.registeredVariables[s];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${s}/momentum`,variable:ee(()=>St(o).variable(!1))});const i=this.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[s];a!=null&&ee(()=>{let l;const u=pe(V(this.m,i),a);this.useNesterov?l=pe(V(this.c,pe(a,V(u,this.m))),o):l=pe(V(this.c,u),o),i.assign(u),o.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&at(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a$ extends la{static get className(){return"RMSProp"}constructor(e,n=.9,s=0,r=null,o=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=s,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,r==null&&(this.epsilon=L.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,r)=>{const o=L.registeredVariables[s],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${s}/rms`,variable:ee(()=>St(o).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${s}/momentum`,variable:ee(()=>St(o).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${s}/mg`,variable:ee(()=>St(o).variable(i))});const a=Array.isArray(e)?e[r].tensor:e[s];if(a==null)return;const l=this.accumulatedMeanSquares[r].variable,u=this.accumulatedMoments[r].variable;ee(()=>{const c=pe(V(l,this.decay),V(Lt(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[r].variable,h=pe(V(d,this.decay),V(a,1-this.decay)),f=Ue(V(a,this.learningRate),Yn(Oe(c,pe(Lt(h),this.epsilon)))),p=pe(V(u,this.momentum),f);l.assign(c),d.assign(h),u.assign(p);const m=Oe(o,p);o.assign(m)}else{const d=pe(V(l,this.decay),V(Lt(a),1-this.decay)),h=pe(V(u,this.momentum),Ue(V(a,this.learningRate),Yn(pe(d,this.epsilon))));l.assign(d),u.assign(h);const f=Oe(o,h);o.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&at(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&at(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&at(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,s=!1;this.accumulatedMeanSquares=e.slice(0,n).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.accumulatedMoments=e.slice(n,n*2).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ale=[n$,s$,r$,o$,i$,a$,_v];function Dle(){for(const t of Ale)ge(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ole="model",Fle=".json",Lle=".weights.bin";function k3(t){return new Promise(e=>setTimeout(e)).then(t)}class Du{constructor(e){if(!se().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Du.URL_SCHEME)&&(e=e.slice(Du.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Ole),this.modelJsonFileName=e+Fle,this.weightDataFileName=e+Lle}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=zo.join(e.weightData),s=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o=uP(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await k3(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=s,await k3(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:_g(e)}}}}Du.URL_SCHEME="downloads://";class Ple{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const s=new FileReader;s.onload=r=>{const o=JSON.parse(r.target.result),i=o.modelTopology;if(i==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const l=jN(o,u=>this.loadWeights(u));e(l)},s.onerror=r=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(this.jsonFile)})}loadWeights(e){const n=[],s=[];for(const i of e)n.push(...i.weights),s.push(...i.paths);const r=this.checkManifestAndWeightFiles(e),o=s.map(i=>this.loadWeightsFile(i,r[i]));return Promise.all(o).then(i=>[n,i])}loadWeightsFile(e,n){return new Promise((s,r)=>{const o=new FileReader;o.onload=i=>{const a=i.target.result;s(a)},o.onerror=i=>r(`Failed to weights data from file of path '${e}'.`),o.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],s=this.weightsFiles.map(o=>w3(o.name)),r={};for(const o of e)o.paths.forEach(i=>{const a=w3(i);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),s.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);r[i]=this.weightsFiles[s.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}const Mle=t=>se().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Du.URL_SCHEME)?zle(t.slice(Du.URL_SCHEME.length)):null;rn.registerSaveRouter(Mle);function zle(t="model"){return new Du(t)}function Ble(t){return new Ple(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3(t,e,n,s){i(t),n=n??0,s=s??1,a(n,s);let r=0;const o=l=>(l.then(u=>{const c=n+ ++r/t.length*(s-n);return e(c),u}),l);function i(l){T(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){T(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),T(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),T(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function NM(t,e){e==null&&(e={});const n=e.fetchFunc==null?se().platform.fetch:e.fetchFunc,s=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(s):await N3(s,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await N3(a,e.onProgress,.5,1)}function Vle(t,e){var n;const s=e.fetchFunc==null?se().platform.fetch:e.fetchFunc;let r=0,o;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var a;r<t.length;){o||(o=(await s(t[r],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await o.read();if(l){r++,o=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,r/t.length);continue}i.enqueue(u);return}i.close()}})}async function Ule(t,e="",n,s){return TM(i=>NM(i,{requestInit:s}))(t,e,n)}function TM(t){return async(e,n="",s)=>{const r=e.map(()=>!1),o={},i=s!=null?s.map(()=>!1):[],a=[];if(e.forEach((f,p)=>{let m=0;f.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,b=Nu[y]*le(g.shape),v=()=>{r[p]=!0,o[p]==null&&(o[p]=[]),o[p].push({manifestEntry:g,groupOffset:m,sizeBytes:b})};s!=null?s.forEach((x,w)=>{x===g.name&&(v(),i[w]=!0)}):v(),a.push(g.name),m+=b})}),!i.every(f=>f)){const f=s.filter((p,m)=>!i[m]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=r.reduce((f,p,m)=>(p&&f.push(m),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(p=>{const m=n+(n.endsWith("/")?"":"/")+p;u.push(m)})});const c=await t(u),d={};let h=0;return l.forEach(f=>{const p=e[f].paths.length,m=new zo(c.slice(h,h+p));o[f].forEach(y=>{const b=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),v=oP(b,[y.manifestEntry]);for(const x in v)d[x]=v[x]}),h+=p}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wle="application/octet-stream",jle="application/json";class l${constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(T(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=se().platform.fetch,T(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&T(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=uP(e,s);if(n.body.append("model.json",new Blob([JSON.stringify(r)],{type:jle}),"model.json"),e.weightData!=null){const i=zo.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:Wle}),"model.weights.bin")}const o=await this.fetch(this.path,n);if(o.ok)return{modelArtifactsInfo:_g(e),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const s=n.modelTopology,r=n.weightsManifest;if(s==null&&r==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return jN(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),s=dC(e.weightsManifest),r=()=>Vle(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:s,getWeightStream:r})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,r]=Gle(n),o=this.weightPathPrefix||s,i=[],a=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(u)):i.push(o+u+r);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){const n=await this.getWeightUrls(e),s=dC(e),r=await NM(n,this.loadOptions);return[s,r]}}l$.URL_SCHEME_REGEX=/^https?:\/\//;function Gle(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),s=t.substring(0,e),r=n>e?t.substring(n):"";return[s+"/",r]}function vC(t){return t.match(l$.URL_SCHEME_REGEX)!=null}const $M=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(s=>vC(s)):n=vC(t),n)return u$(t,e)}return null};rn.registerSaveRouter($M);rn.registerLoadRouter($M);function u$(t,e){return new l$(t,e)}function Hle(t,e){return u$(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aw{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class EM{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class qle{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Kle(t,e,n,s){const r=arguments;return new qle(IM(...r))}function IM(t,e,n,s){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new aw(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new aw({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new aw({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:s}))}function Xle(t){return new EM(t)}function Yle(t){return new EM(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:zo,browserFiles:Ble,browserHTTPRequest:Hle,concatenateArrayBuffers:lP,copyModel:Ene,decodeWeights:oP,decodeWeightsStream:aP,encodeWeights:cC,fromMemory:Kle,fromMemorySync:IM,getLoadHandlers:pne,getModelArtifactsForJSON:jN,getModelArtifactsForJSONSync:cP,getModelArtifactsInfoForJSON:_g,getSaveHandlers:dP,getWeightSpecs:dC,http:u$,isHTTPScheme:vC,listModels:Tne,loadWeights:Ule,moveModel:Ine,registerLoadRouter:fne,registerSaveRouter:hne,removeModel:$ne,weightsLoaderFactory:TM,withSaveHandler:Xle,withSaveHandlerSync:Yle},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qle(t,e,n){const s=E(t,"labels","confusionMatrix"),r=E(e,"predictions","confusionMatrix");T(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),T(s.rank===1,()=>`Expected the rank of labels to be 1, but got ${s.rank}`),T(r.rank===1,()=>`Expected the rank of predictions to be 1, but got ${r.rank}`),T(s.shape[0]===r.shape[0],()=>`Mismatch in the number of examples: ${s.shape[0]} vs. ${r.shape[0]}. Labels and predictions should have the same number of elements.`),T(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const o=$d(Ce(s,"int32"),n),i=$d(Ce(r,"int32"),n),a=wt(o),l=ft(a,i);return Ce(l,"int32")}const Zle=M({confusionMatrix_:Qle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jle=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:Zle},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Rl,T3=!1;function RM(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,s=!1,r=!1,o=!1,i=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)s=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)r=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else if(t.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Fp(m1,L.backendName)!=null){const p={pixels:t},m={numChannels:e};return L.runKernel(m1,p,m)}const[u,c]=r?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(i)d=t.getContext("2d").getImageData(0,0,u,c).data;else if(s||n)d=t.data;else if(o||r||a){if(Rl==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Rl=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Rl=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Rl.canvas.width=u,Rl.canvas.height=c,Rl.drawImage(t,0,0,u,c),d=Rl.getImageData(0,0,u,c).data}let h;if(e===4)h=new Int32Array(d);else{const p=u*c;h=new Int32Array(p*e);for(let m=0;m<p;m++)for(let g=0;g<e;++g)h[m*e+g]=d[m*4+g]}return GT(h,[c,u,e],"int32")}function eue(t){return t!=null&&t.data instanceof Uint8Array}function tue(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function nue(t){return t!=null&&t.width!==0&&t.height!==0}function sue(t){return tue()&&!(t instanceof ImageBitmap)&&nue(t)&&!eue(t)}async function rue(t,e=3){let n=null;if(se().getBool("WRAP_TO_IMAGEBITMAP")&&sue(t)){let s;try{s=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{s=null}s!=null&&s.width===t.width&&s.height===t.height?n=s:n=t}else n=t;return RM(n,e)}function _M(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function oue(t){const e=(t==null?void 0:t.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function iue(t,e){let n=E(t,"img","toPixels");if(!(t instanceof Et)){const u=n;n=Ce(u,"int32"),u.dispose()}_M(n);const[s,r]=n.shape.slice(0,2),o=n.rank===2?1:n.shape[2],i=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(r*s*4);for(let u=0;u<s*r;++u){const c=[0,0,0,255];for(let h=0;h<o;h++){const f=i[u*o+h];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);o===1?(c[0]=f*a,c[1]=f*a,c[2]=f*a):c[h]=f*a}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){T3||Fp(ob,L.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),T3=!0),e.width=r,e.height=s;const u=e.getContext("2d"),c=new ImageData(l,r,s);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}function aue(t,e,n){let s=E(t,"img","draw");if(!(t instanceof Et)){const i=s;s=Ce(i,"int32"),i.dispose()}_M(s),oue(n==null?void 0:n.imageOptions);const r={image:s},o={canvas:e,options:n};L.runKernel(ob,r,o)}const d$=M({fromPixels_:RM}),lue=Object.freeze(Object.defineProperty({__proto__:null,draw:aue,fromPixels:d$,fromPixelsAsync:rue,toPixels:iue},Symbol.toStringTag,{value:"Module"}));function Av(t,e){const n=t.shape.length,s=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[s-1]} vs. ${n}`);if(le(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const r=e.shape,o=r[r.length-1];let i=1;for(let d=0;d<r.length-1;++d)i*=r[d];const a=t.shape,l=r.slice();l.pop();let u=1;for(let d=o;d<n;++d)u*=a[d],l.push(a[d]);const c=[...je(t.shape).map(d=>d/u),1].slice(0,o);return[l,i,u,c]}const uue=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:Av},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xC=-2,cue=-1;function h$(t,e,n){const s=t.shape.length;T(s===e.length,()=>`Error in slice${s}D: Length of begin ${e} must match the rank of the array (${s}).`),T(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let r=0;r<s;++r)T(e[r]+n[r]<=t.shape[r],()=>`Error in slice${s}D: begin[${r}] + size[${r}] (${e[r]+n[r]}) would overflow input.shape[${r}] (${t.shape[r]})`)}function due(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function f$(t,e,n){const s=[];for(let r=0;r<t.length;r++)s[r]=Math.ceil((e[r]-t[r])/n[r]);return s}function AM(t,e,n,s){const r=[...t];for(let o=r.length;o<s.length;o++)r.push(1);for(let o=0;o<n;o++)o===0?r[e]=1:(r.splice(e,0,1),r.pop());return r}function DM(t,e,n){return n<=t?n:n-(e-1)}function OM(t,e){const n=[];for(let s=0;s<t;s++)n.push(e+s);return n}function hue(t,e,n,s,r,o,i,a,l){const u=t.length;let c=new Array(u),d=new Array(u),h=new Array(u);if(e.length&&n>0){const f=e[0],p=n+1;c=FM(i,f,p,s,t),d=LM(a,f,p,r,t),h=AM(o,f,p,t)}else for(let f=0;f<u;f++)c[f]=MM(i,s,o,t,f,l),d[f]=zM(a,r,o,t,f,l),h[f]=PM(o,f,l);return{begin:c,end:d,strides:h}}function FM(t,e,n,s,r){const o=[...r],i=OM(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=0;else{const l=DM(e,n,a);let u=s[l];t&1<<l&&(u=0),o[a]=u}return o}function LM(t,e,n,s,r){const o=[...r],i=OM(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{const l=DM(e,n,a);let u=s[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),o[a]=u}for(let a=0;a<o.length;a++){const l=r[a];o[a]<0&&(o[a]+=l),o[a]=Ja(0,o[a],r[a])}return o}function PM(t,e,n){let s=t[e];return(n&1<<e||s==null)&&(s=1),s}function MM(t,e,n,s,r,o){let i=e[r];const a=n[r]||1;(t&1<<r||o&1<<r||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=s[r];return i<0&&(i+=l),i=Ja(0,i,l-1),i}function zM(t,e,n,s,r,o){let i=e[r];const a=n[r]||1;(t&1<<r||o&1<<r||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=s[r];return i<0&&(i+=l),a>0?i=Ja(0,i,l):i=Ja(-1,i,l-1),i}function p$(t,e,n){let s=n.length;for(let r=0;r<n.length;r++)if(n[r]>1){s=r;break}for(let r=s+1;r<n.length;r++)if(e[r]>0||n[r]!==t[r])return!1;return!0}function m$(t,e){let n=t.length>0?t[t.length-1]:1;for(let s=0;s<t.length-1;s++)n+=t[s]*e[s];return n}function Dv(t,e,n){let s;const r=t.shape.length;typeof e=="number"?s=[e,...new Array(r-1).fill(0)]:e.length<r?s=e.concat(new Array(r-e.length).fill(0)):s=e.slice(),s.forEach(i=>{T(i!==-1,()=>"slice() does not support negative begin indexing.")});let o;return n==null?o=new Array(r).fill(-1):typeof n=="number"?o=[n,...new Array(r-1).fill(-1)]:n.length<r?o=n.concat(new Array(r-n.length).fill(-1)):o=n,o=o.map((i,a)=>i>=0?i:(T(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-s[a])),[s,o]}function g$(t,e,n,s,r,o,i,a,l){let u;if(s==null?(u=new Array(e.length),u.fill(1)):u=s,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:r,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let v=0;v<d.dims;v++)c&&1<<v&a&&d.numAddAxisAfterEllipsis++,1<<v&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};fue(d,h);let f=!0,p=!0,m=!0;const g=[],y=[];for(let v=0;v<t.length;++v){if(h.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);const x=!!(h.shrinkAxisMask&1<<v),w=t[v];if(w===-1){g.push(x?1:-1);continue}const S=[h.beginMask&1<<v,h.endMask&1<<v],k=[h.strides[v]>0?0:-1,h.strides[v]>0?w:w-1];if(x&&h.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[v]===1;const N=!!(h.beginMask&1<<v&&h.endMask&1<<v);if(h.beginValid&&h.endValid){if(x){const O=h.begin[v]<0?w+h.begin[v]:h.begin[v];if(h.begin[v]=O,h.end[v]=h.begin[v]+1,O<0||O>=w)throw Error(`slice index ${h.begin[v]} of dimension ${v} out of bounds.`)}else h.begin[v]=$3(h.begin[v],0,h.strides[v],w,S,k),h.end[v]=$3(h.end[v],1,h.strides[v],w,S,k);const A=h.strides[v]===1&&h.begin[v]===0&&h.end[v]===w;f=f&&A,p=p&&(v===0&&h.strides[v]===1||A)}else f=f&&h.strides[v]===1&&N,p=p&&(v===0&&h.strides[v]===1||N);let $,I=!1;if(h.beginValid&&h.endValid?($=h.end[v]-h.begin[v],I=!0):x?($=1,I=!0):N&&w>=0&&(h.strides[v]<0?$=-w:$=w,I=!0),I){let A;$===0||$<0!=h.strides[v]<0?A=0:A=Math.trunc($/h.strides[v])+($%h.strides[v]!==0?1:0),g.push(A)}else g.push(-1)}for(let v=0;v<h.finalShapeGatherIndices.length;++v){const x=h.finalShapeGatherIndices[v];x>=0?y.push(g[x]):x===xC&&y.push(1)}return{finalShapeSparse:y.filter((v,x)=>h.finalShapeGatherIndices[x]!==xC),finalShape:y,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function fue(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let s=0;s<t.dims;s++)if(1<<s&t.ellipsisMask){const r=Math.min(e.dims-(t.dims-s)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<r;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&t.newAxisMask)e.finalShapeGatherIndices.push(xC),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[s]),t.end!=null&&(e.end[n]=t.end[s]),e.strides[n]=t.strides[s],t.beginMask&1<<s&&(e.beginMask|=1<<n),t.endMask&1<<s&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<s?(e.finalShapeGatherIndices.push(cue),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(s)),e.inputShapeGatherIndicesSparse[n]=s,n++}}function $3(t,e,n,s,r,o){if(r[e])return n>0?o[e]:o[e+1&1];{const i=t<0?s+t:t;return i<o[0]?o[0]:i>o[1]?o[1]:i}}const BM=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:h$,computeFlatOffset:m$,computeOutShape:f$,getNormalizedAxes:hue,isSliceContinous:p$,maskToAxes:due,parseSliceParams:Dv,sliceInfo:g$,startForAxis:MM,startIndicesWithElidedDims:FM,stopForAxis:zM,stopIndicesWithElidedDims:LM,stridesForAxis:PM,stridesWithElidedDims:AM},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const pue="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VM{static sgd(e){return new _v(e)}static momentum(e,n,s=!1){return new i$(e,n,s)}static rmsprop(e,n=.9,s=0,r=null,o=!1){return new a$(e,n,s,r,o)}static adam(e=.001,n=.9,s=.999,r=null){return new r$(e,n,s,r)}static adadelta(e=.001,n=.95,s=null){return new n$(e,n,s)}static adamax(e=.002,n=.9,s=.999,r=null,o=0){return new o$(e,n,s,r,o)}static adagrad(e,n=.1){return new s$(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pl=VM;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mue=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function y$(){return new Promise(t=>mue(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$(t,e){const n=t[0].length;t.forEach((r,o)=>{T(r.length===n,()=>`Error in concat${n}D: rank of tensors[${o}] must be the same as the rank of the rest (${n})`)}),T(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=t[0];t.forEach((r,o)=>{for(let i=0;i<n;i++)T(i===e||r[i]===s[i],()=>`Error in concat${n}D: Shape of tensors[${o}] (${r}) does not match the shape of the rest (${s}) along the non-concatenated axis ${o}.`)})}function ii(t,e){const n=t[0].slice();for(let s=1;s<t.length;s++)n[e]+=t[s][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var To;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(To||(To={}));function UM(t,e,n){let s=new Array;if(n==null&&e==null)return s;if(e==null)for(;s.length<t+n.length;)s.push(-1);else s=e.slice();if(n==null)return s;if(t+n.length!==s.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${s.length}`);for(let r=1;r<n.length;++r){const o=n[r],i=s[s.length-n.length+r],a=s[i];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${r+t}] = ${o} but shape[${r+t}] = ${a}`)}else s[i]=o}return s}function WM(t){const e={FIRST_DIM_SIZE:To.FIRST_DIM_SIZE,VALUE_ROWIDS:To.VALUE_ROWIDS,ROW_LENGTHS:To.ROW_LENGTHS,ROW_SPLITS:To.ROW_SPLITS,ROW_LIMITS:To.ROW_LIMITS,ROW_STARTS:To.ROW_STARTS},n=[];for(const s of t)if(s in e)n.push(e[s]);else break;return n}function jM(t){return t.length===0?0:t[0]===To.FIRST_DIM_SIZE?t.length-1:t.length}function GM(t,e){if(t==null||e==null)return;const n=t.length,s=e.length;if(n>=s)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${s})`);for(let r=0;r<Math.min(n,s-1);++r){const o=t[r],i=e[r+1];if(o>=0&&i>=0&&o!==1&&o!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${r-t.length}] = ${o} but ragged tensor input.flatValues.shape[${r-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$=30;function Ov(t){return t<=v$?t:h1(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$(t,e,n){const s=n*(typeof t=="number"?t:t[0]),r=e*(typeof t=="number"?t:t[1]);return[s,r]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yg(t,e,n,s=!0){let r=[];if(s)r=r.concat(e.slice(0)),r.push(t[0]/n),r=r.concat(t.slice(1));else{r=r.concat(t[0]);const o=e.length;for(let i=0;i<o;++i)r=r.concat([t[i+1]/e[i],e[i]]);r=r.concat(t.slice(o+1))}return r}function Qg(t,e,n=!0){const s=[];if(n){s.push(e);for(let r=e+1;r<t;++r)r<=2*e?(s.push(r),s.push(r-(e+1))):s.push(r)}else{const r=[],o=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?o.push(i):r.push(i);s.push(...r),s.push(0),s.push(...o)}return s}function Zg(t,e,n,s=!0){const r=[];s?r.push(t[0]/n):r.push(t[0]*n);for(let o=1;o<t.length;++o)o<=e.length?s?r.push(e[o-1]*t[o]):r.push(t[o]/e[o-1]):r.push(t[o]);return r}function w$(t,e){const n=[0];for(let s=0;s<e;++s)n.push(t[s][0]);return n}function S$(t,e,n){const s=t.slice(0,1);for(let r=0;r<n;++r)s.push(t[r+1]-e[r][0]-e[r][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fv=1.7580993408473768,Lv=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$=.3275911,k$=.254829592,N$=-.284496736,T$=1.421413741,$$=-1.453152027,E$=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xi(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let s=0;s<n.length;s+=2)n[s]=t[s/2],n[s+1]=e[s/2];return n}function HM(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=t[s],n[s/2]=t[s+1];return{real:e,imag:n}}function qM(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let r=0;r<t.length;r+=4)n[Math.floor(r/4)]=t[r],s[Math.floor(r/4)]=t[r+1];return{real:n,imag:s}}function KM(t){const e=Math.floor(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let r=2;r<t.length;r+=4)n[Math.floor(r/4)]=t[r],s[Math.floor(r/4)]=t[r+1];return{real:n,imag:s}}function I$(t,e){const n=t[e*2],s=t[e*2+1];return{real:n,imag:s}}function XM(t,e,n,s){t[s*2]=e,t[s*2+1]=n}function YM(t,e){const n=new Float32Array(t/2),s=new Float32Array(t/2);for(let r=0;r<Math.ceil(t/2);r++){const o=(e?2:-2)*Math.PI*(r/t);n[r]=Math.cos(o),s[r]=Math.sin(o)}return{real:n,imag:s}}function QM(t,e,n){const s=(n?2:-2)*Math.PI*(t/e),r=Math.cos(s),o=Math.sin(s);return{real:r,imag:o}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lw="->",gue=/->/g,E3=",",I3="...";function R$(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(gue,"").length)/lw.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${lw}").`);const[s,r]=t.split(lw);T(s.indexOf(I3)===-1,()=>`The ellipsis notation ("${I3}") is not supported yet.`);const o=s.split(E3),i=o.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<r.length;++h){const f=r[h];if(!o.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<s.length;++h){const f=s[h];a.indexOf(f)===-1&&f!==E3&&a.push(f)}const l=new Array(o.length);for(let h=0;h<i;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error(`Found duplicate axes in input component ${o[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<o[h].length;++f)l[h].push(a.indexOf(o[h][f]))}const u=a.length,c=r.length,d=[];for(let h=c;h<u;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function _$(t,e){let n=new Array(t);n.fill(-1);for(let r=0;r<e.length;++r)n[e[r]]=r;const s=[];for(let r=0;r<t;++r)n[r]===-1&&s.push(r);return n=n.filter(r=>r!==-1),{permutationIndices:n,expandDims:s}}function A$(t,e,n){const s=new Array(t);for(let r=0;r<n.length;++r){const o=n[r].shape;for(let i=0;i<e[r].length;++i)s[e[r][i]]===void 0?s[e[r][i]]=o[i]:T(s[e[r][i]]===o[i],()=>`Expected dimension ${s[e[r][i]]} at axis ${i} of input shaped ${JSON.stringify(o)}, but got dimension ${o[i]}`)}}function D$(t,e){const n=t,s=[];let r=0;t.length===0&&n.push(-1),r=t.length+1;for(let i=0;i<r;++i)s.push([]);const o=[];for(let i=0;i<n.length;++i){const a=n[i],l=yue(e,a);for(const u of l)o.indexOf(u)===-1&&(s[i].push(u),o.push(u))}return{path:n,steps:s}}function O$(t){return t.every((e,n)=>e===n)}function yue(t,e){const n=[];for(let s=0;s<t.length;++s)(t[s].length===0||t[s].indexOf(e)!==-1||e===-1)&&n.push(s);return n}function F$(t,e,n=0){let s=[];if(typeof e=="number")T(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),s=new Array(e).fill(t.shape[n]/e);else{const r=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);T(r<=1,()=>"There should be only one negative value in split array.");const o=e.indexOf(-1);if(o!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[o]=t.shape[n]-i}T(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),s=e}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZM(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function JM(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function e6(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function n6(t,e){return`size ${t} must be non-negative, not ${e}`}function s6(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function r6(t,e){const n=le(t),s=le(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${t} outputShape= ${e}`}function o6(t,e){const n=le(t),s=le(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wC(){return"segment ids must be >= 0"}function i6(){return"segment ids are not increasing"}function a6(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function l6(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6(t,e){let n=!1,s;for(t<=v$?(s=t,n=!0):s=h1(t,Math.floor(Math.sqrt(t)));!n;)s>e||s===t?n=!0:s=h1(t,s+1);return s}function c6(t,e,n){const s=[],r=t.length;for(let o=0;o<r;o++)o!==e?s.push(t[o]):s.push(n);return s}function L$(t,e,n,s){const r=e.shape.length,o=t.shape.length;if(s!==0&&(s<-r||s>r))throw new Error(`Expect batchDims in the range of [-${r}, ${r}], but got ${s}`);if(s<0&&(s+=r),s>o)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${o}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let d=0;d<s;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<s;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=s;d<n;d++)a.push(t.shape[d]),u*=t.shape[d];for(let d=s;d<r;d++)a.push(e.shape[d]);for(let d=n+1;d<o;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:a}}const bue=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:L$,computeOutShape:c6,segOpComputeOptimalWindowSize:u6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yi(t){try{return t.map(e=>Gi(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function d6(t){return t.map(e=>ri(e))}const h6=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:k$,ERF_A2:N$,ERF_A3:T$,ERF_A4:$$,ERF_A5:E$,ERF_P:C$,PARALLELIZE_THRESHOLD:v$,get RowPartitionType(){return To},SELU_SCALE:Lv,SELU_SCALEALPHA:Fv,applyActivation:Tv,assertAndGetBroadcastShape:st,assertAxesAreInnerMostDims:fs,assertParamsConsistent:b$,assignToTypedArray:XM,axesAreInnerMostDims:bT,calculateShapes:kl,checkEinsumDimSizes:A$,checkPadOnDimRoundingMode:Ds,combineLocations:TP,combineRaggedTensorToTensorShapes:UM,complexWithEvenIndex:qM,complexWithOddIndex:KM,computeConv2DInfo:Qn,computeConv3DInfo:xl,computeDefaultPad:eT,computeDilation2DInfo:Ag,computeOptimalWindowSize:Ov,computeOutAndReduceShapes:Zn,computeOutShape:ii,computePool2DInfo:co,computePool3DInfo:na,convertConv2DDataFormat:sa,decodeEinsumEquation:R$,eitherStridesOrDilationsAreOne:hs,expandShapeToKeepDim:Cn,exponent:QM,exponents:YM,fromStringArrayToUint8:d6,fromUint8ToStringArray:Yi,getAxesPermutation:dn,getBroadcastDims:Ru,getComplexWithIndex:I$,getEinsumComputePath:D$,getEinsumPermutation:_$,getFusedBiasGradient:Nv,getFusedDyActivation:kv,getImageCenter:x$,getInnerMostAxes:kn,getPermuted:Qg,getRaggedRank:jM,getReductionAxes:An,getReshaped:Yg,getReshapedPermuted:Zg,getRowPartitionTypesHelper:WM,getSliceBeginCoords:w$,getSliceSize:S$,getSparseFillEmptyRowsIndicesDenseShapeMismatch:ZM,getSparseFillEmptyRowsNegativeIndexErrorMessage:JM,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:e6,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:s6,getSparseReshapeInputOutputMismatchErrorMessage:o6,getSparseReshapeInputOutputMultipleErrorMessage:r6,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:t6,getSparseReshapeNegativeOutputDimErrorMessage:n6,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:l6,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:wC,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:i6,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:a6,getUndoAxesPermutation:wl,isIdentityPermutation:O$,log:hte,mergeRealAndImagArrays:Xi,prepareAndValidate:Av,prepareSplitSize:F$,segment_util:bue,shouldFuse:$v,slice_util:BM,splitRealAndImagArrays:HM,stridesOrDilationsArePositive:Iu,tupleValuesAreOne:sl,upcastType:Ws,validateDefaultValueShape:GM,validateInput:vv,validateUpdateShape:HT,warn:Cr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vue=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:Ev,nonMaxSuppressionV4Impl:Iv,nonMaxSuppressionV5Impl:Rv,whereImpl:Sv},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Dle();const xue=Object.freeze(Object.defineProperty({__proto__:null,Abs:$m,Acos:Gd,Acosh:Hd,AdadeltaOptimizer:n$,AdagradOptimizer:s$,AdamOptimizer:r$,AdamaxOptimizer:o$,Add:qu,AddN:Em,All:U2,Any:W2,ArgMax:Im,ArgMin:Rm,Asin:qd,Asinh:Kd,Atan:Xd,Atan2:Qd,Atanh:Yd,AvgPool:_m,AvgPool3D:Am,AvgPool3DGrad:G2,AvgPoolGrad:j2,BatchMatMul:Dm,BatchToSpaceND:Om,Bincount:H2,BitwiseAnd:Fm,BroadcastArgs:q2,BroadcastTo:ML,Cast:Zd,Ceil:Jd,ClipByValue:eh,Complex:K2,ComplexAbs:Lm,Concat:Pm,Conv2D:Mm,Conv2DBackpropFilter:X2,Conv2DBackpropInput:zm,Conv3D:Bm,Conv3DBackpropFilterV2:Y2,Conv3DBackpropInputV2:Q2,Cos:th,Cosh:nh,CropAndResize:J2,Cumprod:Z2,Cumsum:Vm,DataStorage:IN,DenseBincount:eb,DepthToSpace:tb,DepthwiseConv2dNative:Um,DepthwiseConv2dNativeBackpropFilter:nb,DepthwiseConv2dNativeBackpropInput:sb,Diag:rb,Dilation2D:Wm,Dilation2DBackpropFilter:p1,Dilation2DBackpropInput:f1,Draw:ob,get ENV(){return ON},Einsum:ib,Elu:rh,EluGrad:ab,Environment:LL,Equal:jm,Erf:oh,Exp:ih,ExpandDims:Gm,Expm1:ah,FFT:lb,Fill:ub,FlipLeftRight:cb,Floor:lh,FloorDiv:uh,FromPixels:m1,FusedBatchNorm:Hm,FusedConv2D:Ap,FusedDepthwiseConv2D:Dp,GatherNd:db,GatherV2:qm,Greater:Km,GreaterEqual:ch,IFFT:hb,Identity:dh,Imag:fb,IsFinite:hh,IsInf:fh,IsNan:ph,KernelBackend:z2,LRN:tg,LRNGrad:mb,LeakyRelu:Xm,Less:Ym,LessEqual:Qm,LinSpace:pb,Log:mh,Log1p:gh,LogSoftmax:zL,LogicalAnd:Zm,LogicalNot:Jm,LogicalOr:eg,LogicalXor:ate,LowerBound:lte,MatrixBandPart:ute,Max:ng,MaxPool:sg,MaxPool3D:rg,MaxPool3DGrad:yb,MaxPoolGrad:gb,MaxPoolWithArgmax:bb,Maximum:yh,Mean:og,Min:ig,Minimum:bh,MirrorPad:ag,Mod:vh,MomentumOptimizer:i$,Multinomial:vb,Multiply:xh,Neg:lg,NonMaxSuppressionV3:xb,NonMaxSuppressionV4:wb,NonMaxSuppressionV5:Sb,NotEqual:ug,OP_SCOPE_SUFFIX:BN,OneHot:dg,OnesLike:cg,Optimizer:la,OptimizerConstructors:VM,Pack:hg,PadV2:fg,Pool:cte,Pow:wh,Prelu:pg,Prod:mg,RMSPropOptimizer:a$,RaggedGather:Cb,RaggedRange:kb,RaggedTensorToTensor:Nb,Range:Tb,get Rank(){return rC},Real:$b,RealDiv:sh,Reciprocal:Sh,get Reduction(){return Is},Relu:Ch,Relu6:kh,Reshape:gg,ResizeBilinear:bg,ResizeBilinearGrad:Ib,ResizeNearestNeighbor:yg,ResizeNearestNeighborGrad:Eb,Reverse:vg,RotateWithOffset:Hb,Round:Nh,Rsqrt:Th,SGDOptimizer:_v,ScatterNd:Rb,SearchSorted:Ab,Select:xg,Selu:$h,Sigmoid:_h,Sign:Rh,Sin:Eh,Sinh:Ih,Slice:wg,Softmax:Ng,Softplus:Ah,SpaceToBatchND:Cg,SparseFillEmptyRows:Db,SparseReshape:Ob,SparseSegmentMean:Fb,SparseSegmentSum:Lb,SparseToDense:Pb,SplitV:kg,Sqrt:Dh,Square:Mb,SquaredDifference:Oh,StaticRegexReplace:Tg,Step:zh,StridedSlice:zb,StringNGrams:Bb,StringSplit:Vb,StringToHashBucketFast:Ub,Sub:Fh,Sum:Sg,Tan:Lh,Tanh:Ph,Tensor:Et,TensorBuffer:_n,TensorScatterUpdate:_b,Tile:Mh,TopK:Wb,Transform:jb,Transpose:hu,Unique:Gb,Unpack:$g,UnsortedSegmentSum:Eg,UpperBound:dte,Variable:Lp,ZerosLike:Ig,_FusedMatMul:_p,abs:In,acos:HN,acosh:qN,add:pe,addN:vP,all:Qb,any:Mp,argMax:Eu,argMin:KN,asin:XN,asinh:YN,atan:QN,atan2:ZN,atanh:JN,avgPool:Dg,avgPool3d:tT,backend:UN,backend_util:h6,basicLSTMCell:xP,batchNorm:Bh,batchNorm2d:nT,batchNorm3d:sT,batchNorm4d:rT,batchToSpaceND:Og,bincount:oT,bitwiseAnd:wP,booleanMaskAsync:iM,broadcastArgs:SP,broadcastTo:fu,broadcast_util:jse,browser:lue,buffer:lt,cast:Ce,ceil:iT,clipByValue:Gs,clone:oi,complex:qi,concat:wn,concat1d:aT,concat2d:lT,concat3d:uT,concat4d:cT,conv1d:Zb,conv2d:Ki,conv2dTranspose:Jb,conv3d:hT,conv3dTranspose:fT,copyRegisteredKernels:mte,cos:Fg,cosh:ev,cosineWindow:Cv,cumprod:Vp,cumsum:tv,customGrad:hi,denseBincount:v1,deprecationWarn:qte,depthToSpace:pT,depthwiseConv2d:Vh,device_util:Vte,diag:kP,dilation2d:mT,disableDeprecationWarnings:Hte,dispose:at,disposeVariables:Kte,div:Ue,divNoNan:gT,dot:yT,dropout:QT,einsum:Bl,elu:Uh,enableDebugMode:Gte,enableProdMode:jte,enclosingPowerOfTwo:ZT,engine:xo,ensureShape:NP,env:se,equal:uo,erf:nv,euclideanNorm:vT,exp:Hs,expandDims:ss,expm1:xT,eye:sv,fft:Kg,fill:Xu,findBackend:ene,findBackendFactory:tne,floor:jh,floorDiv:Yb,fused:mM,gather:Gh,gatherND:cM,gather_util:uue,getBackend:rP,getGradient:tC,getKernel:Fp,getKernelsForBackend:g1,grad:$re,grads:Ere,greater:Qs,greaterEqual:ra,ifft:Rd,imag:Lg,image:$r,inTopKAsync:dM,io:c$,irfft:yv,isFinite:wT,isInf:ST,isNaN:CT,keep:Fn,kernel_impls:vue,leakyRelu:Pg,less:Td,lessEqual:Sl,linalg:t$,linspace:EP,localResponseNormalization:kT,log:dr,log1p:Mg,logSigmoid:NT,logSoftmax:ov,logSumExp:zg,logicalAnd:Oo,logicalNot:Bg,logicalOr:iv,logicalXor:TT,losses:SM,lowerBound:RP,matMul:ft,math:Jle,max:_r,maxPool:Vg,maxPool3d:$T,maxPoolWithArgmax:_P,maximum:xi,mean:ln,memory:b1,meshgrid:AP,min:Nd,minimum:ol,mirrorPad:ET,mod:IT,moments:Ug,movingAverage:aM,mul:V,multiRNNCell:DP,multinomial:OP,neg:Wt,nextFrame:y$,norm:Wh,notEqual:_u,oneHot:$d,ones:Bs,onesLike:hr,op:M,outerProduct:FP,pad:oa,pad1d:LP,pad2d:PP,pad3d:MP,pad4d:zP,pool:RT,pow:di,prelu:jg,print:GN,prod:_T,profile:Xte,raggedGather:BP,raggedRange:VP,raggedTensorToTensor:UP,rand:WP,randomGamma:qP,randomNormal:lv,randomStandardNormal:KP,randomUniform:Cl,randomUniformInt:XP,range:Au,ready:Zte,real:Ed,reciprocal:VT,registerBackend:VN,registerGradient:BL,registerKernel:qb,relu:Bo,relu6:uv,removeBackend:Jte,reshape:W,reverse:Dr,reverse1d:YP,reverse2d:QP,reverse3d:ZP,reverse4d:JP,rfft:Xg,round:cv,rsqrt:dv,scalar:qe,scatterND:lM,scatter_util:Rie,searchSorted:av,selu:hv,separableConv2d:fv,serialization:_le,setBackend:Qte,setPlatform:nne,setdiff1dAsync:eM,sigmoid:_o,sign:UT,signal:wM,sin:pv,sinh:mv,slice:xt,slice1d:Hg,slice2d:gv,slice3d:qg,slice4d:Id,slice_util:BM,softmax:Hh,softplus:Yu,spaceToBatchND:Wg,sparse:CM,sparseToDense:uM,spectral:xM,split:Us,sqrt:Yn,square:Lt,squaredDifference:bv,squeeze:ia,stack:qs,step:Zu,stridedSlice:WT,string:kM,sub:Oe,sum:ze,sumOutType:Kb,tan:jT,tanh:rl,tensor:io,tensor1d:is,tensor2d:Ka,tensor3d:GT,tensor4d:tM,tensor5d:nM,tensor6d:sM,tensorScatterUpdate:rM,tensor_util:Lte,test_util:Woe,tidy:ee,tile:Tr,time:Yte,topk:qT,train:Pl,transpose:wt,truncatedNormal:xv,unique:KT,unregisterGradient:pte,unregisterKernel:fte,unsortedSegmentSum:wv,unstack:Or,upcastType:Ws,upperBound:oM,util:kte,valueAndGrad:Ire,valueAndGrads:Rre,variable:XT,variableGrads:IP,version_core:pue,where:ls,whereAsync:YT,zeros:xn,zerosLike:St},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wue=se();wue.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var er;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(er||(er={}));var R3;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(R3||(R3={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sue={};function f6(t){return Sue[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C(t,e,n,s,r){const o=e.inputParams[t];if(o&&o.inputIndexStart!==void 0){const a=o.inputIndexStart,l=o.inputIndexEnd===0?void 0:o.inputIndexEnd===void 0?a+1:o.inputIndexEnd,u=a<0?e.inputNames.length+a:a;if(o.type==="tensor")return rs(e.inputNames[u],n,s,r);if(o.type==="tensors"){const h=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((p,m)=>{var g;return((g=h[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(p=>rs(p,n,s,r))}const c=rs(e.inputNames[u],n,s,r),d=c.dataSync();return o.type==="number"?d[0]:Rr(c.shape,d)}const i=e.attrParams[t];return i&&i.value}function rs(t,e,n,s){const[r,o]=nr(t,n);if(s!=null){const a=s.getHashTableHandleByName(r);if(a!=null)return a}const i=n.currentContextIds.find(a=>!!e[x1(r,a)]);return i!==void 0?e[x1(r,i)][o]:void 0}function _3(t,e,n){return e[x1(t,n.currentContextId)]}function Ri(t,e){const[n,s,r]=nr(t,e);return[x1(n,e&&e.currentContextId),s,r]}function x1(t,e){return e?`${t}-${e}`:t}function nr(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const o=e.parseNodeNameCache.get(t);if(o!=null)return o}const s=t.split(":");let r;if(s.length===1)r=[t,0,void 0];else{const o=s[0],i=s.length===3?s[1]:void 0,a=Number(s[s.length-1]);r=[o,a,i]}return n&&e.parseNodeNameCache.set(t,r),r}function Ty(t,e,n){let s=C("pad",t,e,n);if(s==="explicit"){s=C("explicitPaddings",t,e,n);const r=[[0,0],[0,0],[0,0],[0,0]];for(let o=0;o<4;o++)r[o][0]=s[o*2],r[o][1]=s[o*2+1];return r}return s}function _i(t){return t.kept?t:oi(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cue=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],kue=Object.freeze(Object.defineProperty({__proto__:null,json:Cue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nue=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Tue=Object.freeze(Object.defineProperty({__proto__:null,json:Nue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ue=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Eue=Object.freeze(Object.defineProperty({__proto__:null,json:$ue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iue=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Rue=Object.freeze(Object.defineProperty({__proto__:null,json:Iue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ue=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Aue=Object.freeze(Object.defineProperty({__proto__:null,json:_ue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Due=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Oue=Object.freeze(Object.defineProperty({__proto__:null,json:Due},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fue=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Lue=Object.freeze(Object.defineProperty({__proto__:null,json:Fue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pue=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Mue=Object.freeze(Object.defineProperty({__proto__:null,json:Pue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zue=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Bue=Object.freeze(Object.defineProperty({__proto__:null,json:zue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vue=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Uue=Object.freeze(Object.defineProperty({__proto__:null,json:Vue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wue=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],jue=Object.freeze(Object.defineProperty({__proto__:null,json:Wue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gue=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Hue=Object.freeze(Object.defineProperty({__proto__:null,json:Gue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const que=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Kue=Object.freeze(Object.defineProperty({__proto__:null,json:que},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xue=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Yue=Object.freeze(Object.defineProperty({__proto__:null,json:Xue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Que=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Zue=Object.freeze(Object.defineProperty({__proto__:null,json:Que},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jue=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ece=Object.freeze(Object.defineProperty({__proto__:null,json:Jue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tce=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],nce=Object.freeze(Object.defineProperty({__proto__:null,json:tce},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sce=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],rce=Object.freeze(Object.defineProperty({__proto__:null,json:sce},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oce=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ice=Object.freeze(Object.defineProperty({__proto__:null,json:oce},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A3{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[kue,Tue,Eue,Rue,Aue,Oue,Lue,Mue,Bue,Uue,jue,Hue,Kue,Yue,Zue,ece,nce,rce,ice],n=[].concat(...e.map(s=>s.json));this.opMappers=n.reduce((s,r)=>(s[r.tfOpName]=r,s),{})}transformGraph(e,n={}){const s=e.node,r=[],o=[],i=[],a=s.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?r.push(m[g.name]):g.op==="Const"?o.push(m[g.name]):(g.input==null||g.input.length===0)&&i.push(m[g.name]),m),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const h=Object.keys(a);h.forEach(m=>{const g=a[m];g.inputNames.forEach((y,b)=>{const[v,,x]=Ri(y),w=a[v];if(w.outputs!=null){const S=w.outputs.indexOf(x);if(S!==-1){const k=`${v}:${S}`;g.inputNames[b]=k}}g.inputs.push(w),w.children.push(g)})}),Object.keys(d).length===0?h.forEach(m=>{const g=a[m];g.children.length===0&&u.push(g)}):Object.keys(d).forEach(m=>{const[g]=Ri(m),y=a[g];y!=null&&(y.signatureKey=d[m],u.push(y))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[g]=Ri(m),y=a[g];y&&(y.signatureKey=c[m],l.push(y))}):l=r;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:a,inputs:l,outputs:u,weights:o,placeholders:r,signature:n,functions:f};return i.length>0&&(p.initNodes=i),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,s)=>(n[e[s].name]=s,n),{})}mapNode(e){const n=f6(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const s={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(s.inputParams=n.inputs.reduce((r,o)=>(r[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},r),{})),n.attrs!=null&&(s.attrParams=n.attrs.reduce((r,o)=>{const i=o.type;let a;switch(o.type){case"string":a=SC(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=SC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":a=IC(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=IC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":a=kC(e.attr,o.tfName,o.defaultValue||0),a===void 0&&o.tfDeprecatedName&&(a=kC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":a=EC(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=EC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":a=CC(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=CC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":a=_C(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=_C(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":a=$C(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=$C(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":a=RC(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=RC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":a=NC(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=NC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":a=TC(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=TC(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"func":a=D3(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=D3(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${o.type} for op: ${e.op}`)}return r[o.name]={value:a,type:i},r},{})),s}mapFunction(e){const n=e.nodeDef,s=[],r=[];let o={};n!=null&&(o=n.reduce((d,h)=>(d[h.name]=this.mapNode(h),h.op==="Const"&&r.push(d[h.name]),d),{}));const i=[],a=[];e.signature.inputArg.forEach(d=>{const[h]=Ri(d.name),f={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:P$(d.type),type:"dtype"}},children:[]};f.signatureKey=d.name,i.push(f),o[h]=f}),Object.keys(o).forEach(d=>{const h=o[d];h.inputNames.forEach((f,p)=>{const[m,,g]=Ri(f),y=o[m];if(y.outputs!=null){const b=y.outputs.indexOf(g);if(b!==-1){const v=`${m}:${b}`;h.inputNames[p]=v}}h.inputs.push(y),y.children.push(h)})});const u=e.ret;e.signature.outputArg.forEach(d=>{const[h,f]=Ri(u[d.name]),p=o[h];p!=null&&(p.defaultOutput=f,a.push(p))});const c=this.mapArgsToSignature(e);return{nodes:o,inputs:i,outputs:a,weights:r,placeholders:s,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,s)=>(n[s.name]=this.mapArgToTensorInfo(s),n),{}),outputs:e.signature.outputArg.reduce((n,s)=>(n[s.name]=this.mapArgToTensorInfo(s,e.ret),n),{})}}mapArgToTensorInfo(e,n){let s=e.name;return n!=null&&(s=n[s]),{name:s,dtype:e.type}}}function ace(t){const e=se().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function p6(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):ace(t);return e?n:n.toLowerCase()}function SC(t,e,n,s=!1){const r=t[e];return r!=null?p6(r.s,s):n}function CC(t,e,n){const s=t[e];return s?s.b:n}function kC(t,e,n){const s=t[e]||{},r=s.i!=null?s.i:s.f!=null?s.f:n;return typeof r=="number"?r:parseInt(r,10)}function P$(t){switch(typeof t=="string"&&(t=er[t]),t){case er.DT_FLOAT:case er.DT_HALF:return"float32";case er.DT_INT32:case er.DT_INT64:case er.DT_INT8:case er.DT_UINT8:return"int32";case er.DT_BOOL:return"bool";case er.DT_DOUBLE:return"float32";case er.DT_STRING:return"string";case er.DT_COMPLEX64:case er.DT_COMPLEX128:return"complex64";default:return null}}function D3(t,e,n){const s=t[e];return s&&s.func?s.func.name:n}function NC(t,e,n){const s=t[e];return s&&s.type?P$(s.type):n}function TC(t,e,n){const s=t[e];return s&&s.list&&s.list.type?s.list.type.map(r=>P$(r)):n}function m6(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function $C(t,e,n){const s=t[e];return s&&s.shape?m6(s.shape):n}function EC(t,e,n){const s=t[e];return s?((s.list.f&&s.list.f.length?s.list.f:s.list.i)||[]).map(r=>typeof r=="number"?r:parseInt(r,10)):n}function IC(t,e,n,s=!1){const r=t[e];return r&&r.list&&r.list.s?r.list.s.map(o=>p6(o,s)):n}function RC(t,e,n){const s=t[e];return s&&s.list&&s.list.shape?s.list.shape.map(r=>m6(r)):n}function _C(t,e,n){const s=t[e];return s&&s.list&&s.list.b?s.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lce{constructor(e,n,s){this.node=e,this.tensorMap=n,this.context=s,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,o)=>(r[o]=this.getAttr(o),r),{}))}getInput(e){return rs(e,this.tensorMap,this.context)}getAttr(e,n){const s=this.node.rawAttrs[e];if(s.tensor!=null)return rs(e,this.tensorMap,this.context);if(s.i!=null||s.f!=null)return kC(this.node.rawAttrs,e,n);if(s.s!=null)return SC(this.node.rawAttrs,e,n);if(s.b!=null)return CC(this.node.rawAttrs,e,n);if(s.shape!=null)return $C(this.node.rawAttrs,e,n);if(s.type!=null)return NC(this.node.rawAttrs,e,n);if(s.list!=null){if(s.list.i!=null||s.list.f!=null)return EC(this.node.rawAttrs,e,n);if(s.list.s!=null)return IC(this.node.rawAttrs,e,n);if(s.list.shape!=null)return RC(this.node.rawAttrs,e,n);if(s.list.b!=null)return _C(this.node.rawAttrs,e,n);if(s.list.type!=null)return TC(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ps=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:BN,abs:In,acos:HN,acosh:qN,add:pe,addN:vP,all:Qb,any:Mp,argMax:Eu,argMin:KN,asin:XN,asinh:YN,atan:QN,atan2:ZN,atanh:JN,avgPool:Dg,avgPool3d:tT,basicLSTMCell:xP,batchNorm:Bh,batchNorm2d:nT,batchNorm3d:sT,batchNorm4d:rT,batchToSpaceND:Og,bincount:oT,bitwiseAnd:wP,booleanMaskAsync:iM,broadcastArgs:SP,broadcastTo:fu,buffer:lt,cast:Ce,ceil:iT,clipByValue:Gs,clone:oi,complex:qi,concat:wn,concat1d:aT,concat2d:lT,concat3d:uT,concat4d:cT,conv1d:Zb,conv2d:Ki,conv2dTranspose:Jb,conv3d:hT,conv3dTranspose:fT,cos:Fg,cosh:ev,cosineWindow:Cv,cumprod:Vp,cumsum:tv,denseBincount:v1,depthToSpace:pT,depthwiseConv2d:Vh,diag:kP,dilation2d:mT,div:Ue,divNoNan:gT,dot:yT,dropout:QT,einsum:Bl,elu:Uh,enclosingPowerOfTwo:ZT,ensureShape:NP,equal:uo,erf:nv,euclideanNorm:vT,exp:Hs,expandDims:ss,expm1:xT,eye:sv,fft:Kg,fill:Xu,floor:jh,floorDiv:Yb,fused:mM,gather:Gh,gatherND:cM,greater:Qs,greaterEqual:ra,ifft:Rd,imag:Lg,image:$r,inTopKAsync:dM,irfft:yv,isFinite:wT,isInf:ST,isNaN:CT,leakyRelu:Pg,less:Td,lessEqual:Sl,linalg:t$,linspace:EP,localResponseNormalization:kT,log:dr,log1p:Mg,logSigmoid:NT,logSoftmax:ov,logSumExp:zg,logicalAnd:Oo,logicalNot:Bg,logicalOr:iv,logicalXor:TT,losses:SM,lowerBound:RP,matMul:ft,max:_r,maxPool:Vg,maxPool3d:$T,maxPoolWithArgmax:_P,maximum:xi,mean:ln,meshgrid:AP,min:Nd,minimum:ol,mirrorPad:ET,mod:IT,moments:Ug,movingAverage:aM,mul:V,multiRNNCell:DP,multinomial:OP,neg:Wt,norm:Wh,notEqual:_u,oneHot:$d,ones:Bs,onesLike:hr,op:M,outerProduct:FP,pad:oa,pad1d:LP,pad2d:PP,pad3d:MP,pad4d:zP,pool:RT,pow:di,prelu:jg,print:GN,prod:_T,raggedGather:BP,raggedRange:VP,raggedTensorToTensor:UP,rand:WP,randomGamma:qP,randomNormal:lv,randomStandardNormal:KP,randomUniform:Cl,randomUniformInt:XP,range:Au,real:Ed,reciprocal:VT,relu:Bo,relu6:uv,reshape:W,reverse:Dr,reverse1d:YP,reverse2d:QP,reverse3d:ZP,reverse4d:JP,rfft:Xg,round:cv,rsqrt:dv,scalar:qe,scatterND:lM,searchSorted:av,selu:hv,separableConv2d:fv,setdiff1dAsync:eM,sigmoid:_o,sign:UT,signal:wM,sin:pv,sinh:mv,slice:xt,slice1d:Hg,slice2d:gv,slice3d:qg,slice4d:Id,softmax:Hh,softplus:Yu,spaceToBatchND:Wg,sparse:CM,sparseToDense:uM,spectral:xM,split:Us,sqrt:Yn,square:Lt,squaredDifference:bv,squeeze:ia,stack:qs,step:Zu,stridedSlice:WT,string:kM,sub:Oe,sum:ze,tan:jT,tanh:rl,tensor:io,tensor1d:is,tensor2d:Ka,tensor3d:GT,tensor4d:tM,tensor5d:nM,tensor6d:sM,tensorScatterUpdate:rM,tile:Tr,topk:qT,transpose:wt,truncatedNormal:xv,unique:KT,unsortedSegmentSum:wv,unstack:Or,upperBound:oM,variable:XT,where:ls,whereAsync:YT,zeros:xn,zerosLike:St},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uce=(t,e,n,s=ps)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[s.add(C("a",t,e,n),C("b",t,e,n))];case"AddN":return[s.addN(C("tensors",t,e,n))];case"FloorMod":case"Mod":return[s.mod(C("a",t,e,n),C("b",t,e,n))];case"Mul":return[s.mul(C("a",t,e,n),C("b",t,e,n))];case"RealDiv":case"Div":return[s.div(C("a",t,e,n),C("b",t,e,n))];case"DivNoNan":return[s.divNoNan(C("a",t,e,n),C("b",t,e,n))];case"FloorDiv":return[s.floorDiv(C("a",t,e,n),C("b",t,e,n))];case"Sub":return[s.sub(C("a",t,e,n),C("b",t,e,n))];case"Minimum":return[s.minimum(C("a",t,e,n),C("b",t,e,n))];case"Maximum":return[s.maximum(C("a",t,e,n),C("b",t,e,n))];case"Pow":return[s.pow(C("a",t,e,n),C("b",t,e,n))];case"SquaredDifference":return[s.squaredDifference(C("a",t,e,n),C("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cce=(t,e,n,s=ps)=>{switch(t.op){case"Abs":case"ComplexAbs":return[s.abs(C("x",t,e,n))];case"Acos":return[s.acos(C("x",t,e,n))];case"Acosh":return[s.acosh(C("x",t,e,n))];case"Asin":return[s.asin(C("x",t,e,n))];case"Asinh":return[s.asinh(C("x",t,e,n))];case"Atan":return[s.atan(C("x",t,e,n))];case"Atan2":return[s.atan2(C("x",t,e,n),C("y",t,e,n))];case"Atanh":return[s.atanh(C("x",t,e,n))];case"Ceil":return[s.ceil(C("x",t,e,n))];case"Complex":return[s.complex(C("real",t,e,n),C("imag",t,e,n))];case"Cos":return[s.cos(C("x",t,e,n))];case"Cosh":return[s.cosh(C("x",t,e,n))];case"Elu":return[s.elu(C("x",t,e,n))];case"Erf":return[s.erf(C("x",t,e,n))];case"Exp":return[s.exp(C("x",t,e,n))];case"Expm1":return[s.expm1(C("x",t,e,n))];case"Floor":return[s.floor(C("x",t,e,n))];case"Log":return[s.log(C("x",t,e,n))];case"Log1p":return[s.log1p(C("x",t,e,n))];case"Imag":return[s.imag(C("x",t,e,n))];case"Neg":return[s.neg(C("x",t,e,n))];case"Reciprocal":return[s.reciprocal(C("x",t,e,n))];case"Real":return[s.real(C("x",t,e,n))];case"Relu":return[s.relu(C("x",t,e,n))];case"Round":return[s.round(C("x",t,e,n))];case"Selu":return[s.selu(C("x",t,e,n))];case"Sigmoid":return[s.sigmoid(C("x",t,e,n))];case"Sin":return[s.sin(C("x",t,e,n))];case"Sign":return[s.sign(C("x",t,e,n))];case"Sinh":return[s.sinh(C("x",t,e,n))];case"Softplus":return[s.softplus(C("x",t,e,n))];case"Sqrt":return[s.sqrt(C("x",t,e,n))];case"Square":return[s.square(C("x",t,e,n))];case"Tanh":return[s.tanh(C("x",t,e,n))];case"Tan":return[s.tan(C("x",t,e,n))];case"ClipByValue":return[s.clipByValue(C("x",t,e,n),C("clipValueMin",t,e,n),C("clipValueMax",t,e,n))];case"Relu6":return[s.relu6(C("x",t,e,n))];case"Rsqrt":return[s.rsqrt(rs(t.inputNames[0],e,n))];case"LeakyRelu":return[s.leakyRelu(C("x",t,e,n),C("alpha",t,e,n))];case"Prelu":return[s.prelu(C("x",t,e,n),C("alpha",t,e,n))];case"IsNan":return[s.isNaN(rs(t.inputNames[0],e,n))];case"IsInf":return[s.isInf(rs(t.inputNames[0],e,n))];case"IsFinite":return[s.isFinite(rs(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xr(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){T(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let s=0;s<t.length;s++){const r=t[s],o=e[s];T(r<0||o<0||r===o,()=>n+` Shapes ${t} and ${e} must match`)}}}function O3(t){return!(typeof t=="number"||t.some(e=>e<0))}function If(t,e,n){let s=AC(t,n);const r=!O3(s);if(r&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${s}`);if(r&&e.forEach(o=>{s=AC(o.shape,s)}),!O3(s))throw new Error(`Non-fully-defined elementShape: ${s}`);return s}function AC(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let s=0;s<t.length;++s){const r=t[s],o=e[s];if(r>=0&&o>=0&&r!==o)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[s]=r>=0?r:o}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dce{constructor(e,n,s,r,o,i,a){this.name=e,this.dtype=n,this.maxSize=s,this.elementShape=r,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=qe(0),Fn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const s=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Xr(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),s.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(s.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);s.tensor=n,Fn(n),s.written=!0,this.tensors[e]=s}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((s,r)=>this.write(s,n[r]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(e.length===0)return io([],[0].concat(this.elementShape));const s=this.readMany(e);return Xr(this.elementShape,s[0].shape,"TensorArray shape mismatch: "),qs(s,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return io([],[0].concat(this.elementShape));const n=[];for(let r=0;r<this.size();r++)n.push(r);const s=this.readMany(n);return Xr(this.elementShape,s[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${s[0].shape})`),wn(s,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const s=Math.max(...e);if(!this.dynamicSize&&s>=this.maxSize)throw new Error(`Max index must be < array size (${s}  vs. ${this.maxSize})`);this.writeMany(e,Or(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let s=0;const r=e.map(l=>(s+=l,s));if(s!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const o=s===0?0:n.size/s,i=[];ee(()=>{n=W(n,[1,s,o]);for(let l=0;l<e.length;++l){const c=[0,l===0?0:r[l-1],0],d=[1,e[l],o];i[l]=W(xt(n,c,d),this.elementShape)}return i});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ou{get id(){return this.idTensor.id}constructor(e,n,s,r=-1){this.tensors=e,this.elementShape=n,this.elementDtype=s,e!=null&&e.forEach(o=>{if(s!==o.dtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${o.dtype}`);Xr(n,o.shape,"TensorList shape mismatch: "),Fn(o)}),this.idTensor=qe(0),this.maxNumElements=r,Fn(this.idTensor)}copy(){return new Ou([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,s=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(s!==-1&&this.tensors.length!==s)throw new Error(`Operation expected a list with ${s} elements but got a list with ${this.tensors.length} elements.`);Xr(e,this.elementShape,"TensorList shape mismatch: ");const r=If(this.elementShape,this.tensors,e);return ee(()=>{const o=this.tensors.map(i=>W(i,r));return qs(o,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const s=If(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,Xr(r.shape,e,"TensorList shape mismatch: "),W(r,s)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Xr(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Fn(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Ou([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let s=0;s<Math.min(this.tensors.length,e);++s)n.tensors[s]=this.tensors[s];return n}getItem(e,n,s){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Xr(this.tensors[e].shape,n,"TensorList shape mismatch: ");const r=If(this.elementShape,this.tensors,n);return W(this.tensors[e],r)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Xr(this.elementShape,n.shape,"TensorList shape mismatch: "),Fn(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,s){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Xr(this.elementShape,s,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=If(this.elementShape,this.tensors,s);return e.length===0?io([],[0].concat(r)):ee(()=>{const o=e.map(i=>W(this.tensors[i],r));return qs(o,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Xr(this.elementShape,n,"TensorList shape mismatch: ");const s=If(this.elementShape,this.tensors,n);return this.size()===0?io([],[0].concat(s)):ee(()=>{const r=this.tensors.map(o=>W(o,s));return wn(r,0)})}}function hce(t,e,n){const s=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const r=t.shape.slice(1);Xr(r,e,"TensorList shape mismatch: ");const o=Or(t);return new Ou(o,e,s)}function fce(t,e,n,s){return new Ou([],t,e,s)}function pce(t,e,n,s){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(s!=null&&s!==-1&&r>=s)throw new Error(`Max index must be < array size (${r}  vs. ${s})`);const o=new Ou([],n,t.dtype,s),i=Or(t,0);return e.forEach((a,l)=>{o.setItem(a,i[l])}),o}function mce(t,e,n){let s=0;const r=e.map(c=>(s+=c,s));if(s!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${t.shape}`);const o=t.shape.slice(1),i=AC(o,n),a=s===0?0:t.size/s,l=ee(()=>{const c=[];t=W(t,[1,s,a]);for(let d=0;d<e.length;++d){const f=[0,d===0?0:r[d-1],0],p=[1,e[d],a];c[d]=W(xt(t,f,p),i)}return t.dispose(),c}),u=new Ou([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gce=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const s=C("thenBranch",t,e,n),r=C("elseBranch",t,e,n),o=C("cond",t,e,n),i=C("args",t,e,n);return(await o.data())[0]?n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const s=C("body",t,e,n),r=C("cond",t,e,n),o=C("args",t,e,n),i=await n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),a=o.map(c=>c.id);let l=await i[0].data();i.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let u=o;for(;l[0];){const c=u;u=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const h=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const s=C("pred",t,e,n);return[_i(s)]}case"Switch":{const s=C("pred",t,e,n);let r=C("data",t,e,n);return r.kept||(r=_i(r)),(await s.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const s=t.inputNames.find(r=>rs(r,e,n)!==void 0);if(s){const r=rs(s,e,n);return[_i(r)]}return}case"Enter":{const s=C("frameName",t,e,n),r=C("tensor",t,e,n);return n.enterFrame(s),[_i(r)]}case"Exit":{const s=C("tensor",t,e,n);return n.exitFrame(),[_i(s)]}case"NextIteration":{const s=C("tensor",t,e,n);return n.nextIteration(),[_i(s)]}case"TensorArrayV3":{const s=C("size",t,e,n),r=C("dtype",t,e,n),o=C("elementShape",t,e,n),i=C("dynamicSize",t,e,n),a=C("clearAfterRead",t,e,n),l=C("identicalElementShapes",t,e,n),u=C("name",t,e,n),c=new dce(u,r,s,o,l,i,a);return n.addTensorArray(c),[c.idTensor,qe(1)]}case"TensorArrayWriteV3":{const s=C("tensorArrayId",t,e,n),r=C("index",t,e,n),o=C("tensor",t,e,n),i=n.getTensorArray(s.id);return i.write(r,o),[i.idTensor]}case"TensorArrayReadV3":{const s=C("tensorArrayId",t,e,n),r=C("index",t,e,n);return[n.getTensorArray(s.id).read(r)]}case"TensorArrayGatherV3":{const s=C("tensorArrayId",t,e,n),r=C("indices",t,e,n),o=C("dtype",t,e,n);return[n.getTensorArray(s.id).gather(r,o)]}case"TensorArrayScatterV3":{const s=C("tensorArrayId",t,e,n),r=C("indices",t,e,n),o=C("tensor",t,e,n),i=n.getTensorArray(s.id);return i.scatter(r,o),[i.idTensor]}case"TensorArrayConcatV3":{const s=C("tensorArrayId",t,e,n),r=n.getTensorArray(s.id),o=C("dtype",t,e,n);return[r.concat(o)]}case"TensorArraySplitV3":{const s=C("tensorArrayId",t,e,n),r=C("tensor",t,e,n),o=C("lengths",t,e,n),i=n.getTensorArray(s.id);return i.split(o,r),[i.idTensor]}case"TensorArraySizeV3":{const s=C("tensorArrayId",t,e,n),r=n.getTensorArray(s.id);return[qe(r.size(),"int32")]}case"TensorArrayCloseV3":{const s=C("tensorArrayId",t,e,n),r=n.getTensorArray(s.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const s=C("tensorListId",t,e,n),r=C("index",t,e,n),o=C("tensor",t,e,n),i=n.getTensorList(s.id);return i.setItem(r,o),[i.idTensor]}case"TensorListGetItem":{const s=C("tensorListId",t,e,n),r=C("index",t,e,n),o=C("elementShape",t,e,n),i=C("elementDType",t,e,n);return[n.getTensorList(s.id).getItem(r,o,i)]}case"TensorListScatterV2":case"TensorListScatter":{const s=C("indices",t,e,n),r=C("tensor",t,e,n),o=C("elementShape",t,e,n),i=C("numElements",t,e,n),a=pce(r,s,o,i);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const s=C("elementShape",t,e,n),r=C("elementDType",t,e,n);let o;t.op==="TensorListReserve"?o="numElements":o="maxNumElements";const i=C(o,t,e,n),a=t.op==="TensorListReserve"?-1:i,l=fce(s,r,i,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const s=C("tensorListId",t,e,n),r=C("indices",t,e,n),o=C("elementShape",t,e,n),i=C("elementDType",t,e,n);return[n.getTensorList(s.id).gather(r,i,o)]}case"TensorListStack":{const s=C("tensorListId",t,e,n),r=C("elementShape",t,e,n),o=C("elementDType",t,e,n),i=C("numElements",t,e,n);return[n.getTensorList(s.id).stack(r,o,i)]}case"TensorListFromTensor":{const s=C("tensor",t,e,n),r=C("elementShape",t,e,n),o=C("elementDType",t,e,n),i=hce(s,r,o);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const s=C("tensorListId",t,e,n),r=n.getTensorList(s.id),o=C("dtype",t,e,n),i=C("elementShape",t,e,n);return[r.concat(o,i)]}case"TensorListPushBack":{const s=C("tensorListId",t,e,n),r=C("tensor",t,e,n),o=n.getTensorList(s.id);return o.pushBack(r),[o.idTensor]}case"TensorListPopBack":{const s=C("tensorListId",t,e,n),r=C("elementShape",t,e,n),o=C("elementDType",t,e,n);return[n.getTensorList(s.id).popBack(r,o)]}case"TensorListSplit":{const s=C("tensor",t,e,n),r=C("elementShape",t,e,n),o=C("lengths",t,e,n),i=mce(s,o,r);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const s=C("tensorListId",t,e,n),r=n.getTensorList(s.id);return[qe(r.size(),"int32")]}case"TensorListResize":{const s=C("tensorListId",t,e,n),r=C("size",t,e,n),i=n.getTensorList(s.id).resize(r);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3(t,e,n){const[s,r]=C("fusedOps",t,e,n),o=s==="biasadd",i=!o,a=r==="prelu",l=s==="fusedbatchnorm",u=C("numArgs",t,e,n);if(o){if(a&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&o&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=C("strides",t,e,n),d=Ty(t,e,n),h=C("dataFormat",t,e,n).toUpperCase(),f=C("dilations",t,e,n);let[p,m]=C("args",t,e,n);i&&(m=p,p=void 0);const g=C("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:h,dilations:f,biasArg:p,preluArg:m,activationFunc:r,leakyreluAlpha:g}}const yce=(t,e,n,s=ps)=>{switch(t.op){case"Conv1D":{const r=C("stride",t,e,n),o=C("pad",t,e,n),i=C("dataFormat",t,e,n).toUpperCase(),a=C("dilation",t,e,n);return[s.conv1d(C("x",t,e,n),C("filter",t,e,n),r,o,i,a)]}case"Conv2D":{const r=C("strides",t,e,n),o=Ty(t,e,n),i=C("dataFormat",t,e,n).toUpperCase(),a=C("dilations",t,e,n);return[s.conv2d(C("x",t,e,n),C("filter",t,e,n),[r[1],r[2]],o,i,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:r,pad:o,dataFormat:i,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=F3(t,e,n);return[s.fused.conv2d({x:C("x",t,e,n),filter:C("filter",t,e,n),strides:[r[1],r[2]],pad:o,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:o,dataFormat:i,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=F3(t,e,n);return[s.fused.depthwiseConv2d({x:C("x",t,e,n),filter:C("filter",t,e,n),strides:[r[1],r[2]],pad:o,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=C("outputShape",t,e,n),o=C("strides",t,e,n),i=Ty(t,e,n);return[s.conv2dTranspose(C("x",t,e,n),C("filter",t,e,n),r,[o[1],o[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=C("strides",t,e,n),o=Ty(t,e,n),i=C("dilations",t,e,n),a=C("dataFormat",t,e,n).toUpperCase();return[s.depthwiseConv2d(C("input",t,e,n),C("filter",t,e,n),[r[1],r[2]],o,a,[i[1],i[2]])]}case"Conv3D":{const r=C("strides",t,e,n),o=C("pad",t,e,n),i=C("dataFormat",t,e,n).toUpperCase(),a=C("dilations",t,e,n);return[s.conv3d(C("x",t,e,n),C("filter",t,e,n),[r[1],r[2],r[3]],o,i,[a[1],a[2],a[3]])]}case"AvgPool":{const r=C("strides",t,e,n),o=C("pad",t,e,n),i=C("kernelSize",t,e,n);return[s.avgPool(C("x",t,e,n),[i[1],i[2]],[r[1],r[2]],o)]}case"MaxPool":{const r=C("strides",t,e,n),o=C("pad",t,e,n),i=C("kernelSize",t,e,n);return[s.maxPool(C("x",t,e,n),[i[1],i[2]],[r[1],r[2]],o)]}case"MaxPoolWithArgmax":{const r=C("strides",t,e,n),o=C("pad",t,e,n),i=C("kernelSize",t,e,n),a=C("includeBatchInIndex",t,e,n),{result:l,indexes:u}=s.maxPoolWithArgmax(C("x",t,e,n),[i[1],i[2]],[r[1],r[2]],o,a);return[l,u]}case"AvgPool3D":{const r=C("strides",t,e,n),o=C("pad",t,e,n),i=C("kernelSize",t,e,n);return[s.avgPool3d(C("x",t,e,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],o)]}case"MaxPool3D":{const r=C("strides",t,e,n),o=C("pad",t,e,n),i=C("kernelSize",t,e,n);return[s.maxPool3d(C("x",t,e,n),[i[1],i[2],i[3]],[r[1],r[2],r[3]],o)]}case"Dilation2D":{const r=C("strides",t,e,n),o=C("pad",t,e,n),i=C("dilations",t,e,n),a=r[1],l=r[2],u=i[1],c=i[2];return[s.dilation2d(C("x",t,e,n),C("filter",t,e,n),[a,l],o,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bce=(t,e,n,s=ps)=>{switch(t.op){case"Fill":{const r=C("shape",t,e,n),o=C("dtype",t,e,n),i=C("value",t,e,n);return[s.fill(r,i,o)]}case"LinSpace":{const r=C("start",t,e,n),o=C("stop",t,e,n),i=C("num",t,e,n);return[s.linspace(r,o,i)]}case"Multinomial":{const r=C("logits",t,e,n),o=C("numSamples",t,e,n),i=C("seed",t,e,n);return[s.multinomial(r,o,i)]}case"OneHot":{const r=C("indices",t,e,n),o=C("depth",t,e,n),i=C("onValue",t,e,n),a=C("offValue",t,e,n),l=C("dtype",t,e,n);return[s.oneHot(r,o,i,a,l)]}case"Ones":return[s.ones(C("shape",t,e,n),C("dtype",t,e,n))];case"OnesLike":return[s.onesLike(C("x",t,e,n))];case"RandomStandardNormal":return[s.randomStandardNormal(C("shape",t,e,n),C("dtype",t,e,n),C("seed",t,e,n))];case"RandomUniform":return[s.randomUniform(C("shape",t,e,n),C("minval",t,e,n),C("maxval",t,e,n),C("dtype",t,e,n))];case"RandomUniformInt":return[s.randomUniformInt(C("shape",t,e,n),C("minval",t,e,n),C("maxval",t,e,n),C("seed",t,e,n))];case"Range":{const r=C("start",t,e,n),o=C("stop",t,e,n),i=C("step",t,e,n);return[s.range(r,o,i,C("dtype",t,e,n))]}case"TruncatedNormal":{const r=C("shape",t,e,n),o=C("mean",t,e,n),i=C("stdDev",t,e,n),a=C("seed",t,e,n);return[s.truncatedNormal(r,o,i,C("dtype",t,e,n),a)]}case"Zeros":return[s.zeros(C("shape",t,e,n),C("dtype",t,e,n))];case"ZerosLike":return[s.zerosLike(C("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uw(t,e,n){const s=C("boxes",t,e,n),r=C("scores",t,e,n),o=C("maxOutputSize",t,e,n),i=C("iouThreshold",t,e,n),a=C("scoreThreshold",t,e,n),l=C("softNmsSigma",t,e,n);return{boxes:s,scores:r,maxOutputSize:o,iouThreshold:i,scoreThreshold:a,softNmsSigma:l}}const vce=async(t,e,n,s,r=ps)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:o,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=uw(t,e,n),d=await r.image.nonMaxSuppressionWithScoreAsync(o,i,a,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:o,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=uw(t,e,n),c=C("padToMaxOutputSize",t,e,n),d=await r.image.nonMaxSuppressionPaddedAsync(o,i,a,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:o,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=uw(t,e,n);return[await r.image.nonMaxSuppressionAsync(o,i,a,l,u)]}case"Where":{const o=r.cast(C("condition",t,e,n),"bool"),i=[await r.whereAsync(o)];return o.dispose(),i}case"ListDiff":return r.setdiff1dAsync(C("x",t,e,n),C("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xce=(t,e,n,s=ps)=>{switch(t.op){case"LowerBound":{const r=C("sortedSequence",t,e,n),o=C("values",t,e,n);return[s.lowerBound(r,o)]}case"TopKV2":{const r=C("x",t,e,n),o=C("k",t,e,n),i=C("sorted",t,e,n),a=s.topk(r,o,i);return[a.values,a.indices]}case"UpperBound":{const r=C("sortedSequence",t,e,n),o=C("values",t,e,n);return[s.upperBound(r,o)]}case"Unique":{const r=C("x",t,e,n),o=s.unique(r);return[o.values,o.indices]}case"UniqueV2":{const r=C("x",t,e,n),o=C("axis",t,e,n),i=s.unique(r,o);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wce=(t,e,n,s=ps)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=C("default",t,e,n);return[rs(t.name,e,n)||r];case"Placeholder":return[rs(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=C("x",t,e,n);return[_i(c)]}case"IdentityN":return C("x",t,e,n).map(c=>_i(c));case"Snapshot":const o=C("x",t,e,n);return[_i(o)];case"Shape":return[s.tensor1d(C("x",t,e,n).shape,"int32")];case"ShapeN":return C("x",t,e,n).map(c=>s.tensor1d(c.shape));case"Size":return[s.scalar(C("x",t,e,n).size,"int32")];case"Rank":return[s.scalar(C("x",t,e,n).rank,"int32")];case"NoOp":return[s.scalar(1)];case"Print":const i=C("x",t,e,n),a=C("data",t,e,n),l=C("message",t,e,n),u=C("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,u));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sce{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=qe(0),this.tensorMap=new Map,Fn(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return qe(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const s=await e.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),ee(()=>{const r=Or(n),o=s.length,i=r.length;T(o===i,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${i} elements.`);for(let a=0;a<o;a++){const l=s[a],u=r[a];Fn(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const s=await e.data();return ee(()=>{const r=[];for(let o=0;o<s.length;o++){const i=s[o],a=this.findWithDefault(i,n);r.push(a)}return qs(r)})}findWithDefault(e,n){const s=this.tensorMap.get(e);return s??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cce=async(t,e,n,s)=>{switch(t.op){case"HashTable":case"HashTableV2":{const r=s.getHashTableHandleByName(t.name);if(r!=null)return[r];{const o=C("keyDType",t,e,n),i=C("valueDType",t,e,n),a=new Sce(o,i);return s.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const r=C("tableHandle",t,e,n,s),o=C("keys",t,e,n),i=C("values",t,e,n);return[await s.getHashTableById(r.id).import(o,i)]}case"LookupTableFind":case"LookupTableFindV2":{const r=C("tableHandle",t,e,n,s),o=C("keys",t,e,n),i=C("defaultValue",t,e,n);return[await s.getHashTableById(r.id).find(o,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=C("tableHandle",t,e,n,s);return[s.getHashTableById(r.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kce=(t,e,n,s=ps)=>{switch(t.op){case"ResizeBilinear":{const r=C("images",t,e,n),o=C("size",t,e,n),i=C("alignCorners",t,e,n),a=C("halfPixelCenters",t,e,n);return[s.image.resizeBilinear(r,[o[0],o[1]],i,a)]}case"ResizeNearestNeighbor":{const r=C("images",t,e,n),o=C("size",t,e,n),i=C("alignCorners",t,e,n),a=C("halfPixelCenters",t,e,n);return[s.image.resizeNearestNeighbor(r,[o[0],o[1]],i,a)]}case"CropAndResize":{const r=C("image",t,e,n),o=C("boxes",t,e,n),i=C("boxInd",t,e,n),a=C("cropSize",t,e,n),l=C("method",t,e,n),u=C("extrapolationValue",t,e,n);return[s.image.cropAndResize(r,o,i,a,l,u)]}case"ImageProjectiveTransformV3":{const r=C("images",t,e,n),o=C("transforms",t,e,n),i=C("outputShape",t,e,n),a=C("fillValue",t,e,n),l=C("interpolation",t,e,n),u=C("fillMode",t,e,n);return[s.image.transform(r,o,l.toLowerCase(),u.toLowerCase(),a,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nce=(t,e,n,s=ps)=>{switch(t.op){case"Equal":return[s.equal(C("a",t,e,n),C("b",t,e,n))];case"NotEqual":return[s.notEqual(C("a",t,e,n),C("b",t,e,n))];case"Greater":return[s.greater(C("a",t,e,n),C("b",t,e,n))];case"GreaterEqual":return[s.greaterEqual(C("a",t,e,n),C("b",t,e,n))];case"Less":return[s.less(C("a",t,e,n),C("b",t,e,n))];case"LessEqual":return[s.lessEqual(C("a",t,e,n),C("b",t,e,n))];case"LogicalAnd":return[s.logicalAnd(C("a",t,e,n),C("b",t,e,n))];case"LogicalNot":return[s.logicalNot(C("a",t,e,n))];case"LogicalOr":return[s.logicalOr(C("a",t,e,n),C("b",t,e,n))];case"Select":case"SelectV2":return[s.where(C("condition",t,e,n),C("a",t,e,n),C("b",t,e,n))];case"BitwiseAnd":return[s.bitwiseAnd(C("a",t,e,n),C("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tce=(t,e,n,s=ps)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[s.matMul(C("a",t,e,n),C("b",t,e,n),C("transposeA",t,e,n),C("transposeB",t,e,n))];case"Einsum":return[s.einsum(C("equation",t,e,n),...C("tensors",t,e,n))];case"Transpose":return[s.transpose(C("x",t,e,n),C("perm",t,e,n))];case"_FusedMatMul":const[r,o]=C("fusedOps",t,e,n),i=r==="biasadd",a=o==="prelu",l=C("numArgs",t,e,n),u=C("leakyreluAlpha",t,e,n);if(i){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=C("args",t,e,n);return[s.fused.matMul({a:C("a",t,e,n),b:C("b",t,e,n),transposeA:C("transposeA",t,e,n),transposeB:C("transposeB",t,e,n),bias:c,activation:o,preluActivationWeights:d,leakyreluAlpha:u})];case"MatrixBandPart":return[s.linalg.bandPart(C("a",t,e,n),C("numLower",t,e,n),C("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ce=(t,e,n,s=ps)=>{switch(t.op){case"EuclideanNorm":return[s.euclideanNorm(C("x",t,e,n),C("axis",t,e,n),C("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[s.batchNorm(C("x",t,e,n),C("mean",t,e,n),C("variance",t,e,n),C("offset",t,e,n),C("scale",t,e,n),C("epsilon",t,e,n))];case"FusedBatchNormV3":return[s.batchNorm(C("x",t,e,n),C("mean",t,e,n),C("variance",t,e,n),C("offset",t,e,n),C("scale",t,e,n),C("epsilon",t,e,n))];case"LRN":return[s.localResponseNormalization(C("x",t,e,n),C("radius",t,e,n),C("bias",t,e,n),C("alpha",t,e,n),C("beta",t,e,n))];case"Softmax":return[s.softmax(C("x",t,e,n))];case"LogSoftmax":return[s.logSoftmax(C("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ece=(t,e,n,s=ps)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:r,outputDenseValues:o}=s.raggedGather(C("paramsNestedSplits",t,e,n),C("paramsDenseValues",t,e,n),C("indices",t,e,n),C("outputRaggedRank",t,e,n));return r.concat(o)}case"RaggedRange":{const{rtNestedSplits:r,rtDenseValues:o}=s.raggedRange(C("starts",t,e,n),C("limits",t,e,n),C("splits",t,e,n));return[r,o]}case"RaggedTensorToTensor":return[s.raggedTensorToTensor(C("shape",t,e,n),C("values",t,e,n),C("defaultValue",t,e,n),C("rowPartitionTensors",t,e,n),C("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ice=(t,e,n,s=ps)=>{switch(t.op){case"Max":{const a=C("axis",t,e,n),l=C("keepDims",t,e,n);return[s.max(C("x",t,e,n),a,l)]}case"Mean":{const a=C("axis",t,e,n),l=C("keepDims",t,e,n);return[s.mean(C("x",t,e,n),a,l)]}case"Min":{const a=C("axis",t,e,n),l=C("keepDims",t,e,n);return[s.min(C("x",t,e,n),a,l)]}case"Sum":{const a=C("axis",t,e,n),l=C("keepDims",t,e,n);return[s.sum(C("x",t,e,n),a,l)]}case"All":{const a=C("axis",t,e,n),l=C("keepDims",t,e,n);return[s.all(C("x",t,e,n),a,l)]}case"Any":{const a=C("axis",t,e,n),l=C("keepDims",t,e,n);return[s.any(C("x",t,e,n),a,l)]}case"ArgMax":{const a=C("axis",t,e,n);return[s.argMax(C("x",t,e,n),a)]}case"ArgMin":{const a=C("axis",t,e,n);return[s.argMin(C("x",t,e,n),a)]}case"Prod":{const a=C("axis",t,e,n),l=C("keepDims",t,e,n);return[s.prod(C("x",t,e,n),a,l)]}case"Cumprod":{const a=C("axis",t,e,n),l=C("exclusive",t,e,n),u=C("reverse",t,e,n);return[s.cumprod(C("x",t,e,n),a,l,u)]}case"Cumsum":{const a=C("axis",t,e,n),l=C("exclusive",t,e,n),u=C("reverse",t,e,n);return[s.cumsum(C("x",t,e,n),a,l,u)]}case"Bincount":const r=C("x",t,e,n),o=C("weights",t,e,n),i=C("size",t,e,n);return[s.bincount(r,o,i)];case"DenseBincount":{const a=C("x",t,e,n),l=C("weights",t,e,n),u=C("size",t,e,n),c=C("binaryOutput",t,e,n);return[s.denseBincount(a,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rce=(t,e,n,s=ps)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=C("n",t,e,n),o=C("axis",t,e,n);let i=C("tensors",t,e,n);return i=i.slice(0,r),[s.concat(i,o)]}case"Gather":{const r=C("x",t,e,n),o=C("indices",t,e,n);return[s.gather(r,s.cast(o,"int32"),0)]}case"GatherV2":{const r=C("axis",t,e,n),o=C("batchDims",t,e,n),i=C("x",t,e,n),a=C("indices",t,e,n);return[s.gather(i,s.cast(a,"int32"),r,o)]}case"Reverse":{const r=C("dims",t,e,n),o=[];for(let a=0;a<r.length;a++)r[a]&&o.push(a);const i=C("x",t,e,n);return[s.reverse(i,o)]}case"ReverseV2":{const r=C("axis",t,e,n),o=C("x",t,e,n);return[s.reverse(o,r)]}case"Slice":{const r=C("begin",t,e,n),o=C("size",t,e,n);return[s.slice(C("x",t,e,n),r,o)]}case"StridedSlice":{const r=C("begin",t,e,n),o=C("end",t,e,n),i=C("strides",t,e,n),a=C("beginMask",t,e,n),l=C("endMask",t,e,n),u=C("ellipsisMask",t,e,n),c=C("newAxisMask",t,e,n),d=C("shrinkAxisMask",t,e,n),h=C("x",t,e,n);return[s.stridedSlice(h,r,o,i,a,l,u,c,d)]}case"Pack":return ee(()=>{const r=C("axis",t,e,n),o=C("tensors",t,e,n),i=o[0].shape,a=s.squeeze(o[0]).shape,l=o.map(u=>{const c=vt(u.shape,i);if(!c&&!vt(s.squeeze(u).shape,a))throw new Error("the input tensors shape does not match");return c?u:s.reshape(u,i)});return[s.stack(l,r)]});case"Unpack":{const r=C("axis",t,e,n),o=C("tensor",t,e,n);return s.unstack(o,r)}case"Tile":{const r=C("reps",t,e,n);return[s.tile(C("x",t,e,n),r)]}case"Split":case"SplitV":{const r=C("axis",t,e,n),o=C("numOrSizeSplits",t,e,n),i=C("x",t,e,n);return s.split(i,o,r)}case"ScatterNd":{const r=C("indices",t,e,n),o=C("values",t,e,n),i=C("shape",t,e,n);return[s.scatterND(r,o,i)]}case"GatherNd":{const r=C("x",t,e,n),o=C("indices",t,e,n);return[s.gatherND(r,o)]}case"SparseToDense":{const r=C("sparseIndices",t,e,n),o=C("outputShape",t,e,n),i=C("sparseValues",t,e,n),a=C("defaultValue",t,e,n);return[s.sparseToDense(r,i,o,i.dtype===a.dtype?a:s.cast(a,i.dtype))]}case"TensorScatterUpdate":{const r=C("indices",t,e,n),o=C("values",t,e,n),i=C("tensor",t,e,n);return[s.tensorScatterUpdate(i,r,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ce=(t,e,n,s=ps)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:o,emptyRowIndicator:i,reverseIndexMap:a}=s.sparse.sparseFillEmptyRows(C("indices",t,e,n),C("values",t,e,n),C("denseShape",t,e,n),C("defaultValue",t,e,n));return[r,o,i,a]}case"SparseReshape":{const{outputIndices:r,outputShape:o}=s.sparse.sparseReshape(C("inputIndices",t,e,n),C("inputShape",t,e,n),C("newShape",t,e,n));return[r,o]}case"SparseSegmentMean":return[s.sparse.sparseSegmentMean(C("data",t,e,n),C("indices",t,e,n),C("segmentIds",t,e,n))];case"SparseSegmentSum":return[s.sparse.sparseSegmentSum(C("data",t,e,n),C("indices",t,e,n),C("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ace=(t,e,n,s=ps)=>{switch(t.op){case"FFT":return[s.fft(C("x",t,e,n))];case"IFFT":return[s.ifft(C("x",t,e,n))];case"RFFT":return[s.rfft(C("x",t,e,n))];case"IRFFT":return[s.irfft(C("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dce=(t,e,n,s=ps)=>{switch(t.op){case"StaticRegexReplace":return[s.string.staticRegexReplace(C("input",t,e,n),C("pattern",t,e,n),C("rewrite",t,e,n),C("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:r,nGramsSplits:o}=s.string.stringNGrams(C("data",t,e,n),C("dataSplits",t,e,n),C("separator",t,e,n),C("nGramWidths",t,e,n),C("leftPad",t,e,n),C("rightPad",t,e,n),C("padWidth",t,e,n),C("preserveShortSequences",t,e,n));return[r,o]}case"StringSplit":{const{indices:r,values:o,shape:i}=s.string.stringSplit(C("input",t,e,n),C("delimiter",t,e,n),C("skipEmpty",t,e,n));return[r,o,i]}case"StringToHashBucketFast":return[s.string.stringToHashBucketFast(C("input",t,e,n),C("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oce=(t,e,n,s=ps)=>{switch(t.op){case"Cast":return[s.cast(C("x",t,e,n),C("dtype",t,e,n))];case"ExpandDims":{const r=C("axis",t,e,n);return[s.expandDims(C("x",t,e,n),r)]}case"Squeeze":{const r=C("axis",t,e,n);return[s.squeeze(C("x",t,e,n),r)]}case"Reshape":return[s.reshape(C("x",t,e,n),C("shape",t,e,n))];case"EnsureShape":return[s.ensureShape(C("x",t,e,n),C("shape",t,e,n))];case"MirrorPad":return[s.mirrorPad(C("x",t,e,n),C("padding",t,e,n),C("mode",t,e,n))];case"PadV2":case"Pad":return[s.pad(C("x",t,e,n),C("padding",t,e,n),C("constantValue",t,e,n))];case"SpaceToBatchND":{const r=C("blockShape",t,e,n),o=C("paddings",t,e,n);return[s.spaceToBatchND(C("x",t,e,n),r,o)]}case"BatchToSpaceND":{const r=C("blockShape",t,e,n),o=C("crops",t,e,n);return[s.batchToSpaceND(C("x",t,e,n),r,o)]}case"DepthToSpace":{const r=C("blockSize",t,e,n),o=C("dataFormat",t,e,n).toUpperCase();return[s.depthToSpace(C("x",t,e,n),r,o)]}case"BroadcastTo":return[s.broadcastTo(C("x",t,e,n),C("shape",t,e,n))];case"BroadcastArgs":return[s.broadcastArgs(C("s0",t,e,n),C("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3(t,e,n,s,r=ee){const o=((i,a,l)=>{switch(i.category){case"arithmetic":return r(()=>uce(i,a,l));case"basic_math":return r(()=>cce(i,a,l));case"control":return gce(i,a,l);case"convolution":return r(()=>yce(i,a,l));case"creation":return r(()=>bce(i,a,l));case"dynamic":return vce(i,a,l);case"evaluation":return r(()=>xce(i,a,l));case"image":return r(()=>kce(i,a,l));case"graph":return r(()=>wce(i,a,l));case"logical":return r(()=>Nce(i,a,l));case"matrices":return r(()=>Tce(i,a,l));case"normalization":return r(()=>$ce(i,a,l));case"ragged":return r(()=>Ece(i,a,l));case"reduction":return r(()=>Ice(i,a,l));case"slice_join":return r(()=>Rce(i,a,l));case"sparse":return r(()=>_ce(i,a,l));case"spectral":return r(()=>Ace(i,a,l));case"string":return r(()=>Dce(i,a,l));case"transformation":return r(()=>Oce(i,a,l));case"hash_table":return Cce(i,a,l,s);case"custom":const u=f6(i.op);if(u&&u.customExecutor)return u.customExecutor(new lce(i,a,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return tl(o)?o.then(i=>[].concat(i)):[].concat(o)}class P3{constructor(e={},n={},s={},r={},o){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=s,this.functionMap=r,this.parseNodeNameCache=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const s=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(s))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3(t,e,n,s){const r=new Set,o=[];let i=null,a=null;const l=new Set,u=new Set(Object.keys(t).map(h=>nr(h)[0]));s=s||[];const c=new Set(s.map(h=>nr(h.name)[0])),d=[...e];for(;d.length>0;){const h=d.pop();if((Vl(h)||Uce(h)||Wce(h))&&i==null&&(i=h,a=i.children.map(f=>f.name).filter(f=>r.has(f))),r.add(h.name),n[h.name]==null&&!u.has(h.name)&&!c.has(h.name)){if(h.inputs.length===0){o.push(h.name);continue}h.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:r,missingInputs:o,dynamicNode:i,syncInputs:a}}function Fce(t,e){const{usedNodes:n,inputs:s}=e,r=Object.keys(s).map(g=>nr(g)[0]).map(g=>t.nodes[g]),o=t.initNodes||[],i=g=>n.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const l=a([...r,...t.weights,...o]).filter(i),u=a([...l,...Object.values(t.nodes)]).filter(i),c=new Map(u.map(g=>[g.name,g])),d={};for(const g of u){d[g.name]=d[g.name]||0;for(const y of g.children)i(y)||(d[y.name]=Number.POSITIVE_INFINITY),d[y.name]=(d[y.name]||0)+1}const h=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),f=[...h];for(;h.length>0;){const g=h.pop(),y=c.get(g);for(const b of y.children.filter(i))--d[b.name]===0&&(f.push(b.name),h.push(b.name))}const p=f.map(g=>c.get(g)),m=Lce(p,l);return Pce(m,l),m}function Lce(t,e){const n=new Map(t.map(i=>[i.name,i])),s=e.map(i=>i.name),r=new Set(s);for(;s.length>0;){const i=s.pop(),a=n.get(i);for(const l of a.children)!n.has(l.name)||r.has(l.name)||(r.add(l.name),s.push(l.name))}return t.filter(i=>r.has(i.name))}class G0 extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Pce(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),s=new Set(e.map(a=>a.name)),r=a=>s.has(typeof a=="string"?a:a.name),o=new Set(t.map(a=>a.name)),i=a=>o.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(i)){if(!n.has(l.name))throw new G0(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new G0(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!r(a))for(const l of a.inputs){if(!n.has(l.name))throw new G0(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new G0(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function Mce(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,s=t.map((a,l)=>Vl(a)?n:l),r=a=>{const l=s[e.get(a.name)];return l??-1},o=t.map((a,l)=>a.children.map(r).reduce((u,c)=>Math.max(u,c),s[l])),i=new Map;for(let a=0;a<t.length;++a){const l=o[a];if(l===n)continue;const u=t[a],c=t[l];i.has(c.name)||i.set(c.name,[]),i.get(c.name).push(u)}return i}const zce=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Bce=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Vce=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Vl(t){return zce.has(t.op)}function Uce(t){return Bce.has(t.op)}function Wce(t){return Vce.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w1{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(s=>e[s].map(r=>r.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(s=>{this._functionExecutorMap[s]=new w1(e.functions[s],this)})}getCompilationKey(e,n){const s=e.map(o=>o.name).sort(),r=n.map(o=>o.name).sort();return s.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,n){const s=M3(e,n,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:o,syncInputs:i}=s;if(o!=null)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(r.length>0){const u=n.map(d=>d.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${r}]`)}const a=Fce(this.graph,s),l=Mce(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Fn(n),n}cloneTensorList(e){return e?e.map(s=>this.cloneAndKeepTensor(s)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,s])=>[n,this.cloneTensorList(s)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const s=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const r=s.map(h=>this.graph.nodes[nr(h)[0]]),o=n.map(h=>nr(h)[0]),i=new Set(o);let a=o.map(h=>this.graph.nodes[h]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(r,a);let u=this.compiledMap.get(l);u==null&&(u=this.compile(e,a),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=se().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const c={},d={};return ee(()=>{const h=new P3(this.weightMap,c,d,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[b,v]=nr(y,h),x=[];x[v]=e[y],f[b]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(x))});const p=this.getFrozenTensorIds(f),{orderedNodes:m,nodeLiveUntilMap:g}=u;for(const y of m){if(f[y.name])continue;const b=L3(y,f,h,this._resourceManager);if(tl(b))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);f[y.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,f,h,p,i,g.get(y.name))}return this.parent==null&&h.dispose(p),n.map(y=>rs(y,f,h))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(s=>e[s]).map(s=>s.map(r=>r.id)));return new Set(n)}checkTensorForDisposal(e,n,s,r,o,i,a){if(!(Vl(n)||i.has(e))){for(const l of s[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(Vl(l))continue;const u=_3(l.name,s,r);if(u!=null)for(const c of u){if(!c||c.kept||o.has(c.id))continue;const d=a[c.id];d===1?(c.dispose(),delete a[c.id]):d!=null&&a[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,s,r,o,i){function a(l){return Vl(l)||o.has(l.name)}if(!(Vl(e)||i==null))for(const l of i){if(a(l))continue;const u=_3(l.name,n,s);for(const c of u)!c||c.kept||r.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,s=!1,r={},o={}){this.disposeIntermediateTensors(),s||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=se().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const i=new P3(this.weightMap,r,o,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,i,n,s),l=n.map(h=>rs(h,a,i)),u=l.map(h=>h.id),c=Object.keys(e).map(h=>e[h].id),d=new Set([...u,...c,...this.weightIds]);return Object.values(a).forEach(h=>{h.forEach(f=>{f&&!f.isDisposed&&!d.has(f.id)&&f.dispose()})}),this.parent==null&&i.dispose(d),l}async executeFunctionAsync(e,n,s){const r=e.reduce((o,i,a)=>(o[this.inputs[a].name]=i,o),{});return this._executeAsync(r,this.outputNodes,!0,n,s)}async executeWithControlFlow(e,n,s,r){const o=Object.keys(e),i=o.map(x=>this.graph.nodes[nr(x)[0]]),a=s.map(x=>nr(x)[0]),l=new Set(a);let u=a.map(x=>this.graph.nodes[x]);u.length===0&&(u=this._outputs);const{usedNodes:c,missingInputs:d,dynamicNode:h,syncInputs:f}=M3(e,u,this.weightMap,this._initNodes),p=[...i,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(x=>{const[w,S]=nr(x),k=[];k[S]=e[x],m[w]=k});const g={},y=this.getFrozenTensorIds(m),b={};for(;p.length>0;){const x=this.processStack(i,p,n,m,b,y,l,g,c);await Promise.all(x)}h==null&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=u.filter(x=>!Vl(x)&&!rs(x.name,m,n)).map(x=>x.name);if(v.length>0){let x="";throw h!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${o}]. Consider providing the following inputs: [${d}]. ${x}`)}return m}processStack(e,n,s,r,o,i,a,l,u){const c=[];for(;n.length>0;){const d=n.pop();s.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&C("isConstant",d.node,r,s)&&([h]=Ri(d.node.name,s)),r[d.node.name]==null){const f=L3(d.node,r,s,this._resourceManager);h||([h]=Ri(d.node.name,s));const p=s.currentContext;tl(f)?c.push(f.then(m=>(r[h]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(m)),s.currentContext=p,this.checkTensorForDisposal(h,d.node,r,s,i,a,l),this.processChildNodes(d.node,n,s,r,o,u),m))):(r[h]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(f)),this.checkTensorForDisposal(h,d.node,r,s,i,a,l),this.processChildNodes(d.node,n,s,r,o,u))}else this.processChildNodes(d.node,n,s,r,o,u)}return c}processChildNodes(e,n,s,r,o,i){e.children.forEach(a=>{const[l]=Ri(a.name,s);o[l]||!i.has(a.name)||(a.op==="Merge"?a.inputNames.some(u=>!!rs(u,r,s))&&(o[l]=!0,n.push({contexts:s.currentContext,node:a})):a.inputNames.every(u=>!!rs(u,r,s))&&(o[l]=!0,n.push({contexts:s.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const s=e[n],[r]=nr(n),o=this.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){const i=o.attrParams.shape.value,a=i.length===s.shape.length&&s.shape.every((l,u)=>i[u]===-1||i[u]===l);T(a,()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${i}], but was [${s.shape}]`)}o.attrParams.dtype&&o.attrParams.dtype.value&&T(s.dtype===o.attrParams.dtype.value,()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${s.dtype}`)})}mapInputs(e){var n,s;const r={};for(const o in e){const i=(s=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||s===void 0?void 0:s[o];i!=null?r[i.name]=e[o]:r[o]=e[o]}return r}checkInputs(e){const n=Object.keys(e).filter(s=>{const[r]=nr(s);return this.graph.nodes[r]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var s,r;const o=(r=(s=this._signature)===null||s===void 0?void 0:s.outputs)===null||r===void 0?void 0:r[n];return o!=null?o.name:n},{})}checkOutputs(e){e.forEach(n=>{const[s]=nr(n);if(!this.graph.nodes[s])throw new Error(`The output '${n}' is not found in the graph`)})}}class jce{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gce="?tfjs-format=file",Hce="model.json";class qce{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},s=c$){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=s,n==null&&(this.loadOptions={}),this.resourceManager=new jce}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return tl(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await aP(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const s=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const o=this.artifacts.userDefinedMetadata;o.signature!=null&&(r=o.signature),o.structuredOutputKeys!=null&&(this.structuredOutputKeys=o.structuredOutputKeys)}if(this.signature=r,this.version=`${s.versions.producer}.${s.versions.minConsumer}`,this.executor=new w1(A3.Instance.transformGraph(s,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const o=A3.Instance.transformGraph(e.modelInitializer);this.initializer=new w1(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const s=this.io.getSaveHandlers(e);if(s.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(s.length>1)throw new Error(`Found more than one (${s.length}) save handlers for URL '${e}'`);e=s[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Et?[e]:e,s={};return n.forEach((r,o)=>s[this.structuredOutputKeys[o]]=r),s}return e}predict(e,n){const s=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(s)}async predictAsync(e,n){const s=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(s)}normalizeInputs(e){var n;if(!(e instanceof Et)&&!Array.isArray(e)){const o=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(o!=null)for(const i in o){const a=o[i];a.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const s=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+s!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-s} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((o,i)=>{var a,l,u;const c=(u=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[i])===null||u===void 0?void 0:u.resourceId;return c!=null?o[i]=this.resourceIdToCapturedInput[c]:o[i]=e[r++],o},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,s=Object.keys(n);for(let r=0;r<s.length;r++){const o=s[r],i=n[o];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const s=this.executor.execute(e,n);return s.length>1?s:s[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const s=await this.executor.executeAsync(e,n);return s.length>1?s:s[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,s)=>(n[s]=[e[s]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&at(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function z3(t,e={},n=c$){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Kce(t));const s=new qce(t,e,n);return await s.load(),s}function Kce(t){return t.endsWith("/")||(t=t+"/"),`${t}${Hce}${Gce}`}/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */function S1(t,e,n,s){return new(n||(n=Promise))(function(r,o){function i(u){try{l(s.next(u))}catch(c){o(c)}}function a(u){try{l(s.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?r(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(i,a)}l((s=s.apply(t,e||[])).next())})}function C1(t,e){var n,s,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,s&&(r=2&c[0]?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(c[0]===6&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(d){c=[6,d],s=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var Xce={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"},ga=224,Yce={"1.00":"module_apply_default/MobilenetV1/Logits/global_pool","2.00":"module_apply_default/MobilenetV2/Logits/AvgPool"},yc={"1.00":{.25:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_025_224/classification/1",inputRange:[0,1]},"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_050_224/classification/1",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_075_224/classification/1",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_100_224/classification/1",inputRange:[0,1]}},"2.00":{"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_050_224/classification/2",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_075_224/classification/2",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_100_224/classification/2",inputRange:[0,1]}}};function Qce(t){return t===void 0&&(t={version:1,alpha:1}),S1(this,void 0,void 0,function(){var e,n,s,r,o,i,a;return C1(this,function(l){switch(l.label){case 0:if(xue==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(e=t.version.toFixed(2),n=t.alpha?t.alpha.toFixed(2):"",s=-1,r=1,t.modelUrl==null){if(!(e in yc))throw new Error("Invalid version of MobileNet. Valid versions are: "+Object.keys(yc));if(!(n in yc[e]))throw new Error("MobileNet constructed with invalid alpha "+t.alpha+". Valid multipliers for this version are: "+Object.keys(yc[e])+".");i=yc[e][n].inputRange,s=i[0],r=i[1]}return t.inputRange!=null&&(a=t.inputRange,s=a[0],r=a[1]),[4,(o=new Zce(e,n,t.modelUrl,s,r)).load()];case 1:return l.sent(),[2,o]}})})}var Zce=function(){function t(e,n,s,r,o){r===void 0&&(r=-1),o===void 0&&(o=1),this.version=e,this.alpha=n,this.modelUrl=s,this.inputMin=r,this.inputMax=o,this.normalizationConstant=(o-r)/255}return t.prototype.load=function(){return S1(this,void 0,void 0,function(){var e,n,s,r,o=this;return C1(this,function(i){switch(i.label){case 0:return this.modelUrl?(e=this,[4,z3(this.modelUrl)]):[3,2];case 1:return e.model=i.sent(),[3,4];case 2:return n=yc[this.version][this.alpha].url,s=this,[4,z3(n,{fromTFHub:!0})];case 3:s.model=i.sent(),i.label=4;case 4:return[4,(r=ee(function(){return o.model.predict(xn([1,ga,ga,3]))})).data()];case 5:return i.sent(),r.dispose(),[2]}})})},t.prototype.infer=function(e,n){var s=this;return n===void 0&&(n=!1),ee(function(){e instanceof Et||(e=d$(e));var r=pe(V(Ce(e,"float32"),s.normalizationConstant),s.inputMin),o=r;(e.shape[0]!==ga||e.shape[1]!==ga)&&(o=$r.resizeBilinear(r,[ga,ga],!0));var i,a=W(o,[-1,ga,ga,3]);if(n){var l=Yce[s.version],u=s.model.execute(a,l);i=ia(u,[1,2])}else{var c=s.model.predict(a);i=xt(c,[0,1],[-1,1e3])}return i})},t.prototype.classify=function(e,n){return n===void 0&&(n=3),S1(this,void 0,void 0,function(){var s,r;return C1(this,function(o){switch(o.label){case 0:return[4,Jce(s=this.infer(e),n)];case 1:return r=o.sent(),s.dispose(),[2,r]}})})},t}();function Jce(t,e){return S1(this,void 0,void 0,function(){var n,s,r,o,i,a,l;return C1(this,function(u){switch(u.label){case 0:return[4,(n=Hh(t)).data()];case 1:for(s=u.sent(),n.dispose(),r=[],l=0;l<s.length;l++)r.push({value:s[l],index:l});for(r.sort(function(c,d){return d.value-c.value}),o=new Float32Array(e),i=new Int32Array(e),l=0;l<e;l++)o[l]=r[l].value,i[l]=r[l].index;for(a=[],l=0;l<i.length;l++)a.push({className:Xce[i[l]],probability:o[l]});return[2,a]}})})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6={kernelName:$m,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(t,Zu(Ce(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ede={kernelName:Gd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Lt(Ce(n,"float32")),r=Yn(Oe(qe(1),s));return Wt(Ue(t,r))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tde={kernelName:Hd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Yn(Oe(Lt(Ce(n,"float32")),1));return Ue(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nde={kernelName:qu,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=st(n.shape,s.shape);return{a:()=>{let a=t;const l=An(n.shape,r);return l.length>0&&(a=ze(a,l)),W(a,n.shape)},b:()=>{let a=t;const l=An(s.shape,r);return l.length>0&&(a=ze(a,l)),W(a,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sde={kernelName:Em,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((s,r)=>{n[r]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rde={kernelName:Im,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>St(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ode={kernelName:Rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>St(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ide={kernelName:qd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Yn(Oe(qe(1),Lt(Ce(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ade={kernelName:Kd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Yn(pe(qe(1),Lt(Ce(n,"float32"))));return Ue(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lde={kernelName:Qd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=st(n.shape,s.shape);return{a:()=>{const a=pe(Lt(n),Lt(s));let l=V(t,Ue(s,a));const u=An(n.shape,r);return u.length>0&&(l=ze(l,u)),W(l,n.shape)},b:()=>{const a=pe(Lt(n),Lt(s));let l=Wt(V(t,Ue(n,a)));const u=An(s.shape,r);return u.length>0&&(l=ze(l,u)),W(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ude={kernelName:Xd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,pe(Lt(Ce(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cde={kernelName:Yd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Oe(qe(1),Lt(Ce(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dde(t,e,n,s,r,o){const i=E(t,"dy","avgPool3dGrad"),a=E(e,"input","avgPool3dGrad");let l=i,u=a,c=!1;a.rank===4&&(c=!0,l=W(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=W(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),T(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),T(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Ds("avgPool3dGrad",r,o);const d={dy:l,input:u},h={filterSize:n,strides:s,pad:r,dimRoundingMode:o},f=L.runKernel(G2,d,h);return c?W(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const hde=M({avgPool3dGrad_:dde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fde={kernelName:Am,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:r,strides:o,pad:i,dimRoundingMode:a}=n;return{x:()=>hde(t,s,r,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pde(t,e,n,s,r){const o=E(t,"dy","avgPoolGrad"),i=E(e,"input","avgPoolGrad");T(i.rank===o.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${o.rank})`);let a=i,l=o,u=!1;i.rank===3&&(u=!0,a=W(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=W(o,[1,o.shape[0],o.shape[1],o.shape[2]])),T(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),T(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:s,pad:r},h=L.runKernel(j2,c,d);return u?W(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const mde=M({avgPoolGrad_:pde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gde={kernelName:_m,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:r,strides:o,pad:i}=n;return{x:()=>mde(t,s,r,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yde={kernelName:Dm,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[s,r]=e,{transposeA:o,transposeB:i}=n;return!o&&!i?{a:()=>ft(t,r,!1,!0),b:()=>ft(s,t,!0,!1)}:!o&&i?{a:()=>ft(t,r,!1,!1),b:()=>ft(t,s,!0,!1)}:o&&!i?{a:()=>ft(r,t,!1,!0),b:()=>ft(s,t,!1,!1)}:{a:()=>ft(r,t,!0,!0),b:()=>ft(t,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bde={kernelName:Om,gradFunc:(t,e,n)=>{const{blockShape:s,crops:r}=n;return{x:()=>Wg(t,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vde={kernelName:ML,gradFunc:(t,e,n)=>{const s=n,r=s.inputShape,o=s.shape,i=Array.from(o);for(let l=r.length-1;l>=0;l--)if(r[l]===o[l])i[l]=1;else if(r[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${o}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>ze(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xde={kernelName:Zd,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wde={kernelName:Jd,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sde={kernelName:eh,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{clipValueMin:r,clipValueMax:o}=n;return{x:()=>ls(Oo(ra(s,r),Sl(s,o)),t,St(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cde={kernelName:Lm,inputsToSave:["x"],gradFunc:g6.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kde={kernelName:Pm,saveAllInputs:!0,gradFunc:(t,e,n)=>{const s=e.map(l=>l.shape),{axis:r}=n,o=pt(r,e[0].shape)[0],i=s.map(l=>l[o]);return Us(t,i,o).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nde={kernelName:Mm,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,r]=e,{dilations:o,strides:i,pad:a,dataFormat:l}=n;return T(sl(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>dT(s.shape,t,r,i,a,l),filter:()=>JT(s,t,r.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tde={kernelName:zm,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[s,r]=e,{strides:o,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Ki(t,r,o,i,a,1,l),filter:()=>JT(t,s,r.shape,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $de(t,e,n,s,r){let o=t;t.rank===4&&(o=W(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=W(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),T(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),T(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),T(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),T(o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`),T(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:o,dy:i},l={strides:s,pad:r,filterShape:n};return L.runKernel(Y2,a,l)}const Ede=M({conv3DBackpropFilter_:$de});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ide={kernelName:Bm,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:r,pad:o}=n;T(sl(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,a]=e;return{x:()=>CP(i.shape,t,a,r,o),filter:()=>Ede(i,t,a.shape,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rde={kernelName:th,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(Wt(pv(Ce(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _de={kernelName:nh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(mv(Ce(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ade={kernelName:Vm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:r,exclusive:o,reverse:i}=n;return{x:()=>{const a=dn([r],s.rank);let l=tv(t,r,o,!i);return a!=null&&(l=wt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dde={kernelName:Um,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:r,pad:o,dimRoundingMode:i}=n,a=s??[1,1];T(sl(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return T(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),T(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),T(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),T(hs(r,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${r} and dilations '${a}'.`),Ds("depthwiseConv2d",o,i),{x:()=>pM(l.shape,t,u,r,o,a,i),filter:()=>fM(l,t,u.shape,r,o,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ode={kernelName:Wm,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,r]=e,o={x:s,filter:r,dy:t},i={x:s,filter:r,dy:t};return{x:()=>L.runKernel(f1,o,n),filter:()=>L.runKernel(p1,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fde={kernelName:rh,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,s={dy:t,y:n};return{x:()=>L.runKernel(ab,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lde={kernelName:oh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=V(Hs(Wt(Lt(n))),2/Math.sqrt(Math.PI));return{x:()=>V(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pde={kernelName:ih,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mde={kernelName:Gm,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>W(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zde={kernelName:ah,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(t,Hs(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bde={kernelName:lh,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vde={kernelName:uh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=st(n.shape,s.shape);return{a:()=>{const a=Ue(t,Ce(s,"float32")),l=An(n.shape,r);return l.length>0?W(ze(a,l),n.shape):a},b:()=>{let a=V(t,Ce(n,"float32"));const l=An(s.shape,r);l.length>0&&(a=W(ze(a,l),s.shape));const u=Lt(s);return Wt(Ue(a,Ce(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ude={kernelName:Hm,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:s}=n,[r,o,i,a]=e,l=a??qe(1),u=An(o.shape,r.shape),c=[];if(o.rank===1){for(let x=0;x<r.shape.length-1;++x)c.push(r.shape[x]);c.push(1)}const d=Oe(r,o),h=V(t,l),f=dv(pe(i,qe(s))),p=V(V(V(f,f),f),qe(-.5));return{x:()=>o.rank===1?W(V(V(t,Tr(W(f,[1,1,1,o.shape[0]]),c)),l),r.shape):W(V(V(t,f),l),r.shape),mean:()=>{let x=V(V(f,qe(-1)),h);return o.rank===1&&(x=ze(x,u)),W(x,o.shape)},variance:()=>{let x=V(V(p,d),h);return o.rank===1&&(x=ze(x,u)),W(x,o.shape)},scale:()=>{const x=V(d,f);let w=V(t,x);return o.rank===1&&(w=ze(w,u)),W(w,o.shape)},offset:()=>{let x=t;return o.rank===1&&(x=ze(x,u)),W(x,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wde={kernelName:qm,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[s,r]=e,{axis:o,batchDims:i}=n,a=pt(o,s.shape)[0],l=(u,c,d)=>()=>{const h=u.shape,f=c.size,p=h.slice(0,a),m=p.length,g=h.slice(o,h.length).slice(1),y=g.length,b=B3(0,m),v=B3(m+1,m+1+y),x=V3([p,[f],g]),w=W(d,x),S=W(c,[f]),k=V3([[m],b,v]),N=wt(w,k);let $=wv(N,S,u.shape[a]);const I=wl(k);return $=wt($,I),$};if(i===1){const u=s.shape[0],c=s.split(u,0);return{x:()=>qs(c.map((f,p)=>l(f,r.slice(p,1),t.slice(p,1))())).reshape(s.shape),indices:()=>r}}else return{x:l(s,r,t),indices:()=>r}}};function B3(t,e){const n=[];for(let s=t;s<e;++s)n.push(s);return n}function V3(t){const e=[];for(let n=0;n<t.length;++n)for(let s=0;s<t[n].length;++s)e.push(t[n][s]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jde={kernelName:ch,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>St(n),b:()=>St(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gde={kernelName:dh,gradFunc:t=>({x:()=>Ce(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hde={kernelName:hh,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qde={kernelName:fh,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kde={kernelName:ph,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xde={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{alpha:r}=n,o=Qs(s,0);return{x:()=>ls(o,t,V(t,r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yde={kernelName:gh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,pe(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qde={kernelName:mh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Ce(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zde={kernelName:zL,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{axis:r}=n;return{logits:()=>{const i=Hs(s);return Oe(t,V(ze(t,r,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jde(t,e,n,s=5,r=1,o=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:s,bias:r,alpha:o,beta:i};return L.runKernel(mb,a,l)}const ehe=M({localResponseNormalizationBackprop_:Jde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const the={kernelName:tg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,r]=e,{depthRadius:o,bias:i,alpha:a,beta:l}=n;return{x:()=>ehe(s,r,t,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6(t,e,n,s){return e.rank<n.rank&&(e=W(e,Cn(e.shape,s))),t.rank<n.rank&&(t=W(t,Cn(t.shape,s))),{x:()=>V(t,Ce(uo(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3={kernelName:ng,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{reductionIndices:r}=s,o=e[0],i=e[1],a=pt(r,o.shape),l=y6(t,i,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nhe={kernelName:yh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>V(t,Ce(ra(n,s),"float32")),b:()=>V(t,Ce(Td(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function she(t,e,n,s,r,o,i){const a=E(t,"dy","maxPool3dGrad"),l=E(e,"input","maxPool3dGrad"),u=E(n,"output","maxPool3dGrad");let c=a,d=l,h=u,f=!1;l.rank===4&&(f=!0,c=W(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=W(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=W(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),T(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),T(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),T(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Ds("maxPool3dGrad",o,i);const p={dy:c,input:d,output:h},m={filterSize:s,strides:r,pad:o,dimRoundingMode:i},g=L.runKernel(yb,p,m);return f?W(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const rhe=M({maxPool3dGrad_:she});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ohe={kernelName:rg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,r]=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>rhe(t,s,r,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ihe(t,e,n,s,r,o,i){const a=E(t,"dy","maxPoolGrad"),l=E(e,"input","maxPoolGrad"),u=E(n,"output","maxPoolGrad");T(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),T(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),T(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ds("maxPoolGrad",o,i);const c={dy:a,input:l,output:u},d={filterSize:s,strides:r,pad:o,dimRoundingMode:i};return L.runKernel(gb,c,d)}const ahe=M({maxPoolGrad_:ihe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lhe={kernelName:sg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,r]=e,{filterSize:o,strides:i,pad:a}=n;return{x:()=>ahe(t,s,r,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uhe={kernelName:og,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:r}=n,o=pt(r,s.shape),a=Zn(s.shape,o)[1],l=le(a);return{x:()=>{const c=s.shape.slice();o.forEach(f=>{c[f]=1});const d=W(t,c);return Ue(V(d,Bs(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const che={kernelName:ig,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{axis:r}=s,[o,i]=e,a=pt(r,o.shape),l=y6(t,i,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dhe={kernelName:bh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>V(t,Ce(Sl(n,s),"float32")),b:()=>V(t,Ce(Qs(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hhe={kernelName:ag,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:r}=n,o=r.map(i=>i[0]);return{x:()=>xt(t,o,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fhe={kernelName:vh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=st(n.shape,s.shape);return{a:()=>{const a=An(n.shape,r);return a.length>0?W(ze(t,a),n.shape):t},b:()=>{const a=V(t,Wt(jh(Ue(n,s)))),l=An(s.shape,r);return l.length>0?W(ze(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const phe={kernelName:xh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=st(n.shape,s.shape);return{a:()=>{const a=V(t,Ce(s,"float32")),l=An(n.shape,r);return l.length>0?W(ze(a,l),n.shape):a},b:()=>{const a=V(t,Ce(n,"float32")),l=An(s.shape,r);return l.length>0?W(ze(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mhe={kernelName:lg,gradFunc:t=>({x:()=>Wt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ghe={kernelName:dg,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>xn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yhe={kernelName:cg,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bhe={kernelName:hg,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:s}=n;return Or(t,s).map(o=>()=>o)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3={kernelName:fg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:r}=n,o=r.map(i=>i[0]);return{x:()=>xt(t,o,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vhe={kernelName:wh,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,s,r]=e,o=n,i=s,a=st(o.shape,i.shape);return{a:()=>{const c=Ce(i,"float32");let d=V(t,V(c,di(o,Oe(c,qe(1)))));const h=An(o.shape,a);return h.length>0&&(d=ze(d,h)),W(d,o.shape)},b:()=>{const c=Qs(o,0),d=ls(c,dr(o),St(o));let h=V(t,V(r,d));const f=An(i.shape,a);return f.length>0&&(h=ze(h,f)),W(h,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xhe={kernelName:pg,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,s]=e,r=Qs(n,0);return{x:()=>ls(r,t,V(t,s)),alpha:()=>{let o=ls(r,St(t),V(t,n));const i=An(s.shape,t.shape);return i.length>0&&(o=ze(o,i)),W(o,s.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whe(t,e,n){const s=t.shape.slice();s[n]=1;const r=W(e,s),o=Vp(t,n,!0,!1),i=Vp(t,n,!0,!0),a=V(o,i);return V(r,a)}function She(t,e,n){const s=t.shape.length,r=s-n.length,o=dn(n,s);let i=t;o!=null&&(i=wt(t,o));const a=i.shape.slice(),u=a.splice(s-n.length,n.length).reduce((h,f)=>h*f,1);a.push(u);const c=i.reshape(a);let d=whe(c,e,r);if(d=d.reshape(i.shape),o!=null){const h=wl(o);d=wt(d,h)}return d}const Che={kernelName:mg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:r}=n;let o=[];return r==null?o=s.shape.map((i,a)=>a):typeof r=="number"?o=[r]:o=r,{x:()=>She(s,t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const khe={kernelName:sh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=st(n.shape,s.shape);return{a:()=>{const a=Ue(t,Ce(s,"float32")),l=An(n.shape,r);return l.length>0?W(ze(a,l),n.shape):a},b:()=>{let a=V(t,Ce(n,"float32"));const l=An(s.shape,r);l.length>0&&(a=W(ze(a,l),s.shape));const u=Lt(s);return Wt(Ue(a,Ce(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nhe={kernelName:Sh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Wt(Lt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const The={kernelName:kh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=V(Sl(n,6),Zu(n));return{x:()=>V(t,Ce(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $he={kernelName:Ch,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(t,Ce(Zu(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ehe={kernelName:gg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ihe={kernelName:bg,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,r={dy:t,images:s};return{images:()=>L.runKernel(Ib,r,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rhe={kernelName:yg,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,r={dy:t,images:s};return{images:()=>L.runKernel(Eb,r,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _he={kernelName:vg,gradFunc:(t,e,n)=>{const{dims:s}=n,r=pt(s,t.shape);return{x:()=>Dr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ahe={kernelName:Nh,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dhe={kernelName:Th,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(Ue(t,V(di(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ohe={kernelName:xg,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ce(St(n),"float32"),t:()=>V(t,Ce(n,t.dtype)),e:()=>V(t,Ce(Bg(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fhe={kernelName:$h,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Qs(n,qe(0)),r=qe(Fv),o=qe(Lv),i=V(t,o),a=V(V(t,r),Hs(Ce(n,"float32")));return ls(s,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lhe={kernelName:_h,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(t,V(n,Oe(qe(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Phe={kernelName:Rh,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mhe={kernelName:Eh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(Fg(Ce(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zhe={kernelName:Ih,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(ev(Ce(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bhe={kernelName:wg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{begin:r,size:o}=n,i=s.shape,[a,l]=Dv(s,r,o),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],i[c]-a[c]-l[c]]);return{x:()=>oa(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vhe={kernelName:Ng,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{dim:r}=n,o=!0,i=V(t,s);return{logits:()=>Oe(i,V(ze(i,[r],o),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uhe={kernelName:Ah,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(t,_o(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3={kernelName:Cg,gradFunc:(t,e,n)=>{const{blockShape:s,paddings:r}=n;return{x:()=>Og(t,s,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3={kernelName:kg,gradFunc:(t,e,n)=>{const{axis:s}=n;return{x:()=>wn(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Whe={kernelName:Dh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,V(Yn(Ce(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jhe={kernelName:Mb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(t,V(Ce(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ghe={kernelName:Oh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=qe(2);return{a:()=>V(t,V(r,Oe(n,s))),b:()=>V(t,V(r,Oe(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hhe={kernelName:zh,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qhe={kernelName:Fh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,r=st(n.shape,s.shape);return{a:()=>{let a=t;const l=An(n.shape,r);return l.length>0&&(a=ze(a,l)),W(a,n.shape)},b:()=>{let a=t;const l=An(s.shape,r);return l.length>0&&(a=ze(a,l)),W(Wt(a),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Khe={kernelName:Sg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,r=s.shape.slice(),{axis:o}=n;pt(o,s.shape).forEach(u=>{r[u]=1});const a=W(t,r),l=V(a,Bs(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xhe={kernelName:Lh,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Lt(Fg(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yhe={kernelName:Ph,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>V(Oe(qe(1),Lt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qhe={kernelName:Mh,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{reps:r}=n;return{x:()=>{let i=St(s);if(s.rank===1)for(let a=0;a<r[0];++a)i=pe(i,xt(t,[a*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)i=pe(i,xt(t,[a*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)for(let u=0;u<r[2];++u)i=pe(i,xt(t,[a*s.shape[0],l*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)for(let u=0;u<r[2];++u)for(let c=0;c<r[3];++c)i=pe(i,xt(t,[a*s.shape[0],l*s.shape[1],u*s.shape[2],c*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zhe={kernelName:hu,gradFunc:(t,e,n)=>{const s=n,{perm:r}=s,o=wl(r);return{x:()=>wt(t,o)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jhe={kernelName:$g,gradFunc:(t,e,n)=>{const s=n,{axis:r}=s;return{value:()=>qs(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const efe={kernelName:Eg,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>tfe(t,n)}}};function tfe(t,e){const n=xi(e,St(e)),s=Gh(t,n);let r=ra(e,qe(0,"int32"));const o=s.rank-r.rank;for(let a=0;a<o;++a)r=ss(r,a+1);r=Oo(r,Bs(s.shape,"bool"));const i=St(s);return ls(r,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nfe={kernelName:Ig,gradFunc:t=>({x:()=>St(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sfe=[g6,ede,tde,nde,sde,rde,ode,ide,ade,lde,ude,cde,fde,gde,yde,bde,vde,xde,wde,Sde,Cde,kde,Tde,Nde,Ide,Rde,_de,Ade,Dde,Ode,khe,Fde,Lde,Pde,Mde,zde,Vde,Bde,Ude,Wde,jde,Gde,Hde,qde,Kde,Xde,Yde,Qde,Zde,the,U3,U3,nhe,ohe,lhe,uhe,che,dhe,hhe,fhe,phe,mhe,ghe,yhe,bhe,W3,W3,vhe,xhe,Che,Nhe,The,$he,Ehe,Ihe,Rhe,_he,Ahe,Dhe,Ohe,Fhe,Lhe,Phe,Mhe,zhe,Bhe,Vhe,Uhe,j3,j3,G3,G3,Whe,Ghe,jhe,Hhe,qhe,Khe,Xhe,Yhe,Qhe,Zhe,Jhe,efe,nfe];for(const t of sfe)BL(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.abs=function(){return this.throwIfDisposed(),In(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.acos=function(){return this.throwIfDisposed(),HN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.acosh=function(){return this.throwIfDisposed(),qN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.add=function(t){return this.throwIfDisposed(),pe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.all=function(t,e){return this.throwIfDisposed(),Qb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.any=function(t,e){return this.throwIfDisposed(),Mp(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.argMax=function(t){return this.throwIfDisposed(),Eu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.argMin=function(t){return this.throwIfDisposed(),KN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.asScalar=function(){return this.throwIfDisposed(),T(this.size===1,()=>"The array must have only 1 element."),W(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.asType=function(t){return this.throwIfDisposed(),Ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.as1D=function(){return this.throwIfDisposed(),W(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.as2D=function(t,e){return this.throwIfDisposed(),W(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),W(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.as4D=function(t,e,n,s){return this.throwIfDisposed(),W(this,[t,e,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.as5D=function(t,e,n,s,r){return this.throwIfDisposed(),W(this,[t,e,n,s,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.asin=function(){return this.throwIfDisposed(),XN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.asinh=function(){return this.throwIfDisposed(),YN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.atan=function(){return this.throwIfDisposed(),QN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.atan2=function(t){return this.throwIfDisposed(),ZN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.atanh=function(){return this.throwIfDisposed(),JN(this)};de().prototype.avgPool=function(t,e,n,s){return this.throwIfDisposed(),Dg(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Og(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.batchNorm=function(t,e,n,s,r){return this.throwIfDisposed(),Bh(this,t,e,n,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.broadcastTo=function(t){return this.throwIfDisposed(),fu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.cast=function(t){return this.throwIfDisposed(),Ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.ceil=function(){return this.throwIfDisposed(),iT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Gs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Et&&(t=[t]),wn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.conv1d=function(t,e,n,s,r,o){return this.throwIfDisposed(),Zb(this,t,e,n,s,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.conv2dTranspose=function(t,e,n,s,r){return this.throwIfDisposed(),Jb(this,t,e,n,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.conv2d=function(t,e,n,s,r,o){return this.throwIfDisposed(),Ki(this,t,e,n,s,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.cos=function(){return this.throwIfDisposed(),Fg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.cosh=function(){return this.throwIfDisposed(),ev(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Vp(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),tv(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),pT(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.depthwiseConv2d=function(t,e,n,s,r,o){return this.throwIfDisposed(),Vh(this,t,e,n,s,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.dilation2d=function(t,e,n,s,r){return this.throwIfDisposed(),mT(this,t,e,n,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.divNoNan=function(t){return this.throwIfDisposed(),gT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.div=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.dot=function(t){return this.throwIfDisposed(),yT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.elu=function(){return this.throwIfDisposed(),Uh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.equal=function(t){return this.throwIfDisposed(),uo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.erf=function(){return this.throwIfDisposed(),nv(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),vT(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.exp=function(){return this.throwIfDisposed(),Hs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.expandDims=function(t){return this.throwIfDisposed(),ss(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.expm1=function(){return this.throwIfDisposed(),xT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.fft=function(){return this.throwIfDisposed(),Kg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.flatten=function(){return this.throwIfDisposed(),W(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.floor=function(){return this.throwIfDisposed(),jh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.floorDiv=function(t){return this.throwIfDisposed(),Yb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.gather=function(t,e,n){return this.throwIfDisposed(),Gh(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.greaterEqual=function(t){return this.throwIfDisposed(),ra(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.greater=function(t){return this.throwIfDisposed(),Qs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.ifft=function(){return this.throwIfDisposed(),Rd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.irfft=function(){return this.throwIfDisposed(),yv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.isFinite=function(){return this.throwIfDisposed(),wT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.isInf=function(){return this.throwIfDisposed(),ST(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.isNaN=function(){return this.throwIfDisposed(),CT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.leakyRelu=function(t){return this.throwIfDisposed(),Pg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.lessEqual=function(t){return this.throwIfDisposed(),Sl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.less=function(t){return this.throwIfDisposed(),Td(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.localResponseNormalization=function(t,e,n,s){return this.throwIfDisposed(),kT(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.logSigmoid=function(){return this.throwIfDisposed(),NT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.logSoftmax=function(t){return this.throwIfDisposed(),ov(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),zg(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.log=function(){return this.throwIfDisposed(),dr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.log1p=function(){return this.throwIfDisposed(),Mg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Oo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.logicalNot=function(){return this.throwIfDisposed(),Bg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.logicalOr=function(t){return this.throwIfDisposed(),iv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.logicalXor=function(t){return this.throwIfDisposed(),TT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),ft(this,t,e,n)};de().prototype.maxPool=function(t,e,n,s){return this.throwIfDisposed(),Vg(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.max=function(t,e){return this.throwIfDisposed(),_r(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.maximum=function(t){return this.throwIfDisposed(),xi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.mean=function(t,e){return this.throwIfDisposed(),ln(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.min=function(t,e){return this.throwIfDisposed(),Nd(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.minimum=function(t){return this.throwIfDisposed(),ol(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),ET(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.mod=function(t){return this.throwIfDisposed(),IT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.mul=function(t){return this.throwIfDisposed(),V(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.neg=function(){return this.throwIfDisposed(),Wt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Wh(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.notEqual=function(t){return this.throwIfDisposed(),_u(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),$d(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.onesLike=function(){return this.throwIfDisposed(),hr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.pad=function(t,e){return this.throwIfDisposed(),oa(this,t,e)};de().prototype.pool=function(t,e,n,s,r,o){return this.throwIfDisposed(),RT(this,t,e,n,s,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.pow=function(t){return this.throwIfDisposed(),di(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.prelu=function(t){return this.throwIfDisposed(),jg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.prod=function(t,e){return this.throwIfDisposed(),_T(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.reciprocal=function(){return this.throwIfDisposed(),VT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.relu=function(){return this.throwIfDisposed(),Bo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.relu6=function(){return this.throwIfDisposed(),uv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.reshapeAs=function(t){return this.throwIfDisposed(),W(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.reshape=function(t){return this.throwIfDisposed(),W(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),bM(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),vM(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.reverse=function(t){return this.throwIfDisposed(),Dr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.rfft=function(){return this.throwIfDisposed(),Xg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.round=function(){return this.throwIfDisposed(),cv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.rsqrt=function(){return this.throwIfDisposed(),dv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.selu=function(){return this.throwIfDisposed(),hv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.separableConv2d=function(t,e,n,s,r,o){return this.throwIfDisposed(),fv(this,t,e,n,s,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.sigmoid=function(){return this.throwIfDisposed(),_o(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.sign=function(){return this.throwIfDisposed(),UT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.sin=function(){return this.throwIfDisposed(),pv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.sinh=function(){return this.throwIfDisposed(),mv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.slice=function(t,e){return this.throwIfDisposed(),xt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.softmax=function(t){return this.throwIfDisposed(),Hh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.softplus=function(){return this.throwIfDisposed(),Yu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Wg(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.split=function(t,e){return this.throwIfDisposed(),Us(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.sqrt=function(){return this.throwIfDisposed(),Yn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.square=function(){return this.throwIfDisposed(),Lt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.squaredDifference=function(t){return this.throwIfDisposed(),bv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.squeeze=function(t){return this.throwIfDisposed(),ia(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Et?[this,t]:[this,...t];return qs(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.step=function(t){return this.throwIfDisposed(),Zu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.stridedSlice=function(t,e,n,s,r,o,i,a){return this.throwIfDisposed(),WT(this,t,e,n,s,r,o,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.sub=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.sum=function(t,e){return this.throwIfDisposed(),ze(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.tan=function(){return this.throwIfDisposed(),jT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.tanh=function(){return this.throwIfDisposed(),rl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.tile=function(t){return this.throwIfDisposed(),Tr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.toBool=function(){return this.throwIfDisposed(),Ce(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.toFloat=function(){return this.throwIfDisposed(),Ce(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.toInt=function(){return this.throwIfDisposed(),Ce(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.topk=function(t,e){return this.throwIfDisposed(),qT(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.transpose=function(t){return this.throwIfDisposed(),wt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.unique=function(t){return this.throwIfDisposed(),KT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),wv(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.unstack=function(t){return this.throwIfDisposed(),Or(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.where=function(t,e){return this.throwIfDisposed(),ls(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */de().prototype.zerosLike=function(){return this.throwIfDisposed(),St(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ko extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ko.prototype)}}class no extends Error{constructor(e){super(e),Object.setPrototypeOf(this,no.prototype)}}class j extends Error{constructor(e){super(e),Object.setPrototypeOf(this,j.prototype)}}class it extends Error{constructor(e){super(e),Object.setPrototypeOf(this,it.prototype)}}class M$ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,M$.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class b6{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const s=this.cache.keys().next().value;this.cache.delete(s)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fu(t,e){if(Array.isArray(t)){let n=[];for(let s=0;s<e;s++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Xo(t,e){if(!t)throw new M$(e)}function H3(t,e){let n=0;for(const s of t)s===e&&n++;return n}function zs(t){return t.length===1?t[0]:t}function Dt(t){return Array.isArray(t)?t:[t]}function Ai(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ul(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Vr={};function z$(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function DC(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>DC(e));else{const e=Object.keys(t);for(const n of e){const s=t[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?t[n]=s.value:DC(s))}}}function Jg(t,e={},n={},s="object",r=!1){if(typeof t=="string"){const o=t;let i;if(o in n)i=n[o];else if(o in Vr)i=Vr[o];else if(i=e[o],i==null)throw new j(`Unknown ${s}: ${t}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const o=t;if(o.className==null||o.config==null)throw new j(`${s}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);const i=o.className;let a,l;if(i in n?[a,l]=n[i]:i in Vr?[a,l]=Vr.className:i in e&&([a,l]=e[i]),a==null)throw new j(`Unknown ${s}: ${i}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const f of Object.keys(Vr))u[f]=Vr[f];for(const f of Object.keys(n))u[f]=n[f];const c=o.config;c.customObjects=u;const d=Object.assign({},Vr);for(const f of Object.keys(n))Vr[f]=n[f];DC(o.config);const h=l(a,o.config,n,r);return Vr=Object.assign({},d),h}else{const u=Object.assign({},Vr);for(const d of Object.keys(n))Vr[d]=n[d];const c=new a(o.config);return Vr=Object.assign({},u),c}}}function rfe(t,e){return t<e?-1:t>e?1:0}function H0(t,e){return-1*rfe(t,e)}function Xa(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function ofe(t){if(t==null)throw new j(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ec(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new j(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function B$(t,e,n=0,s=1/0){return Xo(n>=0),Xo(s>=n),Array.isArray(t)&&t.length>=n&&t.length<=s&&t.every(r=>typeof r===e)}function qn(t,e){Array.isArray(t)?(T(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,s)=>qn(n,`element ${s+1} of ${e}`))):T(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${v6(t)}.`)}function v6(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>v6(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function ife(t,e,n){let s=n!=null?n():bs(),r;return(...i)=>{const a=n!=null?n():bs();return a-s<e||(s=a,r=t(...i)),r}}function x6(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let afe=0;function w6(){return afe++}const q0={};function Pv(t=""){return t in q0||(q0[t]=0),q0[t]+=1,t+q0[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lfe=["channelsFirst","channelsLast"],ufe=["nearest","bilinear"],cfe=["valid","same","causal"],dfe=["max","avg"],hfe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const hc=new Map;function Nn(t){ec(lfe,"DataFormat",t)}function ffe(t){ec(ufe,"InterpolationFormat",t)}function Pr(t){ec(cfe,"PaddingMode",t)}function S6(t){ec(dfe,"PoolMode",t)}const ip=[],q3="/";function pu(t,e){ip.push(t);try{const n=e();return ip.pop(),n}catch(n){throw ip.pop(),n}}function pfe(){return ip.length===0?"":ip.join(q3)+q3}function C6(t){if(!N6(t))throw new Error("Not a valid tensor name: '"+t+"'");return pfe()+t}function k6(t){if(!N6(t))throw new Error("Not a valid tensor name: '"+t+"'");hc.has(t)||hc.set(t,0);const e=hc.get(t);if(hc.set(t,hc.get(t)+1),e>0){const n=`${t}_${e}`;return hc.set(n,1),n}else return t}const mfe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function N6(t){return!!t.match(mfe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gfe(t){return t===parseInt(t.toString(),10)}function Ya(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let s=1;for(let r=e;r<n;++r)s*=t[r];return s}function _d(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s<e&&(e=s)}return e}function il(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s>e&&(e=s)}return e}function Fo(t,e){if(e<t)throw new j(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let s=t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let cw;function Ln(){return cw==null&&(cw=UN().epsilon()),cw}function Lo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ai(t,e){return Ce(t,e)}function e0(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),W(t,n)}function yfe(t,e){return ee(()=>{if(t.shape.length!==2)throw new j(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=e0(t,1);return OC(n,[1,e,1])})}function bfe(t){const e=[Ya(t.shape)];return W(t,e)}function vfe(t){if(t.rank<=1)throw new j(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Ya(t.shape,1)];return W(t,e)}function mu(t,e,n){return ee(()=>{switch(t.rank){case 1:return Hg(t,e,n);case 2:return gv(t,[e,0],[n,t.shape[1]]);case 3:return qg(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Id(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return xt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return xt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new j(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function dw(t,e,n){return ee(()=>{switch(t.rank){case 1:return Hg(t,e,n);case 2:return gv(t,[0,e],[t.shape[0],n]);case 3:return qg(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Id(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new j(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function K0(t,e,n,s){return ee(()=>{switch(t.rank){case 1:return Hg(t,e,n);case 2:switch(s){case 1:return mu(t,e,n);case 2:return dw(t,e,n);default:throw new j(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return mu(t,e,n);case 2:return qg(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return dw(t,e,n);default:throw new j(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return mu(t,e,n);case 2:return Id(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Id(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return dw(t,e,n);default:throw new j(`The axis is not within the rank of the tensor ${s}`)}default:throw new j(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function V$(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),wn(t,e)}function K3(t,e){switch(t.rank){case 1:return aT([t,e]);case 2:return lT([t,e],0);case 3:return uT([t,e],0);case 4:return cT([t,e],0);default:throw new j(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function OC(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new j(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Tr(t,e)}function Mv(t,e=0,n=1,s,r){return lv(t,e,n,s,r)}function li(t,e,n,s){if(t.rank<2||e.rank<2)throw new it(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const r=t.shape.slice(-1)[0],o=e.shape.slice(-2)[0];if(r!==o)throw new it(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return yC({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?FC(t.rank,s,Lo()):null,activation:n});{const r=t.shape.slice(),o=r.pop();t=W(t,[-1,o]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),u=[...i,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=W(wt(e,c),[l,-1]);const d=[...r,...u];return W(yC({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?FC(t.rank,s,Lo()):null,activation:n}),d)}}function T6(t,e,n){return ee(()=>(Array.isArray(e)?e=is(e,"int32"):e=Ce(e,"int32"),Gh(t,e,n)))}function t0(t){return V(t,t)}function FC(t,e,n){const s=e.shape;if(e.rank!==1&&e.rank!==t)throw new j(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return s.length===1?W(e,[1,s[0],1,1,1]):W(e,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?W(e,[1,1,1,1,s[0]]):W(e,[1].concat(s))}else if(t===4){if(n==="channelsFirst")return s.length===1?W(e,[1,s[0],1,1]):W(e,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?W(e,[1,1,1,s[0]]):W(e,[1].concat(s))}else if(t===3){if(n==="channelsFirst")return s.length===1?W(e,[1,s[0],1]):W(e,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?W(e,[1,1,s[0]]):W(e,[1].concat(s))}else if(t<3)return e;throw new j(`Unsupported input rank by biasAdd: ${e.rank}`)}function Vo(t,e,n){return ee(()=>(n==null&&(n=Lo()),Nn(n),pe(t,FC(t.rank,e,n))))}function xfe(t,e=1){if(e!==1)throw new it(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Uh(t)}function wfe(t){return ee(()=>Ue(t,pe(In(t),1)))}function $6(t,e,n,s){return ee(()=>QT(t,e,n,s))}function Sfe(t){return ee(()=>{const e=pe(.5,V(.2,t));return Gs(e,0,1)})}function n0(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Cfe=["fanIn","fanOut","fanAvg"],kfe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nfe(t){ec(Cfe,"FanMode",t)}function Tfe(t){ec(kfe,"Distribution",t)}class ho extends Ju{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class E6 extends ho{apply(e,n){return xn(e,n)}}E6.className="Zeros";ge(E6);class U$ extends ho{apply(e,n){return Bs(e,n)}}U$.className="Ones";ge(U$);class I6 extends ho{constructor(e){if(super(),typeof e!="object")throw new j(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new j(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ee(()=>V(qe(this.value),Bs(e,n)))}getConfig(){return{value:this.value}}}I6.className="Constant";ge(I6);class R6 extends ho{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Cl(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}R6.className="RandomUniform";ge(R6);class _6 extends ho{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new it(`randomNormal does not support dType ${n}.`);return Mv(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}_6.className="RandomNormal";ge(_6);class A6 extends ho{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new it(`truncatedNormal does not support dType ${n}.`);return xv(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}A6.className="TruncatedNormal";ge(A6);class D6 extends ho{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ee(()=>{if(e.length!==2||e[0]!==e[1])throw new j("Identity matrix initializer can only be used for 2D square matrices.");return V(this.gain,sv(e[0]))})}getConfig(){return{gain:this.gain}}}D6.className="Identity";ge(D6);function $fe(t,e="channelsLast"){let n,s;if(Nn(e),t.length===2)n=t[0],s=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const r=Ya(t,2);n=t[1]*r,s=t[0]*r}else if(e==="channelsLast"){const r=Ya(t,0,t.length-2);n=t[t.length-2]*r,s=t[t.length-1]*r}}else{const r=Ya(t);n=Math.sqrt(r),s=Math.sqrt(r)}return[n,s]}class fr extends ho{constructor(e){if(super(),e.scale<0)throw new j(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Nfe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Tfe(this.distribution),this.seed=e.seed}apply(e,n){const s=$fe(e),r=s[0],o=s[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,r):this.mode==="fanOut"?i/=Math.max(1,o):i/=Math.max(1,(r+o)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new it(`${this.getClassName()} does not support dType ${n}.`);return xv(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Cl(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}fr.className="VarianceScaling";ge(fr);class W$ extends fr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return fr.className}}W$.className="GlorotUniform";ge(W$);class j$ extends fr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return fr.className}}j$.className="GlorotNormal";ge(j$);class G$ extends fr{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return fr.className}}G$.className="HeNormal";ge(G$);class H$ extends fr{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return fr.className}}H$.className="HeUniform";ge(H$);class q$ extends fr{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return fr.className}}q$.className="LeCunNormal";ge(q$);class K$ extends fr{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return fr.className}}K$.className="LeCunUniform";ge(K$);class O6 extends ho{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ee(()=>{if(e.length<2)throw new it("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const s=le(e.slice(0,-1)),r=e[e.length-1],o=s*r;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const i=[Math.max(r,s),Math.min(r,s)],a=Mv(i,0,1,n,this.seed),l=t$.qr(a,!1);let u=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(r,s)*Math.min(r,s)],[Math.min(r,s)+1]);return u=V(u,d.sign()),s<r&&(u=u.transpose()),V(qe(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}O6.className="Orthogonal";ge(O6);const X3={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Y3(t,e={}){return Jg(t,kr.getMap().classNameMap,e,"initializer")}function un(t){return z$(t)}function tn(t){if(typeof t=="string"){const e=t in X3?X3[t]:t;if(e==="GlorotNormal")return new j$;if(e==="GlorotUniform")return new W$;if(e==="HeNormal")return new G$;if(e==="HeUniform")return new H$;if(e==="LeCunNormal")return new q$;if(e==="LeCunUniform")return new K$;{const n={};return n.className=e,n.config={},Y3(n)}}else return t instanceof ho?t:Y3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LC(t){return Array.isArray(t)&&Array.isArray(t[0])}function k1(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function tt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new j(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function It(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new j(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function N1(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((s,r)=>s*r);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Q3="Variable";class Efe{constructor(e,n="float32",s=Q3,r=!0,o=null){this.dtype=n??"float32",this.shape=e.shape,this.id=w6(),s=s??Q3,this.originalName=C6(s),this.name=k6(this.originalName),this.trainable_=r,this.constraint=o,this.val=XT(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Ife(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Ife(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function PC(t){return t.map(e=>e.read())}function X$(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Pn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class fi{constructor(e,n,s,r,o,i,a){this.dtype=e,this.shape=n,this.sourceLayer=s,this.inputs=r,this.callArgs=o,this.outputTensorIndex=a,this.id=w6(),i!=null&&(this.originalName=C6(i),this.name=k6(this.originalName)),this.rank=n.length}}let Rfe=0;class zv{constructor(e,n){this.callArgs=n,this.id=Rfe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const s of e.inboundLayers)s!=null&&s.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let _fe=0;class bt extends Ju{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=_fe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const s=this.getClassName();n=Ai(s)+"_"+Pv(s)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let s;if(e.batchInputShape!=null)s=e.batchInputShape;else if(e.inputShape!=null){let o=null;e.batchSize!=null&&(o=e.batchSize),s=[o].concat(e.inputShape)}this.batchInputShape=s;let r=e.dtype;r==null&&(r=e.inputDType),r==null&&(r="float32"),this.dtype=r}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new no(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new j(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return zs(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return zs(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ko(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ko(`Layer ${this.name} is not connected, no input to return.`);return zs(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ko(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ko(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return zs(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Dt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const s=Dt(this.inputSpec);if(n.length!==s.length)throw new j(`Layer ${this.name} expects ${s.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let r=0;r<n.length;r++){const o=n[r],i=s[r];if(i==null)continue;const a=o.rank;if(i.ndim!=null&&a!==i.ndim)throw new j(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new j(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new j(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&o.dtype!==i.dtype)throw new j(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${o.dtype}.`);if(i.axes){const l=o.shape;for(const u in i.axes){const c=Number(u),d=i.axes[u],h=c>=0?l[c]:l[l.length+c];if(d!=null&&[d,null].indexOf(h)===-1)throw new j(`Input ${r} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const u=i.shape[l],c=o.shape[l];if(u!=null&&c!=null&&u!==c)throw new j(`Input ${r} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${o.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const s=Dt(e),r=Ofe(e),o=Ffe(e);if(r===o)throw new j("Arguments to apply() must be all SymbolicTensors or all Tensors");return pu(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of Dt(e))i.push(a.shape);this.build(zs(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=Dt(i),l=[];for(let u of a)s.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=zs(l),this.activityRegularizer!=null)throw new it("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=Afe(e),a=this.computeOutputShape(i);let l;const u=Dfe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new fi(u,c,this,Dt(e),n,this.name,d)):l=new fi(u,a,this,Dt(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new it("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,r)=>{s!=null&&e[r]!=null&&e[r]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ko(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);e.indexOf(s)===-1&&e.push(s)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ko(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new no(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return N1(this.weights)}build(e){this.built=!0}getWeights(e=!1){return PC(e?this.trainableWeights:this.weights)}setWeights(e){ee(()=>{const n=this.weights;if(n.length!==e.length)throw new j(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const s=[],r=PC(n);for(let o=0;o<r.length;++o){const i=r[o],a=n[o],l=e[o];if(!vt(i.shape,l.shape))throw new j(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);s.push([a,l])}X$(s)})}addWeight(e,n,s,r,o,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new j(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(r=l!=null?l():tn("zeros"));const u=r.apply(n,s),c=new Efe(u,s,e,i,a);return u.dispose(),o!=null&&this.addLoss(()=>o.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Dt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,s){if(!this.supportsMasking)return;const r=this.computeMask(e,s),o=Dt(n),i=Dt(r);if(o.length!==i.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let a=0;a<o.length;a++)o[a].kerasMask=i[a]}addInboundNode(e,n,s,r,o,i,a=null){const l=Dt(e);n=Dt(n),s=Dt(s),r=Dt(r),o=k1(o),i=k1(i);const u=[],c=[],d=[];for(const h of l)u.push(h.sourceLayer),c.push(h.nodeIndex),d.push(h.tensorIndex);new zv({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:s,outputMasks:r,inputShapes:o,outputShapes:i},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Afe(t){t=Dt(t);const e=[];for(const n of t)e.push(n.shape);return zs(e)}function Dfe(t){return"float32"}function F6(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const s=e.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const r=[];for(let o=0;o<s.inboundLayers.length;o++){const i=s.inputTensors[o],a=s.inboundLayers[o],l=s.nodeIndices[o],u=F6(i,a,l);for(const c of u)r.indexOf(c)===-1&&r.push(c)}return r}}}function Ofe(t){let e=!0;for(const n of Dt(t))if(!(n instanceof fi)){e=!1;break}return e}function Ffe(t){let e=!0;for(const n of Dt(t))if(n instanceof fi){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class s0 extends bt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Pv("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new j("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new j("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new j("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=e.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const r=new fi(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new zv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new j(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}s0.className="InputLayer";ge(s0);function Lfe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new j("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new s0({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pfe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ce(e,t.dtype)}catch{throw new j(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class La{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof La)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,s){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Pfe(e,n),this.name2Id[e.name]=e.id,s!=null&&(this.id2Mask[e.id]=s);else throw new j(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof fi){if(this.id2Value[e.id]==null)throw new j(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new j(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof fi){if(this.id2Value[e.id]==null)throw new j(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new j(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&at(this.id2Mask)}}const T1=new b6,$1=new b6;function Mfe(t){T1!=null&&T1.setMaxEntries(t),$1!=null&&$1.setMaxEntries(t)}function Vf(t,e,n,s){const r=n==null?!1:n.training,o=Array.isArray(t),i=o?t:[t],a=i.map(p=>p.name),l=[],u=e.names();for(const p of a)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);s!=null&&(s.maxNumTensors=-1/0,s.minNumTensors=1/0);const c=a.join(",")+"|"+e.names().sort().join(",");let d=T1.get(c),h;if(d==null){const p=zfe(i,e);d=p.sorted,h=p.recipientCounts,T1.put(c,d),$1.put(c,h)}h={},r||Object.assign(h,$1.get(c));const f=new La(e);for(let p=0;p<d.length;++p){if(s!=null){const $=b1().numTensors;$>s.maxNumTensors&&(s.maxNumTensors=$),$<s.minNumTensors&&(s.minNumTensors=$)}const m=d[p],g=m.sourceLayer;if(g instanceof s0)continue;const y=[],b=[],v=[];let x=!1;for(const $ of m.inputs){const I=f.getValue($),A=f.getMask($);y.push(I),b.push(A),A!=null&&(x=!0),r||(h[$.name]--,h[$.name]===0&&!e.hasKey($)&&a.indexOf($.name)===-1&&!I.isDisposed&&$.sourceLayer.stateful!==!0&&v.push(I))}x&&(n=n||{},n.mask=b[0]);const w=Dt(g.apply(y,n));let S=null;g.supportsMasking&&(S=g.computeMask(y,b));const k=Vfe(m),N=Array.isArray(k)?k:[k];for(let $=0;$<N.length;++$){f.hasKey(N[$])||f.add(N[$],w[$],Array.isArray(S)?S[0]:S);const I=a.indexOf(N[$].name);I!==-1&&(l[I]=w[$])}r||at(v)}return f.disposeMasks(),o?l:l[0]}function zfe(t,e){T(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(t.length===1){const r=Z3(t[0],e);n=r.sorted,s=r.recipientMap}else{const r=new Set;for(const o of t){const{sorted:i,recipientMap:a}=Z3(o,e);for(const l of i)r.has(l.name)||(n.push(l),r.add(l.name));for(const l in a)s[l]==null&&(s[l]=new Set),a[l].forEach(u=>s[l].add(u))}}return{sorted:n,recipientCounts:Bfe(s)}}function Bfe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function Z3(t,e){const n=new Set,s=[],r={};for(const a of e.names())n.add(a);const o=[],i=[];for(o.push(t);o.length>0;){const a=o[o.length-1];if(n.has(a.name)){o.pop();continue}const l=i[i.length-1]===o.length-1;if(a.inputs.length===0||l)o.pop(),s.push(a),n.add(a.name),l&&i.pop();else{i.push(o.length-1);for(const u of a.inputs)r[u.name]==null&&(r[u.name]=new Set),r[u.name].add(a.name),!n.has(u.name)&&o.push(u)}}return{sorted:s,recipientMap:r}}function Vfe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let s=0;s<t.sourceLayer.inboundNodes.length;++s)for(const r of t.sourceLayer.inboundNodes[s].outputTensors)if(r.id===t.id){n=s;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ufe=se();Ufe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Mfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Y$(t,e){return ee(()=>Yn(ze(V(t,t),e,!0)))}class r0 extends Ju{getConfig(){return{}}}class L6 extends r0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ee(()=>{const n=Y$(e,this.axis),s=Gs(n,0,this.maxValue);return V(e,Ue(s,pe(Ln(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}L6.className="MaxNorm";ge(L6);class P6 extends r0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ee(()=>Ue(e,pe(Ln(),Y$(e,this.axis))))}getConfig(){return{axis:this.axis}}}P6.className="UnitNorm";ge(P6);class M6 extends r0{apply(e){return Bo(e)}}M6.className="NonNeg";ge(M6);class z6 extends r0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ee(()=>{const n=Y$(e,this.axis),s=pe(V(this.rate,Gs(n,this.minValue,this.maxValue)),V(1-this.rate,n));return V(e,Ue(s,pe(Ln(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}z6.className="MinMaxNorm";ge(z6);const J3={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Mn(t){return z$(t)}function e_(t,e={}){return Jg(t,kr.getMap().classNameMap,e,"constraint")}function zn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in J3?J3[t]:t,config:{}};return e_(n)}else return t instanceof r0?t:e_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function _l(t){if(t==null)return;const e=[],n=[],s=[];for(const r in t){const o=t[r];if(typeof o!="number"){const i=o;e.push(i.data()),n.push(r),s.push(i)}}if(e.length>0){const r=await Promise.all(e);for(let o=0;o<r.length;++o)t[n[o]]=r[o][0];at(s)}}function B6(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var t_;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(t_||(t_={}));const Wfe=125;class Up{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class jfe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Gfe extends Up{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const r in n){const o=n[r];if(typeof o=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+o*s;else{let i;r in this.totals?i=this.totals[r]:this.totals[r]=0;const a=ee(()=>pe(this.totals[r],V(o,s)));this.totals[r]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:ee(()=>{const r=V(Ue(1,this.seen),this.totals[s]);n[s]=r,this.totals[s].dispose(),Fn(n[s])}))}}class Hfe extends Up{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const e=[],n=[],s=[];for(const o in this.history){const i=this.history[o];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(o),s.push(a)}}const r=await Promise.all(e);for(let o=0;o<r.length;++o)this.history[n[o]][s[o]].dispose(),this.history[n[o]][s[o]]=r[o][0]}}class qfe extends Up{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||y$,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Wfe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");d1(this.yieldEvery)&&(this.maybeWait=ife(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,s){const r=[];this.yield!=null&&(await _l(s),r.push(this.yield(e,n,s))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await _l(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const s=[];this.epochEnd!=null&&(await _l(n),s.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(e,n){this.batchBegin!=null&&(await _l(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const s=[];this.batchEnd!=null&&(await _l(n),s.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):d1(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(s)}async onTrainBegin(e){this.trainBegin!=null&&(await _l(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await _l(e),await this.trainEnd(e))}}function V6(t,e){return t==null&&(t={}),t instanceof Up?[t]:Array.isArray(t)&&t[0]instanceof Up?t:Dt(t).map(s=>new qfe(s,e))}class jr{constructor(){}static registerCallbackConstructor(e,n){T(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),jr.checkForDuplicate(n),jr.constructors[e]==null&&(jr.constructors[e]=[]),jr.constructors[e].push(n)}static checkForDuplicate(e){for(const n in jr.constructors)jr.constructors[+n].forEach(r=>{if(r===e)throw new j("Duplicate callback constructor.")})}static clear(){jr.constructors={}}static createCallbacks(e){const n=[];for(const s in jr.constructors){const r=+s;e>=r&&n.push(...jr.constructors[r])}return n.map(s=>new s)}}jr.constructors={};function U6(t,e,n,s,r,o,i,a,l){const u=new Hfe,c=[new Gfe,...jr.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const d=new jfe(c);return d.setParams({epochs:n,initialEpoch:s,samples:r,steps:o,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zi(t,e={},n=!1){return Jg(t,kr.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E1(t,e){return ee(()=>{t.dtype!=="float32"&&(t=Ce(t,"float32"));const n=ze(t0(t),e,!0),s=Xu(n.shape,Ln()),r=Yn(xi(n,s));return Ue(t,r)})}function Bv(t,e){return ee(()=>ln(t0(Oe(e,t)),-1))}function Q$(t,e){return ee(()=>ln(In(Oe(e,t)),-1))}function Z$(t,e){return ee(()=>{const n=Oe(t,e),s=Gs(In(t),Ln(),Number.MAX_VALUE),r=In(Ue(n,s));return V(100,ln(r,-1))})}function Kfe(t,e){return ee(()=>{const n=Gs(e,Ln(),Number.MAX_VALUE),s=dr(pe(1,n)),r=Gs(t,Ln(),Number.MAX_VALUE),o=dr(pe(1,r));return ln(t0(Oe(s,o)),-1)})}function Xfe(t,e){return ee(()=>{const n=xi(0,Oe(1,V(t,e)));return ln(t0(n),-1)})}function Yfe(t,e){return ee(()=>{const n=xi(0,Oe(1,V(t,e)));return ln(n,-1)})}function Qfe(t,e){return ee(()=>{const n=ze(V(t,e),-1),s=_r(V(Oe(1,t),e),-1);return xi(0,pe(1,Oe(s,n)))})}function Zfe(t,e){return ee(()=>{const n=Math.log(2),s=Oe(e,t),r=Oe(pe(s,Yu(V(-2,s))),n);return ln(r,-1)})}function Wp(t,e,n=!1){return ee(()=>{if(n)e=Hh(e);else{const s=ze(e,e.shape.length-1,!0);e=Ue(e,s)}return e=Gs(e,Ln(),1-Ln()),Wt(ze(V(Ce(t,"float32"),dr(e)),e.shape.length-1))})}function I1(t,e,n=!1){return ee(()=>{const s=Ce(jh(bfe(t)),"int32");e=Gs(e,Ln(),1-Ln());const r=e.shape,o=W($d(s,r[r.length-1]),r);return Wp(o,e,n)})}function Jfe(t,e){if(!vt(t.shape,e.shape))throw new j(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ee(()=>{const n=Bo(e),s=Wt(In(e));return pe(Oe(n,V(e,t)),Mg(Hs(s)))})}function Vv(t,e){return ee(()=>{let n;return n=Gs(e,Ln(),1-Ln()),n=dr(Ue(n,Oe(1,n))),ln(Jfe(t,n),-1)})}function epe(t,e){return ee(()=>{const n=Gs(t,Ln(),1),s=Gs(e,Ln(),1);return ze(V(t,dr(Ue(n,s))),-1)})}function tpe(t,e){return ee(()=>{const n=dr(pe(Ln(),e));return ln(Oe(e,V(t,n)),-1)})}function W6(t,e){return ee(()=>{const n=E1(t,-1),s=E1(e,-1),r=V(n,s);return Wt(ze(r,-1))})}const R1={meanSquaredError:Bv,meanAbsoluteError:Q$,meanAbsolutePercentageError:Z$,meanSquaredLogarithmicError:Kfe,squaredHinge:Xfe,hinge:Yfe,categoricalHinge:Qfe,logcosh:Zfe,categoricalCrossentropy:Wp,sparseCategoricalCrossentropy:I1,binaryCrossentropy:Vv,kullbackLeiblerDivergence:epe,poisson:tpe,cosineProximity:W6};function hw(t){if(typeof t=="string"){if(t in R1)return R1[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new j(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j6(t,e){return ee(()=>{const n=V(.5,hr(e)),s=ai(Qs(e,n),t.dtype);return ln(uo(t,s),-1)})}function G6(t,e){return ee(()=>ai(uo(Eu(t,-1),Eu(e,-1)),"float32"))}function npe(t,e){return ee(()=>Ce(ze(Oo(uo(t,1),uo(e,1))),"float32"))}function spe(t,e){return ee(()=>Ce(ze(Oo(uo(t,0),uo(e,1))),"float32"))}function rpe(t,e){return ee(()=>{const n=npe(t,e),s=spe(t,e),r=pe(n,s);return Ce(ls(Qs(r,0),Ue(n,r),0),"float32")})}function ope(t,e){return Vv(t,e)}function ipe(t,e){return t.rank===e.rank&&(t=ia(t,[t.rank-1])),e=Eu(e,-1),e.dtype!==t.dtype&&(e=Ce(e,t.dtype)),Ce(uo(t,e),"float32")}const ape=Bv,lpe=Bv,upe=Q$,cpe=Q$,dpe=Z$,hpe=Z$,H6=Wp,fpe=W6,q6=I1,_1={binaryAccuracy:j6,categoricalAccuracy:G6,precision:rpe,categoricalCrossentropy:H6,sparseCategoricalCrossentropy:q6,mse:ape,MSE:lpe,mae:upe,MAE:cpe,mape:dpe,MAPE:hpe,cosine:fpe};function ppe(t){if(typeof t=="string"&&t in _1)return _1[t];if(typeof t!="string"&&t!=null)return t;throw new j(`Unknown metric ${t}`)}function X0(t){if(Xo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(R1))if(R1[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(_1))if(_1[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mpe(t){const e={Adagrad:()=>Pl.adagrad(.01),Adadelta:()=>Pl.adadelta(1,.95,Ln()),Adam:()=>Pl.adam(.001,.9,.999,Ln()),Adamax:()=>Pl.adamax(.002,.9,.999,Ln(),0),RMSProp:()=>Pl.rmsprop(.001,.9,0,Ln()),SGD:()=>Pl.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new j(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const n_=1*1024*1024;function s_(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!MC(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(t);s.length>n_&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${n_}.`)}}function MC(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!MC(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!MC(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gpe(t,e,n,s=console.log){const r=bpe(t),o=["Layer (type)","Input Shape","Output shape","Param #"];r?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let i;if(!r){o.push("Receives inputs"),i=[];for(const c in t.nodesByDepth)i.push(...t.nodesByDepth[c])}s("_".repeat(e)),A1(o,n,s),s("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)r?vpe(a[c],n,s):xpe(a[c],n,i,s),s((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=ype(t),u=N1(t.nonTrainableWeights);s(`Total params: ${l+u}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${u}`),s("_".repeat(e))}function ype(t){let e;return t.collectedTrainableWeights!=null?e=N1(t.collectedTrainableWeights):e=N1(t.trainableWeights),e}function bpe(t){let e=!0;const n=[],s=[];for(const r in t.nodesByDepth)n.push(t.nodesByDepth[r]);for(const r of n){if(r.length>1||r.length===1&&r[0].inboundLayers.length>1){e=!1;break}s.push(...r)}if(e)for(const r of t.layers){let o=!1;for(const i of r.inboundNodes)if(s.indexOf(i)!==-1)if(o){e=!1;break}else o=!0;if(!e)break}return e}function A1(t,e,n=console.log){let s="";for(let r=0;r<t.length;++r)r>0&&(s=s.slice(0,s.length-1)+" "),s+=t[r],s=s.slice(0,e[r]),s+=" ".repeat(e[r]-s.length);n(s)}function vpe(t,e,n){let s,r;try{r=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{r="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=t.name,i=t.getClassName(),a=[`${o} (${i})`,r,s,t.countParams().toString()];A1(a,e,n)}function xpe(t,e,n,s){let r,o;try{o=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];i.push(`${f}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),u=i.length===0?"":i[0],c=[`${a} (${l})`,o,r,t.countParams().toString(),u];A1(c,e,s);for(let d=1;d<i.length;++d)A1(["","","","",i[d]],e,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K6(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function zC(t,e){if(t===null)return null;if(typeof t=="string")return Ul(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let r=0;r<s;++r){const o=t[r];K6(e,r,o)?n.push(o):n.push(zC(o,e))}return n}else{const n={};for(const s of Object.keys(t)){const r=t[s];if(s==="name"&&typeof r=="string")n[s]=r;else{const o=Ul(s);n[o]=zC(r,o)}}return n}}function BC(t,e){if(t==null)return null;if(typeof t=="string")return Ai(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let r=0;r<s;++r){const o=t[r];K6(e,r,o)?n.push(o):n.push(BC(o,e))}return n}else{const n={};for(const s of Object.keys(t)){const r=t[s],o=Ai(s);(s==="name"||s==="className")&&typeof r=="string"?n[o]=r:n[o]=BC(r,s)}return n}}/** @license See the LICENSE file. */const X6="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wpe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class bo extends bt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=Pv(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Xa(this.inputs).length!==this.inputs.length)throw new j(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Xa(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const v=b.sourceLayer,x=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(w)}for(const b of this.inputs){const v=b.sourceLayer,x=b.nodeIndex,w=b.tensorIndex;Xo(x===0,"input layer has >1 nodes"),Xo(w===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const v=this.inputLayers[b];if(!(v instanceof s0))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${b} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},s={},r={},o={},i={},a=[],l=(b,v,x,w,S,k)=>{(w==null||S==null||k==null)&&(w=b.sourceLayer,S=b.nodeIndex,k=b.tensorIndex);const N=w.inboundNodes[S];if(x.indexOf(N)!==-1)throw new no(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if(v.indexOf(N)!==-1)return;this.containerNodes.add(bo.nodeKey(w,S)),w.id in i||(i[w.id]=Object.keys(i).length),x.indexOf(N)===-1&&x.push(N);const $=N.inboundLayers.length;for(let I=0;I<$;I++){const A=N.inputTensors[I],O=N.inboundLayers[I],P=N.nodeIndices[I],F=N.tensorIndices[I];l(A,v,x,O,P,F)}for(v.push(N);x.indexOf(N)>=0;)x.splice(x.indexOf(N),1);a.push(N)},u=[],c=[];for(const b of this.outputs)l(b,u,c);const d=a.slice().reverse();for(const b of d){s[b.id]=b,b.id in n||(n[b.id]=0);let v=n[b.id];const x=r[b.outboundLayer.id]==null?0:r[b.outboundLayer.id];v=Math.max(v,x),r[b.outboundLayer.id]=v,o[b.outboundLayer.id]=b.outboundLayer,n[b.id]=v;for(let w=0;w<b.inboundLayers.length;w++){const S=b.inboundLayers[w],k=b.nodeIndices[w],N=S.inboundNodes[k],$=n[N.id]==null?0:n[N.id];n[N.id]=Math.max(v+1,$),s[N.id]=N}}const h={};for(const b in n){const v=n[b];v in h||(h[v]=[]),h[v].push(s[b])}const f={};for(const b in r){const v=r[b];v in f||(f[v]=[]),f[v].push(o[b])}let p=Object.keys(f).map(b=>parseInt(b,10)).sort(H0);this.layers=[];for(const b of p){const v=f[b];v.sort((x,w)=>{const S=i[x.id],k=i[w.id];return S<k?-1:S>k?1:0});for(const x of v)x instanceof bo&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=f,p=Object.keys(h).map(b=>parseInt(b,10)).sort(H0);const m=this.inputs.slice(),g=[];for(const b of p)for(const v of h[b]){const x=v.outboundLayer;if(x!=null){for(const w of v.inputTensors)if(m.indexOf(w)===-1)throw new no(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${x.name}". The following previous layers were accessed without issue: ${g}`);for(const w of v.outputTensors)m.push(w);g.push(x.name)}}this.nodesByDepth=h;const y=this.layers.map(b=>b.name);for(const b of y){const v=y.filter(x=>x===b).length;if(v!==1)throw new no(`The name "${b}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new zv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new j("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const s={};let r=0;const o=wpe(e);o&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const c=o?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(s[c]!=null)throw new j(`Duplicate weight name: ${c}`);s[c]=u,r++}const i=[];for(const a in e){let l=a;if(s[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(s[l]!=null)i.push([s[l],e[a]]);else if(n)throw new j(`Provided weight data has no target variable: ${a}`);delete s[l]}if(n){const a=[];for(const l in s)a.push(l);if(a.length>0)throw new j(`${a.length} of ${r} weights are not set: ${a}`)}X$(i)}parseWeights(e){for(const n in Object.keys(e)){const s=n.split("/"),r=["vars","layer_checkpoint_dependencies"],o=s.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!r.includes(i)).join("/");o!==n&&(e[o]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${X6}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const s=BC(this.updatedConfig());return n?JSON.stringify(s):s}call(e,n){return ee(()=>{e=Dt(e);const s=new La;for(let r=0;r<this.inputs.length;++r)s.add(this.inputs[r],e[r]);return Vf(this.outputs,s,n)})}computeMask(e,n){return ee(()=>{e=Dt(e);let s;return n==null?s=Fu(null,e.length):s=Dt(n),this.runInternalGraph(e,s)[1]})}computeOutputShape(e){const n=k1(e);if(n.length!==this.inputLayers.length)throw new j(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";s[c]=u}const r=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(H0);if(r.length>1)for(const a of r){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],y=u.nodeIndices[m],b=u.tensorIndices[m],v=`${g.name}_${y}_${b}`,x=s[v];d.push(x)}const h=c.computeOutputShape(zs(d)),f=k1(h),p=c.inboundNodes.indexOf(u);for(let m=0;m<f.length;m++){const g=`${c.name}_${p}_${m}`;s[g]=f[m]}}}const o=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];Xo(l in s),o.push(s[l])}return zs(o)}runInternalGraph(e,n){n==null&&(n=Fu(null,e.length));const s={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],d=n[l];s[u.id]=[c,d]}const r=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(H0);for(const l of r){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,h=c.inputTensors,f=c.outputTensors,p=new Array;for(const m of h)m.id in s&&p.push(s[m.id]);if(p.length===h.length){let m={},g,y,b,v;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[x,w]=p[0];m.mask==null&&(m.mask=w),b=Dt(d.call(x,m)),v=Dt(d.computeMask(x,w)),g=[x],y=[w]}else g=p.map(x=>x[0]),y=p.map(x=>x[1]),m.mask==null&&(m.mask=y),b=Dt(d.call(g,m)),v=Dt(d.computeMask(g,y));if(d.activityRegularizer)throw new it("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<f.length;++x){const w=f[x],S=b[x],k=v[x];s[w.id]=[S,k]}}}}const o=[],i=[],a=[];for(const l of this.outputs){Xo(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=s[l.id];a.push(u.shape),o.push(u),i.push(c)}return[o,i,a]}buildNodeConversionMap(e){const n={};let s;for(const r of this.layers){s=r instanceof bo?1:0;for(let o=0;o<r.inboundNodes.length;o++){const i=bo.nodeKey(r,o);this.containerNodes.has(i)&&(n[i]=s,s+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new j("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const s of this.layers)if(s.name===e)return s;throw new j(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new j(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ee(()=>{const e=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const r=bo.nodeKey(n,s);this.containerNodes.has(r)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),u=[];for(let d=0;d<i.inboundNodes.length;d++){const h=i.inboundNodes[d],f=bo.nodeKey(i,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let g=0;g<h.inboundLayers.length;g++){const y=h.inboundLayers[g],b=h.nodeIndices[g],v=h.tensorIndices[g],x=bo.nodeKey(y,b);let w=n[x];w==null&&(w=0),m.push([y.name,w,v,p])}u.push(m)}}}const c={};c.name=i.name,c.className=a,c.config=l,c.inboundNodes=u,s.push(c)}e.layers=s;const r=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=bo.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];r.push([a.name,c,d])}e.inputLayers=r;const o=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=bo.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];o.push([a.name,c,d])}return e.outputLayers=o,e}static fromConfig(e,n,s={},r=!1){const o={},i={};function a(g,y){g.name in i?i[g.name].push(y):i[g.name]=[y]}function l(g,y){const b=[];let v;for(const x of y){const w=x[0],S=x[1],k=x[2];if(v=x[3]==null?{}:x[3],!(w in o)){a(g,y);return}const N=o[w];if(N.inboundNodes.length<=S){a(g,y);return}const $=N.inboundNodes[S];b.push($.outputTensors[k])}b.length>0&&g.apply(zs(b),v)}function u(g){const y=g.name,b=zi(g,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(r),o[y]=b,g.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new j(`Corrupted configuration, expected array for nodeData: ${x}`);a(b,x)})}const c=n.name,d=n.layers;for(const g of d)u(g);for(;!ofe(i);)for(const g of d){const y=o[g.name];if(y.name in i){const b=i[y.name];delete i[y.name];for(const v of b)l(y,v)}}const h=[],f=[],p=n.inputLayers;for(const g of p){const y=g[0],b=g[1],v=g[2];Xo(y in o);const w=o[y].inboundNodes[b].outputTensors;h.push(w[v])}const m=n.outputLayers;for(const g of m){const y=g[0],b=g[1],v=g[2];Xo(y in o);const w=o[y].inboundNodes[b].outputTensors;f.push(w[v])}return new e({inputs:h,outputs:f,name:c})}get stateful(){if(this._stateful)throw new j("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ee(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Spe(t,e,n){const s=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>null);if(s===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==s)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const r=[];return e.forEach(o=>{o in t?r.push(t[o]):r.push(null)}),r}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function Y6(t,e){return Spe(t,e,"classWeight")}async function Q6(t,e,n,s){if(e!=null||s!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const r=ee(()=>{if(t.shape.length===1)return oi(t);if(t.shape.length===2){if(t.shape[1]>1)return Eu(t,1);if(t.shape[1]===1)return W(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(await r.data());at(r);const i=[];return o.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),is(i,"float32")}else return null}function Cpe(t,e){return V(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kpe=32;function Z6(t,e){let n,s;const r=e;n=r.xs,s=r.ys,T(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const o=r_("input",t.inputNames,n),i=r_("output",t.outputNames,s),a=o[0].shape[0];T(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),T(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<o.length;l++)T(o[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)T(i[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:o,ys:i}}function r_(t,e,n){if(n instanceof Et)return[n];if(Array.isArray(n))return T(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const s=[];for(const r of e){if(n[r]==null)throw new j(`The feature data generated by the dataset lacks the required ${t} key '${r}'.`);s.push(n[r])}return s}}function Npe(t){if(t.length===3)throw new it("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Tpe(t,e,n){const s=n.batchesPerEpoch!=null;if(T(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),T(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),T(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),T(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),T(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const r=n.validationData!=null;let o,i;if(r)if(o_(n.validationData))T(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=Npe(n.validationData);o=g.xs,i=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;r?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=V6(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=U6(c,d,n.epochs,null,null,$pe(e,n),null,r,u);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await h.onEpochBegin(p);let y=0,b=0;for(s||(m=await e.iterator());!s||y<n.batchesPerEpoch;){const v=await m.next();if(s&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){const{xs:x,ys:w}=Z6(t,v.value),S={};S.batch=b,S.size=x[0].shape[0],await h.onBatchBegin(b,S);const k=[];if(n.classWeight!=null){const I=Y6(n.classWeight,t.outputNames);for(let A=0;A<I.length;++A)k.push(await Q6(w[A],null,I[A]))}const N=x.concat(w).concat(k),$=a(N);at(N);for(let I=0;I<l.length;++I){const A=l[I],O=$[I];S[A]=O,Fn(O)}await h.onBatchEnd(b,S),B6(S),b++,y++}if(s?y>=n.batchesPerEpoch:v.done){if(r){let x;o_(n.validationData)?x=Dt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=Dt(t.evaluate(o,i,{batchSize:n.validationBatchSize==null?kpe:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=x[w]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,g),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function $pe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function o_(t){return typeof t.iterator=="function"}function Epe(t){return typeof t.next=="function"}async function Ipe(t,e,n){n=n||{};const s=n.batches!=null,r=t.testFunction;let o=[];if(n.verbose>0)throw new it("Verbose mode is not implemented yet.");T(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=Epe(e)?e:await e.iterator();let a=0,l=0;for(;!s||l<n.batches;){const u=await i.next();if(o=ee(()=>{if(u.value){const{xs:c,ys:d}=Z6(t,u.value),h=c.concat(d),f=ee(()=>r(h));if(at(h),l===0)for(let m=0;m<f.length;++m)o.push(qe(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const g=f[m],y=o[m];o[m]=ee(()=>pe(o[m],V(p,g))),l>0&&at(y)}at(f),a+=p,++l}return o}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<o.length;++u){const c=o[u];o[u]=Ue(o[u],a),at(c)}return zs(o)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fw(t){T(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Rf(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(s=>mu(s,e,n-e)):mu(t,e,n-e)}function VC(t,e){return ee(()=>t==null?null:Array.isArray(t)?t.map(n=>VC(n,e)):T6(t,e.dtype==="int32"?e:Ce(e,"int32")))}function pw(t,e){const n=[];let s=0,r=null;for(;s<t;)r=s+e,r>=t&&(r=t),n.push([s,r]),s=r;return n}function J6(t){const e=[];t instanceof Et&&(t=[t]);for(let n=0;n<t.length;++n){const s=t[n];if(s.rank===1)e.push(e0(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(s)}}return e}function go(t,e){if(t==null)return;const n=[];if(e instanceof Et)n.push(e.id);else if(Array.isArray(e))e.forEach(r=>n.push(r.id));else if(e!=null)for(const r in e){const o=e[r];n.push(o.id)}const s=[];if(t instanceof Et)n.indexOf(t.id)===-1&&s.push(t);else if(Array.isArray(t))t.forEach(r=>{n.indexOf(r.id)===-1&&s.push(r)});else if(t!=null)for(const r in t){const o=t[r];n.indexOf(o.id)===-1&&s.push(o)}s.forEach(r=>{r.isDisposed||r.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rpe(t){return t instanceof Et}function UC(t){return Array.isArray(t)}function i_(t){return!Rpe(t)&&!UC(t)}function a_(t,e,n,s=!0,r=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(UC(t)&&t.length>0)i=!0;else if(i_(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new j(`Error when checking model ${r} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let o;if(i_(t)){t=t,o=[];for(const i of e){if(t[i]==null)throw new j(`No data provided for "${i}". Need data for each key in: ${e}`);o.push(t[i])}}else if(UC(t)){if(t=t,t.length!==e.length)throw new j(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);o=t}else{if(t=t,e.length>1)throw new j(`The model ${r} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);o=[t]}if(o=J6(o),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new j(`Error when checking ${r}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c>=0&&u!==c)throw new j(`${r} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${r} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function _pe(t,e,n){const s=Xa(t.map(o=>o.shape[0]));s.sort();const r=Xa(e.map(o=>o.shape[0]));if(r.sort(),s.length>1)throw new j(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(o=>o.shape))}`);if(r.length>1)throw new j(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(o=>o.shape))}`);if(s.length>0&&r.length>0&&!vt(s,r))throw new j(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${r[0]} target sample(s).`)}function Ape(t,e,n){const s=[Bv,Vv,Wp];for(let r=0;r<t.length;++r){const o=t[r],i=e[r],a=n[r];if(i!=null){if(i===Wp&&o.shape[o.shape.length-1]===1)throw new j(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(i)!==-1){const l=o.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],h=u[c];if(h!=null&&d!==h)throw new j(`A target Tensor with shape ${o.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function l_(t,e,n,s=!0,r=""){let o;if(Array.isArray(t)){if(t.length!==e.length)throw new j(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(e.length>1)throw new j(`The model expects ${e.length} ${r} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);o=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new j(`Error when checking ${r}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c!==u)throw new j(`Error when checking ${r}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Dpe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(s=>n);{const s=[];for(const r of e){let o=n.hasOwnProperty(r)?n[r]:[];Array.isArray(o)||(o=[o]),s.push(o)}return s}}const Ope="layers-model";class Wc extends bo{constructor(e){super(e),this.isTraining=!1}summary(e,n,s=console.log){if(!this.built)throw new j("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");gpe(this,e,n,s)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=mpe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof la))throw new j("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new j(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(hw(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new j(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>hw(a))}else{const i=hw(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const s=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],pu("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const r=Dpe(e.metrics,this.outputNames),o=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};pu("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=r[i];(u=>{const c="";let d,h,f;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[i];g[g.length-1]===1||this.lossFunctions[i]===Vv?["accuracy","acc"].indexOf(p)!==-1?h=j6:["crossentropy","ce"].indexOf(p)!==-1&&(h=ope):this.lossFunctions[i]===I1?["accuracy","acc"].indexOf(p)!==-1?h=ipe:["crossentropy","ce"].indexOf(p)!==-1&&(h=q6):["accuracy","acc"].indexOf(p)!==-1?h=G6:["crossentropy","ce"].indexOf(p)!==-1&&(h=H6);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),f=h,d=c+y}else f=ppe(p),d=c+X0(p);let m;pu(d,()=>{m=f}),o(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,s={}){const r=s.batchSize==null?32:s.batchSize;fw(r);const i=this.standardizeUserDataXY(e,n,!0,r);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,r,s.verbose,s.steps);return zs(u)}finally{go(i[0],e),go(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Ipe(this,e,n)}checkNumSamples(e,n,s,r="steps"){let o;if(s!=null){if(o=null,n!=null)throw new j(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?o=e[0].shape[0]:o=e.shape[0];else throw new j(`Either the input data should have a defined shape, or ${r} shoud be specified.`);return o}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new j("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),r=s?n:[n],o=this.retrieveSymbolicTensors(r),i=new La;if(e instanceof Et&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new j(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new j(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const a=Vf(o,i);return s?a:a[0]}retrieveSymbolicTensors(e){const n=Fu(null,e.length);let s=e.length;for(const r of this.layers){const o=Array.isArray(r.output)?r.output:[r.output],i=o.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=o[l],s--),s===0)break}if(s===0)break}if(s>0){const r=[];throw n.forEach((o,i)=>{o==null&&r.push(e[i])}),new j(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(r)}`)}return n}predictLoop(e,n=32,s=!1){return ee(()=>{const r=this.checkNumSamples(e);if(s)throw new it("Verbose predictLoop() is not implemented yet.");const o=pw(r,n),i=this.outputs.map(a=>[]);for(let a=0;a<o.length;++a)ee(()=>{const u=o[a][0],c=o[a][1],d=Rf(e,u,c),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new La(h);return Vf(this.outputs,f)}).forEach((u,c)=>i[c].push(u));return zs(i.map(a=>wn(a,0)))})}predict(e,n={}){const s=J6(e);l_(s,this.inputNames,this.feedInputShapes,!1);try{const r=n.batchSize==null?32:n.batchSize;return fw(r),this.predictLoop(s,r)}finally{go(s,e)}}predictOnBatch(e){l_(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,s=!0,r){if(this.optimizer_==null)throw new no("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===I1?o.push(a.slice(0,a.length-1).concat([1])):o.push(a)}if(e=a_(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=a_(n,this.feedOutputNames,o,!1,"target"),_pe(e,n),Ape(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&r!=null&&r>0&&e[0].shape[0]%r!==0)throw new j(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,s,r,o=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,o,i);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(r!=null){const c=Y6(r,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await Q6(l[d],null,c[d]))}return[a,l,u]}testLoop(e,n,s,r=0,o){return ee(()=>{const i=this.checkNumSamples(n,s,o,"steps"),a=[];if(r>0)throw new it("Verbose mode is not implemented yet.");if(o!=null)throw new it("steps mode in testLoop() is not implemented yet");{const l=pw(i,s),u=is(Fo(0,i));for(let c=0;c<l.length;++c){const d=l[c][0],h=l[c][1],f=mu(u,d,h-d),p=VC(n,f),m=e(p);if(c===0)for(let g=0;g<m.length;++g)a.push(qe(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=pe(a[g],V(h-d,y))}}for(let c=0;c<a.length;++c)a[c]=Ue(a[c],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let s=0;s<e.length;++s){const r=e[s];let o=r;if(H3(e,r)>1){const i=H3(e.slice(0,s),r);o+=`_${i}`}n.push(o)}return n}makeTrainFunction(){return e=>{const n=[],s=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:s[m]});const h=new La(d),f=Vf(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(r[m],f[m]);o[m]!=null&&(y=Cpe(y,o[m]));const b=ln(y);n.push(b),m===0?p=y:p=pe(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],b=this.metricsTensors[m][1];g=ln(y(r[b],f[b]))}Fn(g),i.push(g)}return p=ln(p),this.calculateLosses().forEach(m=>{p=pe(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>ee(()=>{const n=[];let s;const r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:r[u]});const a=new La(i),l=Vf(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=ln(c(o[u],l[u]));u===0?s=d:s=pe(s,d),n.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],h=ln(c(o[d],l[d]));n.push(h)}return n})}async fit(e,n,s={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let r,o,i,a,l,u,c,d,h;try{const f=s.batchSize==null?32:s.batchSize;fw(f);const m=await this.standardizeUserData(e,n,s.sampleWeight,s.classWeight,!1,f);r=m[0],o=m[1],h=m[2];let g=!1,y;if(s.validationData!=null&&s.validationData.length>0){if(g=!0,s.validationData.length===2)l=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new it("validationData including sample weights is not supported yet."):new j(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const I=await this.standardizeUserData(l,u,null,null,!0,f);c=I[0],d=I[1],y=c.concat(d)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){g=!0;const $=Math.floor(r[0].shape[0]*(1-s.validationSplit)),I=r[0].shape[0];c=Rf(r,$,I),i=r,r=Rf(r,0,$),d=Rf(o,$,I),a=o,o=Rf(o,0,$),y=c.concat(d)}else s.validationSteps!=null&&(g=!0);const b=r.concat(o).concat(h);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),x=this.getDedupedMetricsNames();let w,S;g?(this.makeTestFunction(),w=this.testFunction,S=x.slice().concat(x.map($=>"val_"+$))):(w=null,y=[],S=x.slice());const k=V6(s.callbacks,s.yieldEvery);return await this.fitLoop(v,b,x,f,s.epochs,s.verbose,k,w,y,s.shuffle,S,s.initialEpoch,null,null)}finally{this.isTraining=!1,go(r,e),go(o,n),go(i,e),go(a,n),go(c,l),go(d,u),h!=null&&at(h)}}async fitLoop(e,n,s,r,o,i,a,l,u,c,d,h,f,p){r==null&&(r=32),o==null&&(o=1),c==null&&(c=!0),h==null&&(h=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new j("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,r,f,"steps_per_epoch");let y;g!=null&&(y=Fo(0,g)),i==null&&(i=1);const{callbackList:b,history:v}=U6(a,i,o,h,g,f,r,m,d);b.setModel(this),this.history=v,await b.onTrainBegin(),this.stopTraining_=!1;for(let x=h;x<o;++x){await b.onEpochBegin(x);const w={};if(f!=null)throw new it("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new it("batch shuffling is not implemneted yet");c&&RN(y);const S=is(y),k=pw(g,r);for(let N=0;N<k.length;++N){const $={};if(await b.onBatchBegin(N,$),ee(()=>{const I=k[N][0],A=k[N][1],O=mu(S,I,A-I);$.batch=N,$.size=A-I;const P=VC(n,O),F=e(P);for(let G=0;G<s.length;++G){const q=s[G],Z=F[G];$[q]=Z,Fn(Z)}if(N===k.length-1&&m){const G=this.testLoop(l,u,r);for(let q=0;q<s.length;++q){const Z=s[q],B=G[q];Fn(B),w["val_"+Z]=B}}}),await b.onBatchEnd(N,$),B6($),this.stopTraining_)break}S.dispose()}if(await b.onEpochEnd(x,w),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Tpe(this,e,n)}async trainOnBatch(e,n){const s=await this.standardizeUserData(e,n),r=s[0],o=s[1],a=this.makeTrainFunction()(r.concat(o)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return at(a),go(s[0],e),go(s[1],n),zs(l)}getNamedWeights(e){const n=[],s=e!=null&&e.trainableOnly,r=s?this.trainableWeights:this.weights,o=this.getWeights(s);for(let i=0;i<r.length;++i)s&&!r[i].trainable||n.push({name:r[i].originalName,tensor:o[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=b1().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-b1().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ai(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ai(n))}else{const n=Object.keys(this.loss);e={};const s=this.loss;for(const r of n)if(typeof s[r]=="string")e[r]=Ai(s[r]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ai(X0(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ai(X0(e)));{const e={};for(const n in this.metrics)e[n]=Ai(X0(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=zC(e.optimizer_config),s=zi(n);let r;if(typeof e.loss=="string")r=Ul(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(i=>Ul(i));else if(e.loss!=null){r={};for(const i in e.loss)r[i]=Ul(e.loss[i])}let o;if(Array.isArray(e.metrics))o=e.metrics.map(i=>Ul(i));else if(e.metrics!=null){o={};for(const i in e.metrics)o[i]=Ul(e.metrics[i])}this.compile({loss:r,metrics:o,optimizer:s})}async save(e,n){if(typeof e=="string"){const u=dP(e);if(u.length===0)throw new j(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new j(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new j("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await cC(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Ope,generatedBy:`TensorFlow.js tfjs-layers v${X6}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await cC(await this.optimizer.getWeights(),u);s.specs.push(...d),s.data=lP([s.data,c])}return this.userDefinedMetadata!=null&&(s_(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=s.data,a.weightSpecs=s.specs,e.save(a)}setUserDefinedMetadata(e){s_(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Wc.className="Model";ge(Wc);class e5 extends Wc{}e5.className="Functional";ge(e5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jp extends Wc{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Pv("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new j(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof jp||e instanceof Wc;let s;if(n){if(s=e,s.outputs.length!==1)throw new j("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new j("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new j("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const r=Lfe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(e.inboundNodes.length!==1)throw new j(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new j("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=F6(this.outputs[0])}this.inboundNodes=[],new zv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Fu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(r=>r.shape),outputShapes:this.outputs[0].shape})}else{const r=e.apply(this.outputs[0]);if(Array.isArray(r))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[r],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(It(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Wc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,s=console.log){this.built||this.build(),super.summary(e,n,s)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,s={}){if(!this.built)throw new no("The model needs to be compiled before being used.");return this.model.evaluate(e,n,s)}async evaluateDataset(e,n){if(!this.built)throw new no("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,s={}){if(!this.built)throw new no("The model needs to be compiled before being used.");return this.model.fit(e,n,s)}async fitDataset(e,n){if(!this.built)throw new no("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,s={},r=!1){let o,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new j("Legacy serialization format not supported yet.");o=n}else T(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof jp))throw new it(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of o){const c=zi(l,void 0,r);r&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new j("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new j("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),e.push(s)}return{name:this.name,layers:e}}}jp.className="Sequential";ge(jp);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ss=class extends Ju{getConfig(){return{}}};class t5 extends Ss{apply(e,n=1){return xfe(e,n)}}t5.className="elu";ge(t5);class n5 extends Ss{apply(e){return hv(e)}}n5.className="selu";ge(n5);class s5 extends Ss{apply(e){return Bo(e)}}s5.className="relu";ge(s5);class r5 extends Ss{apply(e){return ee(()=>ol(6,Bo(e)))}}r5.className="relu6";ge(r5);class o5 extends Ss{apply(e){return e}}o5.className="linear";ge(o5);class i5 extends Ss{apply(e){return _o(e)}}i5.className="sigmoid";ge(i5);class a5 extends Ss{apply(e){return Sfe(e)}}a5.className="hardSigmoid";ge(a5);class l5 extends Ss{apply(e){return Yu(e)}}l5.className="softplus";ge(l5);class u5 extends Ss{apply(e){return wfe(e)}}u5.className="softsign";ge(u5);class c5 extends Ss{apply(e){return rl(e)}}c5.className="tanh";ge(c5);let J$=class extends Ss{apply(e,n=-1){return Hh(e,n)}};J$.className="softmax";ge(J$);class d5 extends Ss{apply(e,n=-1){return ov(e,n)}}d5.className="logSoftmax";ge(d5);class h5 extends Ss{apply(e){return ee(()=>ee(()=>{const n=Math.sqrt(2),s=V(.5,pe(1,nv(Ue(e,n))));return V(e,s)}))}}h5.className="gelu";ge(h5);class f5 extends Ss{apply(e){return ee(()=>V(.5,V(e,pe(1,rl(V(Yn(Ue(2,Math.PI)),pe(e,V(.044715,di(e,3)))))))))}}f5.className="gelu_new";ge(f5);class p5 extends Ss{apply(e){return ee(()=>V(e,rl(Yu(e))))}}p5.className="mish";ge(p5);class m5 extends Ss{apply(e,n=1){return ee(()=>V(_o(V(e,n)),e))}}m5.className="swish";ge(m5);function al(t){return t.getClassName()}function mw(t,e={}){return Jg(t,kr.getMap().classNameMap,e,"activation")}function ll(t){if(t==null){const e={};return e.className="linear",e.config={},mw(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},mw(e)}else return t instanceof Ss?t:mw(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fpe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class g5 extends Ju{}class y5 extends g5{constructor(e){super(),Fpe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ee(()=>{let n=xn([1]);return this.hasL1&&(n=pe(n,ze(V(this.l1,In(e))))),this.hasL2&&(n=pe(n,ze(V(this.l2,t0(e))))),W(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}y5.className="L1L2";ge(y5);const u_={l1l2:"L1L2"};function Bt(t){return z$(t)}function c_(t,e={}){return Jg(t,kr.getMap().classNameMap,e,"regularizer")}function nn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in u_?u_[t]:t,config:{}};return c_(n)}else return t instanceof g5?t:c_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class b5 extends bt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=tt(e);let s=Bo(e);return this.maxValue!=null&&(s=Gs(s,0,this.maxValue)),s}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}b5.className="ReLU";ge(b5);class v5 extends bt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=tt(e);return Pg(s,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}v5.className="LeakyReLU";ge(v5);class x5 extends bt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=tn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=nn(e.alphaRegularizer),this.alphaConstraint=zn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new j(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=It(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const r of this.sharedAxes)n[r-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let r=1;r<e.length;++r)s[r]=e[r];this.inputSpec=[new Pn({ndim:e.length,axes:s})],this.built=!0}call(e,n){return e=tt(e),jg(e,this.alpha.read())}getConfig(){const e={alphaInitializer:un(this.alphaInitializer),alphaRegularizer:Bt(this.alphaRegularizer),alphaConstraint:Mn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}x5.className="PReLU";ge(x5);let w5=class extends bt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new it(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=tt(e);return Uh(s)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};w5.className="ELU";ge(w5);class S5 extends bt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const s=tt(e);return V(s,Ce(Qs(s,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}S5.className="ThresholdedReLU";ge(S5);class C5 extends bt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new J$().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ee(()=>{let s=tt(e);const r=n.mask;if(r!=null){const o=V(Oe(Bs(s.shape),Ce(r,s.dtype)),qe(-1e9));s=pe(s,o)}return this.axis instanceof Array?this.axis.length>1?Hs(Oe(s,zg(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}C5.className="Softmax";ge(C5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jc(t,e,n){if(typeof t=="number")return Fu(t,e);if(t.length!==e)throw new j(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let s=0;s<e;++s){const r=t[s];if(!gfe(r))throw new j(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${r}`)}return t}function Ao(t,e,n,s,r=1){if(t==null)return t;const o=e+(e-1)*(r-1);let i;return n==="same"?i=t:i=t-o+1,Math.floor((i+s-1)/s)}function Yo(t,e,n,s){if(t==null)return null;if(s==="valid")t=t*e+il([n-e,0]);else if(s==="same")t=t*e;else throw new j(`Unsupport padding mode: ${s}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eE(t,e){return ee(()=>(Nn(e),e==="channelsFirst"?wt(t,[0,2,3,1]):t))}function k5(t,e){return ee(()=>(Nn(e),e==="channelsFirst"?wt(t,[0,2,3,4,1]):t))}function Lpe(t,e,n,s=1,r="valid",o,i=1){return ee(()=>{if(o==null&&(o=Lo()),Nn(o),t.shape.length!==3)throw new j(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new j(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new j(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(o==="channelsFirst"&&(t=wt(t,[0,2,1])),r==="causal")throw new it("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=Zb(t,e,s,r==="same"?"same":"valid","NWC",i);return n!=null&&(a=Vo(a,n)),a})}function d_(t,e,n,s=[1,1],r="valid",o,i,a=null){return ee(()=>{if(o==null&&(o=Lo()),Nn(o),t.rank!==3&&t.rank!==4)throw new j(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new j(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=eE(t,o);if(r==="causal")throw new it("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=hM({x:l,filter:e,strides:s,pad:r==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),o==="channelsFirst"&&(l=wt(l,[0,3,1,2])),l})}function Ppe(t,e,n,s=[1,1,1],r="valid",o,i){return ee(()=>{if(o==null&&(o=Lo()),Nn(o),t.rank!==4&&t.rank!==5)throw new j(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new j(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=k5(t,o);if(r==="causal")throw new it("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=hT(a,e,s,r==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Vo(a,n)),o==="channelsFirst"&&(a=wt(a,[0,4,1,2,3])),a})}class Uv extends bt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Uv.verifyArgs(n),this.rank=e,qn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new it(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=jc(n.kernelSize,e,"kernelSize"),this.strides=jc(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Pr(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Nn(this.dataFormat),this.activation=ll(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=tn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=zn(n.biasConstraint),this.biasRegularizer=nn(n.biasRegularizer),this.activityRegularizer=nn(n.activityRegularizer),this.dilationRate=jc(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new j(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new j(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new j(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Xo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!B$(e.kernelSize,"number",1,3))throw new j(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:al(this.activation),useBias:this.useBias,biasInitializer:un(this.biasInitializer),biasRegularizer:Bt(this.biasRegularizer),activityRegularizer:Bt(this.activityRegularizer),biasConstraint:Mn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Kh extends Uv{constructor(e,n){super(e,n),this.kernel=null,Kh.verifyArgs(n),this.filters=n.filters,qn(this.filters,"filters"),this.kernelInitializer=tn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=zn(n.kernelConstraint),this.kernelRegularizer=nn(n.kernelRegularizer)}build(e){e=It(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new j(`The channel dimension of the input should be defined. Found ${e[n]}`);const s=e[n],r=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(e,n){return ee(()=>{e=tt(e);let s;const r=this.bias==null?null:this.bias.read(),o=x6(this.activation.getClassName());if(o!=null&&this.rank===2)s=d_(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)s=Lpe(e,this.kernel.read(),r,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=d_(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=Ppe(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new it("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(e){e=It(e);const n=[],s=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<s.length;++o){const i=Ao(s[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);n.push(i)}let r=[e[0]];return this.dataFormat==="channelsLast"?(r=r.concat(n),r.push(this.filters)):(r.push(this.filters),r=r.concat(n)),r}getConfig(){const e={filters:this.filters,kernelInitializer:un(this.kernelInitializer),kernelRegularizer:Bt(this.kernelRegularizer),kernelConstraint:Mn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new j(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class o0 extends Kh{constructor(e){super(2,e),o0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!B$(e.kernelSize,"number",1,2))throw new j(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}o0.className="Conv2D";ge(o0);class i0 extends Kh{constructor(e){super(3,e),i0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new j(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}i0.className="Conv3D";ge(i0);class N5 extends o0{constructor(e){if(super(e),this.inputSpec=[new Pn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new j(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=It(e),e.length!==4)throw new j("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new j("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Pn({ndim:4,axes:{[n]:s}})],this.built=!0}call(e,n){return ee(()=>{let s=tt(e);if(s.shape.length!==4)throw new j(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape,o=r[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=r[i],u=r[a],c=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=Yo(l,h,c,this.padding),m=Yo(u,f,d,this.padding),g=[o,p,m,this.filters];this.dataFormat!=="channelsLast"&&(s=wt(s,[0,2,3,1]));let y=Jb(s,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=wt(y,[0,3,1,2])),this.bias!=null&&(y=Vo(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=It(e);const n=e.slice();let s,r,o;this.dataFormat==="channelsFirst"?(s=1,r=2,o=3):(s=3,r=1,o=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[s]=this.filters,n[r]=Yo(n[r],l,i,this.padding),n[o]=Yo(n[o],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}N5.className="Conv2DTranspose";ge(N5);class T5 extends i0{constructor(e){if(super(e),this.inputSpec=[new Pn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new j(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=It(e),e.length!==5)throw new j("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new j("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Pn({ndim:5,axes:{[n]:s}})],this.built=!0}call(e,n){return ee(()=>{let s=tt(e);if(s.shape.length!==5)throw new j(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape,o=r[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const u=r[l],c=r[i],d=r[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],b=Yo(u,m,h,this.padding),v=Yo(c,g,f,this.padding),x=Yo(d,y,p,this.padding),w=[o,b,v,x,this.filters];this.dataFormat!=="channelsLast"&&(s=wt(s,[0,2,3,4,1]));let S=fT(s,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=wt(S,[0,4,1,2,3])),this.bias!==null&&(S=Vo(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=It(e);const n=e.slice();let s,r,o,i;this.dataFormat==="channelsFirst"?(s=1,r=2,o=3,i=4):(s=4,r=1,o=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],h=this.strides[2];return n[s]=this.filters,n[r]=Yo(n[r],c,a,this.padding),n[o]=Yo(n[o],d,l,this.padding),n[i]=Yo(n[i],h,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}T5.className="Conv3DTranspose";ge(T5);class $5 extends Kh{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new j("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new j("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new j(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=tn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=nn(n.depthwiseRegularizer),this.depthwiseConstraint=zn(n.depthwiseConstraint),this.pointwiseInitializer=tn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=nn(n.pointwiseRegularizer),this.pointwiseConstraint=zn(n.pointwiseConstraint)}build(e){if(e=It(e),e.length<this.rank+2)throw new j(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new j(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const s=e[n],r=this.kernelSize.concat([s,this.depthMultiplier]),o=[];for(let a=0;a<this.rank;++a)o.push(1);o.push(s*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Pn({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(e,n){return ee(()=>{e=tt(e);let s;if(this.rank===1)throw new it("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=wt(e,[0,2,3,1])),s=fv(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=Vo(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=wt(s,[0,3,1,2])),s})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=un(this.depthwiseInitializer),e.pointwiseInitializer=un(this.pointwiseInitializer),e.depthwiseRegularizer=Bt(this.depthwiseRegularizer),e.pointwiseRegularizer=Bt(this.pointwiseRegularizer),e.depthwiseConstraint=Mn(this.depthwiseConstraint),e.pointwiseConstraint=Mn(this.pointwiseConstraint),e}}$5.className="SeparableConv";class E5 extends $5{constructor(e){super(2,e)}}E5.className="SeparableConv2D";ge(E5);class Wv extends Kh{constructor(e){super(1,e),Wv.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!B$(e.kernelSize,"number",1,1))throw new j(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Wv.className="Conv1D";ge(Wv);class I5 extends bt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ee(()=>{if(e=tt(e),this.dataFormat==="channelsLast"){const s=K0(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return K0(s,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=K0(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return K0(s,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}I5.className="Cropping2D";ge(I5);class R5 extends bt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Nn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ffe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],s=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,s]}else{const n=e[1]==null?null:this.size[0]*e[1],s=e[2]==null?null:this.size[1]*e[2];return[e[0],n,s,e[3]]}}call(e,n){return ee(()=>{let s=tt(e);const r=s.shape;if(this.dataFormat==="channelsFirst"){s=wt(s,[0,2,3,1]);const o=this.size[0]*r[2],i=this.size[1]*r[3],a=this.interpolation==="nearest"?$r.resizeNearestNeighbor(s,[o,i]):$r.resizeBilinear(s,[o,i]);return wt(a,[0,3,1,2])}else{const o=this.size[0]*r[1],i=this.size[1]*r[2];return this.interpolation==="nearest"?$r.resizeNearestNeighbor(s,[o,i]):$r.resizeBilinear(s,[o,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}R5.className="UpSampling2D";ge(R5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mpe(t,e,n=[1,1],s="valid",r,o){return ee(()=>{r==null&&(r=Lo()),Nn(r);let i=eE(t,r);if(t.rank!==4)throw new j(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new j(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=Vh(i,e,n,s==="same"?"same":"valid","NHWC",o),r==="channelsFirst"&&(i=wt(i,[0,3,1,2])),i})}class _5 extends Uv{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=tn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=zn(e.depthwiseConstraint),this.depthwiseRegularizer=nn(e.depthwiseRegularizer)}build(e){if(e=It(e),e.length<4)throw new j(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new j(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const s=e[n],r=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ee(()=>{e=tt(e);let s=Mpe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=Vo(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(e){e=It(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=Ao(n,this.kernelSize[0],this.padding,this.strides[0]),i=Ao(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],r,o,i]:[e[0],o,i,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=un(this.depthwiseInitializer),e.depthwiseRegularizer=Bt(this.depthwiseRegularizer),e.depthwiseConstraint=Mn(this.depthwiseRegularizer),e}}_5.className="DepthwiseConv2D";ge(_5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function A5(t,e,n,s){if(Array.isArray(t)){if(e!=null||n!=null)throw new j("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=t.slice(t.length-s,t.length),t=t.slice(0,t.length-s)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function r(o){return o==null||Array.isArray(o)?o:[o]}return e=r(e),n=r(n),{inputs:t,initialState:e,constants:n}}function D5(t,e,n,s=!1,r,o,i=!1,a=!1){return ee(()=>{const l=e.shape.length;if(l<3)throw new j(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Fo(2,l));if(e=wt(e,u),o!=null)throw new it("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r!=null&&(r=Ce(Ce(r,"bool"),"float32"),r.rank===l-1&&(r=ss(r,-1)),r=wt(r,u)),s&&(e=Dr(e,0),r!=null&&(r=Dr(r,0)));const c=[];let d,h=n;const f=e.shape[0],p=Or(e);let m;r!=null&&(m=Or(r));for(let y=0;y<f;++y){const b=p[y],v=ee(()=>t(b,h));if(r==null)d=v[0],h=v[1];else{const x=ee(()=>{const w=m[y],S=Oe(hr(w),w),k=pe(V(v[0],w),V(h[0],S)),N=h.map(($,I)=>pe(V(v[1][I],w),V($,S)));return{output:k,newStates:N}});d=x.output,h=x.newStates}a&&c.push(d)}let g;return a&&(g=qs(c,1)),[d,g,h]})}class Nl extends bt{constructor(e){super(e);let n;if(e.cell==null)throw new j("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new sE({cells:e.cell}):n=e.cell,n.stateSize==null)throw new j("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Pn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Fo(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){LC(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let r;if(this.returnSequences?r=[e[0],e[1],s]:r=[e[0],s],this.returnState){const o=[];for(const i of n)o.push([e[0],i]);return[r].concat(o)}else return r}computeMask(e,n){return ee(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const r=this.states.map(o=>null);return[s].concat(r)}else return s})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<e;++s)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new it("Constants support is not implemented in RNN yet.");LC(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,s=e.slice(2);this.inputSpec[0]=new Pn({shape:[n,null,...s]});const r=[e[0]].concat(e.slice(2));this.cell.build(r);let o;if(Array.isArray(this.cell.stateSize)?o=this.cell.stateSize:o=[this.cell.stateSize],this.stateSpec!=null){if(!vt(this.stateSpec.map(i=>i.shape[i.shape.length-1]),o))throw new j(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map(i=>new Pn({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ee(()=>{if(!this.stateful)throw new Ko("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new j("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>xn([s,r])):this.states_=[xn([s,this.cell.stateSize])];else if(e==null)at(this.states_),this.keptStates!=null&&(at(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>xn([s,r])):this.states_[0]=xn([s,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new j(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):at(this.states_);for(let r=0;r<this.states_.length;++r){const o=e[r],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[r]:this.cell.stateSize,a=[s,i];if(!vt(o.shape,a))throw new j(`State ${r} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${o.shape}`);this.states_[r]=o}}this.states_=this.states_.map(r=>Fn(r.clone()))})}apply(e,n){let s=n==null?null:n.initialState,r=n==null?null:n.constants;n==null&&(n={});const o=A5(e,s,r,this.numConstants);e=o.inputs,s=o.initialState,r=o.constants;let i=[],a=[];if(s!=null){n.initialState=s,i=i.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Pn({shape:u.shape}));a=a.concat(this.stateSpec)}if(r!=null&&(n.constants=r,i=i.concat(r),this.numConstants=r.length),i[0]instanceof fi){const u=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return ee(()=>{const s=n==null?null:n.mask,r=n==null?null:n.training;let o=n==null?null:n.initialState;e=tt(e),o==null&&(this.stateful?o=this.states_:o=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==i)throw new j(`RNN Layer has ${i} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:r},u=D5((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,o,this.goBackwards,s,null,this.unroll,this.returnSequences),c=u[0],d=u[1],h=u[2];this.stateful&&this.resetStates(h,r);const f=this.returnSequences?d:c;return this.returnState?[f].concat(h):f})}getInitialState(e){return ee(()=>{let n=xn(e.shape);return n=ze(n,[1,2]),n=e0(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?OC(n,[1,s]):n):this.cell.stateSize>1?[OC(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===Nl.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),e),n)}static fromConfig(e,n,s={}){const r=n.cell,o=zi(r,s);return new e(Object.assign(n,{cell:o}))}}Nl.className="RNN";ge(Nl);class jv extends bt{}class tE extends jv{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,qn(this.units,"units"),this.activation=ll(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=tn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=tn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=tn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=nn(e.kernelRegularizer),this.recurrentRegularizer=nn(e.recurrentRegularizer),this.biasRegularizer=nn(e.biasRegularizer),this.kernelConstraint=zn(e.kernelConstraint),this.recurrentConstraint=zn(e.recurrentConstraint),this.biasConstraint=zn(e.biasConstraint),this.dropout=_d([1,il([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=_d([1,il([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=It(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ee(()=>{if(e=e,e.length!==2)throw new j(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const r=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ul({ones:()=>hr(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ul({ones:()=>hr(s),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let o;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?o=li(V(e,i),this.kernel.read()):o=li(e,this.kernel.read()),this.bias!=null&&(o=Vo(o,this.bias.read())),a!=null&&(s=V(s,a));let l=pe(o,li(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:al(this.activation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),recurrentInitializer:un(this.recurrentInitializer),biasInitializer:un(this.biasInitializer),kernelRegularizer:Bt(this.kernelRegularizer),recurrentRegularizer:Bt(this.recurrentRegularizer),biasRegularizer:Bt(this.biasRegularizer),activityRegularizer:Bt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}tE.className="SimpleRNNCell";ge(tE);class O5 extends Nl{constructor(e){e.cell=new tE(e),super(e)}call(e,n){return ee(()=>{this.cell.dropoutMask!=null&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,r=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:o})})}static fromConfig(e,n){return new e(n)}}O5.className="SimpleRNN";ge(O5);class nE extends jv{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new j("GRUCell does not support reset_after parameter set to true.");this.units=e.units,qn(this.units,"units"),this.activation=ll(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ll(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=tn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=tn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=tn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=nn(e.kernelRegularizer),this.recurrentRegularizer=nn(e.recurrentRegularizer),this.biasRegularizer=nn(e.biasRegularizer),this.kernelConstraint=zn(e.kernelConstraint),this.recurrentConstraint=zn(e.recurrentConstraint),this.biasConstraint=zn(e.biasConstraint),this.dropout=_d([1,il([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=_d([1,il([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=It(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ee(()=>{if(e=e,e.length!==2)throw new j(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training==null?!1:n.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ul({ones:()=>hr(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ul({ones:()=>hr(r),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=V(e,o[0]));let c=li(e,this.kernel.read());this.useBias&&(c=Vo(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=V(r,i[0]));const d=this.recurrentKernel.read(),[h,f]=Us(d,[2*this.units,this.units],d.rank-1),p=li(r,h),[m,g,y]=Us(c,3,c.rank-1),[b,v]=Us(p,2,p.rank-1);a=this.recurrentActivation.apply(pe(m,b)),l=this.recurrentActivation.apply(pe(g,v));const x=li(V(l,r),f);u=this.activation.apply(pe(y,x));const w=pe(V(a,r),V(pe(1,Wt(a)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:al(this.activation),recurrentActivation:al(this.recurrentActivation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),recurrentInitializer:un(this.recurrentInitializer),biasInitializer:un(this.biasInitializer),kernelRegularizer:Bt(this.kernelRegularizer),recurrentRegularizer:Bt(this.recurrentRegularizer),biasRegularizer:Bt(this.biasRegularizer),activityRegularizer:Bt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}nE.className="GRUCell";ge(nE);class F5 extends Nl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new nE(e),super(e)}call(e,n){return ee(()=>{this.cell.dropoutMask!=null&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,r=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}F5.className="GRU";ge(F5);class Gv extends jv{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,qn(this.units,"units"),this.activation=ll(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ll(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=tn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=tn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=tn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=nn(e.kernelRegularizer),this.recurrentRegularizer=nn(e.recurrentRegularizer),this.biasRegularizer=nn(e.biasRegularizer),this.kernelConstraint=zn(e.kernelConstraint),this.recurrentConstraint=zn(e.recurrentConstraint),this.biasConstraint=zn(e.biasConstraint),this.dropout=_d([1,il([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=_d([1,il([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=It(e);const s=e[e.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let r;if(this.useBias){if(this.unitForgetBias){const o=this.biasInitializer,i=this.units;r=new(n=class extends ho{apply(l,u){const c=o.apply([i]),d=new U$().apply([i]),h=o.apply([i*2]);return K3(K3(c,d),h)}},n.className="CustomInit",n)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ee(()=>{const s=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new j(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ul({ones:()=>hr(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ul({ones:()=>hr(r),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(e=V(e,i[0]));let h=li(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=V(r,a[0])),h=pe(h,li(r,this.recurrentKernel.read())),this.useBias&&(h=Vo(h,this.bias.read()));const[f,p,m,g]=Us(h,4,h.rank-1);l=this.recurrentActivation.apply(f),u=this.recurrentActivation.apply(p),c=pe(V(u,o),V(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const y=V(d,this.activation.apply(c));return[y,y,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:al(this.activation),recurrentActivation:al(this.recurrentActivation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),recurrentInitializer:un(this.recurrentInitializer),biasInitializer:un(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Bt(this.kernelRegularizer),recurrentRegularizer:Bt(this.recurrentRegularizer),biasRegularizer:Bt(this.biasRegularizer),activityRegularizer:Bt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Gv.className="LSTMCell";ge(Gv);class L5 extends Nl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Gv(e),super(e)}call(e,n){return ee(()=>{this.cell.dropoutMask!=null&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,r=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}L5.className="LSTM";ge(L5);class sE extends jv{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ee(()=>{e=e;let s=e.slice(1);const r=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?r.push(s.splice(0,a.stateSize.length)):r.push(s.splice(0,1));r.reverse();const o=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];s=r[a],a===0?i=[e[0]].concat(s):i=[i[0]].concat(s),i=l.call(i,n),o.push(i.slice(1))}s=[];for(const a of o.slice().reverse())s.push(...a);return[i[0]].concat(s)})}build(e){LC(e)&&(e=e[0]),e=e;let n;this.cells.forEach((s,r)=>{pu(`RNNCell_${r}`,()=>{s.build(e),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=o=>({className:o.getClassName(),config:o.getConfig()}),r={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),r)}static fromConfig(e,n,s={}){const r=[];for(const o of n.cells)r.push(zi(o,s));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return PC(e)}setWeights(e){const n=[];for(const s of this.cells){const r=s.weights.length,o=e.splice(r);for(let i=0;i<s.weights.length;++i)n.push([s.weights[i],o[i]])}X$(n)}}sE.className="StackedRNNCells";ge(sE);function ul(t){const{ones:e,rate:n,training:s=!1,count:r=1,dropoutFunc:o}=t,i=()=>o!=null?o(e(),n):$6(e(),n),a=()=>n0(i,e,s);return!r||r<=1?Fn(a().clone()):Array(r).fill(void 0).map(a).map(u=>Fn(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var zpe=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};class P5 extends Nl{constructor(e){if(e.unroll)throw new it("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new it("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Pn({ndim:5})]}call(e,n){return ee(()=>{if(this.cell.dropoutMask!=null&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new j("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,r=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:s,training:r,initialState:o})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ee(()=>{const{stateSize:n}=this.cell,s=e.shape,r=this.computeSingleOutputShape(s),o=[r[0],...r.slice(2)],i=xn(o);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){ee(()=>{if(!this.stateful)throw new Ko("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,r=this.computeSingleOutputShape(s),o=[r[0],...r.slice(2)];if(s[0]==null)throw new j("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xn(o)):this.states_=[xn(o)];else if(e==null)at(this.states_),this.keptStates!=null&&(at(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xn(o)):this.states_[0]=xn(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new j(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):at(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=o;if(!vt(l.shape,u))throw new j(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Fn(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:s,kernelSize:r,padding:o,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],d=Ao(u,r[0],o,i[0],a[0]),h=Ao(c,r[1],o,i[1],a[1]);return[...e.slice(0,2),...l?[s,d,h]:[d,h,s]]}}P5.className="ConvRNN2D";class rE extends Gv{constructor(e){const{filters:n,kernelSize:s,strides:r,padding:o,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,qn(this.filters,"filters"),this.kernelSize=jc(s,2,"kernelSize"),this.kernelSize.forEach(l=>qn(l,"kernelSize")),this.strides=jc(r||1,2,"strides"),this.strides.forEach(l=>qn(l,"strides")),this.padding=o||"valid",Pr(this.padding),this.dataFormat=i||"channelsLast",Nn(this.dataFormat),this.dilationRate=jc(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>qn(l,"dilationRate"))}build(e){var n;e=It(e);const s=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[s]==null)throw new j(`The channel dimension of the input should be defined. Found ${e[s]}`);const r=e[s],o=4,i=this.kernelSize.concat([r,this.filters*o]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*o]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends ho{apply(h,f){const p=u.apply([c]),m=Bs([c]),g=u.apply([c*2]);return V$([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*o],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ee(()=>{if(e.length!==3)throw new j(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training||!1,r=e[0],o=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ul({ones:()=>hr(r),rate:this.dropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(K,ne,D)=>!ne||!ne[D]?K:V(ne[D],K);let c=u(r,l,0),d=u(r,l,1),h=u(r,l,2),f=u(r,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ul({ones:()=>hr(o),rate:this.recurrentDropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(o,p,0),g=u(o,p,1),y=u(o,p,2),b=u(o,p,3);const v=3,[x,w,S,k]=Us(this.kernel.read(),a,v),[N,$,I,A]=this.useBias?Us(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,x,N,this.padding),d=this.inputConv(d,w,$,this.padding),h=this.inputConv(h,S,I,this.padding),f=this.inputConv(f,k,A,this.padding);const[O,P,F,G]=Us(this.recurrentKernel.read(),a,v);m=this.recurrentConv(m,O),g=this.recurrentConv(g,P),y=this.recurrentConv(y,F),b=this.recurrentConv(b,G);const q=this.recurrentActivation.apply(pe(c,m)),Z=this.recurrentActivation.apply(pe(d,g)),B=pe(V(Z,i),V(q,this.activation.apply(pe(h,y)))),H=V(this.recurrentActivation.apply(pe(f,b)),this.activation.apply(B));return[H,H,B]})}getConfig(){const e=super.getConfig(),n=zpe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),s)}inputConv(e,n,s,r){const o=Ki(e,n,this.strides,r||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?Vo(o,s,this.dataFormat):o}recurrentConv(e,n){return Ki(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}rE.className="ConvLSTM2DCell";ge(rE);class M5 extends P5{constructor(e){const n=new rE(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}M5.className="ConvLSTM2D";ge(M5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class oE extends bt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,s=[];for(let r=0;r<this.noiseShape.length;++r)s.push(this.noiseShape[r]==null?n[r]:this.noiseShape[r]);return s}call(e,n){return ee(()=>{this.invokeCallHook(e,n);const s=tt(e);if(0<this.rate&&this.rate<1){const r=n.training==null?!1:n.training,o=this.getNoiseShape(s);return n0(()=>$6(s,this.rate,o,this.seed),()=>s,r)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}oE.className="Dropout";ge(oE);class z5 extends oE{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}z5.className="SpatialDropout1D";ge(z5);class B5 extends bt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,qn(this.units,"units"),this.activation=ll(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=tn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=tn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=zn(e.kernelConstraint),this.biasConstraint=zn(e.biasConstraint),this.kernelRegularizer=nn(e.kernelRegularizer),this.biasRegularizer=nn(e.biasRegularizer),this.activityRegularizer=nn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=It(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=It(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ee(()=>{this.invokeCallHook(e,n);const s=tt(e),r=x6(this.activation.getClassName());let o;return r!=null?o=li(s,this.kernel.read(),r,this.bias?this.bias.read():null):(o=li(s,this.kernel.read()),this.bias!=null&&(o=Vo(o,this.bias.read())),this.activation!=null&&(o=this.activation.apply(o))),o})}getConfig(){const e={units:this.units,activation:al(this.activation),useBias:this.useBias,kernelInitializer:un(this.kernelInitializer),biasInitializer:un(this.biasInitializer),kernelRegularizer:Bt(this.kernelRegularizer),biasRegularizer:Bt(this.biasRegularizer),activityRegularizer:Bt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),biasConstraint:Mn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}B5.className="Dense";ge(B5);class V5 extends bt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=It(e);for(const n of e.slice(1))if(n==null)throw new j(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ya(e,1)]}call(e,n){return ee(()=>{this.invokeCallHook(e,n);let s=tt(e);if(this.dataFormat==="channelsFirst"&&s.rank>1){const r=[0];for(let o=2;o<s.rank;++o)r.push(o);r.push(1),s=wt(s,r)}return vfe(s)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}V5.className="Flatten";ge(V5);class U5 extends bt{constructor(e){super(e),this.supportsMasking=!0,this.activation=ll(e.activation)}call(e,n){return ee(()=>{this.invokeCallHook(e,n);const s=tt(e);return this.activation.apply(s)})}getConfig(){const e={activation:al(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}U5.className="Activation";ge(U5);class W5 extends bt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ee(()=>(e=tt(e),yfe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}W5.className="RepeatVector";ge(W5);class j5 extends bt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const s="Total size of new array must be unchanged.",r=n.slice();let o=1,i=null;for(let l=0;l<r.length;++l){const u=r[l];if(this.isUnknown(u))if(i===null)i=l;else throw new j("Can only specifiy one unknown dimension.");else o*=u}const a=Ya(e);if(i!==null){if(o===0||a%o!==0)throw new j(s);r[i]=a/o}else if(a!==o)throw new j(s);return r}computeOutputShape(e){let n=!1;for(let s=0;s<e.length;++s)if(this.isUnknown(e[s])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ee(()=>{this.invokeCallHook(e,n);const s=tt(e),r=s.shape,o=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return W(s,o)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}j5.className="Reshape";ge(j5);class G5 extends bt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Fo(1,e.dims.length+1);if(!vt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Pn({ndim:this.dims.length+1})]}computeOutputShape(e){e=It(e);const n=e.slice();return this.dims.forEach((s,r)=>{n[r+1]=e[s]}),n}call(e,n){return wt(tt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}G5.className="Permute";ge(G5);class H5 extends bt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const s=tt(e);return Mp(_u(s,this.maskValue),-1)}call(e,n){return ee(()=>{this.invokeCallHook(e,n);const s=tt(e),i=Mp(_u(s,this.maskValue),-1,!0);return V(s,Ce(i,s.dtype))})}}H5.className="Masking";ge(H5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class q5 extends bt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Dt(e.inputLength))}this.inputDim=e.inputDim,qn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,qn(this.outputDim,"outputDim"),this.embeddingsInitializer=tn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=nn(e.embeddingsRegularizer),this.activityRegularizer=nn(e.activityRegularizer),this.embeddingsConstraint=zn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ee(()=>this.maskZero?(e=tt(e),_u(e,St(e))):null)}computeOutputShape(e){if(e=It(e),this.inputLength==null)return[...e,this.outputDim];const n=Dt(this.inputLength);if(n.length!==e.length-1)throw new j(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let s=0;for(let r=0;r<n.length;++r){const o=n[r],i=e[r+1];if(o!=null&&i!=null&&o!==i)throw new j(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);o==null&&(n[s]=i),s++}}return[e[0],...n,this.outputDim]}call(e,n){return ee(()=>{this.invokeCallHook(e,n);let s=tt(e);s.dtype!=="int32"&&(s=ai(s,"int32"));const r=T6(this.embeddings.read(),W(s,[s.size]));return W(r,It(this.computeOutputShape(s.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:un(this.embeddingsInitializer),embeddingsRegularizer:Bt(this.embeddingsRegularizer),activityRegularizer:Bt(this.activityRegularizer),embeddingsConstraint:Mn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}q5.className="Embedding";ge(q5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tc extends bt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new it}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const s=e.slice(0,e.length-n.length);for(let r=0;r<n.length;++r){const o=e[e.length-n.length+r],i=n[r];if(o==null||i==null||o<0||i<0)s.push(null);else if(o===1)s.push(i);else if(i===1)s.push(o);else{if(o!==i)throw new j("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));s.push(o)}}return s}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[It(e)]),e=e,e.length<2)throw new j(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const o of e)o!=null&&o[0]!==null&&n.push(o[0]);if(n=Xa(n),n.length>1)throw new j(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let s=e[0]==null?null:e[0].slice(1);for(let o=1;o<e.length;++o){const i=e[o]==null?null:e[o].slice(1);s=this.computeElementwiseOpOutputShape(s,i)}const r=e.map(o=>o.length);e.indexOf(null)===-1&&Xa(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ee(()=>{if(e=e,this.reshapeRequired){const s=[],r=e.map(o=>o.rank);if(r.indexOf(null)===-1){const o=il(r);for(let i of e){const a=i.rank;for(let l=0;l<o-a;++l)i=e0(i,1);s.push(i)}return this.mergeFunction(s)}else{let o=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,d=c[0],h=c.slice(1).concat([d]);let f=W(l,[d].concat(Ya(c.slice(1))));f=wt(f,[1,0]),f=W(f,h),s.push(f),o=!0}else if(u>1){const c=Fo(1,u).concat([0]);s.push(wt(l,c)),o=!0}else s.push(l)}let i=this.mergeFunction(s);const a=i.rank;if(o){if(a==null){const l=i.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));i=W(wt(W(i,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Fo(0,a-1));i=wt(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let r=1;r<e.length;++r){const o=e[r]==null?null:e[r].slice(1);n=this.computeElementwiseOpOutputShape(n,o)}let s=[];for(const r of e)r!=null&&r[0]!==null&&s.push(r[0]);return s=Xa(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(e,n){return ee(()=>{if(n==null)return null;if(!Array.isArray(n))throw new j("`mask` should be an Array");if(!Array.isArray(e))throw new j("`inputs` should be an Array");if(n.length!==e.length)throw new j(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(r=>r==null))return null;n=n.map(r=>r==null?r:ss(r,0));let s=n[0];for(let r=1;r<n.length-1;++r)s=Oo(s,n[r]);return s})}}class K5 extends tc{constructor(e){super(e)}mergeFunction(e){return ee(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=pe(n,e[s]);return n})}}K5.className="Add";ge(K5);class X5 extends tc{constructor(e){super(e)}mergeFunction(e){return ee(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=V(n,e[s]);return n})}}X5.className="Multiply";ge(X5);class Y5 extends tc{constructor(e){super(e)}mergeFunction(e){return ee(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=pe(n,e[s]);return V(1/e.length,n)})}}Y5.className="Average";ge(Y5);class Q5 extends tc{constructor(e){super(e)}mergeFunction(e){return ee(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=xi(n,e[s]);return n})}}Q5.className="Maximum";ge(Q5);class Z5 extends tc{constructor(e){super(e)}mergeFunction(e){return ee(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=ol(n,e[s]);return n})}}Z5.className="Minimum";ge(Z5);class J5 extends tc{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new j("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const r of e)if(r!=null){n=!1;break}if(n)return;const s=[];for(let r=0;r<e.length;++r){const o=e[r].slice();o.splice(this.axis,1);let i=!1;for(const a of s)if(vt(a,o)){i=!0;break}i||s.push(o)}if(s.length>1)throw new j("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ee(()=>V$(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new j("A `Concatenate` layer should be called on a list of inputs.");const n=e,s=n[0].slice(),r=this.axis<0?s.length+this.axis:this.axis;for(const o of n.slice(1)){if(s[r]==null||o[r]==null){s[r]=null;break}s[r]+=o[r]}return s}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new j("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new j("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new j(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ee(()=>{let s=!0;if(n.forEach(i=>{if(i!=null){s=!1;return}}),s)return null;const r=[];for(let i=0;i<e.length;++i)n[i]==null?r.push(Ce(hr(e[i]),"bool")):n[i].rank<e[i].rank?r.push(ss(n[i],-1)):r.push(n[i]);const o=wn(r,this.axis);return Qb(o,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}J5.className="Concatenate";ge(J5);function _f(t,e){for(;t<0;)t+=e;return t}function Bpe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new it("batchDot is not implemented for tensors of 4D or higher rank yet");if(T(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),T(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new it("batchDot is not implemented for complex64-type Tensors yet.");const s=t.shape.length,r=e.shape.length;n==null&&(n=[s-1,r-2]);const o=n;return ee(()=>{let i;if(s>r){i=s-r;const l=[];for(let u=0;u<i;++u)l.push(1);e=W(e,e.shape.concat(l))}else if(r>s){i=r-s;const l=[];for(let u=0;u<i;++u)l.push(1);t=W(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)o[0]===o[1]?a=ze(V(t,e),o[0]):a=ze(V(wt(t,[1,0]),e),o[1]);else{const l=o[0]!==t.shape.length-1,u=o[1]===e.shape.length-1;a=ft(t,e,l,u)}if(i>0){let l;s>r?l=s+r-3:l=s-1;const u=[];for(let c=l;c<l+i;++c)u.push(c);a=ia(a,u)}return a.shape.length===1&&(a=ss(a,1)),a})}let ez=class extends tc{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){T(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],s=e[1];if(n.length>3||s.length>3)throw new it("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(n,s);if(n[r[0]]!==s[r[1]])throw new j(`Dimension incompatibility: ${n[r[0]]} !== ${s[r[1]]}`)}mergeFunction(e){if(e.length!==2)throw new j(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],s=e[1],r;return Array.isArray(this.axes)?r=this.axes.map((o,i)=>_f(o,e[i].shape.length)):r=[_f(this.axes,n.shape.length),_f(this.axes,s.shape.length)],this.normalize&&(n=E1(n,r[0]),s=E1(s,r[1])),Bpe(n,s,r)}interpretAxes(e,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[_f(this.axes,e.length),_f(this.axes,n.length)],s}computeOutputShape(e){T(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),s=e[1].slice();if(n.length>3||s.length>3)throw new it("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(n,s);n.splice(r[0],1),s.splice(r[1],1),s.splice(0,1);const o=n.concat(s);return o.length===1&&o.push(1),o}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};ez.className="Dot";ge(ez);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tz extends bt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ee(()=>{this.invokeCallHook(e,n);const s=tt(e);return n0(()=>pe(Mv(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}tz.className="GaussianNoise";ge(tz);class nz extends bt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ee(()=>{this.invokeCallHook(e,n);const s=tt(e);return this.rate>0&&this.rate<1?n0(()=>{const o=Math.sqrt(this.rate/(1-this.rate));return V(s,Mv(s.shape,1,o))},()=>s,n.training||!1):s})}}nz.className="GaussianDropout";ge(nz);class sz extends bt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||tt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ee(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(e);return n0(()=>{const o=tt(e),l=-1.6732632423543772*1.0507009873554805;let u=ra(Cl(s),this.rate);u=ai(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,h=pe(V(o,u),V(pe(u,-1),l));return pe(V(h,c),d)},()=>tt(e),n.training||!1)}return e})}}sz.className="AlphaDropout";ge(sz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gp(t,e,n,s,r,o=.001){let i;if(t.rank===2)i=nT(t,e,n,s,r,o);else if(t.rank===3)i=sT(t,e,n,s,r,o);else if(t.rank===4)i=rT(t,e,n,s,r,o);else throw new it(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function Vpe(t,e,n,s,r=.001){return ee(()=>{const o=Ug(t,s),i=o.mean,a=o.variance;return[Gp(t,i,a,n,e,r),i,a]})}function Upe(t,e,n,s,r=.001){return ee(()=>{const o=Ug(t,s),i=o.mean,a=o.variance,l=[];for(const p of Fo(0,t.rank))s.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=W(i,l),c=W(a,l),d=e==null?null:W(e,l),h=n==null?null:W(n,l);return[Gp(t,u,c,h,d,r),i,a]})}function Wpe(t,e,n,s,r=.001){return vt(s.slice().sort(),Fo(0,t.rank-1))?Vpe(t,e,n,s,r):Upe(t,e,n,s,r)}class rz extends bt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=tn(e.betaInitializer||"zeros"),this.gammaInitializer=tn(e.gammaInitializer||"ones"),this.movingMeanInitializer=tn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=tn(e.movingVarianceInitializer||"ones"),this.betaConstraint=zn(e.betaConstraint),this.gammaConstraint=zn(e.gammaConstraint),this.betaRegularizer=nn(e.betaRegularizer),this.gammaRegularizer=nn(e.gammaRegularizer)}build(e){e=It(e);const n=this.axis>=0?this.axis:this.axis+e.length,s=e[n];if(s==null)throw new j(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Pn({ndim:e.length,axes:{[n]:s}})];const r=[s];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ee(()=>{const s=n.training==null?!1:n.training,r=tt(e),o=r.shape,i=o.length,a=Fo(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const u=Fu(1,i);u[l]=o[l];const c=a.slice();c.sort();const d=!vt(c,Fo(0,i).slice(0,i-1)),h=()=>{if(d){const b=W(this.movingMean.read(),u),v=W(this.movingVariance.read(),u),x=this.center?W(this.beta.read(),u):null,w=this.scale?W(this.gamma.read(),u):null;return Gp(r,b,v,x,w,this.epsilon)}else return Gp(r,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return h();const[f,p,m]=Wpe(r,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(b,v,x)=>{ee(()=>{const w=1-x,S=b.read(),k=V(Oe(S,v),w);b.write(Oe(S,k))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:un(this.betaInitializer),gammaInitializer:un(this.gammaInitializer),movingMeanInitializer:un(this.movingMeanInitializer),movingVarianceInitializer:un(this.movingVarianceInitializer),betaRegularizer:Bt(this.betaRegularizer),gammaRegularizer:Bt(this.gammaRegularizer),betaConstraint:Mn(this.betaConstraint),gammaConstraint:Mn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}rz.className="BatchNormalization";ge(rz);class oz extends bt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=tn(e.betaInitializer||"zeros"),this.gammaInitializer=tn(e.gammaInitializer||"ones"),this.betaRegularizer=nn(e.betaRegularizer),this.gammaRegularizer=nn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=It(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=n);for(const o of this.axis)if(o<0||o>=n)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==Xa(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(o=>e[o]),r=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,n){const s=tt(e),r=s.shape,o=r.length;return ee(()=>{let{mean:a,variance:l}=Ug(s,this.axis,!0);const u=Fu(1,o);for(const m of this.axis)u[m]=r[m];const c=m=>m!=null&&m.shape.length!==o?W(m,u):m;let d=this.scale?c(this.gamma.read()):null,h=this.center?c(this.beta.read()):null;const f=[],p=[];for(let m=0;m<o;++m)this.axis.indexOf(m)!==-1?(f.push(r[m]),p.push(1)):(f.push(1),p.push(r[m]));return a=Tr(a,f),l=Tr(l,f),d!=null&&(d=Tr(d,p)),h!=null&&(h=Tr(h,p)),Gp(s,a,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:un(this.betaInitializer),gammaInitializer:un(this.gammaInitializer),betaRegularizer:Bt(this.betaRegularizer),gammaRegularizer:Bt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}oz.className="LayerNormalization";ge(oz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jpe(t,e,n){return ee(()=>{if(t.rank!==4)throw new j(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new j("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Lo()),n!=="channelsLast"&&n!=="channelsFirst")throw new j(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],e[0],e[1]]:s=[[0,0],e[0],e[1],[0,0]],oa(t,s)})}class iz extends bt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Lo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new j(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,s;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],s=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new j(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new j(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);s=e.padding[1]}this.padding=[n,s]}this.inputSpec=[new Pn({ndim:4})]}computeOutputShape(e){e=It(e);let n,s;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?s=e[3]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],e[1],n,s]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?s=e[2]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],n,s,e[3]])}call(e,n){return ee(()=>jpe(tt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}iz.className="ZeroPadding2D";ge(iz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hv(t,e,n,s,r,o){return ee(()=>{Nn(r),S6(o),Pr(s),n==null&&(n=[1,1]),s==null&&(s="valid"),r==null&&(r=Lo()),o==null&&(o="max"),t=eE(t,r);let i;const a=s==="same"?"same":"valid";return o==="max"?i=Vg(t,e,n,a):i=Dg(t,e,n,a),r==="channelsFirst"&&(i=wt(i,[0,3,1,2])),i})}function az(t,e,n,s,r,o){return ee(()=>{Nn(r),S6(o),Pr(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),r==null&&(r=Lo()),o==null&&(o="max"),t=k5(t,r);let i;const a=s==="same"?"same":"valid";return o==="max"?i=$T(t,e,n,a):i=tT(t,e,n,a),r==="channelsFirst"&&(i=wt(i,[0,4,1,2,3])),i})}class lz extends bt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new j(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(qn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new j(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);qn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Pr(this.padding),this.inputSpec=[new Pn({ndim:3})]}computeOutputShape(e){e=It(e);const n=Ao(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ee(()=>{this.invokeCallHook(e,n),e=e0(tt(e),2);const s=this.poolingFunction(tt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ia(s,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class uz extends lz{constructor(e){super(e)}poolingFunction(e,n,s,r,o){return Nn(o),Pr(r),Hv(e,n,s,r,o,"max")}}uz.className="MaxPooling1D";ge(uz);class cz extends lz{constructor(e){super(e)}poolingFunction(e,n,s,r,o){return Nn(o),Pr(r),Hv(e,n,s,r,o,"avg")}}cz.className="AveragePooling1D";ge(cz);class dz extends bt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new j(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];qn(this.poolSize,"poolSize"),qn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Nn(this.dataFormat),Pr(this.padding),this.inputSpec=[new Pn({ndim:4})]}computeOutputShape(e){e=It(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Ao(n,this.poolSize[0],this.padding,this.strides[0]),s=Ao(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s]:[e[0],n,s,e[3]]}call(e,n){return ee(()=>(this.invokeCallHook(e,n),this.poolingFunction(tt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class hz extends dz{constructor(e){super(e)}poolingFunction(e,n,s,r,o){return Nn(o),Pr(r),Hv(e,n,s,r,o,"max")}}hz.className="MaxPooling2D";ge(hz);class fz extends dz{constructor(e){super(e)}poolingFunction(e,n,s,r,o){return Nn(o),Pr(r),Hv(e,n,s,r,o,"avg")}}fz.className="AveragePooling2D";ge(fz);class pz extends bt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new j(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];qn(this.poolSize,"poolSize"),qn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Nn(this.dataFormat),Pr(this.padding),this.inputSpec=[new Pn({ndim:5})]}computeOutputShape(e){e=It(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Ao(n,this.poolSize[0],this.padding,this.strides[0]),s=Ao(s,this.poolSize[1],this.padding,this.strides[1]),r=Ao(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s,r]:[e[0],n,s,r,e[4]]}call(e,n){return ee(()=>(this.invokeCallHook(e,n),this.poolingFunction(tt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class mz extends pz{constructor(e){super(e)}poolingFunction(e,n,s,r,o){return Nn(o),Pr(r),az(e,n,s,r,o,"max")}}mz.className="MaxPooling3D";ge(mz);class gz extends pz{constructor(e){super(e)}poolingFunction(e,n,s,r,o){return Nn(o),Pr(r),az(e,n,s,r,o,"avg")}}gz.className="AveragePooling3D";ge(gz);class yz extends bt{constructor(e){super(e),this.inputSpec=[new Pn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new it}}class bz extends yz{constructor(e){super(e||{})}call(e,n){return ee(()=>{const s=tt(e);return ln(s,1)})}}bz.className="GlobalAveragePooling1D";ge(bz);class vz extends yz{constructor(e){super(e||{})}call(e,n){return ee(()=>{const s=tt(e);return _r(s,1)})}}vz.className="GlobalMaxPooling1D";ge(vz);class xz extends bt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Nn(this.dataFormat),this.inputSpec=[new Pn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new it}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class wz extends xz{call(e,n){return ee(()=>{const s=tt(e);return this.dataFormat==="channelsLast"?ln(s,[1,2]):ln(s,[2,3])})}}wz.className="GlobalAveragePooling2D";ge(wz);class Sz extends xz{call(e,n){return ee(()=>{const s=tt(e);return this.dataFormat==="channelsLast"?_r(s,[1,2]):_r(s,[2,3])})}}Sz.className="GlobalMaxPooling2D";ge(Sz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Cz extends bt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,s={}){const r=n.layer,o=zi(r,s);delete n.layer;const i={layer:o};return Object.assign(i,n),new e(i)}}class kz extends Cz{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=It(e),e.length<3)throw new j(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=It(e);const n=[e[0]].concat(e.slice(2)),s=this.layer.computeOutputShape(n),r=e[1];return[s[0],r].concat(s.slice(1))}call(e,n){return ee(()=>(e=tt(e),D5((i,a)=>[tt(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}kz.className="TimeDistributed";ge(kz);function Gpe(t){ec(hfe,"BidirectionalMergeMode",t)}const Hpe="concat";class Nz extends Cz{constructor(e){super(e);const n=e.layer.getConfig(),s={};s.className=e.layer.getClassName(),s.config=n,this.forwardLayer=zi(s),n.goBackwards=n.goBackwards!==!0;const r={};if(r.className=e.layer.getClassName(),r.config=n,this.backwardLayer=zi(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?Hpe:e.mergeMode,Gpe(this.mergeMode),e.weights)throw new it("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,s=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,s)),this.backwardLayer.setWeights(e.slice(s))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,r,o;return this.returnState&&(o=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,r=[s]):this.mergeMode==null?r=[s,s.slice()]:r=[s],this.returnState?this.mergeMode==null?r.concat(o).concat(o.slice()):[s].concat(o).concat(o.slice()):zs(r)}apply(e,n){let s=n==null?null:n.initialState,r=n==null?null:n.constants;n==null&&(n={});const o=A5(e,s,r,this.numConstants);if(e=o.inputs,s=o.initialState,r=o.constants,Array.isArray(e)&&(s=e.slice(1),e=e[0]),(s==null||s.length===0)&&r==null)return super.apply(e,n);const i=[],a=[];if(s!=null){const u=s.length;if(u%2>0)throw new j("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,i.push(...s);const c=s.map(d=>new Pn({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(r!=null)throw new it("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof fi;for(const u of i)if(u instanceof fi!==l)throw new j("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return ee(()=>{const s=n.initialState;let r,o;if(s==null)r=this.forwardLayer.call(e,n),o=this.backwardLayer.call(e,n);else{const l=s.slice(0,s.length/2),u=s.slice(s.length/2);r=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),o=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let i;this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),this.returnSequences&&(o=Dr(o,1));let a;return this.mergeMode==="concat"?a=V$([r,o]):this.mergeMode==="sum"?a=pe(r,o):this.mergeMode==="ave"?a=V(.5,pe(r,o)):this.mergeMode==="mul"?a=V(r,o):this.mergeMode==null&&(a=[r,o]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){pu(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),pu(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const o=this.forwardLayer.states.map(i=>null);return Array.isArray(s)?s.concat(o).concat(o):[s].concat(o).concat(o)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const s=zi(n.layer);if(delete n.layer,n.numConstants!=null)throw new it("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=n;return r.layer=s,new e(r)}}Nz.className="Bidirectional";ge(Nz);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tz extends bt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ee(()=>(e=tt(e),e.dtype!=="float32"&&(e=ai(e,"float32")),pe(V(e,this.scale),this.offset)))}}Tz.className="Rescaling";ge(Tz);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:qpe,cropAndResize:Kpe}=$r;class $z extends bt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,s,r,o,i,a,l){return ee(()=>{let u,c=!1;const d=n/i,h=s/a,f=(r+n)/i,p=(o+s)/a,m=[d,h,f,p],g=[];e.rank===3?(c=!0,u=qs([e])):u=e;for(let w=0;w<u.shape[0];w++)g.push(m);const y=io(g,[g.length,4]),b=Au(0,g.length,1,"int32"),x=Kpe(u,y,b,[r,o],"nearest");return ai(c?tt(Or(x)):x,l)})}upsize(e,n,s,r){return ee(()=>{const o=qpe(e,[n,s]);return ai(o,r)})}call(e,n){return ee(()=>{const s=tt(e),r=s.dtype,o=s.shape,i=o[o.length-3],a=o[o.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(s,l,u,this.height,this.width,i,a,r):this.upsize(e,this.height,this.width,r)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=It(e);const n=e.length-3,s=e.length-2;return e[n]=this.height,e[s]=this.width,e}}$z.className="CenterCrop";ge($z);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xpe(t,e,n,s){let r=tt(t);if(r.dtype!=="int32"&&(r=ai(r,"int32")),e==="int")return r;const o=r.shape;if(r.rank===0&&(r=ss(r,-1)),e==="oneHot"&&r.shape[r.shape.length-1]!==1&&(r=ss(r,-1)),r.rank>2)throw new j(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${o} which would result in output rank ${r.rank}.`);const i=["multiHot","oneHot"].includes(e),a=r;let l;if(typeof s<"u"&&e==="count"?l=v1(a,s,n,i):l=v1(a,[],n,i),e!=="tfIdf")return l;if(s)return V(l,s);throw new j("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ez extends bt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=It(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ee(()=>{e=tt(e),e.dtype!=="int32"&&(e=ai(e,"int32"));let s;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new j(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);s=tt(n.countWeights)}const r=_r(e),o=Nd(e),i=Qs(this.numTokens,r).bufferSync().get(0),a=ra(o,0).bufferSync().get(0);if(!(i&&a))throw new j(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return Xpe(e,this.outputMode,this.numTokens,s)})}}Ez.className="CategoryEncoding";ge(Ez);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ype=["bilinear","nearest"],h_=new Set(Ype);class Iz extends bt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(h_.has(e.interpolation))this.interpolation=e.interpolation;else throw new j(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=It(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ee(()=>{const s=[this.height,this.width];if(this.interpolation==="bilinear")return $r.resizeBilinear(e,s,!this.cropToAspectRatio);if(this.interpolation==="nearest")return $r.resizeNearestNeighbor(e,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...h_]} are supported`)})}}Iz.className="Resizing";ge(Iz);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Rz{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}Rz.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _z extends bt{constructor(e){super(e),this.randomGenerator=new Rz(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}_z.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Qpe=["bilinear","nearest"],f_=new Set(Qpe);class Az extends _z{constructor(e){super(e);const{factor:n,interpolation:s="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new j(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new j(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new j(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(s)if(f_.has(s))this.interpolation=s;else throw new j(`Invalid interpolation parameter: ${s} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=It(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ee(()=>{const s=tt(e);this.imgHeight=s.shape[s.shape.length-3];const r=s.shape[s.shape.length-2];this.widthFactor=Cl([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let o=this.widthFactor.dataSync()[0]*r;o=Math.round(o);const i=[this.imgHeight,o];switch(this.interpolation){case"bilinear":return $r.resizeBilinear(e,i);case"nearest":return $r.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...f_]} are supported`)}})}}Az.className="RandomWidth";ge(Az);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function Zpe(t,e){return Dz(t,e)}function Dz(t,e,n=new Map,s=new Set){if(t==null)return null;if(typeof Blob=="function"&&t instanceof Blob)return t.slice();if(s.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);const r=e(t);if(r.recurse&&r.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(r.recurse)if(qv(t)){const o=Array.isArray(t)?[]:{};s.add(t);for(const i in t){const a=t[i],l=Dz(a,e,n,s);o[i]=l}return s.delete(t),t.__proto__&&(o.__proto__=t.__proto__),o}else throw new Error(`Can't recurse into non-iterable type: ${t}`);else return n.set(t,r.value),r.value}function Jpe(t,e=Fz){return Oz(t,e)}function Oz(t,e,n=new Set){const s=t[0];if(n.has(s))throw new Error("Circular references are not supported.");const r=e(t);if(r.recurse&&r.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(r.recurse)if(qv(s)){const o=Array.isArray(s)?[]:{};n.add(s);for(const i in s){const a=t.map(u=>u[i]),l=Oz(a,e,n);o[i]=l}return n.delete(s),o}else throw new Error(`Can't recurse into non-iterable type: ${s}`);else return r.value}function Fz(t){return t===null?null:qv(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function qv(t){let e=!1;if(se().get("IS_BROWSER"))e=t instanceof TextDecoder;else{const{StringDecoder:n}=require("string_decoder");e=t instanceof n}return t!=null&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||typeof t=="object"&&!(t instanceof Et)&&!(t instanceof Promise)&&!e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function eme(t){return Zpe(t,tme)}function tme(t){return t instanceof Et?{value:t.clone(),recurse:!1}:qv(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Lz{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,n){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=n}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const n of e)this.push(n)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const n=this.wrap(this.begin+e),s=this.get(n);return this.set(n,this.pop()),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Kv extends Lz{constructor(){super(Kv.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=this.capacity*2,n=new Array(e),s=this.length();for(let r=0;r<s;r++)n[r]=this.get(this.wrap(this.begin+r));this.data=n,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=s}}Kv.INITIAL_CAPACITY=32;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function nme(t){return new sme(t)}class Mr{async toArray(){const e=[];let n=await this.next();for(;!n.done;)e.push(n.value),n=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),n=[];let s=await e.next();for(;!s.done;)n.push(s.value),s=await e.next();return n}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let n=await this.next(),s=e(n.value);for(;!n.done&&s;)n=await this.next(),s=e(n.value)}handleErrors(e){return new cme(this,e)}filter(e){return new lme(this,e)}map(e){return new ume(this,e)}mapAsync(e){return new p_(this,e)}serialMapAsync(e){return new p_(this,e).serial()}flatmap(e){return new hme(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(n=>n===!0)}rowMajorBatch(e,n=!0){return new ame(this,e,n)}columnMajorBatch(e,n=!0,s=Fz){return this.rowMajorBatch(e,n).map(o=>Jpe(o,s))}concatenate(e,n){return new fme(nme([this,e]),n)}take(e){return e<0||e==null?this:new ime(this,e)}skip(e){return e<0||e==null?this:new ome(this,e)}prefetch(e){return new Pz(this,e)}shuffle(e,n){return new pme(this,e,n)}serial(){return new rme(this)}}class sme extends Mr{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:eme(e),done:!1}}}class rme extends Mr{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class ome extends Mr{constructor(e,n){super(),this.upstream=e,this.maxCount=n,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;at(e.value)}return this.upstream.next()}}class ime extends Mr{constructor(e,n){super(),this.upstream=e,this.maxCount=n,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class ame extends Mr{constructor(e,n,s=!0){super(),this.upstream=e,this.batchSize=n,this.enableSmallLastBatch=s,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const n=await this.upstream.next();if(n.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(n.value)}return{value:e,done:!1}}}class lme extends Mr{constructor(e,n){super(),this.upstream=e,this.predicate=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;at(e.value)}}}class ume extends Mr{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const n=Hi(e.value),s=this.transform(e.value),r=Hi(s);for(const o of n)Xb(o,r)||o.dispose();return{value:s,done:!1}}}class cme extends Mr{constructor(e,n){super(),this.upstream=e,this.handler=n,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class p_ extends Mr{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const n=Hi(e.value),s=await this.transform(e.value),r=Hi(s);for(const o of n)Xb(o,r)||o.dispose();return{value:s,done:!1}}}class dme extends Mr{constructor(){super(),this.outputQueue=new Kv,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class hme extends dme{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const n=Hi(e.value),s=this.transform(e.value),r=Hi(s);this.outputQueue.pushAll(s);for(const o of n)Xb(o,r)||o.dispose();return!0}}class fme extends Mr{constructor(e,n){super(),this.baseErrorHandler=n,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){const s=await this.moreIterators.next();if(s.done)return{value:null,done:!0};this.iterator=s.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const n=await this.iterator.next();return n.done?(this.iterator=null,this.readFromChain(e)):n}}var m_;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(m_||(m_={}));class Pz extends Mr{constructor(e,n){super(),this.upstream=e,this.bufferSize=n,this.buffer=new Lz(n)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class pme extends Pz{constructor(e,n,s){super(e,n),this.upstream=e,this.windowSize=n,this.upstreamExhausted=!1,this.random=Gg.alea(s||bs().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),n=await this.buffer.shuffleExcise(e);if(n.done)this.upstreamExhausted=!0;else return this.refill(),n}return{value:null,done:!0}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class iE extends Mr{constructor(e,n){if(super(),this.webcamVideoElement=e,this.webcamConfig=n,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=is([0],"int32"),this.webcamConfig.centerCrop){const s=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,r=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,o=(1-s)/2,i=(1-r)/2,a=o+s,l=r+i;this.cropBox=Ka([i,o,l,a],[1,4])}else this.cropBox=Ka([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,n={}){if(!se().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!n.resizeWidth||!n.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=n.resizeWidth,e.height=n.resizeHeight}const s=new iE(e,n);return await s.start(),s}async start(){this.webcamConfig.facingMode&&T(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=d$(this.webcamVideoElement)}catch(n){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(n)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(n){throw new Error(`Error thrown cropping the video: ${n.message}`)}finally{e.dispose()}else return{value:e,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(e){return ee(()=>{const n=ss(Ce(e,"float32"),0);let s;s=$r.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const r=s.shape;return W(s,r.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(n=>n.stop());try{this.webcamVideoElement.srcObject=null}catch(n){console.log(n),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function mme(t,e){return iE.create(t,e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Be(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&T(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gme=Sv;class Xv extends z2{nextDataId(){return Xv.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new IN(this,xo())}write(e,n,s){this.firstUse&&(this.firstUse=!1,se().get("IS_NODE")&&Cr(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:s,refCount:1}),r}makeTensorInfo(e,n,s){let r;if(n==="string"&&s!=null&&s.length>0&&ei(s[0])){const o=s.map(i=>ri(i));r=this.write(o,e,n)}else r=this.write(s,e,n);return{dataId:r,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,s,r,o){this.data.set(e,{values:n,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:s}=this.data.get(e);if(n==="complex64"){const r=this.readSync(s.real.dataId),o=this.readSync(s.imag.dataId);return Xi(r,o)}return FL(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(r=>Gi(r));return lt(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return lt(e.shape,e.dtype,n)}makeOutput(e,n,s){return xo().makeTensorFromTensorInfo(this.makeTensorInfo(n,s,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(e);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=bs();return e(),{kernelMs:bs()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Be([e],"where");const n=this.readSync(e.dataId);return gme(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Xv.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mz(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const yme=t=>{const{x:e}=t.inputs,n=t.backend;Be(e,"abs");let s=new Float32Array(le(e.shape));const r=n.data.get(e.dataId).values;return s=Mz(r),n.makeOutput(s,e.shape,e.dtype)},bme={kernelName:$m,backendName:"cpu",kernelFunc:yme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tn(t){return(e,n,s,r,o)=>{const i=st(e,n),a=i.length,l=je(i),u=le(i),c=Xn(o,u),d=e.length,h=n.length,f=je(e),p=je(n),m=Ru(e,i),g=Ru(n,i);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(s[y%s.length],r[y%r.length]);else for(let y=0;y<c.length;++y){const b=Hu(y,a,l),v=b.slice(-d);m.forEach(k=>v[k]=0);const x=Ro(v,d,f),w=b.slice(-h);g.forEach(k=>w[k]=0);const S=Ro(w,h,p);c[y]=t(s[x],r[S])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rr(t){const{inputs:e,backend:n}=t,{real:s,imag:r}=e,o=n.data.get(s.dataId).values,i=n.data.get(r.dataId).values,a=n.makeTensorInfo(s.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",o),imag:n.makeTensorInfo(r.shape,"float32",i)},a}const vme={kernelName:K2,backendName:"cpu",kernelFunc:rr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1(t,e,n="float32"){if(n==="complex64"){const r=D1(t,e,"float32"),o=D1(t,e,"float32");return rr({inputs:{real:r,imag:o},backend:t})}const s=cs(le(e),n);return t.makeTensorInfo(e,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pi(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const xme={kernelName:dh,backendName:"cpu",kernelFunc:pi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lu(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.data.get(s.dataId).complexTensorInfos.real,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}const wme={kernelName:$b,backendName:"cpu",kernelFunc:Lu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zz(t,e,n,s){if(s==="int32"){const r=Int32Array.from(t);return[e,"int32",r]}if(s==="bool"){const r=bl([0],n),[o,i]=Tn((a,l)=>a!==l?1:0)(e,[],t,r,"bool");return[i,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${s}`)}function cl(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dtype:o}=s;if(o==="complex64"){if(r.dtype==="complex64")return pi({inputs:{x:r},backend:n});const c=D1(n,r.shape,r.dtype),d=cl({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),h=rr({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),h}if(r.dtype==="complex64"){const c=Lu({inputs:{input:r},backend:n}),d=cl({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),d}if(!AN(r.dtype,o)){const c=pi({inputs:{x:r},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:o}}const i=n.data.get(r.dataId).values,[a,l,u]=zz(i,r.shape,r.dtype,o);return n.makeTensorInfo(a,l,u)}const Sme={kernelName:Zd,backendName:"cpu",kernelFunc:cl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bn(t,e,n,s){return n==null?({inputs:r,backend:o})=>{const{a:i,b:a}=r,l=o;Be([i,a],t);const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=i.dtype==="string"?Yi(u):u,h=i.dtype==="string"?Yi(c):c,f=s||i.dtype,[p,m]=e(i.shape,a.shape,d,h,f);return l.makeTensorInfo(m,f,p)}:({inputs:r,backend:o})=>{const{a:i,b:a}=r,l=o;if(i.dtype==="complex64"||a.dtype==="complex64"){const u=cl({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,p=l.data.get(h.dataId).values,m=cl({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,v=l.data.get(y.dataId).values,x=l.data.get(b.dataId).values,[w,S,k]=n(i.shape,a.shape,f,p,v,x),N=l.makeTensorInfo(k,"float32",w),$=l.makeTensorInfo(k,"float32",S),I=rr({inputs:{real:N,imag:$},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo($),I}else{const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=s||i.dtype,[h,f]=e(i.shape,a.shape,u,c,d);return l.makeTensorInfo(f,d,h)}}}function aE(t){return(e,n,s,r,o,i)=>{const a=st(e,n),l=le(a),u=a.length,c=je(a),d=Xn("float32",l),h=Xn("float32",l),f=Ru(e,a),p=Ru(n,a),m=Xi(s,r),g=Xi(o,i),y=e.length,b=je(e),v=n.length,x=je(n);if(f.length+p.length===0)for(let w=0;w<d.length;w++){const S=w%m.length,k=w%g.length,N=t(m[S*2],m[S*2+1],g[k*2],g[k*2+1]);d[w]=N.real,h[w]=N.imag}else for(let w=0;w<d.length;w++){const S=Hu(w,u,c),k=S.slice(-y);f.forEach(O=>k[O]=0);const N=Ro(k,y,b),$=S.slice(-v);p.forEach(O=>$[O]=0);const I=Ro($,v,x),A=t(m[N*2],m[N*2+1],g[I*2],g[I*2+1]);d[w]=A.real,h[w]=A.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bz=Tn((t,e)=>t+e),Cme=aE((t,e,n,s)=>({real:t+n,imag:e+s})),Ad=Bn(qu,Bz,Cme),kme={kernelName:qu,backendName:"cpu",kernelFunc:Ad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lE(t,e,n,s,r){const o=le(s),i=cs(r,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=r||(o>0?i[l]+=e[a]:i[l]+=1)}return i}function Vz(t,e,n,s=!1){const r=t.shape[0],o=t.shape[1],i=lt([r,n],e.dtype);for(let a=0;a<r;a++)for(let l=0;l<o;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(s?i.set(1,a,u):e.size>0?i.set(i.get(a,u)+e.get(a,l),a,u):i.set(i.get(a,u)+1,a,u))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uz=Tn((t,e)=>t&e),Nme=Bn(Fm,Uz),Tme={kernelName:Fm,backendName:"cpu",kernelFunc:Nme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wi(t){return(e,n,s)=>{const r=fn(n,e.length);for(let o=0;o<e.length;++o)r[o]=t(e[o],s);return r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ot(t,e,n){const s=wi(e);return Tl(t,s,n)}function Tl(t,e,n){return({inputs:s,attrs:r,backend:o})=>{const{x:i}=s;Be(i,t);const a=o,l=a.data.get(i.dataId).values;let u;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Yi(l)}else u=l;const c=n||i.dtype,d=e(u,c,r);return a.makeTensorInfo(i.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wz=wi(t=>Math.ceil(t)),$me=Tl(Jd,Wz),Eme={kernelName:Jd,backendName:"cpu",kernelFunc:$me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jz(t,e,n,s){const r=fn(n,le(e));if(s&&n!=="string"){let o=0;t.forEach(i=>{const a=le(i.shape);r.set(i.vals,o),o+=a})}else{let o=0;t.forEach(i=>{const a=n==="string"?Yi(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const c=u*e[1]+o;for(let d=0;d<i.shape[1];++d)r[c+d]=a[l++]}o+=i.shape[1]})}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gz=Tn((t,e)=>t===e?1:0),Hz=Bn(jm,Gz,null,"bool"),Ime={kernelName:jm,backendName:"cpu",kernelFunc:Hz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qz=wi(t=>Math.exp(t)),Kz=Tl(ih,qz,"float32"),Rme={kernelName:ih,backendName:"cpu",kernelFunc:Kz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xz=wi(t=>Math.expm1(t)),_me=Tl(ah,Xz),Ame={kernelName:ah,backendName:"cpu",kernelFunc:_me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yz=wi(t=>Math.floor(t)),Dme=Tl(lh,Yz),Ome={kernelName:lh,backendName:"cpu",kernelFunc:Dme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qz=Tn((t,e)=>Math.floor(t/e)),Fme=Bn(uh,Qz,null,"int32"),Lme={kernelName:uh,backendName:"cpu",kernelFunc:Fme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zz(t,e,n,s,r,o,i,a,l){const u=lt([s,o],n);for(let c=0;c<s;c++){const d=[];let h=0;for(let f=0;f<r;f++){const p=t[c*r+f];h+=p*i[f],d.push(p)}if(h<0||h>=l/o)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<o;f++)u.values[c*o+f]=e.get(...e.indexToLoc(h*o+f))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jz(t,e,n){const s=lt(n,t.dtype);for(let r=0;r<s.size;++r){const i=s.indexToLoc(r).slice(),a=i[0],l=i[2],u=e.locToIndex([a,l]);i[2]=e.values[u];const c=t.locToIndex(i);0<=c&&c<t.values.length&&(s.values[r]=t.values[c])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eB=Tn((t,e)=>t>e?1:0),Pme=Bn(Km,eB,null,"bool"),Mme={kernelName:Km,backendName:"cpu",kernelFunc:Pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tB=Tn((t,e)=>t>=e?1:0),zme=Bn(ch,tB,null,"bool"),Bme={kernelName:ch,backendName:"cpu",kernelFunc:zme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nB=Tn((t,e)=>t<e?1:0),Vme=Bn(Ym,nB,null,"bool"),Ume={kernelName:Ym,backendName:"cpu",kernelFunc:Vme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sB=Tn((t,e)=>t<=e?1:0),Wme=Bn(Qm,sB,null,"bool"),jme={kernelName:Qm,backendName:"cpu",kernelFunc:Wme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rB(t,e,n){const s=(e-t)/(n-1),r=cs(n,"float32");r[0]=t;for(let o=1;o<r.length;o++)r[o]=r[o-1]+s;return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oB=wi(t=>Math.log(t)),Gme=Tl(mh,oB),Hme={kernelName:mh,backendName:"cpu",kernelFunc:Gme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iB(t,e,n,s){const r=Xn(s,le(n));for(let o=0;o<r.length;++o){const i=o*e;let a=t[i];for(let l=0;l<e;++l){const u=t[i+l];(Number.isNaN(u)||u>a)&&(a=u)}r[o]=a}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aB=Tn((t,e)=>Math.max(t,e)),qme=Bn(yh,aB),Kme={kernelName:yh,backendName:"cpu",kernelFunc:qme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lB=Tn((t,e)=>Math.min(t,e)),Xme=Bn(bh,lB),Yme={kernelName:bh,backendName:"cpu",kernelFunc:Xme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uE=Tn((t,e)=>t*e),Qme=aE((t,e,n,s)=>({real:t*n-e*s,imag:t*s+e*n})),Yv=Bn(xh,uE,Qme),Zme={kernelName:xh,backendName:"cpu",kernelFunc:Yv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uB(t,e,n){const s=ta(-1,n);return uE([],e,s,t,n)}function Jme(t){const{inputs:e,backend:n}=t,{x:s}=e;Be(s,"neg");const r=n.data.get(s.dataId).values,[o,i]=uB(r,s.shape,s.dtype);return n.makeTensorInfo(i,s.dtype,o)}const ege={kernelName:lg,backendName:"cpu",kernelFunc:Jme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cB=Tn((t,e)=>t!==e?1:0),tge=Bn(ug,cB,null,"bool"),nge={kernelName:ug,backendName:"cpu",kernelFunc:tge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cE(t,e,n,s,r){const o=e.length,i=le(e),a=je(e),l=je(r),u=Xn(n,le(r));for(let c=0;c<i;++c){const d=Hu(c,o,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[s[p]];const f=Ro(h,o,l);u[f]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ks(t){const{inputs:e,attrs:n,backend:s}=t,{x:r}=e,{perm:o}=n;Be(r,"transpose");const i=r.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=r.shape[o[d]];const l=s.data.get(r.dataId).values,u=cE(l,r.shape,r.dtype,o,a);return{dataId:s.write(u,a,r.dtype),shape:a,dtype:r.dtype}}const sge={kernelName:hu,backendName:"cpu",kernelFunc:Ks};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dB(t,e,n,s){const[r,o]=Zn(t,s),i=Ws(e,"int32"),a=cs(le(r),i),l=le(o);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let h=0;h<l;++h)d*=n[c+h];a[u]=d}return{outVals:a,outShape:r,outDtype:i}}function rge(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s;Be(r,"prod");const a=r.shape.length,l=pt(o,r.shape),u=dn(l,a);let c=l,d=r;const h=[];u!=null&&(d=Ks({inputs:{x:r},backend:n,attrs:{perm:u}}),h.push(d),c=kn(c.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=dB(d.shape,d.dtype,f,c);let y=m;return i&&(y=Cn(m,l)),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(y,g,p)}const oge={kernelName:mg,backendName:"cpu",kernelFunc:rge};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ige(t,e,n){t.forEach((s,r)=>{if(s<0||s>=n){const o=Hu(r,e.length,je(e)).join(",");throw new Error(`indices[${o}] = ${s} is not in [0, ${n})`)}})}function age(t,e){for(let n=0;n<t.length;++n){const s=t[n],r=n===t.length-1?e:t[n+1].length;if(s.length===0)throw new Error("Ragged splits may not be empty");if(s[0]<0)throw new Error("Ragged splits must be non-negative");if(s[s.length-1]>r)throw new Error("Ragged splits must not point past values");for(let o=1;o<s.length;++o)if(s[o-1]>s[o])throw new Error("Ragged splits must be sorted in ascending order")}}function lge(t,e,n,s){const r=[];let o=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);age(n,s);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)a[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-f[c];for(let y=c;y<d;++y)a[p].push(f[y+1]+g)}c=f[c],d=f[d]}d!==c&&(r.push([c,d]),o+=d-c)}return{outSplits:a,valueSlices:r,numValues:o}}function uge(t){const e=[];for(let n=0;n<t.length;++n){const s=t[n].length,r=fn("int32",s);e.push(r),t[n].forEach((o,i)=>r[i]=o)}return e}function g_(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let s=e;s<t.length;s++)n[e-1]*=t[s];return n}function cge(t,e,n,s,r,o){const i=g_(e,2)[1],a=g_(o,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<s;++d)r[l*a+d]=t[c*i+d];++l}}function dge(t,e,n,s,r){const o=e.slice();o[0]=r;const i=fn(n,le(o)),a=t.length,l=a===0?0:a/e[0];return cge(t,e,s,l,i,o),[i,o]}function hB(t,e,n,s,r,o,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(ige(o,i,l),s.length===0)throw new Error("params.rank must be nonzero");const u=s[0],{outSplits:c,valueSlices:d,numValues:h}=lge(o,i,t,u),f=uge(c),p=dge(n,s,r,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y_=2147483647;function fB(t,e,n,s,r,o,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=r.length===0,u=i.length===0,c=[];a||c.push(e[0]),l||c.push(r[0]),u||c.push(i[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],h=fn("int32",d+1);h[0]=0;for(let g=0;g<d;++g){const y=a?t[0]:t[g],b=l?s[0]:s[g],v=u?o[0]:o[g];if(v===0)throw new Error("Requires delta != 0");let x;if(v>0&&b<y||v<0&&b>y)x=0;else if(x=Math.ceil(Math.abs((b-y)/v)),x>y_)throw new Error(`Requires ((limit - start) / delta) <= ${y_}`);h[g+1]=h[g]+x}const f=h[d],p=fn(n,f);let m=0;for(let g=0;g<d;++g){const y=h[g+1]-h[g];let b=a?t[0]:t[g];const v=u?o[0]:o[g];for(let x=0;x<y;++x)p[m++]=b,b+=v}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ur=To;class O1{constructor(e,n,s,r,o,i,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=s,this.valuesShape=r,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=WM(c),this.raggedRank=jM(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Ur.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Ur.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Ur.VALUE_ROWIDS:return O1.getMaxWidthValueRowID(n);case Ur.ROW_SPLITS:return O1.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ur[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let s=0;for(let r=0;r<n-1;++r){const o=e[r+1]-e[r];o>s&&(s=o)}return s}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let s=0,r=e[0],o=0;for(let i=1;i<n;++i){const a=e[i];a!==r&&(r=a,o=Math.max(i-s,o),s=i)}return Math.max(n-s,o)}tensorShapeFromTensor(e,n,s=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return v_(e,s)}calculateOutputSize(e){const n=this.valuesShape,s=this.defaultValueShape;GM(s,n);const r=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=UM(this.raggedRank,r,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,s){const r=Math.min(e,s),o=[];let i=0;for(let a=0;a<r;++a,i+=n)o.push(i);for(let a=r;a<e;++a)o.push(-1);return T(o.length===e,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(e,n,s,r){const o=e.length,i=[];for(let a=0;a<o-1;++a){const l=e[a+1]-e[a];let u=Math.min(r,l),c=n[a];c===-1&&(u=0);for(let d=0;d<u;++d)i.push(c),c+=s;for(let d=0;d<l-u;++d)i.push(-1)}if(o>0&&i.length!==e[o-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,s,r){const o=e.length,i=[];if(o===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];i.push(u);for(let c=1;c<o;++c){const d=e[c];if(d===l)u>=0&&(++a,a<r?u+=s:u=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,s,r){const o=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Ur.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,n,s,r);case Ur.ROW_SPLITS:if(o.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(o,n,s,r);default:throw new Error(`Unsupported partition type: ${Ur[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ur.FIRST_DIM_SIZE:return e[0];case Ur.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ur.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ur[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),s=this.calculateOutputSize(n),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let l=r.length-2;l>=0;--l)r[l]=r[l+1]*s[l+1];const o=v_(s,!1),i=fn(this.valuesDType,le(o));if(r[0]*s[0]>0){let l=this.calculateFirstParentOutputIndex(n,r[0],s[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,r[u],s[u]);this.setOutput(this.raggedRank,l,i,o)}return[o,i]}setOutput(e,n,s,r){if(s.length===0)return;const o=this.values,i=s;let a=r.slice();a=a.slice(e+1);const l=le(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;ee(()=>{const m=W(c,p);c=fu(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=u;++p){let m=p<u?n[p]:-1;if(m===f){++f;continue}if(h<f){const g=o.subarray(d*l),y=i.subarray(h*l),b=(f-h)*l;b_(y,g,b)}if(p>=u){const g=s.length;m=Math.floor(g/l)}if(m>f)if(this.defaultValue.length===1)i.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const g=i.slice(f*l);b_(g,c,l),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function b_(t,e,n){for(let s=0;s<n;s++)t[s]=e[s]}function v_(t,e){const n=[];for(let s of t){if(s<0){if(!e)throw new Error(`Dimension ${s} must be >= 0`);if(s<-1)throw new Error(`Dimension ${s} must be >= -1`);s=-1}n.push(s)}return n}function pB(t,e,n,s,r,o,i,a,l,u){return new O1(t,e,n,s,r,o,i,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mB(t,e,n,s){const r=t===e,o=t<e&&n<0,i=e<t&&n>1;if(r||o||i)return cs(0,s);const a=Math.abs(Math.ceil((e-t)/n)),l=cs(a,s);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gB=wi(t=>1/Math.sqrt(t)),hge=Tl(Th,gB),fge={kernelName:Th,backendName:"cpu",kernelFunc:hge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jl(t,e,n,s,r,o,i,a,l,u){const c=[s/r,r],d=t.values,h=e.values;if(s===0)return lt(n,e.dtype);const f=l instanceof _n?l:lt(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let p=0;p<o;p++){const m=[];let g=0;for(let y=0;y<i;y++){const b=d[p*i+y];m.push(b),g+=b*a[y]}if(g<0||g>=s/r)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<r;y++)u?f.values[g*r+y]+=h[p*r+y]:f.values[g*r+y]=e.rank===0?h[0]:h[p*r+y]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pge=wi(t=>1/(1+Math.exp(-t))),yB=Ot(_h,t=>1/(1+Math.exp(-t))),mge={kernelName:_h,backendName:"cpu",kernelFunc:yB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bB(t,e,n,s,r){const o=p$(s,e,n),i=le(n),a=je(s);if(o){const d=m$(e,a);return r==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const l=r==="string"?Yi(t):t,u=lt(s,r,l),c=lt(n,r);for(let d=0;d<c.size;++d){const h=c.indexToLoc(d),f=h.map((p,m)=>p+e[m]);c.set(u.get(...f),...h)}return r==="string"?d6(c.values):c.values}function Pu(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:o,size:i}=s;Be(r,"slice");const[a,l]=Dv(r,o,i);h$(r,a,l);const u=n.data.get(r.dataId).values,c=bB(u,a,l,r.shape,r.dtype);return n.makeTensorInfo(l,r.dtype,c)}const gge={kernelName:wg,backendName:"cpu",kernelFunc:Pu};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vB(t,e,n,s,r,o,i){const a=e[0],l=o[0],u=new Array(l),c=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(ZM(a));const g=fn(n,0),y=fn(r,0);return[g,[0,d],y,u,c]}let h=!0,f=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*d];if(y<0)throw new Error(JM(g,y));if(y>=l)throw new Error(e6(g,y,l));++p[y],h=h&&y>=f,f=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;u[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&h){const g=t,y=s;for(let b=0;b<a;++b)c[b]=b;return[g,[a,d],y,u,c]}else{const g=p[l-1],y=fn(n,g*d),b=fn(r,g),v=new Array(l).fill(0);for(let x=0;x<a;++x){const w=t[x*d],S=v[w],k=(w===0?0:p[w-1])+S;v[w]++;for(let N=0;N<d;++N)y[k*d+N]=t[x*d+N];b[k]=s[x],c[x]=k}for(let x=0;x<l;++x)if(v[x]===0){const S=x===0?0:p[x-1];y[S*d+0]=x;for(let k=1;k<d;++k)y[S*d+k]=0;b[S]=i}return[y,[g,d],b,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xB(t,e,n,s,r){const o=le(s),i=e[0],a=r.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const y=r[g];if(y===-1){if(c!==-1)throw new Error(t6(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(n6(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(s6());const g=Math.trunc(o/u);if(u*g!==o)throw new Error(r6(s,l));l[c]=g}if(le(l)!==o)throw new Error(o6(s,l));const h=s.length,f=[];if(h>0){f[h-1]=1;for(let g=h-2;g>=0;--g)f[g]=f[g+1]*s[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=fn(n,i*a);for(let g=0;g<i;++g){let y=0;for(let b=0;b<h;++b)y+=t[g*h+b]*f[b];for(let b=0;b<a;++b)m[g*a+b]=Math.trunc(y/p[b]),y%=p[b]}return[m,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dE(t,e,n,s,r,o=!1,i=0){const a=s.length,l=[e[0],t.length/e[0]],u=l[1],d=a>0?r[a-1]+1:0;if(d<0)throw new Error(wC());const h=e.slice();h[0]=d;const f=h.reduce((v,x)=>v*x,1),p=fn(n,f);if(a===0)return d>0&&p.fill(i),[p,h];if(d<=0)throw new Error(wC());let m=0,g=1,y=0,b=r[m];for(;;){let v=0;if(g<a){if(v=r[g],b===v){++g;continue}if(b>=v)throw new Error(i6())}if(b<0||b>=d)throw new Error(a6(b,d));b>y&&p.fill(i,y*u,b*u);for(let x=m;x<g;++x){const w=s[x];if(w<0||w>=l[0])throw new Error(l6(x,s[x],l[0]));for(let S=0;S<u;S++)p[b*u+S]+=t[w*u+S]}if(o)for(let x=0;x<u;x++)p[b*u+x]/=g-m;if(m=g,++g,y=b+1,b=v,g>a)break}return y<d&&p.fill(i,y*u,d*u),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yge=wi(t=>Math.sqrt(t)),bge=Ot(Dh,t=>Math.sqrt(t)),vge={kernelName:Dh,backendName:"cpu",kernelFunc:bge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wB=Tn((t,e)=>{const n=t-e;return n*n}),xge=Bn(Oh,wB),wge={kernelName:Oh,backendName:"cpu",kernelFunc:xge};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SB=wi((t,e)=>{const{pattern:n,replaceGlobal:s,rewrite:r}=e;return t.replace(new RegExp(n,s?"g":""),r)}),Sge=Tl(Tg,SB),Cge={kernelName:Tg,backendName:"cpu",kernelFunc:Sge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CB(t,e,n,s){const r=lt(t,e.dtype);for(let o=0;o<r.size;o++){const i=r.indexToLoc(o),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+s[l];r.set(e.get(...a),...i)}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kge{constructor(e,n,s,r,o,i){this.separator=ri(e),this.nGramWidths=n,this.leftPad=ri(s),this.rightPad=ri(r),this.padWidth=o,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const s=this.getPadWidth(n);return Math.max(0,e+2*s-n+1)}createNGrams(e,n,s,r,o,i){for(let a=0;a<o;++a){const l=this.getPadWidth(i),u=Math.max(0,l-a),c=Math.max(0,l-(o-(a+1))),d=i-(u+c),h=n+(u>0?0:a-l);let f=0;f+=u*this.leftPad.length;for(let b=0;b<d;++b)f+=e[h+b].length;f+=c*this.rightPad.length;const p=u+c+d-1;f+=p*this.separator.length,s[r+a]=new Uint8Array(f);const m=s[r+a];let g=0;const y=b=>b.forEach(v=>m[g++]=v);for(let b=0;b<u;++b)y(this.leftPad),y(this.separator);for(let b=0;b<d-1;++b)y(e[h+b]),y(this.separator);if(d>0){y(e[h+d-1]);for(let b=0;b<c;++b)y(this.separator),y(this.rightPad)}else{for(let b=0;b<c-1;++b)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const s=e.length,r=n.length;if(r>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<r;++u){let c=n[u]>=l;if(c=c&&n[u]<=s,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${s}]`);l=n[u]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const o=r-1,i=fn("int32",r);if(s===0||r===0){const l=new Array(s);for(let u=0;u<=o;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=o;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),i[l]=i[l-1]+c}const a=new Array(i[o]);for(let l=0;l<o;++l){const u=n[l];let c=i[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,u,a,c,f,d),c+=f}),this.preserveShort&&c===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,u,a,c,1,h)}}return[a,i]}}function kB(t,e,n,s,r,o,i,a){return new kge(n,s,r,o,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nge(t,e,n,s){if(!t.length)return;if(e.length===0){for(let o=0;o<t.length;++o)s.push(t.subarray(o,o+1));return}if(e.length===1){const o=e[0];let i=t.indexOf(o);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&s.push(a),t=t.subarray(i+1),i=t.indexOf(o)}(!n||t.length!==0)&&s.push(t);return}let r=0;for(let o=0;o<t.length+1;o++)if(o===t.length||e.indexOf(t[o])!==-1){const i=t.subarray(r,o);(!n||i.length!==0)&&s.push(i),r=o+1}}function NB(t,e,n){const s=t.length,r=[];let o=0,i=0;const a=new Array(s);for(let h=0;h<s;++h){const f=r.length;Nge(t[h],e,n,r);const p=r.length-f;a[h]=p,o+=p,i=Math.max(i,p)}const l=fn("int32",o*2),u=new Array(o),c=[s,i];let d=0;for(let h=0;h<s;++h)for(let f=0;f<a[h];++f)l[d*2]=h,l[d*2+1]=f,u[d]=r[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TB(t,e){const n=fn("int32",t.length);for(let s=0;s<t.length;++s)n[s]=YL(t[s]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $B=Tn((t,e)=>t-e),Tge=aE((t,e,n,s)=>({real:t-n,imag:e-s})),hE=Bn(Fh,$B,Tge),$ge={kernelName:Fh,backendName:"cpu",kernelFunc:hE};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EB(t,e){const n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];const s=lt(n,t.dtype);for(let r=0;r<s.values.length;++r){const o=s.indexToLoc(r),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=o[l]%t.shape[l];const a=t.locToIndex(i);s.values[r]=t.values[a]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uf=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function IB(t,e,n=0,s=t.length-1){for(;s>n;){if(s-n>600){const a=s-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*c/a+d)),f=Math.min(s,Math.floor(e+(a-l)*c/a+d));IB(t,e,h,f)}const r=t[e];let o=n,i=s;for(Di(t,n,e),Uf(t[s],r)>0&&Di(t,n,s);o<i;){for(Di(t,o,i),o++,i--;Uf(t[o],r)<0;)o=o+1;for(;Uf(t[i],r)>0;)i=i-1}Uf(t[n],r)===0?Di(t,n,i):(i=i+1,Di(t,i,s)),i<=e&&(n=i+1),e<=i&&(s=i-1)}}function RB(t,e,n,s,r){const o=e[e.length-1],[i,a]=[t.length/o,o],l=Xn(n,i*s),u=Xn("int32",i*s);for(let d=0;d<i;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((b,v)=>p[v]={value:b,index:v}),s<p.length&&(IB(p,s),p=p.slice(0,s)),r&&p.sort(Uf);const m=d*s,g=l.subarray(m,m+s),y=u.subarray(m,m+s);for(let b=0;b<s;b++)g[b]=p[b].value,y[b]=p[b].index}const c=e.slice();return c[c.length-1]=s,[lt(c,n,l),lt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _B(t,e,n,s){const r=pt(e,n)[0],o=[1,n[0],1];for(let p=0;p<r;p++)o[0]*=n[p];o[1]=n[r];for(let p=r+1;p<n.length;p++)o[2]*=n[p];const i=new Map,a=new Int32Array(n[r]),l=new _n(o,s,t),u=[],c=o[0]===1&&o[2]===1;for(let p=0;p<n[r];p++){let m;if(c)m=t[p].toString();else{const y=[];for(let b=0;b<o[0];b++)for(let v=0;v<o[2];v++)y.push(l.get(b,p,v));m=y.join(",")}const g=i.get(m);if(g!=null)a[p]=g;else{const y=i.size;i.set(m,y),a[p]=y,u.push(p)}}const d=o.slice();d[1]=i.size;const h=new _n(d,s);u.forEach((p,m)=>{for(let g=0;g<o[0];g++)for(let y=0;y<o[2];y++)h.set(l.get(g,p,y),g,m,y)});const f=n.slice();return f[r]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ege=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Bz,bincountImpl:lE,bincountReduceImpl:Vz,bitwiseAndImpl:Uz,castImpl:zz,ceilImpl:Wz,concatImpl:jz,equalImpl:Gz,expImpl:qz,expm1Impl:Xz,floorDivImpl:Qz,floorImpl:Yz,gatherNdImpl:Zz,gatherV2Impl:Jz,greaterEqualImpl:tB,greaterImpl:eB,lessEqualImpl:sB,lessImpl:nB,linSpaceImpl:rB,logImpl:oB,maxImpl:iB,maximumImpl:aB,minimumImpl:lB,multiplyImpl:uE,negImpl:uB,notEqualImpl:cB,prodImpl:dB,raggedGatherImpl:hB,raggedRangeImpl:fB,raggedTensorToTensorImpl:pB,rangeImpl:mB,rsqrtImpl:gB,scatterImpl:Jl,sigmoidImpl:pge,simpleAbsImpl:Mz,sliceImpl:bB,sparseFillEmptyRowsImpl:vB,sparseReshapeImpl:xB,sparseSegmentReductionImpl:dE,sqrtImpl:yge,squaredDifferenceImpl:wB,staticRegexReplaceImpl:SB,stridedSliceImpl:CB,stringNGramsImpl:kB,stringSplitImpl:NB,stringToHashBucketFastImpl:TB,subImpl:$B,tileImpl:EB,topKImpl:RB,transposeImpl:cE,uniqueImpl:_B},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */VN("cpu",()=>new Xv,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AB=Ot(rh,t=>t>=0?t:Math.exp(t)-1),Ige={kernelName:rh,backendName:"cpu",kernelFunc:AB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DB(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{alpha:o}=s;Be([r],"leakyRelu");const i=le(r.shape),a=n.data.get(r.dataId).values,l=Xn("float32",i);for(let u=0;u<a.length;u++)l[u]=a[u]<0?o*a[u]:a[u];return n.makeTensorInfo(r.shape,"float32",l)}const Rge={kernelName:Xm,backendName:"cpu",kernelFunc:DB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ge=Tn((t,e)=>t<0?e*t:t);function OB(t){const{inputs:e,backend:n}=t,{x:s,alpha:r}=e;Be([s,r],"prelu");const o=n.data.get(s.dataId).values,i=n.data.get(r.dataId).values,[a,l]=_ge(s.shape,r.shape,o,i,"float32");return n.makeTensorInfo(l,"float32",a)}const Age={kernelName:pg,backendName:"cpu",kernelFunc:OB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FB=Ot(Ch,t=>Math.max(0,t)),Dge={kernelName:Ch,backendName:"cpu",kernelFunc:FB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LB=Ot(kh,t=>Math.min(Math.max(0,t),6)),Oge={kernelName:kh,backendName:"cpu",kernelFunc:LB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1(t,e,n,s,r){if(n==="linear")return pi({inputs:{x:e},backend:t});if(n==="relu")return FB({inputs:{x:e},backend:t});if(n==="elu")return AB({inputs:{x:e},backend:t});if(n==="relu6")return LB({inputs:{x:e},backend:t});if(n==="prelu")return OB({inputs:{x:e,alpha:s},backend:t});if(n==="leakyrelu")return DB({inputs:{x:e},backend:t,attrs:{alpha:r}});if(n==="sigmoid")return yB({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jt(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{shape:o}=s,i=le(r.shape),a=_N(o,i),l=le(a);T(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${r.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(r.dataId);const u=n.data.get(r.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:r.dataId,shape:a,dtype:r.dtype}}const Fge={kernelName:gg,backendName:"cpu",kernelFunc:jt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PB(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:o}=e,{transposeA:i,transposeB:a}=s;Be([r,o],"matMul");const l=r.shape.length,u=o.shape.length,c=i?r.shape[l-2]:r.shape[l-1],d=a?o.shape[u-1]:o.shape[u-2],h=i?r.shape[l-1]:r.shape[l-2],f=a?o.shape[u-2]:o.shape[u-1],p=r.shape.slice(0,-2),m=o.shape.slice(0,-2),g=le(p),y=le(m),v=st(r.shape.slice(0,-2),o.shape.slice(0,-2)).concat([h,f]);T(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${r.shape} and ${o.shape} and transposeA=${i} and transposeB=${a} must match.`);const x=i?[g,c,h]:[g,h,c],w=a?[y,f,d]:[y,d,f],S=jt({inputs:{x:r},backend:n,attrs:{shape:x}}),k=jt({inputs:{x:o},backend:n,attrs:{shape:w}}),N=i?S.shape[1]:S.shape[2],$=i?S.shape[2]:S.shape[1],I=a?k.shape[1]:k.shape[2],A=Math.max(g,y),O=n.data.get(S.dataId).values,P=n.data.get(k.dataId).values,F=je(S.shape),G=je(k.shape),[q,Z,B]=i?[F[0],1,F[1]]:[F[0],F[1],1],[H,K,ne]=a?[1,G[1],G[0]]:[G[1],1,G[0]],D=$*I,X=lt([A,$,I],S.dtype),te=X.values,ue=n.blockSize;for(let ie=0;ie<A;ie++){const me=ie%g,xe=ie%y;for(let fe=0;fe<$;fe+=ue){const De=Math.min(fe+ue,$);for(let Ie=0;Ie<I;Ie+=ue){const Le=Math.min(Ie+ue,I);for(let Ke=0;Ke<N;Ke+=ue){const mt=Math.min(Ke+ue,N);for(let ot=fe;ot<De;ot++)for(let rt=Ie;rt<Le;rt++){let ct=0;for(let z=Ke;z<mt;z++){const oe=O[me*q+ot*Z+z*B],ae=P[z*H+rt*K+xe*ne];ct+=oe*ae}te[ie*D+(ot*I+rt)]+=ct}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(v,X.dtype,X.values)}const Lge={kernelName:Dm,backendName:"cpu",kernelFunc:PB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pge(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;let h,f,p;const m=[];h=PB({inputs:{a:r,b:o},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(f=Ad({inputs:{a:h,b:i},backend:n}),m.push(h),h=f),c&&(p=F1(n,h,c,a,d),m.push(h),h=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return h}const Mge={kernelName:_p,backendName:"cpu",kernelFunc:Pge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zge=Ot(Gd,t=>Math.acos(t)),Bge={kernelName:Gd,backendName:"cpu",kernelFunc:zge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vge=Ot(Hd,t=>Math.acosh(t)),Uge={kernelName:Hd,backendName:"cpu",kernelFunc:Vge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wge(t){const{inputs:e,backend:n}=t,s=e;Be(e,"addN");const r=s.map(a=>n.data.get(a.dataId).values),o=lt(s[0].shape,s[0].dtype),i=o.values;for(let a=0;a<s.length;a++){const l=r[a];for(let u=0;u<i.length;u++)i[u]+=l[u]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}const jge={kernelName:Em,backendName:"cpu",kernelFunc:Wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gge(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s;Be(r,"all");const a=pt(o,r.shape);let l=a;const u=dn(l,r.shape.length);let c=r;u!=null&&(c=Ks({inputs:{x:r},backend:n,attrs:{perm:u}}),l=kn(l.length,r.shape.length)),fs("all",l,c.shape.length);const[d,h]=Zn(c.shape,l),f=le(h),p=cs(le(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const b=y*f;let v=m[b];for(let x=0;x<f;++x){const w=m[b+x];v=v&&w}p[y]=v}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const y=Cn(d,a),b=jt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const Hge={kernelName:U2,backendName:"cpu",kernelFunc:Gge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s;Be(r,"any");const a=pt(o,r.shape);let l=a;const u=dn(l,r.shape.length);let c=r;u!=null&&(c=Ks({inputs:{x:r},backend:n,attrs:{perm:u}}),l=kn(l.length,r.shape.length)),fs("any",l,c.shape.length);const[d,h]=Zn(c.shape,l),f=le(h),p=cs(le(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const b=y*f;let v=m[b];for(let x=0;x<f;++x){const w=m[b+x];v=v||w}p[y]=v}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const y=Cn(d,a),b=jt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const Kge={kernelName:W2,backendName:"cpu",kernelFunc:qge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xge(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o}=s;Be(r,"argMax");let i=pt(o,r.shape);const a=dn(i,r.shape.length);let l=r;const u=[];a!=null&&(l=Ks({inputs:{x:r},backend:n,attrs:{perm:a}}),u.push(l),i=kn(i.length,l.shape.length)),i=[i[0]],fs("argMax",i,l.shape.length);const[c,d]=Zn(l.shape,i),h=le(c),f=cs(h,"int32"),p=le(d),m=n.data.get(l.dataId).values;for(let g=0;g<f.length;++g){const y=g*p;let b=m[y],v=0;for(let x=0;x<p;++x){const w=m[y+x];w>b&&(b=w,v=x)}f[g]=v}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",f)}const Yge={kernelName:Im,backendName:"cpu",kernelFunc:Xge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qge(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o}=s;Be(r,"argMin");let i=pt(o,r.shape);const a=dn(i,r.shape.length);let l=r;const u=[];a!=null&&(l=Ks({inputs:{x:r},backend:n,attrs:{perm:a}}),u.push(l),i=kn(i.length,l.shape.length)),i=[i[0]],fs("argMin",i,l.shape.length);const[c,d]=Zn(l.shape,i),h=le(c),f=cs(h,"int32"),p=le(d),m=n.data.get(l.dataId).values;for(let g=0;g<f.length;++g){const y=g*p;let b=m[y],v=0;for(let x=0;x<p;++x){const w=m[y+x];w<b&&(b=w,v=x)}f[g]=v}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",f)}const Zge={kernelName:Rm,backendName:"cpu",kernelFunc:Qge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jge=Ot(qd,t=>Math.asin(t)),e0e={kernelName:qd,backendName:"cpu",kernelFunc:Jge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0e=Ot(Kd,t=>Math.asinh(t)),n0e={kernelName:Kd,backendName:"cpu",kernelFunc:t0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s0e=Ot(Xd,t=>Math.atan(t)),r0e={kernelName:Xd,backendName:"cpu",kernelFunc:s0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0e=Tn((t,e)=>Math.atan2(t,e)),i0e=Bn(Qd,o0e),a0e={kernelName:Qd,backendName:"cpu",kernelFunc:i0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0e=Ot(Yd,t=>Math.atanh(t)),u0e={kernelName:Yd,backendName:"cpu",kernelFunc:l0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fE(t,e,n,s,r,o){const i=r.strideHeight,a=r.strideWidth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,p=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=lt(r.outShape,n),g=m.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3],b=r.outShape[2]*r.outShape[3],v=r.outShape[3];for(let x=0;x<r.batchSize;++x){const w=x*y,S=x*s[0];for(let k=0;k<r.inChannels;++k)for(let N=0;N<r.outHeight;++N){const $=N*i-h,I=Math.max(0,$),A=Math.min(r.inHeight,c+$),O=w+N*b;for(let P=0;P<r.outWidth;++P){const F=P*a-f,G=Math.max(0,F),q=Math.min(r.inWidth,d+F);let Z=p,B=0,H=0;for(let ne=I;ne<A;ne+=l){const D=S+ne*s[1];for(let X=G;X<q;X+=u){const te=D+X*s[2],ue=t[te+k];o==="max"&&ue>Z?Z=ue:o==="avg"&&(B+=ue,H++)}if(isNaN(Z))break}const K=O+P*v+k;g[K]=o==="avg"?B/H:Z}}}return m}function MB(t,e,n,s,r=!1,o=!1){const i=lt(s.outShape,"int32"),a=s.strideHeight,l=s.strideWidth,u=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,h=s.effectiveFilterWidth,f=s.padInfo.top,p=s.padInfo.left,m=lt(e,n,t);for(let g=0;g<s.batchSize;++g)for(let y=0;y<s.inChannels;++y)for(let b=0;b<s.outHeight;++b){const v=b*a-f;let x=v;for(;x<0;)x+=u;const w=Math.min(s.inHeight,d+v);for(let S=0;S<s.outWidth;++S){const k=S*l-p;let N=k;for(;N<0;)N+=c;const $=Math.min(s.inWidth,h+k);let I=Number.NEGATIVE_INFINITY,A=-1;for(let O=x;O<w;O+=u){const P=O-v;for(let F=N;F<$;F+=c){const G=F-k,q=m.get(g,O,F,y);q>I&&(I=q,r?A=o?((g*s.inHeight+O)*s.inWidth+F)*s.inChannels+y:(O*s.inWidth+F)*s.inChannels+y:A=P*h+G)}}i.set(A,g,b,S,y)}}return i}function zB(t,e,n,s,r,o){const i=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,d=r.dilationWidth,h=r.effectiveFilterDepth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=r.padInfo.front,g=r.padInfo.top,y=r.padInfo.left,b=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=lt(r.outShape,n),x=v.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[3]*r.outShape[4],N=r.outShape[4];for(let $=0;$<r.batchSize;++$){const I=$*w,A=$*s[0];for(let O=0;O<r.inChannels;++O)for(let P=0;P<r.outDepth;++P){const F=P*i-m;let G=F;for(;G<0;)G+=u;const q=Math.min(r.inDepth,h+F),Z=I+P*S;for(let B=0;B<r.outHeight;++B){const H=B*a-g;let K=H;for(;K<0;)K+=c;const ne=Math.min(r.inHeight,f+H),D=Z+B*k;for(let X=0;X<r.outWidth;++X){const te=X*l-y;let ue=te;for(;ue<0;)ue+=d;const ie=Math.min(r.inWidth,p+te),me=D+X*N;let xe=b,fe=0,De=0;for(let Le=G;Le<q;Le+=u){const Ke=A+Le*s[1];for(let mt=K;mt<ne;mt+=c){const ot=Ke+mt*s[2];for(let rt=ue;rt<ie;rt+=d){const ct=ot+rt*s[3],z=t[ct+O];if(o==="max"&&z>xe?xe=z:o==="avg"&&(fe+=z,De++),isNaN(xe))break}if(isNaN(xe))break}if(isNaN(xe))break}const Ie=me+O;x[Ie]=o==="avg"?fe/Math.max(De,1):xe}}}}return v}function c0e(t,e){const n=lt(e.outShape,"int32"),s=e.strideDepth,r=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const b=y*s-h;let v=b;for(;v<0;)v+=i;const x=Math.min(e.inDepth,u+b);for(let w=0;w<e.outHeight;++w){const S=w*r-f;let k=S;for(;k<0;)k+=a;const N=Math.min(e.inHeight,c+S);for(let $=0;$<e.outWidth;++$){const I=$*o-p;let A=I;for(;A<0;)A+=l;const O=Math.min(e.inWidth,d+I);let P=Number.NEGATIVE_INFINITY,F=-1;for(let G=v;G<x;G+=i){const q=G-b;for(let Z=k;Z<N;Z+=a){const B=Z-S;for(let H=A;H<O;H+=l){const K=H-I,ne=t.get(m,G,Z,H,g);ne>=P&&(P=ne,F=q*c*d+B*c+K)}}}n.set(F,m,y,w,$,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;Be(r,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=s,u=1;T(hs(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=co(r.shape,o,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&vt(c.inShape,c.outShape))d=pi({inputs:{x:r},backend:n});else{const h=n.data.get(r.dataId).values,f=je(r.shape),p=fE(h,r.shape,r.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,r.dtype,p.values)}return d}const h0e={kernelName:_m,backendName:"cpu",kernelFunc:d0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;Be(r,"avgPool3d");const c=na(r.shape,o,i,1,a,l,u),d=n.data.get(r.dataId).values,h=zB(d,r.shape,r.dtype,je(r.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const p0e={kernelName:Am,backendName:"cpu",kernelFunc:f0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;Be([r,o],"avgPool3DGrad");const c=na(o.shape,i,a,1,l,u),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,b=c.dilationHeight,v=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,k=x-1-c.padInfo.front,N=S-1-c.padInfo.left,$=w-1-c.padInfo.top,I=lt(o.shape,"float32"),A=1/(p*m*g),O=n.bufferSync(r);for(let P=0;P<c.batchSize;++P)for(let F=0;F<c.inChannels;++F)for(let G=0;G<c.inDepth;++G)for(let q=0;q<c.inHeight;++q)for(let Z=0;Z<c.inWidth;++Z){const B=G-k,H=q-$,K=Z-N;let ne=0;for(let D=0;D<x;D+=y){const X=(B+D)/d;if(!(X<0||X>=c.outDepth||Math.floor(X)!==X))for(let te=0;te<w;te+=b){const ue=(H+te)/h;if(!(ue<0||ue>=c.outHeight||Math.floor(ue)!==ue))for(let ie=0;ie<S;ie+=v){const me=(K+ie)/f;if(me<0||me>=c.outWidth||Math.floor(me)!==me)continue;const xe=O.get(P,X,ue,me,F);ne+=xe}}}I.set(ne*A,P,G,q,Z,F)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const g0e={kernelName:G2,backendName:"cpu",kernelFunc:m0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y0e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o}=e,i=o;Be([r,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=co(i.shape,a,l,1,u),d=c.strideHeight,h=c.strideWidth,f=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,b=c.effectiveFilterWidth,v=b-1-c.padInfo.left,x=y-1-c.padInfo.top,w=lt(i.shape,"float32"),S=1/(f*p),k=n.data.get(r.dataId).values,N=lt(r.shape,"float32",k);for(let $=0;$<c.batchSize;++$)for(let I=0;I<c.inChannels;++I)for(let A=0;A<c.inHeight;++A)for(let O=0;O<c.inWidth;++O){const P=A-x,F=O-v;let G=0;for(let q=0;q<y;q+=m){const Z=(P+q)/d;if(!(Z<0||Z>=c.outHeight||Math.floor(Z)!==Z))for(let B=0;B<b;B+=g){const H=(F+B)/h;if(H<0||H>=c.outWidth||Math.floor(H)!==H)continue;const K=N.get($,Z,H,I);G+=K}}w.set(G*S,$,A,O,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const b0e={kernelName:j2,backendName:"cpu",kernelFunc:y0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,scale:o,offset:i,mean:a,variance:l}=e;T(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),T(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),T(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Be([r,a,l,o,i],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const c=n.data.get(r.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,f=o?n.data.get(o.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,y=f.length,b=h.length,v=d.length;let x=0,w=0,S=0,k=0;for(let N=0;N<c.length;++N)m[N]=p[x++]+(c[N]-d[w++])*f[S++]/Math.sqrt(h[k++]+u),x>=g&&(x=0),w>=v&&(w=0),S>=y&&(S=0),k>=b&&(k=0);return n.makeTensorInfo(r.shape,r.dtype,m)}const x0e={kernelName:Hm,backendName:"cpu",kernelFunc:v0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:o,crops:i}=s;Be([r],"batchToSpaceND");const a=o.reduce((y,b)=>y*b),l=Yg(r.shape,o,a),u=Qg(l.length,o.length),c=Zg(r.shape,o,a),d=w$(i,o.length),h=S$(c,i,o.length),f=jt({inputs:{x:r},backend:n,attrs:{shape:l}}),p=Ks({inputs:{x:f},backend:n,attrs:{perm:u}}),m=jt({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Pu({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const S0e={kernelName:Om,backendName:"cpu",kernelFunc:w0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:o}=e,{size:i}=s,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=lE(a,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}const k0e={kernelName:H2,backendName:"cpu",kernelFunc:C0e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0e(t){const{inputs:e,backend:n}=t,{s0:s,s1:r}=e,o=n.data.get(s.dataId).values,i=n.data.get(r.dataId).values,a=st(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const T0e={kernelName:q2,backendName:"cpu",kernelFunc:N0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0e=Ot(eh,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),E0e={kernelName:eh,backendName:"cpu",kernelFunc:$0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0e=t=>{const{x:e}=t.inputs,n=t.backend,s=new Float32Array(le(e.shape)),r=n.data.get(e.dataId),o=r.complexTensorInfos.real,i=r.complexTensorInfos.imag,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];s[u]=Math.hypot(c,d)}return n.makeOutput(s,e.shape,"float32")},R0e={kernelName:Lm,backendName:"cpu",kernelFunc:I0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dd(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.data.get(s.dataId).complexTensorInfos.imag,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}const _0e={kernelName:fb,backendName:"cpu",kernelFunc:Dd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Od(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s,o=pt(r,e[0].shape)[0],i=e.map(m=>m.shape);b$(i,o);let a=ii(e.map(m=>m.shape),o);if(le(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>le(m.shape)>0);if(l.length===1)return pi({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(x=>Lu({inputs:{input:x},backend:n})),g=l.map(x=>Dd({inputs:{input:x},backend:n})),y=Od({inputs:m,backend:n,attrs:{axis:o}}),b=Od({inputs:g,backend:n,attrs:{axis:o}}),v=rr({inputs:{real:y,imag:b},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),v}const u=l.map(m=>{const y=[-1,le(m.shape.slice(o))];return jt({inputs:{x:m},backend:n,attrs:{shape:y}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=ii(u.map(m=>m.shape),1);const d=u[0].shape[0]===1,h=jz(c,a,e[0].dtype,d),f=ii(l.map(m=>m.shape),o),p=n.makeTensorInfo(f,e[0].dtype,h);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const A0e={kernelName:Pm,backendName:"cpu",kernelFunc:Od};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BB(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o}=e,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s;Be([r,o],"conv2d");const d=sa(l),h=Qn(r.shape,o.shape,i,u,a,c,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.padInfo.left,b=h.padInfo.top,v=h.dataFormat==="channelsLast",x=new _n(h.outShape,r.dtype),w=je(r.shape),S=je(o.shape),k=w[0],N=v?w[1]:w[2],$=v?w[2]:1,I=v?1:w[1],A=x.strides[0],O=v?x.strides[1]:x.strides[2],P=v?x.strides[2]:1,F=v?1:x.strides[1],G=n.data.get(r.dataId).values,q=n.data.get(o.dataId).values,Z=x.values;for(let B=0;B<h.batchSize;++B){const H=B*k,K=B*A;for(let ne=0;ne<h.outHeight;++ne){const D=K+ne*O,X=ne*h.strideHeight-b;for(let te=0;te<f;++te){const ue=X+te*m;if(ue<0||ue>=h.inHeight)continue;const ie=te*S[0],me=H+ue*N;for(let xe=0;xe<h.outWidth;++xe){const fe=D+xe*P,De=xe*h.strideWidth-y;for(let Ie=0;Ie<p;++Ie){const Le=De+Ie*g;if(Le<0||Le>=h.inWidth)continue;const Ke=ie+Ie*S[1],mt=me+Le*$;let ot=Ke;for(let rt=0;rt<h.inChannels;++rt){const ct=G[mt+rt*I];for(let z=0;z<h.outChannels;++z)Z[fe+z*F]+=ct*q[ot+z];ot+=h.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,Z)}const D0e={kernelName:Mm,backendName:"cpu",kernelFunc:BB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:o}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s;Be([r,o],"conv2dBackpropFilter");const d=sa(l),h=Qn(r.shape,c,i,1,a,u,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:g}=h,y=h.dataFormat==="channelsLast",b=new _n(h.filterShape,"float32"),v=h.padInfo.left,x=h.padInfo.top,w=n.data.get(r.dataId).values,S=n.data.get(o.dataId).values,k=new _n(r.shape,r.dtype,w),N=new _n(o.shape,o.dtype,S);for(let $=0;$<m;++$){const I=Math.max(0,Math.ceil((x-$)/f)),A=Math.min(h.outHeight,(h.inHeight+x-$)/f);for(let O=0;O<g;++O){const P=Math.max(0,Math.ceil((v-O)/p)),F=Math.min(h.outWidth,(h.inWidth+v-O)/p);for(let G=0;G<h.inChannels;++G)for(let q=0;q<h.outChannels;++q){let Z=0;for(let B=0;B<h.batchSize;++B)for(let H=I;H<A;++H){const K=$+H*f-x;for(let ne=P;ne<F;++ne){const D=O+ne*p-v;y?Z+=k.get(B,K,D,G)*N.get(B,H,ne,q):Z+=k.get(B,G,K,D)*N.get(B,q,H,ne)}}b.set(Z,$,O,G,q)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const F0e={kernelName:X2,backendName:"cpu",kernelFunc:O0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:o}=e,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s;Be([r,o],"conv2dBackpropInput");const d=je(o.shape),h=je(r.shape);let f=sa(u);const p=Qn(i,o.shape,a,1,l,c,!1,f),m=new _n(p.inShape,"float32"),g=m.values,y=n.data.get(r.dataId).values,b=n.data.get(o.dataId).values,[v,x,w]=d,{batchSize:S,filterHeight:k,filterWidth:N,inChannels:$,inHeight:I,inWidth:A,outChannels:O,outHeight:P,outWidth:F,strideHeight:G,strideWidth:q}=p;f=p.dataFormat;const Z=k-1-p.padInfo.top,B=N-1-p.padInfo.left,H=f==="channelsLast",K=m.strides[0],ne=H?m.strides[1]:m.strides[2],D=H?m.strides[2]:1,X=H?1:m.strides[1],te=h[0],ue=H?h[1]:h[2],ie=H?h[2]:1,me=H?1:h[1];for(let xe=0;xe<S;++xe)for(let fe=0;fe<$;++fe)for(let De=0;De<I;++De){const Ie=De-Z,Le=Math.max(0,Math.ceil(Ie/G)),Ke=Math.min(P,(k+Ie)/G);for(let mt=0;mt<A;++mt){const ot=mt-B,rt=Math.max(0,Math.ceil(ot/q)),ct=Math.min(F,(N+ot)/q);let z=0;for(let ae=Le;ae<Ke;++ae){const ke=ae*G-Ie;for(let we=rt;we<ct;++we){const ye=we*q-ot,Ee=te*xe+ue*ae+ie*we,nt=v*(k-1-ke)+x*(N-1-ye)+w*fe;for(let _t=0;_t<O;++_t){const Ft=y[Ee+me*_t],Vn=b[nt+_t];z+=Ft*Vn}}}const oe=K*xe+ne*De+D*mt+X*fe;g[oe]=z}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const P0e={kernelName:zm,backendName:"cpu",kernelFunc:L0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o}=e,{strides:i,pad:a,dilations:l}=s;Be([r,o],"conv3d");const u=xl(r.shape,o.shape,i,l,a),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:g}=u,y=g.front,b=g.left,v=g.top,x=new _n(u.outShape,r.dtype),w=n.data.get(r.dataId).values,S=n.data.get(o.dataId).values,k=x.values,N=je(r.shape),$=je(o.shape);for(let I=0;I<u.batchSize;++I){const A=I*N[0],O=I*x.strides[0];for(let P=0;P<u.outDepth;++P){const F=O+P*x.strides[1],G=P*u.strideDepth-y;for(let q=0;q<c;++q){const Z=G+q*f;if(Z<0||Z>=u.inDepth)continue;const B=q*$[0],H=A+Z*N[1];for(let K=0;K<u.outHeight;++K){const ne=F+K*x.strides[2],D=K*u.strideHeight-v;for(let X=0;X<d;++X){const te=D+X*p;if(te<0||te>=u.inHeight)continue;const ue=B+X*$[1],ie=H+te*N[2];for(let me=0;me<u.outWidth;++me){const xe=ne+me*u.outChannels,fe=me*u.strideWidth-b;for(let De=0;De<h;++De){const Ie=fe+De*m;if(Ie<0||Ie>=u.inWidth)continue;const Le=ue+De*$[2],Ke=ie+Ie*u.inChannels;let mt=Le;for(let ot=0;ot<u.inChannels;++ot){const rt=w[Ke+ot];for(let ct=0;ct<u.outChannels;++ct)k[xe+ct]+=rt*S[mt+ct];mt+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const z0e={kernelName:Bm,backendName:"cpu",kernelFunc:M0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:o}=e,{strides:i,pad:a,filterShape:l}=s;Be([r,o],"conv3dBackpropFilterV2");const u=je(r.shape),c=je(o.shape),d=xl(r.shape,l,i,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,b=new _n(d.filterShape,"float32"),v=b.values,[x,w,S,k]=b.strides,N=n.data.get(o.dataId).values,[$,I,A,O]=c,P=n.data.get(r.dataId).values,[F,G,q,Z]=u,B=d.padInfo.front,H=d.padInfo.left,K=d.padInfo.top;for(let ne=0;ne<m;++ne){const D=Math.max(0,Math.ceil((B-ne)/h)),X=Math.min(d.outDepth,(d.inDepth+B-ne)/h),te=ne*x;for(let ue=0;ue<g;++ue){const ie=Math.max(0,Math.ceil((K-ue)/f)),me=Math.min(d.outHeight,(d.inHeight+K-ue)/f),xe=ue*w+te;for(let fe=0;fe<y;++fe){const De=Math.max(0,Math.ceil((H-fe)/p)),Ie=Math.min(d.outWidth,(d.inWidth+H-fe)/p),Le=fe*S+xe;for(let Ke=0;Ke<d.inChannels;++Ke){const mt=Ke*k+Le;for(let ot=0;ot<d.outChannels;++ot){let rt=0;for(let ct=0;ct<d.batchSize;++ct){const z=ct*F,oe=ct*$;for(let ae=D;ae<X;++ae){const we=(ne+ae*h-B)*G+z,ye=ae*I+oe;for(let Ee=ie;Ee<me;++Ee){const _t=(ue+Ee*f-K)*q+we,Ft=Ee*A+ye;for(let Vn=De;Vn<Ie;++Vn){const zr=(fe+Vn*p-H)*Z+_t,Br=Vn*O+Ft;rt+=P[zr+Ke]*N[Br+ot]}}}}v[mt+ot]=rt}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const V0e={kernelName:Y2,backendName:"cpu",kernelFunc:B0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U0e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:o}=e,{pad:i,strides:a,inputShape:l}=s;Be([r],"conv3dBackpropInputV2");const u=je(r.shape),c=je(o.shape),d=xl(l,o.shape,a,1,i),h=new _n(d.inShape,"float32"),f=h.values,[p,m,g,y]=h.strides,b=n.data.get(r.dataId).values,[v,x,w,S]=u,k=n.data.get(o.dataId).values,[N,$,I,A]=c,{batchSize:O,filterDepth:P,filterHeight:F,filterWidth:G,inChannels:q,inDepth:Z,inHeight:B,inWidth:H,outChannels:K,outDepth:ne,outHeight:D,outWidth:X,strideDepth:te,strideHeight:ue,strideWidth:ie}=d,me=P-1-d.padInfo.front,xe=F-1-d.padInfo.top,fe=G-1-d.padInfo.left;for(let De=0;De<O;++De)for(let Ie=0;Ie<q;++Ie)for(let Le=0;Le<Z;++Le){const Ke=Le-me,mt=Math.max(0,Math.ceil(Ke/te)),ot=Math.min(ne,(P+Ke)/te);for(let rt=0;rt<B;++rt){const ct=rt-xe,z=Math.max(0,Math.ceil(ct/ue)),oe=Math.min(D,(F+ct)/ue);for(let ae=0;ae<H;++ae){const ke=ae-fe,we=Math.max(0,Math.ceil(ke/ie)),ye=Math.min(X,(G+ke)/ie);let Ee=0;for(let nt=mt;nt<ot;++nt){const _t=nt*te-Ke;for(let Ft=z;Ft<oe;++Ft){const Vn=Ft*ue-ct;for(let Jn=we;Jn<ye;++Jn){const zr=Jn*ie-ke,Br=v*De+x*nt+w*Ft+S*Jn,Si=N*(P-1-_t)+$*(F-1-Vn)+I*(G-1-zr)+A*Ie;for(let po=0;po<K;++po){const ca=b[Br+po],re=k[Si+po];Ee+=ca*re}}}}f[p*De+m*Le+g*rt+y*ae+Ie]=Ee}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const W0e={kernelName:Q2,backendName:"cpu",kernelFunc:U0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0e=Ot(th,t=>Math.cos(t)),G0e={kernelName:th,backendName:"cpu",kernelFunc:j0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H0e=Ot(nh,t=>Math.cosh(t)),q0e={kernelName:nh,backendName:"cpu",kernelFunc:H0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K0e(t){const{inputs:e,backend:n,attrs:s}=t,{image:r,boxes:o,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:u}=s,[c,d,h,f]=r.shape,p=o.shape[0],[m,g]=a,y=lt([p,m,g,f],"float32"),b=n.data.get(o.dataId).values,v=n.data.get(i.dataId).values,x=n.data.get(r.dataId).values,w=je(r.shape),S=je(y.shape);for(let k=0;k<p;k++){const N=k*4,$=b[N],I=b[N+1],A=b[N+2],O=b[N+3],P=v[k];if(P>=c)continue;const F=m>1?(A-$)*(d-1)/(m-1):0,G=g>1?(O-I)*(h-1)/(g-1):0;for(let q=0;q<m;q++){const Z=m>1?$*(d-1)+q*F:.5*($+A)*(d-1);if(Z<0||Z>d-1){for(let B=0;B<g;B++)for(let H=0;H<f;H++){const K=H+B*S[2]+q*S[1]+k*S[0];y.values[K]=u}continue}if(l==="bilinear"){const B=Math.floor(Z),H=Math.ceil(Z),K=Z-B;for(let ne=0;ne<g;ne++){const D=g>1?I*(h-1)+ne*G:.5*(I+O)*(h-1);if(D<0||D>h-1){for(let ie=0;ie<f;ie++){const me=ie+ne*S[2]+q*S[1]+k*S[0];y.values[me]=u}continue}const X=Math.floor(D),te=Math.ceil(D),ue=D-X;for(let ie=0;ie<f;ie++){let me=ie+X*w[2]+B*w[1]+P*w[0];const xe=x[me];me=ie+te*w[2]+B*w[1]+P*w[0];const fe=x[me];me=ie+X*w[2]+H*w[1]+P*w[0];const De=x[me];me=ie+te*w[2]+H*w[1]+P*w[0];const Ie=x[me],Le=xe+(fe-xe)*ue,Ke=De+(Ie-De)*ue;me=ie+ne*S[2]+q*S[1]+k*S[0],y.values[me]=Le+(Ke-Le)*K}}}else for(let B=0;B<g;++B){const H=g>1?I*(h-1)+B*G:.5*(I+O)*(h-1);if(H<0||H>h-1){for(let D=0;D<f;D++){const X=D+B*S[2]+q*S[1]+k*S[0];y.values[X]=u}continue}const K=Math.round(H),ne=Math.round(Z);for(let D=0;D<f;D++){const X=D+K*w[2]+ne*w[1]+P*w[0],te=D+B*S[2]+q*S[1]+k*S[0];y.values[te]=x[X]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const X0e={kernelName:J2,backendName:"cpu",kernelFunc:K0e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,exclusive:i,reverse:a}=s;Be(r,"cumprod");const l=dn([o],r.shape.length);let u=r;l!=null&&(u=Ks({inputs:{x:r},backend:n,attrs:{perm:l}}));const c=kn(1,r.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Ws(u.dtype,"int32"),h=V2(le(u.shape),d),f=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,b)=>y+p-b-1:(y,b)=>y+b;for(let y=0;y<f.length;y+=p)for(let b=0;b<p;b++){const v=m(y,b);if(b===0)h[v]=i?1:f[v];else{const x=m(y,b-1);h[v]=i?f[x]*h[x]:f[v]*h[x]}}const g=n.makeTensorInfo(u.shape,d,h);if(l!=null){const y=wl(l),b=Ks({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),b}return g}const Q0e={kernelName:Z2,backendName:"cpu",kernelFunc:Y0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,exclusive:i,reverse:a}=s;Be(r,"cumsum");const l=dn([o],r.shape.length);let u=r;l!=null&&(u=Ks({inputs:{x:r},backend:n,attrs:{perm:l}}));const c=kn(1,r.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Ws(u.dtype,"int32"),h=cs(le(u.shape),d),f=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,b)=>y+p-b-1:(y,b)=>y+b;for(let y=0;y<f.length;y+=p)for(let b=0;b<p;b++){const v=m(y,b);if(b===0)h[v]=i?0:f[v];else{const x=m(y,b-1);h[v]=i?f[x]+h[x]:f[v]+h[x]}}const g=n.makeTensorInfo(u.shape,d,h);if(l!=null){const y=wl(l),b=Ks({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),b}return g}const J0e={kernelName:Vm,backendName:"cpu",kernelFunc:Z0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:o}=e,{size:i,binaryOutput:a}=s;if(r.shape.length===1){const l=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,c=lE(l,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}else if(r.shape.length===2){const l=n.bufferSync(r),u=n.bufferSync(o),c=Vz(l,u,i,a);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}const tye={kernelName:eb,backendName:"cpu",kernelFunc:eye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockSize:o,dataFormat:i}=s;T(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=r.shape[0],l=r.shape[1],u=r.shape[2],c=r.shape[3],d=l*o,h=u*o,f=c/(o*o),p=n.data.get(r.dataId).values,m=new Float32Array(a*d*h*f);let g=0;for(let y=0;y<a;++y)for(let b=0;b<d;++b){const v=Math.floor(b/o),x=b%o;for(let w=0;w<h;++w){const S=Math.floor(w/o),k=w%o,N=(x*o+k)*f;for(let $=0;$<f;++$){const A=$+N+c*(S+u*(v+l*y));m[g++]=p[A]}}}return n.makeTensorInfo([a,d,h,f],r.dtype,m)}const sye={kernelName:tb,backendName:"cpu",kernelFunc:nye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VB(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;Be([r,o],"depthwiseConv2DNative");const c=je(r.shape),d=je(o.shape);let h=l;h==null&&(h=[1,1]),T(hs(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);const f=Qn(r.shape,o.shape,i,h,a,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=f,v=b.left,x=b.top,w=f.outChannels/f.inChannels,S=new _n(f.outShape,r.dtype),k=n.data.get(r.dataId).values,N=n.data.get(o.dataId).values,$=S.values;for(let I=0;I<f.batchSize;++I){const A=I*c[0],O=I*S.strides[0];for(let P=0;P<f.outHeight;++P){const F=O+P*S.strides[1],G=P*f.strideHeight-x;for(let q=0;q<p;++q){const Z=G+q*g;if(Z<0||Z>=f.inHeight)continue;const B=q*d[0],H=A+Z*c[1];for(let K=0;K<f.outWidth;++K){const ne=F+K*S.strides[2],D=K*f.strideWidth-v;for(let X=0;X<m;++X){const te=D+X*y;if(te<0||te>=f.inWidth)continue;const ue=B+X*d[1],ie=H+te*f.inChannels;let me=ne,xe=ue;for(let fe=0;fe<f.inChannels;++fe){const De=k[ie+fe];for(let Ie=0;Ie<w;++Ie)$[me+Ie]+=De*N[xe+Ie];me+=w,xe+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const rye={kernelName:Um,backendName:"cpu",kernelFunc:VB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oye(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s;Be([r,o],"depthwiseConv2dNativeBackpropFilter");const d=Qn(r.shape,c,i,a,l,u,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,g=new _n(d.filterShape,"float32"),y=d.padInfo.left,b=d.padInfo.top,v=d.outChannels/d.inChannels,x=n.data.get(r.dataId).values,w=new _n(r.shape,r.dtype,x),S=n.data.get(o.dataId).values,k=new _n(o.shape,o.dtype,S);for(let N=0;N<p;++N){const $=Math.max(0,Math.ceil((b-N)/h)),I=Math.min(d.outHeight,(d.inHeight+b-N)/h);for(let A=0;A<m;++A){const O=Math.max(0,Math.ceil((y-A)/f)),P=Math.min(d.outWidth,(d.inWidth+y-A)/f);for(let F=0;F<d.outChannels;++F){const G=Math.trunc(F/v),q=F%v;let Z=0;for(let B=0;B<d.batchSize;++B)for(let H=$;H<I;++H){const K=N+H*h-b;for(let ne=O;ne<P;++ne){const D=A+ne*f-y;Z+=w.get(B,K,D,G)*k.get(B,H,ne,F)}}g.set(Z,N,A,G,q)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const iye={kernelName:nb,backendName:"cpu",kernelFunc:oye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aye(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s;Be([r,o],"depthwiseConv2DNativeBackpropInput");const d=je(r.shape),h=je(o.shape),f=Qn(c,o.shape,i,a,l,u,!0),p=new _n(f.inShape,"float32"),m=p.values,[g,y,b]=p.strides,v=n.data.get(r.dataId).values,[x,w,S]=d,k=n.data.get(o.dataId).values,[N,$,I]=h,{batchSize:A,filterHeight:O,filterWidth:P,inChannels:F,inHeight:G,inWidth:q,outChannels:Z,outHeight:B,outWidth:H,strideHeight:K,strideWidth:ne}=f,D=O-1-f.padInfo.top,X=P-1-f.padInfo.left,te=Z/F;for(let ue=0;ue<A;++ue)for(let ie=0;ie<F;++ie)for(let me=0;me<G;++me){const xe=me-D,fe=Math.max(0,Math.ceil(xe/K)),De=Math.min(B,(O+xe)/K);for(let Ie=0;Ie<q;++Ie){const Le=Ie-X,Ke=Math.max(0,Math.ceil(Le/ne)),mt=Math.min(H,(P+Le)/ne);let ot=0;for(let rt=fe;rt<De;++rt){const ct=rt*K-xe;for(let z=Ke;z<mt;++z){const oe=z*ne-Le,ae=x*ue+w*rt+S*z,ke=N*(O-1-ct)+$*(P-1-oe)+I*ie;for(let we=0;we<te;++we){const ye=ie*te+we,Ee=v[ae+ye],nt=k[ke+we];ot+=Ee*nt}}}m[g*ue+y*me+b*Ie+ie]=ot}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const lye={kernelName:sb,backendName:"cpu",kernelFunc:aye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t){const{inputs:e,backend:n}=t,{x:s}=e,r=le(s.shape),o=n.data.get(s.dataId).values,i=lt([r,r],s.dtype),a=i.values;for(let u=0;u<o.length;u++)a[u*r+u]=o[u];const l=[...s.shape,...s.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const cye={kernelName:rb,backendName:"cpu",kernelFunc:uye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dye={kernelName:Wm,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:r}=t,{strides:o,pad:i,dilations:a}=n,l=e,u=l.data.get(s.dataId).values,c=s.shape.length,d=l.data.get(r.dataId).values,h=r.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:k,dilationHeight:N,dilationWidth:$,outShape:I}=Ag(s.shape,r.shape,o,i,"NHWC",a),A=le(I),O=I.length,P=fn(s.dtype,A);for(let G=0;G<f;++G)for(let q=0;q<y;++q){const Z=q*x-v.top;for(let B=0;B<b;++B){const H=B*w-v.left;for(let K=0;K<g;++K){let ne=Number.MIN_SAFE_INTEGER;for(let X=0;X<S;++X){const te=Z+X*N;if(te>=0&&te<p)for(let ue=0;ue<k;++ue){const ie=H+ue*$;if(ie>=0&&ie<m){const me=Ro([G,te,ie,K],c,je(s.shape)),xe=Ro([X,ue,K],h,je(r.shape)),fe=u[me]+d[xe];fe>ne&&(ne=fe)}}}const D=Ro([G,q,B,K],O,je(I));P[D]=ne}}}return{dataId:l.write(bl(P,s.dtype),I,s.dtype),shape:I,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hye={kernelName:p1,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:r,dy:o}=t,{strides:i,pad:a,dilations:l}=n,u=e,c=Rr(s.shape,u.data.get(s.dataId).values),d=Rr(r.shape,u.data.get(r.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:k,dilationWidth:N,outShape:$}=Ag(s.shape,r.shape,i,a,"NHWC",l);T(o.rank===$.length,()=>`Error in ${p1}, dy must have the same rank as output ${$.length}, but got ${o.rank}`);const I=Rr($,u.data.get(o.dataId).values),A=DN(r.shape,r.dtype);for(let P=0;P<h;++P)for(let F=0;F<g;++F){const G=F*v-b.top;for(let q=0;q<y;++q){const Z=q*x-b.left;for(let B=0;B<m;++B){let H=Number.MIN_SAFE_INTEGER,K=0,ne=0;for(let D=0;D<w;++D){const X=G+D*k;if(X>=0&&X<f)for(let te=0;te<S;++te){const ue=Z+te*N;if(ue>=0&&ue<p){const ie=c[P][X][ue][B]+d[D][te][B];ie>H&&(H=ie,K=D,ne=te)}}}A[K][ne][B]+=I[P][F][q][B]}}}return{dataId:u.write(bl(A,s.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fye={kernelName:f1,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:r,dy:o}=t,{strides:i,pad:a,dilations:l}=n,u=e,c=Rr(s.shape,u.data.get(s.dataId).values),d=Rr(r.shape,u.data.get(r.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:k,dilationWidth:N,outShape:$}=Ag(s.shape,r.shape,i,a,"NHWC",l);T(o.rank===$.length,()=>`Error in ${f1}, dy must have the same rank as output ${$.length}, but got ${o.rank}`);const I=Rr($,u.data.get(o.dataId).values),A=DN(s.shape,s.dtype);for(let P=0;P<h;++P)for(let F=0;F<g;++F){const G=F*v-b.top;for(let q=0;q<y;++q){const Z=q*x-b.left;for(let B=0;B<m;++B){let H=Number.MIN_SAFE_INTEGER,K=G<0?0:G,ne=Z<0?0:Z;for(let D=0;D<w;++D){const X=G+D*k;if(X>=0&&X<f)for(let te=0;te<S;++te){const ue=Z+te*N;if(ue>=0&&ue<p){const ie=c[P][X][ue][B]+d[D][te][B];ie>H&&(H=ie,K=X,ne=ue)}}}A[P][K][ne][B]+=I[P][F][q][B]}}}return{dataId:u.write(bl(A,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t){const{inputs:e,backend:n,attrs:s}=t,{image:r}=e,{canvas:o,options:i}=s,{contextOptions:a,imageOptions:l}=i||{},u=(l==null?void 0:l.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=o.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[h,f]=r.shape.slice(0,2),p=r.shape.length===2?1:r.shape[2],m=n.data.get(r.dataId).values,g=r.dtype==="float32"?255:1,y=new Uint8ClampedArray(f*h*4);for(let v=0;v<h*f;++v){const x=[0,0,0,255*u];for(let S=0;S<p;S++){const k=m[v*p+S];if(r.dtype==="float32"){if(k<0||k>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${k}.`)}else if(r.dtype==="int32"&&(k<0||k>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${k}.`);p===1?(x[0]=k*g,x[1]=k*g,x[2]=k*g):x[S]=k*g}const w=v*4;y[w+0]=Math.round(x[0]),y[w+1]=Math.round(x[1]),y[w+2]=Math.round(x[2]),y[w+3]=Math.round(x[3])}o.width=f,o.height=h;const b=new ImageData(y,f,h);return d.putImageData(b,0,0),r}const mye={kernelName:ob,backendName:"cpu",kernelFunc:pye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a0(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s;Be(r,"sum");let a;r.dtype==="bool"?a=cl({inputs:{x:r},backend:n,attrs:{dtype:"int32"}}):a=pi({inputs:{x:r},backend:n});const l=a.shape.length,u=pt(o,a.shape),c=dn(u,l);let d=u,h=a;c!=null&&(h=Ks({inputs:{x:a},backend:n,attrs:{perm:c}}),d=kn(d.length,l)),fs("sum",d,h.shape.length);const[f,p]=Zn(h.shape,d),m=Ws(h.dtype,"int32");let g=D1(n,f,m);const y=le(p),b=n.data.get(g.dataId).values,v=n.data.get(h.dataId).values;for(let x=0;x<b.length;++x){const w=x*y;let S=0;for(let k=0;k<y;++k)S+=v[w+k];b[x]=S}if(i){const x=Cn(g.shape,u),w=g;g=jt({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(h),g}const gye={kernelName:Sg,backendName:"cpu",kernelFunc:a0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(t){const{inputs:e,backend:n,attrs:s}=t,{equation:r}=s,o=e,{allDims:i,summedDims:a,idDims:l}=R$(r,o.length);A$(i.length,l,o);const{path:u,steps:c}=D$(a,l),d=c.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:b}=_$(f,l[g]);let v;O$(y)?v=o[g]:(v=Ks({inputs:{x:o[g]},backend:n,attrs:{perm:y}}),p.push(v));const x=v.shape.slice();for(let w=0;w<b.length;++w)x.splice(b[w],0,1);vt(v.shape,x)||(v=jt({inputs:{x:v},backend:n,attrs:{shape:x}}),p.push(v)),h===null?h=v:(h=Yv({inputs:{a:v,b:h},backend:n}),p.push(h))}m<d-1&&(u[m]>=0&&(h=a0({inputs:{x:h},backend:n,attrs:{axis:u[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const bye={kernelName:ib,backendName:"cpu",kernelFunc:yye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t){const{inputs:e,backend:n}=t,{dy:s,y:r}=e;Be([s,r],"eluGrad");const o=new Float32Array(le(r.shape)),i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=0?o[l]=a[l]:o[l]=a[l]*(u+1)}return n.makeTensorInfo(r.shape,"float32",o)}const xye={kernelName:ab,backendName:"cpu",kernelFunc:vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wye=C$,Sye=k$,Cye=N$,kye=T$,Nye=$$,Tye=E$,$ye=Ot(oh,t=>{const e=Math.sign(t),n=Math.abs(t),s=1/(1+wye*n);return e*(1-((((Tye*s+Nye)*s+kye)*s+Cye)*s+Sye)*s*Math.exp(-n*n))}),Eye={kernelName:oh,backendName:"cpu",kernelFunc:$ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1(t){const{inputs:e,backend:n,attrs:s}=t,{input:r}=e,{dim:o}=s,i=r.shape.length,a=r.shape.slice();let l=o;return o<0&&(T(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),jt({inputs:{x:r},backend:n,attrs:{shape:a}})}const Iye={kernelName:Gm,backendName:"cpu",kernelFunc:L1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rye=Tn((t,e)=>t/e),pE=Bn(sh,Rye),WC={kernelName:sh,backendName:"cpu",kernelFunc:pE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UB(t,e,n){const s=t.shape,r=s[0],o=s[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[r,o],c=le(u),d=Xn("float32",c),h=Xn("float32",c);for(let g=0;g<r;g++){const y=Pu({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,o]}}),b=Pu({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,o]}}),v=rr({inputs:{real:y,imag:b},backend:n}),{real:x,imag:w}=_ye(v,e,n),S=Xi(x,w);for(let k=0;k<o;k++){const N=I$(S,k);d[g*o+k]=N.real,h[g*o+k]=N.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v)}const f=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",h),m=rr({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function _ye(t,e,n){const s=le(t.shape),r=n.data.get(t.dataId),o=n.data.get(r.complexTensorInfos.real.dataId).values,i=n.data.get(r.complexTensorInfos.imag.dataId).values;if(Aye(s)){const a=jC(o,i,s,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",ta(s,"float32")),h=pi({inputs:{x:d},backend:n}),f=WC.kernelFunc({inputs:{a:u,b:d},backend:n}),p=WC.kernelFunc({inputs:{a:c,b:h},backend:n}),m=n.data.get(f.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=Xi(o,i),l=Dye(a,s,e);return HM(l)}}function Aye(t){return(t&t-1)===0}function jC(t,e,n,s,r){if(n===1)return{real:t,imag:e};const o=Xi(t,e),i=n/2,a=qM(o),l=a.real,u=a.imag,c=[l.length],d=r.makeTensorInfo(c,"float32",l),h=r.makeTensorInfo(c,"float32",u),f=rr({inputs:{real:d,imag:h},backend:r}),p=KM(o),m=p.real,g=p.imag,y=[m.length],b=r.makeTensorInfo(y,"float32",m),v=r.makeTensorInfo(y,"float32",g),x=rr({inputs:{real:b,imag:v},backend:r}),w=jC(l,u,i,s,r),S=w.real,k=w.imag,N=[S.length],$=r.makeTensorInfo(N,"float32",S),I=r.makeTensorInfo(N,"float32",k),A=rr({inputs:{real:$,imag:I},backend:r}),O=jC(m,g,i,s,r),P=O.real,F=O.imag,G=[P.length],q=r.makeTensorInfo(G,"float32",P),Z=r.makeTensorInfo(G,"float32",F),B=rr({inputs:{real:q,imag:Z},backend:r}),H=YM(n,s),K=[H.real.length],ne=r.makeTensorInfo(K,"float32",H.real),D=r.makeTensorInfo(K,"float32",H.imag),X=rr({inputs:{real:ne,imag:D},backend:r}),te=Yv({inputs:{a:X,b:B},backend:r}),ue=Ad({inputs:{a:A,b:te},backend:r}),ie=hE({inputs:{a:A,b:te},backend:r}),me=Lu({inputs:{input:ue},backend:r}),xe=Lu({inputs:{input:ie},backend:r}),fe=Dd({inputs:{input:ue},backend:r}),De=Dd({inputs:{input:ie},backend:r}),Ie=Od({inputs:[me,xe],backend:r,attrs:{axis:0}}),Le=Od({inputs:[fe,De],backend:r,attrs:{axis:0}}),Ke=r.data.get(Ie.dataId).values,mt=r.data.get(Le.dataId).values;return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo($),r.disposeIntermediateTensorInfo(I),r.disposeIntermediateTensorInfo(A),r.disposeIntermediateTensorInfo(q),r.disposeIntermediateTensorInfo(Z),r.disposeIntermediateTensorInfo(B),r.disposeIntermediateTensorInfo(ne),r.disposeIntermediateTensorInfo(D),r.disposeIntermediateTensorInfo(X),r.disposeIntermediateTensorInfo(te),r.disposeIntermediateTensorInfo(ue),r.disposeIntermediateTensorInfo(ie),r.disposeIntermediateTensorInfo(me),r.disposeIntermediateTensorInfo(fe),r.disposeIntermediateTensorInfo(xe),r.disposeIntermediateTensorInfo(De),r.disposeIntermediateTensorInfo(Ie),r.disposeIntermediateTensorInfo(Le),{real:Ke,imag:mt}}function Dye(t,e,n){const s=new Float32Array(e*2);for(let r=0;r<e;r++){let o=0,i=0;for(let a=0;a<e;a++){const l=QM(r*a,e,n),u=I$(t,a);o+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}n&&(o/=e,i/=e),XM(s,o,i,r)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(t){const{inputs:e,backend:n}=t,{input:s}=e,r=le(s.shape),o=s.shape[s.shape.length-1],i=r/o,a=jt({inputs:{x:s},backend:n,attrs:{shape:[i,o]}}),l=UB(a,!1,n),u=jt({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const Fye={kernelName:lb,backendName:"cpu",kernelFunc:Oye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mE(t){const{backend:e,attrs:n}=t,{shape:s,value:r,dtype:o}=n,i=o||Gu(r),a=fn(i,le(s));return Pye(a,r,i),e.makeTensorInfo(s,i,a)}const Lye={kernelName:ub,backendName:"cpu",kernelFunc:mE};function Pye(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mye={kernelName:cb,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,r=n,o=Xn(s.dtype,le(s.shape)),[i,a,l,u]=s.shape,c=r.data.get(s.dataId).values;for(let h=0;h<i;h++){const f=h*l*a*u;for(let p=0;p<a;p++){const m=p*(l*u);for(let g=0;g<l;g++){const y=g*u;for(let b=0;b<u;b++){const v=Math.round(l-g-1),x=f+m+y+b;let w=c[x];if(v>=0&&v<l){const S=v*u,k=f+m+S+b;w=c[k]}o[x]=w}}}}return{dataId:r.write(o,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s;let m=BB({inputs:{x:r,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const g=m;if(c==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const y=jt({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Ad({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=Ad({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(g)}if(f){const g=m;if(c==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=jt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=F1(n,m,f,y,p),n.disposeIntermediateTensorInfo(y)}else m=F1(n,m,f,a,p);n.disposeIntermediateTensorInfo(g)}return m}const Bye={kernelName:Ap,backendName:"cpu",kernelFunc:zye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vye(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s;let m=VB({inputs:{x:r,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const g=m;m=Ad({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){const g=m;m=F1(n,m,f,a,p),n.disposeIntermediateTensorInfo(g)}return m}const Uye={kernelName:Dp,backendName:"cpu",kernelFunc:Vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(t){const{inputs:e,backend:n}=t,{params:s,indices:r}=e,o=le(s.shape),i=r.shape,a=i[i.length-1],[l,u,c,d]=Av(s,r);if(u===0)return n.makeTensorInfo(l,s.dtype,[]);const h=n.data.get(r.dataId).values,f=n.bufferSync(s),p=Zz(h,f,s.dtype,u,a,c,d,s.shape,o);return n.makeTensorInfo(l,s.dtype,p.values)}const jye={kernelName:db,backendName:"cpu",kernelFunc:Wye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gye(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,indices:o}=e,{axis:i,batchDims:a}=s;Be([r,o],"gatherV2");const l=pt(i,r.shape)[0],u=n.data.get(o.dataId).values,c=r.shape[l];for(let x=0;x<u.length;++x){const w=u[x];T(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const h=le(o.shape),f=L$(r,o,l,d),p=jt({inputs:{x:r},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=jt({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),g=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],y=n.bufferSync(m),b=n.bufferSync(p),v=Jz(b,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,v.dtype,v.values)}const Hye={kernelName:qm,backendName:"cpu",kernelFunc:Gye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(t){const{inputs:e,backend:n}=t,{input:s}=e,r=le(s.shape),o=s.shape[s.shape.length-1],i=r/o,a=jt({inputs:{x:s},backend:n,attrs:{shape:[i,o]}}),l=UB(a,!0,n),u=jt({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const Kye={kernelName:hb,backendName:"cpu",kernelFunc:qye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xye=Ot(hh,t=>Number.isFinite(t)?1:0,"bool"),Yye={kernelName:hh,backendName:"cpu",kernelFunc:Xye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qye=Ot(fh,t=>Math.abs(t)===1/0?1:0,"bool"),Zye={kernelName:fh,backendName:"cpu",kernelFunc:Qye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jye=Ot(ph,t=>Number.isNaN(t)?1:0,"bool"),e1e={kernelName:ph,backendName:"cpu",kernelFunc:Jye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(t){const{backend:e,attrs:n}=t,{start:s,stop:r,num:o}=n,i=rB(s,r,o);return e.makeTensorInfo([i.length],"float32",i)}const n1e={kernelName:pb,backendName:"cpu",kernelFunc:t1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s1e=Ot(gh,t=>Math.log1p(t)),r1e={kernelName:gh,backendName:"cpu",kernelFunc:s1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o1e=Tn((t,e)=>t&&e),i1e=Bn(Zm,o1e,null,"bool"),a1e={kernelName:Zm,backendName:"cpu",kernelFunc:i1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l1e=Ot(Jm,t=>t?0:1,"bool"),u1e={kernelName:Jm,backendName:"cpu",kernelFunc:l1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c1e=Tn((t,e)=>t||e),d1e=Bn(eg,c1e,null,"bool"),h1e={kernelName:eg,backendName:"cpu",kernelFunc:d1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{depthRadius:o,bias:i,alpha:a,beta:l}=s;Be(r,"LRN");const u=r.shape[3],c=u-1,d=n.data.get(r.dataId).values,h=le(r.shape),f=new Float32Array(h);function p(m){const g=m%u;let y=m-g+Math.max(0,g-o);const b=m-g+Math.min(g+o,c);let v=0;for(;y<=b;y++){const x=d[y];v+=x*x}return v}for(let m=0;m<h;m++){const g=p(m),y=d[m]*Math.pow(i+a*g,-l);f[m]=y}return n.makeTensorInfo(r.shape,r.dtype,f)}const p1e={kernelName:tg,backendName:"cpu",kernelFunc:f1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m1e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,y:o,dy:i}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=s;Be(i,"LRNGrad");const d=le(i.shape),h=i.shape[3],f=n.data.get(i.dataId).values,p=n.data.get(r.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),y=d;for(let b=0;b<y;b++){const v=b%h,x=b-v+Math.max(0,v-a),w=b-v+Math.min(h,v+a+1);let S=0;for(let k=x;k<w;k++)S+=Math.pow(p[k],2);S=u*S+l;for(let k=x;k<w;k++){let N=-2*u*c*p[k]*m[b]/S;b===k&&(N+=Math.pow(S,-c)),N*=f[b],g[k]+=N}}return n.makeTensorInfo(i.shape,r.dtype,g)}const g1e={kernelName:mb,backendName:"cpu",kernelFunc:m1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WB(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reductionIndices:o,keepDims:i}=s,a=n;let l=r.shape;const u=l.length,c=pt(o,l);let d=c;const h=dn(d,u);let f=a.data.get(r.dataId).values;if(h!=null){const x=new Array(u);for(let w=0;w<x.length;w++)x[w]=l[h[w]];f=cE(f,l,r.dtype,h,x),d=kn(d.length,u),l=x}Be(r,"max"),fs("max",d,u);const[p,m]=Zn(l,d),g=le(m),y=iB(f,g,p,r.dtype),b=a.write(y,p,r.dtype);let v=p;return i&&(v=Cn(p,c)),{dataId:b,shape:v,dtype:r.dtype}}const y1e={kernelName:ng,backendName:"cpu",kernelFunc:WB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;Be(r,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=s,u=1;T(hs(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=co(r.shape,o,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&vt(c.inShape,c.outShape))d=pi({inputs:{x:r},backend:n});else{const h=n.data.get(r.dataId).values,f=je(r.shape),p=fE(h,r.shape,r.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,r.dtype,p.values)}return d}const v1e={kernelName:sg,backendName:"cpu",kernelFunc:b1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;Be(r,"maxPool3d");const c=na(r.shape,o,i,1,a,l,u),d=n.data.get(r.dataId).values,h=zB(d,r.shape,r.dtype,je(r.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const w1e={kernelName:rg,backendName:"cpu",kernelFunc:x1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;Be([r,o],"maxPool3DGrad");const c=na(o.shape,i,a,1,l,u),d=n.bufferSync(o),h=c0e(d,c),f=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,v=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=v-1-c.padInfo.front,k=w-1-c.padInfo.left,N=x-1-c.padInfo.top,$=lt(o.shape,"float32"),I=n.bufferSync(r);for(let A=0;A<c.batchSize;++A)for(let O=0;O<c.inChannels;++O)for(let P=0;P<c.inDepth;++P)for(let F=0;F<c.inHeight;++F)for(let G=0;G<c.inWidth;++G){const q=P-S,Z=F-N,B=G-k;let H=0;for(let K=0;K<v;K+=g){const ne=(q+K)/f;if(!(ne<0||ne>=c.outDepth||Math.floor(ne)!==ne))for(let D=0;D<x;D+=y){const X=(Z+D)/p;if(!(X<0||X>=c.outHeight||Math.floor(X)!==X))for(let te=0;te<w;te+=b){const ue=(B+te)/m;if(ue<0||ue>=c.outWidth||Math.floor(ue)!==ue)continue;const ie=v*x*w-1-h.get(A,ne,X,ue,O),me=K*x*w+D*w+te,xe=ie===me?1:0;if(xe===0)continue;const fe=I.get(A,ne,X,ue,O);H+=fe*xe}}}$.set(H,A,P,F,G,O)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const C1e={kernelName:yb,backendName:"cpu",kernelFunc:S1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o,output:i}=e,a=o;Be([o,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,h=co(a.shape,l,u,1,c,d),f=n.data.get(a.dataId).values,p=lt(h.outShape,a.dtype,MB(f,a.shape,a.dtype,h).values),m=h.strideHeight,g=h.strideWidth,y=h.dilationHeight,b=h.dilationWidth,v=h.effectiveFilterHeight,x=h.effectiveFilterWidth,w=x-1-h.padInfo.left,S=v-1-h.padInfo.top,k=lt(a.shape,"float32"),N=n.data.get(r.dataId).values,$=lt(r.shape,"float32",N);for(let I=0;I<h.batchSize;++I)for(let A=0;A<h.inChannels;++A)for(let O=0;O<h.inHeight;++O)for(let P=0;P<h.inWidth;++P){const F=O-S,G=P-w;let q=0;for(let Z=0;Z<v;Z+=y){const B=(F+Z)/m;if(!(B<0||B>=h.outHeight||Math.floor(B)!==B))for(let H=0;H<x;H+=b){const K=(G+H)/g;if(K<0||K>=h.outWidth||Math.floor(K)!==K)continue;const ne=v*x-1-p.get(I,B,K,A),D=Z*x+H,X=ne===D?1:0;if(X===0)continue;const te=$.get(I,B,K,A);q+=te*X}}k.set(q,I,O,P,A)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const N1e={kernelName:gb,backendName:"cpu",kernelFunc:k1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T1e(t,e,n,s,r){const o=je(e),i=fE(t,e,n,o,r,"max"),a=MB(t,e,n,r,!0,s);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $1e={kernelName:bb,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:r,strides:o,pad:i,includeBatchInIndex:a}=e,l=n;Be(s,"MaxPoolWithArgmax");const u=l.data.get(s.dataId).values,c=co(s.shape,r,o,[1,1],i),[d,h]=T1e(u,s.shape,s.dtype,a,c),f=l.write(d,c.outShape,s.dtype),p=l.write(h,c.outShape,s.dtype);return[{dataId:f,shape:c.outShape,dtype:s.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s,a=pt(o,r.shape),u=Zn(r.shape,a)[1],c=le(u),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(h);const f=cl({inputs:{x:r},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=pE({inputs:{a:f,b:h},backend:n});d.push(p);const m=a0({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:i}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const I1e={kernelName:og,backendName:"cpu",kernelFunc:E1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s;Be(r,"min");const a=pt(o,r.shape);let l=a;const u=dn(l,r.shape.length);let c=r;u!=null&&(c=Ks({inputs:{x:r},backend:n,attrs:{perm:u}}),l=kn(l.length,r.shape.length)),fs("min",l,c.shape.length);const[d,h]=Zn(c.shape,l),f=le(h),p=cs(le(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const b=y*f;let v=m[b];for(let x=0;x<f;++x){const w=m[b+x];(Number.isNaN(w)||w<v)&&(v=w)}p[y]=v}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const y=Cn(d,a),b=jt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const _1e={kernelName:ig,backendName:"cpu",kernelFunc:R1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{paddings:o,mode:i}=s;Be(r,"mirrorPad");const a=o.map((v,x)=>v[0]+r.shape[x]+v[1]),l=o.map(v=>v[0]),u=o.map((v,x)=>v[0]+r.shape[x]),c=i==="reflect"?0:1,d=n.data.get(r.dataId).values,h=r.shape.length,f=je(r.shape),p=le(a),m=a.length,g=je(a),y=Xn(r.dtype,p);for(let v=0;v<p;v++){let x=Hu(v,m,g);for(let S=0;S<m;S++)x[S]<l[S]?x[S]=l[S]*2-x[S]-c:x[S]>=u[S]&&(x[S]=(u[S]-1)*2-x[S]+c);x=x.map((S,k)=>S-l[k]);const w=Ro(x,h,f);y[v]=d[w]}return{dataId:n.write(y,a,r.dtype),shape:a,dtype:r.dtype}}const D1e={kernelName:ag,backendName:"cpu",kernelFunc:A1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O1e=Tn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),F1e=Bn(vh,O1e),L1e={kernelName:vh,backendName:"cpu",kernelFunc:F1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jB(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{dim:o}=s,i=r.shape.length;let a=o;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=pt([a],r.shape),u=WB({inputs:{x:r},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Cn(u.shape,l),d=jt({inputs:{x:u},backend:n,attrs:{shape:c}}),h=hE({inputs:{a:r,b:d},backend:n}),f=Kz({inputs:{x:h},backend:n}),p=a0({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=jt({inputs:{x:p},backend:n,attrs:{shape:c}}),g=pE({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const P1e={kernelName:Ng,backendName:"cpu",kernelFunc:jB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{numSamples:o,seed:i,normalized:a}=s;Be(r,"multinomial");const l=a?r:jB({inputs:{logits:r},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,h=[u,o],f=cs(le(h),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=d[m];for(let v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];const y=Gg.alea(i.toString()),b=p*o;for(let v=0;v<o;++v){const x=y();f[b+v]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){f[b+v]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const z1e={kernelName:vb,backendName:"cpu",kernelFunc:M1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B1e=Ev;function V1e(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s;Be(r,"NonMaxSuppression");const u=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:d}=B1e(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const U1e={kernelName:xb,backendName:"cpu",kernelFunc:V1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W1e=Iv;function j1e(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s;Be(r,"NonMaxSuppressionPadded");const c=n.data.get(r.dataId).values,d=n.data.get(o.dataId).values,{selectedIndices:h,validOutputs:f}=W1e(c,d,i,a,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const G1e={kernelName:wb,backendName:"cpu",kernelFunc:j1e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H1e=Rv;function q1e(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s;Be(r,"NonMaxSuppressionWithScore");const c=n.data.get(r.dataId).values,d=n.data.get(o.dataId).values,h=i,f=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=H1e(c,d,h,f,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const K1e={kernelName:Sb,backendName:"cpu",kernelFunc:q1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(t){const{inputs:e,backend:n,attrs:s}=t,{indices:r}=e,{dtype:o,depth:i,onValue:a,offValue:l}=s;Be(r,"oneHot");const u=le(r.shape),c=new Float32Array(u*i);c.fill(l);const d=n.data.get(r.dataId).values;for(let h=0;h<u;++h)d[h]>=0&&d[h]<i&&(c[h*i+d[h]]=a);return n.makeTensorInfo([...r.shape,i],o,c)}const Y1e={kernelName:dg,backendName:"cpu",kernelFunc:X1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const r=Lu({inputs:{input:s},backend:n}),o=P1({inputs:{x:r},backend:n}),i=Dd({inputs:{input:s},backend:n}),a=P1({inputs:{x:i},backend:n}),l=rr({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return mE({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const Q1e={kernelName:Ig,backendName:"cpu",kernelFunc:P1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GB(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const r=Lu({inputs:{input:s},backend:n}),o=GB({inputs:{x:r},backend:n}),i=Dd({inputs:{input:s},backend:n}),a=P1({inputs:{x:i},backend:n}),l=rr({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return mE({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const Z1e={kernelName:cg,backendName:"cpu",kernelFunc:GB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HB(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s;if(e.length===1)return L1({inputs:{input:e[0]},backend:n,attrs:{dim:r}});const o=e[0].shape,i=e[0].dtype;e.forEach(c=>{ds(o,c.shape,"All tensors passed to stack must have matching shapes"),T(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=L1({inputs:{input:c},backend:n,attrs:{dim:r}});return a.push(d),d}),u=Od({inputs:l,backend:n,attrs:{axis:r}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const J1e={kernelName:hg,backendName:"cpu",kernelFunc:HB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{paddings:o,constantValue:i}=s;Be(r,"pad");const a=o.map((b,v)=>b[0]+r.shape[v]+b[1]),l=o.map(b=>b[0]),u=n.data.get(r.dataId).values,c=le(r.shape),d=r.shape.length,h=je(r.shape),f=le(a),p=a.length,m=je(a),g=Xn(r.dtype,f);i!==0&&g.fill(i);for(let b=0;b<c;b++){const x=Hu(b,d,h).map((S,k)=>S+l[k]),w=Ro(x,p,m);g[w]=u[b]}return{dataId:n.write(g,a,r.dtype),shape:a,dtype:r.dtype}}const qB={kernelName:fg,backendName:"cpu",kernelFunc:e2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2e=Tn((t,e)=>Math.pow(t,e)),n2e=Bn(wh,t2e),s2e={kernelName:wh,backendName:"cpu",kernelFunc:n2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:r,paramsDenseValues:o,indices:i}=e,a=r.map(g=>n.data.get(g.dataId).values),l=r.map(g=>g.shape),u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,[d,h,f]=hB(a,l,u,o.shape,o.dtype,c,i.shape),p=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(f,o.dtype,h);return p.concat([m])}const o2e={kernelName:Cb,backendName:"cpu",kernelFunc:r2e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(t){const{inputs:e,backend:n}=t,{starts:s,limits:r,deltas:o}=e,i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,[u,c]=fB(i,s.shape,s.dtype,a,r.shape,l,o.shape),d=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],s.dtype,c);return[d,h]}const a2e={kernelName:kb,backendName:"cpu",kernelFunc:i2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2e(t){const{inputs:e,backend:n,attrs:s}=t,{shape:r,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=s,u=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,h=a.map(g=>n.data.get(g.dataId).values),f=a.map(g=>g.shape),[p,m]=pB(u,r.shape,c,o.shape,o.dtype,d,i.shape,h,f,l);return n.makeTensorInfo(p,o.dtype,m)}const u2e={kernelName:Nb,backendName:"cpu",kernelFunc:l2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(t){const{backend:e,attrs:n}=t,{start:s,stop:r,dtype:o,step:i}=n,a=mB(s,r,i,o);return e.makeTensorInfo([a.length],o,a)}const d2e={kernelName:Tb,backendName:"cpu",kernelFunc:c2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e=Ot(Sh,t=>1/t),f2e={kernelName:Sh,backendName:"cpu",kernelFunc:h2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:o,halfPixelCenters:i,size:a}=s;Be(r,"resizeBilinear");const l=je(r.shape),[u,c]=a,[d,h,f,p]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(le([d,u,c,p])),y=[o&&u>1?h-1:h,o&&c>1?f-1:f],b=[o&&u>1?u-1:u,o&&c>1?c-1:c];let v=0;const x=y[0]/b[0],w=y[1]/b[1];for(let S=0;S<d;S++)for(let k=0;k<u;k++){let N;i?N=x*(k+.5)-.5:N=x*k;const $=Math.max(0,Math.floor(N)),I=N-$,A=Math.min(h-1,Math.ceil(N)),O=S*l[0]+$*l[1],P=S*l[0]+A*l[1];for(let F=0;F<c;F++){let G;i?G=w*(F+.5)-.5:G=w*F;const q=Math.max(0,Math.floor(G)),Z=G-q,B=Math.min(f-1,Math.ceil(G)),H=O+q*l[2],K=P+q*l[2],ne=O+B*l[2],D=P+B*l[2];for(let X=0;X<p;X++){const te=m[H+X],ue=m[K+X],ie=m[ne+X],me=m[D+X],xe=te+(ie-te)*Z,fe=ue+(me-ue)*Z,De=xe+(fe-xe)*I;g[v++]=De}}}return n.makeTensorInfo([d,u,c,p],"float32",g)}const m2e={kernelName:bg,backendName:"cpu",kernelFunc:p2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:o}=e,{alignCorners:i}=s;Be([o,r],"resizeBilinearGrad");const a=je(r.shape),[l,u,c,d]=r.shape,[,h,f]=o.shape,p=new Float32Array(l*u*c*d),m=[i&&h>1?u-1:u,i&&f>1?c-1:c],g=[i&&h>1?h-1:h,i&&f>1?f-1:f],y=m[0]/g[0],b=m[1]/g[1],v=n.data.get(o.dataId).values;let x=0;for(let w=0;w<l;w++){const S=w*a[0];for(let k=0;k<h;k++){const N=k*y,$=Math.floor(N),I=Math.min(Math.ceil(N),u-1),A=S+$*a[1],O=S+I*a[1],P=N-$,F=1-P;for(let G=0;G<f;G++){const q=G*b,Z=Math.floor(q),B=Math.min(Math.ceil(q),c-1),H=q-Z,K=1-H,ne=A+Z*a[2],D=A+B*a[2],X=O+Z*a[2],te=O+B*a[2],ue=F*K,ie=F*H,me=P*K,xe=P*H;for(let fe=0;fe<d;fe++){const De=v[x++];p[ne+fe]+=De*ue,p[D+fe]+=De*ie,p[X+fe]+=De*me,p[te+fe]+=De*xe}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const y2e={kernelName:Ib,backendName:"cpu",kernelFunc:g2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:o,halfPixelCenters:i,size:a}=s;Be(r,"resizeNearestNeighbor");const l=je(r.shape),[u,c]=a,[d,h,f,p]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(d*u*c*p),y=[o&&u>1?h-1:h,o&&c>1?f-1:f],b=[o&&u>1?u-1:u,o&&c>1?c-1:c],v=y[0]/b[0],x=y[1]/b[1];let w=0;for(let S=0;S<d;S++){const k=S*l[0];for(let N=0;N<u;N++){const $=i?v*(N+.5):v*N;let I=Math.min(h-1,o?Math.round($):Math.floor($));i&&(I=Math.max(0,I));const A=k+I*l[1];for(let O=0;O<c;O++){const P=i?x*(O+.5):x*O;let F=Math.min(f-1,o?Math.round(P):Math.floor(P));i&&(F=Math.max(0,F));const G=A+F*l[2];for(let q=0;q<p;q++){const Z=m[G+q];g[w++]=Z}}}}return n.makeTensorInfo([d,u,c,p],r.dtype,g)}const v2e={kernelName:yg,backendName:"cpu",kernelFunc:b2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2e(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:o}=e,{alignCorners:i}=s;Be([o,r],"resizeNearestNeighborGrad");const a=je(r.shape),l=je(o.shape),[u,c,d,h]=r.shape,[,f,p]=o.shape,m=new Float32Array(u*c*d*h),g=n.data.get(o.dataId).values,y=[i&&f>1?c-1:c,i&&p>1?d-1:d],b=[i&&f>1?f-1:f,i&&p>1?p-1:p],v=y[0]/b[0],x=y[1]/b[1],w=1/v,S=1/x,k=Math.ceil(w)*2+2,N=Math.ceil(S)*2+2;for(let $=0;$<u;$++){const I=$*a[0];for(let A=0;A<c;A++){const O=I+A*a[1],P=Math.floor(A*w),F=Math.floor(P-k/2);for(let G=0;G<d;G++){const q=O+G*a[2],Z=Math.floor(G*S),B=Math.floor(Z-N/2);for(let H=0;H<h;H++){let K=0;for(let ne=0;ne<k;ne++){const D=ne+F;if(D<0||D>=f)continue;const X=I+D*l[1],te=D*v,ue=Math.min(c-1,i?Math.round(te):Math.floor(te));if(A===ue)for(let ie=0;ie<N;ie++){const me=ie+B;if(me<0||me>=p)continue;const xe=X+me*l[2],fe=me*x,De=Math.min(d-1,i?Math.round(fe):Math.floor(fe));G===De&&(K+=g[xe+H])}}m[q+H]=K}}}}return n.makeTensorInfo(r.shape,r.dtype,m)}const w2e={kernelName:Eb,backendName:"cpu",kernelFunc:x2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dims:o}=s;Be(r,"reverse");const i=r.shape.length,a=pt(o,r.shape);if(i===0)return pi({inputs:{x:r},backend:n});const l=new _n(r.shape,r.dtype),u=n.bufferSync(r);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),h=d.slice();a.forEach(f=>h[f]=r.shape[f]-1-h[f]),l.set(u.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const C2e={kernelName:vg,backendName:"cpu",kernelFunc:S2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2e={kernelName:Hb,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:r,fillValue:o,center:i}=e,a=n,l=Xn(s.dtype,le(s.shape)),[u,c,d,h]=s.shape,[f,p]=x$(i,c,d),m=255,g=Math.sin(r),y=Math.cos(r),b=a.data.get(s.dataId).values;for(let x=0;x<u;x++){const w=x*d*c*h;for(let S=0;S<c;S++){const k=S*(d*h);for(let N=0;N<d;N++){const $=N*h;for(let I=0;I<h;I++){const A=[u,S,N,I],O=A[2],P=A[1];let F=(O-f)*y-(P-p)*g,G=(O-f)*g+(P-p)*y;F=Math.round(F+f),G=Math.round(G+p);let q=o;if(typeof o!="number"&&(I===3?q=m:q=o[I]),F>=0&&F<d&&G>=0&&G<c){const B=G*(d*h),H=F*h,K=w+B+H+I;q=b[K]}const Z=w+k+$+I;l[Z]=q}}}}return{dataId:a.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2e=Ot(Nh,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),T2e={kernelName:Nh,backendName:"cpu",kernelFunc:N2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t){const{inputs:e,backend:n,attrs:s}=t,{indices:r,updates:o}=e,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=kl(o,r,i),h=!0,f=n.bufferSync(r),p=n.bufferSync(o),m=Jl(f,p,i,d,u,l,a,c,0,h);return n.makeTensorInfo(i,m.dtype,m.values)}const E2e={kernelName:Rb,backendName:"cpu",kernelFunc:$2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t,e){let n=0,s=t.length,r=0;for(;n<s;)r=Math.floor((n+s)/2),t[r]<e?n=r+1:s=r;return s}function R2e(t,e){let n=0,s=t.length,r=0;for(;n<s;)r=Math.floor((n+s)/2),t[r]<=e?n=r+1:s=r;return s}function _2e(t,e,n,s,r,o){const i=fn("int32",n*r);for(let a=0;a<n;++a){const l=t.slice(a*s,(a+1)*s),u=a*r;for(let c=0;c<r;++c)i[u+c]=o==="left"?I2e(l,e[c+u]):R2e(l,e[c+u])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:r,values:o}=e,{side:i}=s,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=_2e(a,l,r.shape[0],r.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",u)}const D2e={kernelName:Ab,backendName:"cpu",kernelFunc:A2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t){const{inputs:e,backend:n}=t,{condition:s,t:r,e:o}=e;Be([s,r,o],"select");const i=s.shape.length,a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,c=Ws(r.dtype,o.dtype),d=cs(le(r.shape),c);let h=0;const f=i===0||i>1||r.shape.length===1?1:le(r.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=l[p]:d[h++]=u[p];return n.makeTensorInfo(r.shape,c,d)}const F2e={kernelName:xg,backendName:"cpu",kernelFunc:O2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2e=Fv,P2e=Lv,M2e=Ot($h,t=>t>=0?P2e*t:L2e*(Math.exp(t)-1)),z2e={kernelName:$h,backendName:"cpu",kernelFunc:M2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B2e=Ot(Rh,t=>t<0?-1:t>0?1:0),V2e={kernelName:Rh,backendName:"cpu",kernelFunc:B2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2e=Ot(Eh,t=>Math.sin(t)),W2e={kernelName:Eh,backendName:"cpu",kernelFunc:U2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j2e=Ot(Ih,t=>Math.sinh(t)),G2e={kernelName:Ih,backendName:"cpu",kernelFunc:j2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H2e=11920928955078125e-23,x_=Math.log(H2e)+2,q2e=Ot(Ah,t=>{const e=t>-x_,n=t<x_,s=Math.exp(t);let r;return n?r=s:e?r=t:r=Math.log(1+s),r}),K2e={kernelName:Ah,backendName:"cpu",kernelFunc:q2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:o,paddings:i}=s;Be([r],"spaceToBatchND");const a=le(o),l=[[0,0]];l.push(...i);for(let S=1+o.length;S<r.shape.length;++S)l.push([0,0]);const u=qB.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),c=Yg(u.shape,o,a,!1),d=Qg(c.length,o.length,!1),h=Zg(u.shape,o,a,!1),m=jt({inputs:{x:u},backend:n,attrs:{shape:c}}),b=Ks({inputs:{x:m},backend:n,attrs:{perm:d}}),w=jt({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),w}const Y2e={kernelName:Cg,backendName:"cpu",kernelFunc:X2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const{inputs:e,backend:n}=t,{indices:s,values:r,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${r.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values[0],[d,h,f,p,m]=vB(a,s.shape,s.dtype,l,r.dtype,u,c);return[n.makeTensorInfo(h,s.dtype,d),n.makeTensorInfo([h[0]],r.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const Z2e={kernelName:Db,backendName:"cpu",kernelFunc:Q2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:r,newShape:o}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.data.get(r.dataId).values),a=n.data.get(s.dataId).values,l=Array.from(n.data.get(o.dataId).values),[u,c,d]=xB(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}const ebe={kernelName:Ob,backendName:"cpu",kernelFunc:J2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:o}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,[u,c]=dE(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const nbe={kernelName:Fb,backendName:"cpu",kernelFunc:tbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:o}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,[u,c]=dE(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const rbe={kernelName:Lb,backendName:"cpu",kernelFunc:sbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obe(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:r,sparseValues:o,defaultValue:i}=e,{outputShape:a}=s,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=kl(o,r,a),f=!1,p=n.bufferSync(r);let m;switch(o.dtype){case"bool":{const g=n.bufferSync(o),y=!!n.data.get(i.dataId).values[0];m=Jl(p,g,a,h,c,u,l,d,y,f);break}case"float32":{const g=n.bufferSync(o),y=n.data.get(i.dataId).values[0];m=Jl(p,g,a,h,c,u,l,d,y,f);break}case"int32":{const g=n.bufferSync(o),y=n.data.get(i.dataId).values[0];m=Jl(p,g,a,h,c,u,l,d,y,f);break}case"string":{const g=n.bufferSync(o),y=Gi(n.data.get(i.dataId).values[0]);m=Jl(p,g,a,h,c,u,l,d,y,f);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const ibe={kernelName:Pb,backendName:"cpu",kernelFunc:obe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{numOrSizeSplits:o,axis:i}=s,a=pt(i,r.shape)[0],l=F$(r,o,a),u=new Array(r.shape.length).fill(0),c=r.shape.slice();return l.map(d=>{const h=[...c];h[a]=d;const f=Pu({inputs:{x:r},backend:n,attrs:{begin:u,size:h}});return u[a]+=d,f})}const lbe={kernelName:kg,backendName:"cpu",kernelFunc:abe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ube={kernelName:Mb,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,s=e;Be(n,"square");const r=s.data.get(n.dataId).values,o=new Float32Array(r.length);for(let a=0;a<r.length;++a){const l=r[a];o[a]=l*l}return{dataId:s.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cbe=Ot(zh,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),dbe={kernelName:zh,backendName:"cpu",kernelFunc:cbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:o,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=s;Be(r,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:v,strides:x}=g$(r.shape,o,i,a,l,u,c,d,h);let w;if(m)w=jt({inputs:{x:r},backend:n,attrs:{shape:p}});else if(g||y){T(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);const S=f$(b,v,x),k=Pu({inputs:{x:r},backend:n,attrs:{begin:b,size:S}});w=jt({inputs:{x:k},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(k)}else{const S=n.bufferSync(r),k=CB(f,S,x,b);w=n.makeTensorInfo(p,k.dtype,k.values)}return w}const fbe={kernelName:zb,backendName:"cpu",kernelFunc:hbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(t){const{inputs:e,backend:n,attrs:s}=t,{separator:r,nGramWidths:o,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=e,h=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[p,m]=kB(h,f,r,o,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const mbe={kernelName:Bb,backendName:"cpu",kernelFunc:pbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:r}=s,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=NB(a,l,r),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ybe={kernelName:Vb,backendName:"cpu",kernelFunc:gbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:r}=s,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(o.dataId).values,a=TB(i,r);return n.makeTensorInfo(o.shape,"int32",a)}const vbe={kernelName:Ub,backendName:"cpu",kernelFunc:bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xbe=Ot(Lh,t=>Math.tan(t)),wbe={kernelName:Lh,backendName:"cpu",kernelFunc:xbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sbe=Ot(Ph,t=>Math.tanh(t)),Cbe={kernelName:Ph,backendName:"cpu",kernelFunc:Sbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t){const{inputs:e,backend:n}=t,{tensor:s,indices:r,updates:o}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:u,outputSize:c}=kl(o,r,s.shape),d=!1,h=n.bufferSync(r),f=n.bufferSync(o),p=n.bufferSync(s),m=Jl(h,f,s.shape,c,l,a,i,u,p,d);return n.makeTensorInfo(s.shape,m.dtype,m.values)}const Nbe={kernelName:_b,backendName:"cpu",kernelFunc:kbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reps:o}=s;Be(r,"tile");const i=EB(n.bufferSync(r),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const $be={kernelName:Mh,backendName:"cpu",kernelFunc:Tbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{k:o,sorted:i}=s;Be(r,"topk");const a=n.data.get(r.dataId).values,[l,u]=RB(a,r.shape,r.dtype,o,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Ibe={kernelName:Wb,backendName:"cpu",kernelFunc:Ebe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t){const{inputs:e,attrs:n,backend:s}=t,{image:r,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,h,f]=r.shape,[p,m]=u??[d,h],g=[c,p,m,f],y=je(r.shape),b=y[0],v=y[1],x=y[2],w=je(g),S=w[0],k=w[1],N=w[2],$=Xn(r.dtype,le(g));$.fill(l);const I=s.data.get(r.dataId).values,A=s.data.get(o.dataId).values;for(let P=0;P<c;++P){const F=o.shape[0]===1?A:A.subarray(P*8,P*8+8);for(let G=0;G<p;++G)for(let q=0;q<m;++q)for(let Z=0;Z<f;++Z){let B;const H=F[6]*q+F[7]*G+1;if(H===0)continue;const K=(F[0]*q+F[1]*G+F[2])/H,ne=(F[3]*q+F[4]*G+F[5])/H,D=w_(K,h,a),X=w_(ne,d,a);switch(i){case"nearest":B=Lbe(I,d,h,b,v,x,P,X,D,Z,l);break;case"bilinear":B=Pbe(I,d,h,b,v,x,P,X,D,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const te=P*S+G*k+q*N+Z;$[te]=B}return s.makeTensorInfo(g,r.dtype,$)}return{dataId:s.write($,g,r.dtype),shape:r.shape,dtype:r.dtype}}const _be={kernelName:jb,backendName:"cpu",kernelFunc:Rbe};function w_(t,e,n){switch(n){case"reflect":return Abe(t,e);case"wrap":return Dbe(t,e);case"nearest":return Fbe(t,e);case"constant":default:return Obe(t)}}function Abe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=2*e;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-e?n+s:-n-1}else if(n>e-1)if(e<=1)n=0;else{const s=2*e;n-=s*Math.trunc(n/s),n>=e&&(n=s-n-1)}return Ja(0,n,e-1)}function Dbe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=e-1;n+=e*(Math.trunc(-n/s)+1)}else if(n>e-1)if(e<=1)n=0;else{const s=e-1;n-=e*Math.trunc(n/s)}return Ja(0,n,e-1)}function Obe(t,e){return t}function Fbe(t,e){return Ja(0,t,e-1)}function Wf(t,e,n,s,r,o,i,a,l,u,c){const d=i*s+a*r+l*o+u;return 0<=a&&a<e&&0<=l&&l<n?t[d]:c}function Lbe(t,e,n,s,r,o,i,a,l,u,c){const d=Math.round(a),h=Math.round(l);return Wf(t,e,n,s,r,o,i,d,h,u,c)}function Pbe(t,e,n,s,r,o,i,a,l,u,c){const d=Math.floor(a),h=Math.floor(l),f=d+1,p=h+1,m=(p-l)*Wf(t,e,n,s,r,o,i,d,h,u,c)+(l-h)*Wf(t,e,n,s,r,o,i,d,p,u,c),g=(p-l)*Wf(t,e,n,s,r,o,i,f,h,u,c)+(l-h)*Wf(t,e,n,s,r,o,i,f,p,u,c);return(f-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t){const{inputs:e,attrs:n,backend:s}=t,{axis:r}=n,{x:o}=e;Be(o,"unique");const i=s.data.get(o.dataId).values,{outputValues:a,outputShape:l,indices:u}=_B(i,r,o.shape,o.dtype);return[s.makeTensorInfo(l,o.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const zbe={kernelName:Gb,backendName:"cpu",kernelFunc:Mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t){const{inputs:e,backend:n,attrs:s}=t,{value:r}=e;let{axis:o}=s;o<0&&(o+=r.shape.length);const i=r.shape.length,a=r.shape[o],l=new Array(i-1);let u=0;for(let f=0;f<i;f++)f!==o&&(l[u++]=r.shape[f]);const c=new Array(i).fill(0),d=r.shape.slice();d[o]=1;const h=new Array(a);for(let f=0;f<h.length;f++){c[o]=f;const p=Pu({inputs:{x:r},backend:n,attrs:{begin:c,size:d}});h[f]=jt({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const Vbe={kernelName:$g,backendName:"cpu",kernelFunc:Bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,segmentIds:o}=e,{numSegments:i}=s;Be(r,"unsortedSegmentSum");const a=r.shape.length,l=o.shape.length,u=[],c=[],d=a-l;let h=o;for(let p=0;p<d;++p){const m=L1({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,c.push(m)}for(let p=0;p<i;++p){const m=ta(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=Hz({inputs:{a:g,b:h},backend:n}),b=cl({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),v=Yv({inputs:{a:b,b:r},backend:n}),x=a0({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});u.push(x),c.push(g),c.push(y),c.push(b),c.push(v),c.push(x)}const f=HB({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const Wbe={kernelName:Eg,backendName:"cpu",kernelFunc:Ube};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jbe=[Mge,bme,Bge,Uge,kme,jge,Hge,Kge,Yge,Zge,e0e,n0e,r0e,a0e,u0e,h0e,p0e,g0e,b0e,Lge,x0e,S0e,k0e,Tme,T0e,Sme,Eme,E0e,vme,R0e,A0e,D0e,F0e,P0e,z0e,V0e,W0e,G0e,q0e,X0e,Q0e,J0e,tye,sye,rye,iye,lye,cye,dye,hye,fye,mye,bye,Ige,xye,Ime,Eye,Rme,Iye,Ame,Fye,Lye,Mye,Ome,Lme,Bye,Uye,jye,Hye,Mme,Bme,xme,Kye,_0e,Yye,Zye,e1e,Rge,Ume,jme,n1e,Hme,r1e,a1e,u1e,h1e,p1e,g1e,y1e,Kme,v1e,w1e,C1e,N1e,$1e,I1e,_1e,Yme,D1e,L1e,z1e,Zme,ege,U1e,G1e,K1e,nge,Y1e,Z1e,J1e,qB,s2e,Age,oge,o2e,a2e,u2e,d2e,wme,WC,f2e,Dge,Oge,Fge,m2e,y2e,v2e,w2e,C2e,k2e,T2e,fge,E2e,D2e,F2e,z2e,mge,V2e,W2e,G2e,gge,P1e,K2e,Y2e,Z2e,ebe,nbe,rbe,ibe,lbe,vge,ube,wge,Cge,dbe,fbe,mbe,ybe,vbe,$ge,gye,wbe,Cbe,Nbe,$be,Ibe,_be,sge,zbe,Vbe,Wbe,Q1e];for(const t of jbe)qb(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wl={},Y0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Gbe(t,e){Wl[t]=e}function Po(t,e){if(!(t in Wl)||e!=null){const s=qbe(t,e);if(s!==null)Wl[t]=s;else return console.log("Could not get context for WebGL version",t),null}const n=Wl[t];return n==null||n.isContextLost()?(delete Wl[t],Po(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Wl[t])}function Hbe(t){if(!se().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function qbe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Hbe(t);return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete Wl[t]},!1),se().getBool("SOFTWARE_WEBGL_ENABLED")&&(Y0.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Y0)||n.getContext("experimental-webgl",Y0):n.getContext("webgl2",Y0)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Hp;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Hp||(Hp={}));var Er;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Er||(Er={}));var os;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(os||(os={}));function l0(t,e){return[e,t]}function Kbe(t,e){return t*e}function Q0(t){const e=le(t),n=Math.ceil(e/4);return c1(n)}function Xh(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Xbe(t,e){const[n,s]=Xh(t,e);return n*s*4}function gE(t,e){const n=t;let s,r,o,i,a,l,u,c,d,h;return se().getNumber("WEBGL_VERSION")===2?(s=n.R32F,r=n.R16F,o=n.RGBA16F,i=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(s=t.RGBA,r=t.RGBA,o=t.RGBA,i=n.RGBA,a=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t,e){const n=e();return se().getBool("DEBUG")&&Ybe(t),n}function Ybe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+eve(t,e))}const Qbe=596e-10,Zbe=65504;function Jbe(t){return!!(se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Qbe<Math.abs(t)&&Math.abs(t)<Zbe)}function eve(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Z0(t,e){return ua(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function tve(t,e){const n=ua(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ae(t,()=>t.shaderSource(n,e)),Ae(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function nve(t,e){const n=ua(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ae(t,()=>t.shaderSource(n,e)),Ae(t,()=>t.compileShader(n)),se().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw KB(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const sve=/ERROR: [0-9]+:([0-9]+):/g;function KB(t,e){const n=sve.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const s=+n[1],r=t.split(`
`),o=r.length.toString().length+2,i=r.map((d,h)=>du((h+1).toString(),o)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,s-1),u=i.slice(s-1,s),c=i.slice(s);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${du(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function rve(t){return ua(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function ove(t,e){if(Ae(t,()=>t.linkProgram(e)),!se().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function gw(t,e){if(Ae(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function ive(t,e){const n=ua(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ae(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function ave(t,e){const n=ua(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ae(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ae(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function lve(t){return ua(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function uve(t,e){const n=se().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const s=`[${t}x${e}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(t>n||e>n){const s=`[${t}x${e}]`,r=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+r+".")}}function cve(t){return ua(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function S_(t,e,n,s,r,o,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,s)),Ae(t,()=>t.vertexAttribPointer(a,r,t.FLOAT,!1,o,i)),Ae(t,()=>t.enableVertexAttribArray(a)),!0)}function dve(t,e,n){gve(t,n),Ae(t,()=>t.activeTexture(t.TEXTURE0+n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function hve(t,e,n){return ua(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function fve(t,e,n){return t.getUniformLocation(e,n)}function pve(t,e,n,s){Ae(t,()=>dve(t,e,s)),Ae(t,()=>t.uniform1i(n,s))}function yw(t,e,n){Ae(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ae(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function C_(t,e){Ae(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ae(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function J0(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+mve(t,e))}function mve(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ua(t,e,n){const s=Ae(t,()=>e());if(s==null)throw new Error(n);return s}function gve(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=e+t.TEXTURE0;if(s<t.TEXTURE0||s>n){const r=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${r}.`)}}function Fd(t,e=2){return le(t.slice(0,t.length-e))}function Ld(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ey(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Fd(t),...Ld(t)]),e}function yve(t,e=!1){let n=se().getNumber("WEBGL_MAX_TEXTURE_SIZE"),s=se().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");s===1/0&&se().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(s=n/2),e&&(n=n*2,s=s*2,t=t.map((a,l)=>l>=t.length-2?B2(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=ea(t).newShape);let r=le(t),o=null;t.length<=1&&r<=n?o=[1,r]:t.length===2&&t[0]<=n&&t[1]<=n?o=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?o=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?o=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?o=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(o=[t[0],t[1]*t[2]*t[3]]);const i=o!=null&&Math.max(...o)>s&&Math.min(...o)<=(e?2:1)&&Math.min(...o)>0;if(o==null||i)if(e){const a=Fd(t);let l=2,u=2;t.length&&([l,u]=Ld(t)),r=a*(l/2)*(u/2),o=c1(r).map(c=>c*2)}else o=c1(r);return o}function ty(t){return t%2===0}function M1(t,e){if(t=t.slice(-2),e=e.slice(-2),vt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],s=e[e.length-1];if(n===s||ty(n)&&ty(s)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&ty(t[0])&&ty(e[0])}let bw,vw;function bve(t){if(bw==null){const e=Po(t);bw=e.getParameter(e.MAX_TEXTURE_SIZE)}return bw}function vve(t){if(vw==null){const e=Po(t);vw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,vw)}function xve(t){if(t===0)return 0;let e;const n=Po(t);return so(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:so(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function so(t,e){return t.getExtension(e)!=null}function k_(t){try{if(Po(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function wve(t){if(t===0)return!1;const e=Po(t);if(t===1){if(!so(e,"OES_texture_float"))return!1}else if(!so(e,"EXT_color_buffer_float"))return!1;return GC(e)}function Sve(t){if(t===0)return!1;const e=Po(t);if(t===1){if(!so(e,"OES_texture_float")||!so(e,"WEBGL_color_buffer_float"))return!1}else{if(so(e,"EXT_color_buffer_float"))return GC(e);const s="EXT_color_buffer_half_float";if(so(e,s)){const r=e.getExtension(s);return Cve(e,r)}return!1}return GC(e)}function GC(t){const e=gE(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(o),i}function Cve(t,e){const n=gE(t,e),s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(s),t.deleteFramebuffer(i),a}function kve(t){return t!==2?!1:Po(t).fenceSync!=null}function u0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&T(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ve=se();Ve.registerFlag("HAS_WEBGL",()=>Ve.getNumber("WEBGL_VERSION")>0);Ve.registerFlag("WEBGL_VERSION",()=>k_(2)?2:k_(1)?1:0);Ve.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ve.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ve.get("WEBGL_VERSION")===2);Ve.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ve.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ve.registerFlag("WEBGL_PACK",()=>Ve.getBool("HAS_WEBGL"));Ve.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_CLIP",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_REDUCE",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_CONV_IM2COL",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ve.getBool("WEBGL_PACK"));Ve.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>bve(Ve.getNumber("WEBGL_VERSION")));Ve.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>vve(Ve.getNumber("WEBGL_VERSION")));Ve.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ve.getNumber("WEBGL_VERSION");return t===0?0:xve(t)});Ve.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ve.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!MN());Ve.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>wve(Ve.getNumber("WEBGL_VERSION")));Ve.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ve.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ve.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ve.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Sve(Ve.getNumber("WEBGL_VERSION")));Ve.registerFlag("WEBGL_FENCE_API_ENABLED",()=>kve(Ve.getNumber("WEBGL_VERSION")));Ve.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ve.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ve.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ve.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>MN()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ve.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ve.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ve.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ve.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ve.registerFlag("WEBGL_EXP_CONV",()=>!1);Ve.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ve.getBool("IS_TEST"));Ve.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ve.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ve.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ve.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(){let t,e,n,s,r,o,i,a,l,u;return se().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",s="in",r="texture",o="outputColor",i="out vec4 outputColor;",a=se().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",s="varying",r="texture2D",o="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:s,texture2D:r,output:o,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nc(t,e,n="index"){const s=je(e);return s.map((r,o)=>{const i=`int ${t[o]} = ${n} / ${r}`,a=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${r}`:`index -= ${t[o]} * ${r}`;return`${i}; ${a};`}).join("")}function Qv(t,e,n="index"){const s=je(e);return s.map((r,o)=>{const i=`int ${t[o]} = ${n} / outShapeStrides[${o}]`,a=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * outShapeStrides[${o}]`:`index -= ${t[o]} * outShapeStrides[${o}]`;return`${i}; ${a};`}).join("")}function Nve(t,e){const n=t.length,s=t.map(o=>`${e}[${o}]`),r=new Array(n-1);r[n-2]=s[n-1];for(let o=n-3;o>=0;--o)r[o]=`(${r[o+1]} * ${s[o+1]})`;return r}function Tve(t,e,n="index"){const s=t.map((o,i)=>i),r=Nve(s,e);return r.map((o,i)=>{const a=`int ${t[i]} = ${n} / ${r[i]}`,l=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${r[i]}`:`index -= ${t[i]} * ${r[i]}`;return`${a}; ${l};`}).join("")}function yE(t){const e=je(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function bE(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const XB=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:YB}=h6;function $ve(t,e,n){const s=[];if(t.forEach(f=>{const p=le(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?s.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(s.push(`uniform sampler2D ${f.name};`),s.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=vE(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:s.push(`uniform int ${f.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${f.name}Shape;`);break}s.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{s.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const r=s.join(`
`),o=t.map(f=>Eve(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=Os(),l=_ve(a);let u,c,d=Ove(a);return e.isPacked?(u=Ive(e.logicalShape,i,n.enableShapeUniforms),c=Dve(a)):(u=Rve(e.logicalShape,i,n.enableShapeUniforms),c=Ave(a)),n.packedInputs&&(d+=Mve),[d,l,c,r,u,o,n.userCode].join(`
`)}function Yh(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Yve(t,e);case 1:return Zve(t,e);case 2:return exe(t,e);case 3:return nxe(t,e);case 4:return rxe(t,e);case 5:return oxe(t);case 6:return ixe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function QB(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Xve(t);case 1:return Qve(t,e);case 2:return Jve(t,e);case 3:return txe(t,e);default:return sxe(t,e)}}function Eve(t,e,n=!1,s){let r="";n?r+=QB(t,s):r+=Yh(t,s);const o=t.shapeInfo.logicalShape,i=e.logicalShape;return o.length<=i.length&&(n?r+=axe(t,e):r+=lxe(t,e)),r}function Ive(t,e,n){switch(t.length){case 0:return ZB();case 1:return zve(t,e,n);case 2:return qve(t,e,n);case 3:return Vve(t,e,n);default:return Wve(t,e,n)}}function Rve(t,e,n){switch(t.length){case 0:return ZB();case 1:return Bve(t,e,n);case 2:return Kve(t,e,n);case 3:return Uve(t,e,n);case 4:return jve(t,e,n);case 5:return Gve(t,e);case 6:return Hve(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function _ve(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Ave(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Dve(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Ove(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Fve}
    ${Lve}
    ${Pve}
  `}const Fve=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Lve=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Pve=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Mve=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ZB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function zve(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function Bve(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Vve(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec3(b, r, c);
    }
  `}function Uve(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Qv(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const s=nc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function Wve(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2);let i=o,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)i*=t[t.length-u-1],a=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${a}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec${t.length}(${l});
    }
  `}function jve(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Qv(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const s=nc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function Gve(t,e){const n=nc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Hve(t,e){const n=nc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function qve(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(vt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const r=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec2(r, c);
    }
  `}function Kve(t,e,n){return vt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function sc(t){return`offset${t}`}function Xve(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),s=Os();return`
    vec4 ${n}() {
      return ${s.texture2D}(${e}, halfCR);
    }
  `}function Yve(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[r,o]=t.shapeInfo.texShape;if(r===1&&o===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=sc(n);if(e)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function Qve(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t.shapeInfo.texShape,o=Os();if(e)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${o.texture2D}(${n}, uv);
    }
  `}function Zve(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${Qh(t)}
      }
    `;const r=t.shapeInfo.texShape,o=r[0],i=r[1];if(i===1&&o===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=sc(n);return i===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${o}.0);
        return sampleTexture(${n}, uv);
      }
    `:o===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${o}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Jve(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),o=t.shapeInfo.texShape,i=o[0],a=o[1],l=Os();if(o!=null&&vt(n,o))return e?`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(e)return`
    vec4 ${r}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${r}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function exe(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),o=t.shapeInfo.texShape;if(o!=null&&vt(n,o)){if(e)return`
      float ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const h=o[0],f=o[1];return`
    float ${r}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:i,keptDims:a}=ea(n),l=i;if(l.length<n.length){const h=Zh(t,l),f=["row","col"];return`
      ${Yh(h,e)}
      float ${r}(int row, int col) {
        return ${r}(${Jh(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Qh(t)}
      }
    `;const u=o[0],c=o[1],d=sc(s);return c===1?e?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?e?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:e?`
      float ${r}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${r}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${s}, uv);
  }
`}function txe(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),o=t.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=Zh(t,h),m=["b","row","col"];return`
        ${QB(p,e)}
        vec4 ${r}(int b, int row, int col) {
          return ${r}(${Jh(m,f)});
        }
      `}const a=Os();if(e)return`
    vec4 ${r}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${r}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `}function nxe(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=ea(n),u=a;if(u.length<n.length){const m=Zh(t,u),g=["row","col","depth"];return`
        ${Yh(m,e)}
        float ${r}(int row, int col, int depth) {
          return ${r}(${Jh(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${i}, 1)));
        ${Qh(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],h=c[1],f=t.shapeInfo.flatOffset;if(h===o&&f==null)return e?`
      float ${r}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${r}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(h===i&&f==null)return e?`
      float ${r}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${r}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `;const p=sc(s);return e?`
    float ${r}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${r}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${s}, uv);
      }
  `}function sxe(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),r=Os();if(e)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${r.texture2D}(${n}, uv);
    }
  `;const o=t.shapeInfo.logicalShape,i=o.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(o[i-1]/2);let h=d*Math.ceil(o[i-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)f=`int b${m}, `+f,h*=o[i-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${s}(${f}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${r.texture2D}(${n}, uv);
    }
  `}function rxe(t,e){const n=t.shapeInfo.logicalShape,s=t.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[3],i=n[2]*o,a=n[1]*i,{newShape:l,keptDims:u}=ea(n);if(l.length<n.length){const b=Zh(t,l),v=["row","col","depth","depth2"];return`
      ${Yh(b,e)}
      float ${r}(int row, int col, int depth, int depth2) {
        return ${r}(${Jh(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${o}, 1)));
        ${Qh(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${s}Shape[3];`,m=`int stride1 = ${s}Shape[2] * stride2;`,g=`int stride0 = ${s}Shape[1] * stride1;`;if(f===a&&c==null)return e?`
      float ${r}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(f===o&&c==null)return e?`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${s}, uv);
      }
    `;const y=sc(s);return e?`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${y});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${y});
      return sampleTexture(${s}, uv);
    }
  `}function oxe(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e[4],o=e[3]*r,i=e[2]*o,a=e[1]*i,{newShape:l,keptDims:u}=ea(e);if(l.length<e.length){const m=Zh(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${Yh(m)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${Jh(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${o}, ${r})) +
          depth3;
        ${Qh(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${o}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===r&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=sc(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${o} +
          depth2 * ${r} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ixe(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:r,keptDims:o}=ea(e);if(r.length<e.length){const g=Zh(t,r),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Yh(g)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${Jh(y,o)});
      }
    `}const i=e[5],a=e[4]*i,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Qh(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===c&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=sc(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Qh(t){const e=t.name,n=le(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function axe(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),r="get"+s+"AtOutCoords",o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=YB(t.shapeInfo.logicalShape,e.logicalShape),l=Mt(i),u=i-o;let c;const d=["x","y","z","w","u","v"];o===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(b=>`coords.${d[b+u]} = 0;`).join(`
`);let h="";i<2&&o>0?h="coords":h=t.shapeInfo.logicalShape.map((b,v)=>`coords.${d[v+u]}`).join(", ");let f="return outputValue;";const m=le(t.shapeInfo.logicalShape)===1,y=le(e.logicalShape)===1;if(o===1&&!m&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)i===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=o-2,v=o-1;a.indexOf(b)>-1&&a.indexOf(v)>-1?f="return vec4(outputValue.x);":a.indexOf(b)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${r}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${s}(${h});
      ${f}
    }
  `}function lxe(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),r="get"+s+"AtOutCoords",o=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&vt(i,o))return`
      float ${r}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Mt(l),c=YB(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":l<2&&c.length>=1?h="coords = 0;":h=c.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${f[g+d]}`).join(", "),`
    float ${r}() {
      ${u} coords = getOutputCoords();
      ${h}
      return get${s}(${p});
    }
  `}function Mt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function vE(t,e,n){const{newShape:s,keptDims:r}=ea(e),o=e.length,i=t&&o===3&&e[0]===1,a=i?e.slice(1):s,l=!t&&o>1&&!vt(e,n)&&s.length<o||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:r}}function Zh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Jh(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(t,e,n,s){const r=n.map((c,d)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),o=r.map(c=>c.shapeInfo),i={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},a=$ve(r,i,e),l=nve(t.gl,a),u=t.createProgram(l);return se().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:o,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:o,outShapeInfo:i},JB(t,e,u)))}function JB(t,e,n){const s=[],r=[];let o,i,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),se().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,c),h.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),s.push(h)}if(e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),i=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)r.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:s,customUniformLocations:r,infLoc:l,nanLoc:u,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:i}}function N_(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,s)=>{const r=n.logicalShape,o=e[s],i=o.shape;if(!vt(r,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${i} must match`);if(n.isUniform&&o.isUniform)return;const a=n.texShape,l=o.isUniform?null:o.texData.texShape;if(!vt(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function cxe(t,e,n,s,r){e.program.enableShapeUniforms||(N_(e.inShapeInfos,n),N_([e.outShapeInfo],[s]));const o=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):t.setOutputMatrixTexture(o.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),se().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:d,shape:h,texShape:f}=e.variablesLocations[l];if(h){const{uniformShape:p}=vE(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(le(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(s.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(s.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(s.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(s.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(s.shape));break}if(e.outShapeStridesLocation){const l=je(s.shape);switch(s.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),e.program.customUniforms&&r)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],d=r[l];if(u.type==="float")t.gl.uniform1fv(c,d);else if(u.type==="vec2")t.gl.uniform2fv(c,d);else if(u.type==="vec3")t.gl.uniform3fv(c,d);else if(u.type==="vec4")t.gl.uniform4fv(c,d);else if(u.type==="int")t.gl.uniform1iv(c,d);else if(u.type==="ivec2")t.gl.uniform2iv(c,d);else if(u.type==="ivec3")t.gl.uniform3iv(c,d);else if(u.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function dxe(t,e,n){let s="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=vE(t.packedInputs,i.shape,l);let h="",f="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=je(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=i.shape.length,g=c.length===2&&vt(i.shape,l),y=le(i.shape)===1,b=Ru(i.shape,n.shape),v=!t.packedInputs&&m===n.shape.length&&vt(l,n.texData.texShape),x=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${m}_${v}_${u?d:""}_${c.length}_${y}_${b}_${g}_${h}_${f}_${p}_${x}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${l}_${a}`}});const r=t.userCode;let o=t.constructor.name;return o+="_"+s+"_"+r+`${se().getNumber("WEBGL_VERSION")}`,o}function Cs(t){return se().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hxe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Hp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Os();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Qv(["r","c","d"],e):nc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fxe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Hp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Os();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Qv(["r","c","d"],e):nc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pxe{constructor(e){this.variableNames=["A"],this.outTexUsage=Er.DOWNLOAD;const n=Os();this.outputShape=e,this.userCode=`
      ${XB}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mxe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Er.DOWNLOAD;const n=Os();this.outputShape=e,this.userCode=`
      ${XB}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gxe={R:0,G:1,B:2,A:3};class T_{constructor(e,n=!1,s="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Os();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)");let i="";for(let a=0;a<s.length;a++){const l=s[a];i+=`
          if(offset == ${a}) {
            result = values[${gxe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?bE():yE(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${s.length});

        flatIndex = idiv(flatIndex, ${s.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${r.texture2D}(A, uv);
          ${i}
        }
        ${r.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yxe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Os();this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);let r="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;r+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?bE():yE(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${r}

          ${s.output} = ${o};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t){const e=Os(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return tve(t,n)}function vxe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return ive(t,e)}function xxe(t){const e=new Uint16Array([0,1,2,2,1,3]);return ave(t,e)}function c0(t,e,n,s,r,o){uve(e,n);const i=lve(t),a=t.TEXTURE_2D;return Ae(t,()=>t.bindTexture(a,i)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),se().getNumber("WEBGL_VERSION")===1?Ae(t,()=>t.texImage2D(a,0,s,e,n,0,r,o,null)):Ae(t,()=>t.texStorage2D(a,1,s,e,n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function e7(t){return t.internalFormatFloat}function wxe(t,e,n,s){const[r,o]=l0(e,n);return c0(t,r,o,e7(s),s.textureFormatFloat,t.FLOAT)}function t7(t){return t.internalFormatHalfFloat}function Sxe(t,e,n,s){const[r,o]=l0(e,n);return c0(t,r,o,t7(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function n7(t){return t.downloadTextureFormat}function Cxe(t,e,n,s){const[r,o]=l0(e,n);return c0(t,r,o,n7(s),t.RGBA,t.UNSIGNED_BYTE)}function s7(t){return t.internalFormatPackedFloat}function kxe(t,e,n,s){const[r,o]=Xh(e,n);return c0(t,r,o,s7(s),t.RGBA,t.FLOAT)}function r7(t){return t.internalFormatPackedHalfFloat}function Nxe(t,e,n,s){const[r,o]=Xh(e,n);return c0(t,r,o,r7(s),t.RGBA,s.textureTypeHalfFloat)}function Txe(t,e,n){return Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),S_(t,e,"clipSpacePos",n,3,20,0)&&S_(t,e,"uv",n,2,20,12)}function $xe(t,e,n,s,r,o){Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;r instanceof Uint8Array?(i=new Uint8Array(n*s*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*s*4),a=t.FLOAT,l=o.internalFormatPackedFloat),i.set(r),se().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,s,t.RGBA,a,i)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,s,0,t.RGBA,a,i)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Exe(t,e,n){Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?se().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):se().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Ixe(t,e,n,s){const r=t.createBuffer();Ae(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,r));const a=4*4*e*n;return Ae(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Ae(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ae(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),r}function Rxe(t,e,n){const s=t,r=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,e),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,r),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),r}function _xe(t,e,n,s){const[r,o]=l0(e,n),i=4,a=new Uint8Array(Kbe(e*n,i));return Ae(t,()=>t.readPixels(0,0,r,o,s.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function Axe(t,e,n,s,r,o,i,a){const l=t,u=new Float32Array(Xbe(o,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Dxe(t,e,n){const s=new Float32Array(e*n*4);return Ae(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xw{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=se().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Gbe(n,e)):this.gl=Po(n),e=this.gl,se().getNumber("WEBGL_VERSION")===2){const o=e;this.createVertexArray=()=>Ae(o,()=>o.createVertexArray()),this.bindVertexArray=i=>Ae(o,()=>o.bindVertexArray(i)),this.deleteVertexArray=i=>Ae(o,()=>o.deleteVertexArray(i)),this.getVertexArray=()=>Ae(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(e!=null){const o=e.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ae(e,()=>o.createVertexArrayOES()),this.bindVertexArray=i=>Ae(e,()=>o.bindVertexArrayOES(i)),this.deleteVertexArray=i=>Ae(e,()=>o.deleteVertexArrayOES(i)),this.getVertexArray=()=>Ae(e,()=>e.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let s="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),se().getNumber("WEBGL_VERSION")===1){const o="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Z0(this.gl,o),so(this.gl,i))this.textureHalfFloatExtension=Z0(this.gl,i);else if(se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),so(this.gl,r))this.colorBufferHalfFloatExtension=Z0(this.gl,r);else if(se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",so(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(so(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=vxe(this.gl),this.indexBuffer=xxe(this.gl),this.framebuffer=cve(this.gl),this.textureConfig=gE(this.gl,this.textureHalfFloatExtension)}get debug(){return se().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ae(e,()=>e.finish()),Ae(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ae(e,()=>e.deleteFramebuffer(this.framebuffer)),Ae(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ae(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ae(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),wxe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Sxe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),Cxe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Exe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,s,r){this.throwIfDisposed(),$xe(this.gl,e,n,s,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),Nxe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),kxe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(C_(this.gl,this.framebuffer),this.outputTexture=null),Ae(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,s){return this.downloadMatrixDriver(e,()=>_xe(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,s,r,o,i){return Axe(this.gl,e,n,s,r,o,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Rxe(this.gl,e,n)}createBufferFromTexture(e,n,s){this.bindTextureToFrameBuffer(e);const r=Ixe(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,s;if(se().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),s=()=>{const i=r.clientWaitSync(o,0,0);return i===r.ALREADY_SIGNALED||i===r.CONDITION_SATISFIED},n=o}else se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(e,n,s){return this.downloadMatrixDriver(e,()=>Dxe(this.gl,n,s))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=bxe(n));const s=rve(n);Ae(n,()=>n.attachShader(s,this.vertexShader)),Ae(n,()=>n.attachShader(s,e)),ove(n,s);const r=Object.assign(s,{vao:this.createVertexArray()});return this.debug&&gw(n,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Ae(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Txe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Ae(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&gw(this.gl,this.program),Ae(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,s=!0){return this.throwIfDisposed(),s?hve(this.gl,e,n):fve(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ae(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),pve(this.gl,e,n,s)}setOutputMatrixTexture(e,n,s){this.setOutputMatrixTextureDriver(e,s,n)}setOutputPackedMatrixTexture(e,n,s){this.throwIfDisposed();const[r,o]=Xh(n,s);this.setOutputMatrixTextureDriver(e,r,o)}setOutputMatrixWriteRegion(e,n,s,r){this.setOutputMatrixWriteRegionDriver(s,e,r,n)}setOutputPackedMatrixWriteRegion(e,n,s,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&gw(this.gl,this.program),J0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ae(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ae(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Z0(this.gl,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=s.createQuery();return s.beginQuery(r.TIME_ELAPSED_EXT,o),o}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await eC(()=>this.disposed||this.isQueryAvailable(e,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(e,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(e,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const s=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=s.getQueryParameter(e,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),r=s.getQueryObjectEXT(e,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Oxe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let s;"setTimeoutCustom"in se().platform&&(s=se().platform.setTimeoutCustom.bind(se().platform)),eC(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,s)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),yw(this.gl,e,this.framebuffer),this.debug&&J0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(yw(this.gl,this.outputTexture,this.framebuffer),this.debug&&J0(this.gl)):C_(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(e,n,s){this.throwIfDisposed();const r=this.gl;yw(r,e,this.framebuffer),this.debug&&J0(r),this.outputTexture=e,Ae(r,()=>r.viewport(0,0,n,s)),Ae(r,()=>r.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(e,n,s,r){this.throwIfDisposed(),Ae(this.gl,()=>this.gl.scissor(e,n,s,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Oxe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Fxe,bincountImpl:o7,bincountReduceImpl:Lxe,bitwiseAndImpl:Pxe,castImpl:Mxe,ceilImpl:zxe,concatImpl:Bxe,equalImpl:Vxe,expImpl:Uxe,expm1Impl:Wxe,floorImpl:jxe,gatherNdImpl:Gxe,gatherV2Impl:Hxe,greaterImpl:qxe,greaterEqualImpl:Kxe,lessImpl:Xxe,lessEqualImpl:Yxe,linSpaceImpl:Qxe,logImpl:Zxe,maxImpl:Jxe,maximumImpl:ewe,minimumImpl:twe,multiplyImpl:nwe,negImpl:swe,notEqualImpl:rwe,prodImpl:owe,raggedGatherImpl:iwe,raggedRangeImpl:awe,raggedTensorToTensorImpl:lwe,rangeImpl:uwe,rsqrtImpl:cwe,scatterImpl:dwe,sigmoidImpl:hwe,simpleAbsImpl:i7,sliceImpl:fwe,sparseFillEmptyRowsImpl:pwe,sparseReshapeImpl:mwe,sparseSegmentReductionImpl:a7,sqrtImpl:gwe,staticRegexReplaceImpl:ywe,stridedSliceImpl:bwe,stringNGramsImpl:vwe,stringSplitImpl:xwe,stringToHashBucketFastImpl:wwe,subImpl:Swe,tileImpl:Cwe,topKImpl:kwe,transposeImpl:xE,uniqueImpl:Nwe}=Ege;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Rs(t,e){return e===1?[t]:l7(t,e)}function Twe(t,e){if(t===1)return"rc";let n="";for(let s=0;s<t;s++)n+=e[s],s<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $we{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Cs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Rs("rc",this.rank),s=Mt(this.rank),r=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${r}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let s=0;s<=1;s++)for(let r=0;r<=1;r++){let o=`${s===0?"r":"rp1"}, ${r===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)o=`${e[e.length-1-i]},`+o;n.push(o)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${e[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${r};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u7{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);let s="";for(let r=0;r<4;r++){let o="thisRC = rc;";r%2===1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),s+=`
        ${o}
        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${r>0?"}":""}
      `}this.userCode=`
      ${Ewe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?bE():yE(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${s}

        setOutput(result);
      }
    `}}function Ewe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?Tve(["r","c","d"],"inputShape"):nc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iwe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,s){const r=E_(n,s),o=I_(e,r,s);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const i=$_(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[o].pop();return this.usedTextures[o].push(l),l}let a;return r===os.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===os.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===os.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===os.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===os.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,s,r){if(this.freeTextures==null)return;const o=E_(s,r),i=I_(n,o,r);i in this.freeTextures||(this.freeTextures[i]=[]);const a=$_(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),l=se().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[i],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Rwe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function $_(t,e,n,s,r){const o=_we(e,s);let i;if(r){const[l,u]=Xh(t[0],t[1]);i=l*u}else{const[l,u]=l0(t[0],t[1]);i=l*u}const a=Rwe(n,o);return i*a}function _we(t,e){switch(t){case os.PACKED_2X2_FLOAT32:return s7(e);case os.PACKED_2X2_FLOAT16:return r7(e);case os.UNPACKED_FLOAT32:return e7(e);case os.UNPACKED_FLOAT16:return t7(e);case os.PACKED_4X1_UNSIGNED_BYTE:return n7(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Awe(t){return se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?os.PACKED_2X2_FLOAT32:os.UNPACKED_FLOAT32:t?os.PACKED_2X2_FLOAT16:os.UNPACKED_FLOAT16}function E_(t,e){if(t===Er.UPLOAD)return os.PACKED_2X2_FLOAT32;if(t===Er.RENDER||t==null)return Awe(e);if(t===Er.DOWNLOAD||t===Er.PIXELS)return os.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function I_(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ti{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const fo="if (isnan(x)) return x;",Dwe="return x;",R_="return abs(x);",Owe="return (x >= 0.0) ? x : (exp(x) - 1.0);",Fwe=fo+`
  return (x < 0.0) ? 0.0 : x;
`,Lwe=fo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ca="return x;",Pwe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mwe="return x;",zwe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Bwe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Vwe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Uwe="return 1.0 / (1.0 + exp(-1.0 * x));";class Pa{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);const n=e.length,s=Rs("rc",n),r=Mt(n),o=Twe(n,s),i=s.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe=Sv,Gwe=1e-7,Hwe=1e-4,ny={};function qwe(t){return t in ny||(ny[t]={}),ny[t]}const Kwe=se().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Xwe=600;function Ywe(){return se().global.screen==null?1024:se().global.screen.height*se().global.screen.width*window.devicePixelRatio*Xwe/1024/1024}class Zv extends z2{nextDataId(){return Zv.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!se().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof xw)n=e;else{const s=Po(se().getNumber("WEBGL_VERSION"),e);n=new xw(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=Po(se().getNumber("WEBGL_VERSION"));n=new xw(s),this.binaryCache=qwe(se().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Iwe(this.gpgpu),this.numMBBeforeWarning=Ywe(),this.texData=new IN(this,xo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,s,r,o,i){const a=this.makeTensorInfo(n,s),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[r,o]},l.texShape=[r,o];const u=ey(n),c=new T_(u,!1,i),d=this.runWebGLProgram(c,[a],s,[[r,o]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,s){if((se().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||se().getBool("DEBUG"))&&this.checkNumericalProblems(e),s==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:n,dtype:s,values:e,usage:Er.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,s,r,o){if(se().getBool("DEBUG")&&this.checkNumericalProblems(n),r==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:s,dtype:r,values:n,usage:Er.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:s,dtype:r,complexTensorInfos:o,slice:i,shape:a,isPacked:l}=n;if(i!=null){let h;l?h=new Pa(a,Ca):h=new ti(a,Ca);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:r}],r),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(s!=null)return this.convertAndCacheOnCPU(e);if(r==="string")return s;const u=this.activeTimers!=null;let c;u&&(c=bs());let d;if(r==="complex64"){const h=this.readSync(o.real.dataId),f=this.readSync(o.imag.dataId);d=Xi(h,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=bs()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:s,shape:r,slice:o,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(o!=null){let p;l?p=new Pa(r,Ca):p=new ti(r,Ca);const m=this.runWebGLProgram(p,[{dataId:e,shape:r,dtype:i}],i),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(s!=null)return this.convertAndCacheOnCPU(e);if(se().getBool("DEBUG")&&!se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&se().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(i!=="complex64"&&se().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...Q0(r))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];d=Xi(m,g)}else if(u==null)d=this.getValuesFromTexture(e);else{const p=le(r);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;Ae(p,()=>p.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&xo().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const s=this.texData.get(e),{values:r,shape:o,slice:i,dtype:a,isPacked:l,texture:u}=s;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let f;l?f=new Pa(o,Ca):f=new ti(o,Ca);const p=this.runWebGLProgram(f,[{dataId:e,shape:o,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw r!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=xo().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(r=>Gi(r));return lt(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return lt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const s=e[n];if(!Jbe(s))throw se().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:s,isPacked:r}=this.texData.get(e),o=le(n);if(se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...Q0(n)).subarray(0,o);return this.disposeIntermediateTensorInfo(h),p}const i=se().getBool("WEBGL_PACK")&&r===!0,a=i?ey(n):n,l=i?new mxe(a):new pxe(a),u=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,s=[];let r=!1;this.programTimersStack==null?(this.programTimersStack=s,r=!0):this.activeTimers.push(s),this.activeTimers=s,e();const o=ui(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=ui(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(o);a.kernelMs=EL(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:bs(),endMs:null}}endTimer(e){return se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=bs(),e)}async getQueryTime(e){if(se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:s}=this.texData.get(e);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:s,texShape:r,usage:o,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(r,s),this.textureManager.releaseTexture(n,r,o,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Kwe){return se().getBool("WEBGL_CPU_FORWARD")&&e.every(s=>this.texData.get(s.dataId).texture==null&&le(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Cr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return jwe(e.shape,n)}packedUnaryOp(e,n,s){const r=new Pa(e.shape,n),o=this.compileAndRun(r,[e],s);return xo().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const r=i7(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,r)}if(se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,R_,e.dtype);const n=new ti(e.shape,R_),s=this.compileAndRun(n,[e]);return xo().makeTensorFromTensorInfo(s)}makeTensorInfo(e,n,s){let r;if(n==="string"&&s!=null&&s.length>0&&ei(s[0])){const o=s.map(i=>ri(i));r=this.write(o,e,n)}else r=this.write(s,e,n);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:n}}makeOutput(e,n,s){return xo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,s),this)}unpackTensor(e){const n=new Wwe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new $we(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const s=[Fd(e.shape),...Ld(e.shape)],r={dtype:e.dtype,shape:s,dataId:e.dataId},o=[Fd(n),...Ld(n)],i=new u7(o,s),a=!0,l=[s],u=this.runWebGLProgram(i,[r],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const s=this.texData.get(e),{isPacked:r,shape:o,dtype:i}=s;if(n!=null){const h=le(o),f=n[0]*n[1]*4;T(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=ey(o);let l;r?l=new fxe(a):l=new hxe(a);const u=!0,c=[n??Q0(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,c,u,n);return{dtype:i,shape:o,dataId:d.dataId}}runWebGLProgram(e,n,s,r,o=!1,i){const a=this.makeTensorInfo(e.outputShape,s),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Hp.DENSE){const y=i??Q0(e.outputShape);l.texShape=y.map(b=>b*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),le(a.shape)===0)return l.values=Xn(a.dtype,0),a;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(y.dataId);if(b.texture==null){if(!e.packedInputs&&le(y.shape)<=se().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!b.isPacked!=!!e.packedInputs)y=b.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),b=this.texData.get(y.dataId);else if(b.isPacked&&!M1(b.shape,y.shape)){const v=y,x=y.shape;y.shape=b.shape,y=this.packedReshape(y,x),u.push(y),b=this.texData.get(y.dataId),v.shape=x}return{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},h=dxe(e,c,d),f=this.getAndSaveBinary(h,()=>uxe(this.gpgpu,e,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),se().get("ENGINE_COMPILE_ONLY")||cxe(this.gpgpu,f,c,d,r),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=se().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=bs();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!se().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,s,r,o=!1){return s=s||n[0].dtype,this.runWebGLProgram(e,n,s,r,o)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(se().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ee(()=>{if(!se().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=se().getBool("DEBUG");se().set("DEBUG",!1);const n=this.abs(qe(1e-8)).dataSync()[0];if(se().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Gwe:Hwe}uploadToGPU(e){const n=this.texData.get(e),{shape:s,dtype:r,values:o,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const u=this.activeTimers!=null;let c;u&&(c=bs());let d=n.texShape;if(d==null&&(d=yve(s,l),n.texShape=d),o!=null){const h=ey(s);let f,p=d[1],m=d[0];const g=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(l||!g)&&([p,m]=Xh(d[0],d[1])),l?f=new yxe(h,g):f=new T_(h,g);const y=g?[m,p]:d,b=this.makeTensorInfo(y,r),v=this.texData.get(b.dataId);g?v.usage=Er.PIXELS:v.usage=Er.UPLOAD,v.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,m,o);const x=[[m,p]],S=this.runWebGLProgram(f,[b],r,x,!0),k=this.texData.get(S.dataId);n.texShape=k.texShape,n.isPacked=k.isPacked,n.usage=k.usage,se().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=k.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(b),u&&(this.uploadWaitMs+=bs()-c)}else{const h=this.acquireTexture(d,a,r,l);n.texture=h}}convertAndCacheOnCPU(e,n){const s=this.texData.get(e),{dtype:r}=s;return n!=null&&(s.values=Qwe(n,r)),s.values}acquireTexture(e,n,s,r){if(this.numBytesInGPU+=this.computeBytes(e,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,r)}computeBytes(e,n){return e[0]*e[1]*Rp(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const s=new Promise(r=>{try{this.checkCompletion_(n),r(!0)}catch(o){throw o}});e.push(s)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await y$(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(KB(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:s,infLoc:r,nanLoc:o,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=JB(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=s,e.infLoc=r,e.nanLoc=o,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,s){e.channels=e.channels||"RGBA";const{texture:r,height:o,width:i,channels:a}=e,l=xo().backend;if(!l.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(r,n,s,o,i,a);return xo().makeTensorFromDataId(u,n,s,l)}}Zv.nextDataId=0;function Qwe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let s=0;s<n.length;++s)n[s]=Math.round(t[s]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */zN()&&VN("webgl",()=>new Zv,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wE=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Mu{constructor(e,n,s){this.variableNames=["A","B"],this.outputShape=st(n,s),this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class ef{constructor(e,n,s,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=st(n,s);const o=this.outputShape.length;this.enableShapeUniforms=Cs(o);let i="";if(r)if(o===0||le(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Mt(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Rs("coords",o);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pr(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const Zwe={kernelName:dh,backendName:"webgl",kernelFunc:pr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $l(t){const{inputs:e,backend:n}=t,{real:s,imag:r}=e,o=n.makeTensorInfo(s.shape,"complex64"),i=n.texData.get(o.dataId),a=pr({inputs:{x:s},backend:n}),l=pr({inputs:{x:r},backend:n});return i.complexTensorInfos={real:a,imag:l},o}const Jwe={kernelName:K2,backendName:"webgl",kernelFunc:$l};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7="return (a < 0.) ? b * a : a;",d7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function eSe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{alpha:o}=s,i=n.makeTensorInfo([],"float32",ta(o,"float32")),a=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ef(d7,r.shape,i.shape):new Mu(c7,r.shape,i.shape),l=n.runWebGLProgram(a,[r,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const tSe={kernelName:Xm,backendName:"webgl",kernelFunc:eSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h7="return (a < 0.) ? b * a : a;",f7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function nSe(t){const{inputs:e,backend:n}=t,{x:s,alpha:r}=e,o=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ef(f7,s.shape,r.shape):new Mu(h7,s.shape,r.shape);return n.runWebGLProgram(o,[s,r],"float32")}const sSe={kernelName:pg,backendName:"webgl",kernelFunc:nSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tf="if (isnan(x)) return x;";function Tt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:s}){return({inputs:r,backend:o})=>{const{x:i}=r,a=o,l=s||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),h=n(d.values,l);return a.makeTensorInfo(i.shape,l,h)}const u=se().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new Pa(i.shape,e):c=new ti(i.shape,t),a.runWebGLProgram(c,[i],l)}}function ms({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:r,dtype:o}){return({inputs:i,backend:a})=>{const{a:l,b:u}=i,c=a;if(s&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(v=>{const[x,w]=v,S={dataId:x.dataId,dtype:x.dtype,shape:l.shape},k={dataId:w.dataId,dtype:w.dtype,shape:u.shape},N=new Mu(t,l.shape,u.shape);return c.runWebGLProgram(N,[S,k],Ws(x.dtype,w.dtype))}),b=$l({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),b}const d=o||Ws(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&r!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Yi(p):p,y=l.dtype==="string"?Yi(m):m,[b,v]=r(l.shape,u.shape,g,y,d),x=c.makeTensorInfo(v,d),w=c.texData.get(x.dataId);return w.values=b,x}const h=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new ef(e,l.shape,u.shape,n):f=new Mu(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function qp(t,e=!1){if(t==="linear")return e?Mwe:Dwe;if(t==="relu")return e?Bwe:Fwe;if(t==="elu")return e?zwe:Owe;if(t==="relu6")return e?Vwe:Lwe;if(t==="prelu")return e?f7:h7;if(t==="leakyrelu")return e?d7:c7;if(t==="sigmoid")return e?Uwe:Pwe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p7{constructor(e,n,s,r=!1,o=!1,i=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=Cs(this.outputShape.length);const c=r?e[1]:e[2],d=Math.ceil(c/2),h=r?"i * 2, rc.y":"rc.y, i * 2",f=o?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let v="rc.x",x="rc.x";e[0]<n[0]?v=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(x=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${x};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class A_{constructor(e,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=st(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D_="return a * b;";function SE(t){const{inputs:e,backend:n}=t,{a:s,b:r}=e,o=Ws(s.dtype,r.dtype);if(s.dtype==="complex64"){const a=n.texData.get(s.dataId),l=n.texData.get(r.dataId),u=new A_(__.REAL,s.shape,r.shape),c=new A_(__.IMAG,s.shape,r.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:r.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:r.shape}],h=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),p=$l({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([s,r])){const a=n.texData.get(s.dataId),l=n.texData.get(r.dataId),[u,c]=nwe(s.shape,r.shape,a.values,l.values,o),d=n.makeTensorInfo(c,o),h=n.texData.get(d.dataId);return h.values=u,d}let i;return se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new ef(D_,s.shape,r.shape):i=new Mu(D_,s.shape,r.shape),n.runWebGLProgram(i,[s,r],o)}const rSe={kernelName:xh,backendName:"webgl",kernelFunc:SE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSe(t,e,n){const s=[Fd(t.shape),...Ld(t.shape)],r={dtype:t.dtype,shape:s,dataId:t.dataId},o=[Fd(e),...Ld(e)],i=new u7(o,s),a=!0,l=[s],u=n.runWebGLProgram(i,[r],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ne(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{shape:o}=s,i=n,a=le(r.shape),l=_N(o,a),u=le(l);T(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${r.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(r.dataId);return c.isPacked&&!M1(r.shape,l)&&!(c.texture!==null&&M1(c.shape,l))?oSe(r,l,i):(i.incRef(r.dataId),{dataId:r.dataId,shape:l,dtype:r.dtype})}const iSe={kernelName:gg,backendName:"webgl",kernelFunc:Ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O_{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:r,inSize:o,outSize:i}=e;this.outputShape=[r,i];const a=Math.floor(s/4)*4,l=s%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${ku(d)?d.toPrecision(2):d}, ones);`}let c="";o%s>0&&(c=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aSe{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:r,inSize:o,outSize:i}=e;this.outputShape=[r,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(s/4)*4,d=s%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";o%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],s=Ov(n);e.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return e}function oc(t,e,n,s){const r=lSe(t.shape);let o=t;for(let i=0;i<r.length;i++){const{inSize:a,windowSize:l,outSize:u}=r[i];let c,d;n==="mean"?c=i===0?new O_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new O_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new aSe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),d=o,o=s.runWebGLProgram(c,[o],e),d.dataId!==t.dataId&&s.disposeIntermediateTensorInfo(d)}return o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uSe{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[n[i]];this.outputShape=s,this.rank=s.length;const r=Mt(this.rank),o=cSe(n);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}}function cSe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let r=0;r<t.length;r++)s[t[r]]=n[r];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dSe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(e.length);for(let c=0;c<s.length;c++)s[c]=e[n[c]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=Mt(this.rank),o=l7("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=o[c];const a=`vec2(${i.slice(-2).join()})`,l=`++${o[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jv(t,e,n){const s=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dSe(t.shape,e):new uSe(t.shape,e);return n.runWebGLProgram(s,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(t,e,n,s){const r=e,o=t.shape.length,i=pt(r,t.shape);let a=i;const l=dn(a,o),u=l!=null;let c=t;u&&(c=Jv(t,l,s),a=kn(a.length,o)),fs("sum",a,o);const[d,h]=Zn(c.shape,a);let f=d;n&&(f=Cn(d,i));const p=le(h),g=le(t.shape)/p,y=Ne({inputs:{x:c},attrs:{shape:[g,p]},backend:s}),b=Kb(t.dtype),v=oc(y,b,"sum",s),x=Ne({inputs:{x:v},attrs:{shape:f},backend:s});return s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(v),u&&s.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ex(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s;return hSe(r,o,i,n)}const fSe={kernelName:Sg,backendName:"webgl",kernelFunc:ex};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function As(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{perm:o}=s,i=n,a=r.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=r.shape[o[c]];let u;if(i.shouldExecuteOnCPU([r])){const d=i.texData.get(r.dataId).values,h=xE(d,r.shape,r.dtype,o,l);u=i.makeTensorInfo(l,r.dtype);const f=i.texData.get(u.dataId);f.values=h}else u=Jv(r,o,i);return u}const pSe={kernelName:hu,backendName:"webgl",kernelFunc:As};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7=1e3;function z1({a:t,b:e,transposeA:n,transposeB:s,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],h=s?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],p=s?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=le(m),b=le(g),x=st(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);T(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=n?[y,d,f]:[y,f,d],S=s?[b,p,h]:[b,h,p],k=Ne({inputs:{x:t},backend:r,attrs:{shape:w}}),N=Ne({inputs:{x:e},backend:r,attrs:{shape:S}}),$=[k,N],I=Math.max(y,b),A=n?k.shape[1]:k.shape[2],O=o!=null,P=i!=null,F=l==="leakyrelu",G=l!=null?qp(l,!0):null,q=O||P||F||G!=null;let Z;if((f===1||p===1)&&A>m7&&q===!1){let H=k,K=N;n&&(H=As({inputs:{x:k},backend:r,attrs:{perm:[0,2,1]}}),$.push(H)),s&&(K=As({inputs:{x:N},backend:r,attrs:{perm:[0,2,1]}}),$.push(K));const ne=p!==1,D=p===1;let X=H;ne&&(X=Ne({inputs:{x:H},backend:r,attrs:{shape:[I,A,1]}}),$.push(X));const te=p===1?2:1;let ue=K;D&&(ue=Ne({inputs:{x:K},backend:r,attrs:{shape:[I,1,A]}}),$.push(ue));const ie=SE({inputs:{a:X,b:ue},backend:r});Z=ex({inputs:{x:ie},backend:r,attrs:{axis:te,keepDims:!0}}),$.push(ie)}else{const H=Ws(t.dtype,e.dtype),K=new p7(w,S,[I,f,p],n,s,O,G,P,F),ne=[k,N];if(o!=null&&ne.push(o),P&&ne.push(i),F){const D=r.makeTensorInfo([],"float32",ta(a,"float32"));ne.push(D),$.push(D)}Z=r.runWebGLProgram(K,ne,H)}const B=Ne({inputs:{x:Z},backend:r,attrs:{shape:x}});$.push(Z);for(const H of $)r.disposeIntermediateTensorInfo(H);return B}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSe(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;return z1({a:r,b:o,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const gSe={kernelName:_p,backendName:"webgl",kernelFunc:mSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F_="return abs(x);";function ySe(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const o=n.texData.get(s.dataId),i=i7(o.values);return n.makeTensorInfo(s.shape,s.dtype,i)}let r;return se().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new Pa(s.shape,F_):r=new ti(s.shape,F_),n.runWebGLProgram(r,[s],s.dtype)}const bSe={kernelName:$m,backendName:"webgl",kernelFunc:ySe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSe=fo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,xSe=Tt({opSnippet:vSe}),wSe={kernelName:Gd,backendName:"webgl",kernelFunc:xSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SSe=fo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,CSe=Tt({opSnippet:SSe}),kSe={kernelName:Hd,backendName:"webgl",kernelFunc:CSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L_="return a + b;",NSe=ms({opSnippet:L_,packedOpSnippet:L_,supportsComplex:!0,cpuKernelImpl:Fxe}),TSe={kernelName:qu,backendName:"webgl",kernelFunc:NSe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Se{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const s=[];this.variableNames.forEach(o=>{s.push(`float v${o} = get${o}AtOutCoords();`)});const r=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${r};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ESe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const s=[];this.variableNames.forEach(o=>{s.push(`vec4 v${o} = get${o}AtOutCoords();`)});const r=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${r};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $y(t){const{inputs:e,backend:n}=t,s=e;if(s.length===1)return pr({inputs:{x:s[0]},backend:n});if(s.length>se().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),u=$y({inputs:s.slice(0,l),backend:n}),c=$y({inputs:s.slice(l),backend:n});return $y({inputs:[u,c],backend:n})}const r=s.map(l=>l.dtype).reduce((l,u)=>Ws(l,u)),o=s.map(l=>l.shape),a=se().getBool("WEBGL_PACK")?new ESe(s[0].shape,o):new $Se(s[0].shape,o);return n.runWebGLProgram(a,s,r)}const ISe={kernelName:Em,backendName:"webgl",kernelFunc:$y};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s,a=r.shape.length,l=pt(o,r.shape);let u=l;const c=dn(u,a);let d=r;c!=null&&(d=As({inputs:{x:r},backend:n,attrs:{perm:c}}),u=kn(u.length,a)),fs("all",u,a);const[h,f]=Zn(d.shape,u),p=le(f),m=Ne({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=oc(m,m.dtype,"all",n);let y;if(i){const b=Cn(h,l);y=Ne({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Ne({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const _Se={kernelName:U2,backendName:"webgl",kernelFunc:RSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s,a=r.shape.length,l=pt(o,r.shape);let u=l;const c=dn(u,a);let d=r;c!=null&&(d=As({inputs:{x:r},backend:n,attrs:{perm:c}}),u=kn(u.length,a)),fs("any",u,a);const[h,f]=Zn(d.shape,u),p=le(f),m=Ne({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=oc(m,m.dtype,"any",n);let y;if(i){const b=Cn(h,l);y=Ne({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Ne({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const DSe={kernelName:W2,backendName:"webgl",kernelFunc:ASe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OSe{constructor(e,n,s){this.variableNames=["A"];const{windowSize:r,batchSize:o,outSize:i}=e;s||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];const a=n==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FSe{constructor(e,n,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,T(e.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const o=e[e.length-1],i=Math.ceil(o/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Mt(l),c=Rs("coords",l);let d,h;if(i===1){h=l+1;const N=Mt(h);d=`
        ${N} sourceLocR = ${N}(${c.join()}, 0);
        ++${c[l-1]};
        ${N} sourceLocG = ${N}(${c.join()}, 0);
        ++${c[l-2]};
        ${N} sourceLocA = ${N}(${c.join()}, 0);
        --${c[l-1]};
        ${N} sourceLocB = ${N}(${c.join()}, 0);
        --${c[l-2]};`}else h=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map(N=>"int "+N),g=Rs("sourceLocR",h-1).concat("inIdx.r"),y=Rs("sourceLocG",h-1).concat("inIdx.g"),b=Rs("sourceLocB",h-1).concat("inIdx.b"),v=Rs("sourceLocA",h-1).concat("inIdx.a"),x=s==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${v.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,k=r?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${k}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g7(t,e,n,s=null){let r=e.shape[0],o=e.shape[1];s!=null&&(r=s.shape[0],o=s.shape[1]);const i=Ov(o),a={windowSize:i,inSize:o,batchSize:r,outSize:Math.ceil(o/i)},l=new OSe(a,n,s==null),u=[e];s!=null&&u.push(s);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=g7(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function y7(t,e,n,s=null){const r=s!=null?s.shape:e.shape,o=r[r.length-1],i=Ov(o),a=new FSe(r,i,n,s==null),l=s==null?[e]:[e,s],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=y7(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function b7(t,e,n,s){const r=[n];if(fs("arg"+s.charAt(0).toUpperCase()+s.slice(1),r,e.shape.length),!se().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const o=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),o.push(l));const[u,c]=Zn(l.shape,r),d=le(c),h=Ne({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});o.push(h);const f=g7(t,h,s);o.push(f);const p=Ne({inputs:{x:f},backend:t,attrs:{shape:u}});return o.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return y7(t,e,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o}=s;let i=pt(o,r.shape);const a=dn(i,r.shape.length);let l=r;const u=[];a!=null&&(l=As({inputs:{x:r},backend:n,attrs:{perm:a}}),u.push(l),i=kn(i.length,l.shape.length)),fs("argMax",[i[0]],l.shape.length);const c=b7(n,l,i[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const PSe={kernelName:Im,backendName:"webgl",kernelFunc:LSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o}=s;let i=pt(o,r.shape);const a=dn(i,r.shape.length);let l=r;const u=[];a!=null&&(l=As({inputs:{x:r},backend:n,attrs:{perm:a}}),u.push(l),i=kn(i.length,l.shape.length)),fs("argMin",[i[0]],l.shape.length);const c=b7(n,l,i[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const zSe={kernelName:Rm,backendName:"webgl",kernelFunc:MSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BSe=fo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,VSe=Tt({opSnippet:BSe}),USe={kernelName:qd,backendName:"webgl",kernelFunc:VSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WSe=fo+"return log(x + sqrt(x * x + 1.0));",jSe=Tt({opSnippet:WSe}),GSe={kernelName:Kd,backendName:"webgl",kernelFunc:jSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe=fo+`
  return atan(x);
`,qSe=Tt({opSnippet:HSe}),KSe={kernelName:Xd,backendName:"webgl",kernelFunc:qSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSe=wE+`
  return atan(a, b);
`,YSe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rc+`
  return result;
`,QSe=ms({opSnippet:XSe,packedOpSnippet:YSe}),ZSe={kernelName:Qd,backendName:"webgl",kernelFunc:QSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JSe=fo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,eCe=Tt({opSnippet:JSe}),tCe={kernelName:Yd,backendName:"webgl",kernelFunc:eCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kp{constructor(e,n,s,r=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(m||(b="-1.0 / 1e-20"),s){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?o?g:y:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const v="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,S=i%4,k=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${k}
          }

          int xC = xCCorner + ${w};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${k}
          }
        }
        setOutput(${x});
      }
    `}}class CE{constructor(e,n,s,r=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg";let x="0.0";if(v||(x="-1.0 / 1e-20"),s){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const k=Math.floor(i/4)*4,N=i%4,$=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${b});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${k}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${$}
            }

            int xC = xCCorner + ${k};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${$}
            }
          }
        }
        setOutput(${S});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;u0(r,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=s,u=1;T(hs(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=co(r.shape,o,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&vt(c.inShape,c.outShape))return pr({inputs:{x:r},backend:n});const d=new Kp(c,"avg",!1);return n.runWebGLProgram(d,[r],"float32")}const sCe={kernelName:_m,backendName:"webgl",kernelFunc:nCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s,c=[1,1,1],d=na(r.shape,o,i,c,a,l,u),h=new CE(d,"avg",!1);return n.runWebGLProgram(h,[r],"float32")}const oCe={kernelName:Am,backendName:"webgl",kernelFunc:rCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,h=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class aCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,g=f-1-e.padInfo.left,y=1/(n*s*r);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o}=e,i=o,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],h=na(i.shape,a,l,d,u,c),f=new aCe(h);return n.runWebGLProgram(f,[r],i.dtype)}const uCe={kernelName:G2,backendName:"webgl",kernelFunc:lCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cCe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o}=e,i=o;u0([r,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=co(i.shape,a,l,1,u),d=new iCe(c);return n.runWebGLProgram(d,[r],i.dtype)}const dCe={kernelName:j2,backendName:"webgl",kernelFunc:cCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(t){const{inputs:e,backend:n,attrs:s}=t,{a:r,b:o}=e,{transposeA:i,transposeB:a}=s;return z1({a:r,b:o,transposeA:i,transposeB:a,backend:n})}const fCe={kernelName:Dm,backendName:"webgl",kernelFunc:hCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pCe{constructor(e,n,s,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],st(e,n),st(e,s);let a="0.0";r!=null&&(st(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";o!=null&&(st(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mCe{constructor(e,n,s,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],st(e,n),st(e,s);let a="vec4(0.0)";r!=null&&(st(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";o!=null&&(st(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gCe=({inputs:t,backend:e,attrs:n})=>{const{x:s,mean:r,variance:o,offset:i,scale:a}=t;T(r.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),T(i==null||r.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),T(a==null||r.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[s,r,o];let c=null;i!=null&&(c=i.shape,u.push(i));let d=null;a!=null&&(d=a.shape,u.push(a));const h=se().getBool("WEBGL_PACK_NORMALIZATION")?new mCe(s.shape,r.shape,o.shape,c,d,l):new pCe(s.shape,r.shape,o.shape,c,d,l);return e.runWebGLProgram(h,u,u[0].dtype)},yCe={kernelName:Hm,backendName:"webgl",kernelFunc:gCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bCe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Mt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=vCe(this.rank);let r;const o=e.map((i,a)=>`sourceLoc.${HC[a]} = start[${a}] + coords.${HC[a]};`);r=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${r}
        setOutput(getSource(${s}));
      }
    `}}const HC=["x","y","z","w","u","v"];function vCe(t){if(t===1)return"sourceLoc";if(t<=6)return HC.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xCe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Mt(this.rank),s=Rs("coords",this.rank),r=Rs("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${r.slice(-2).join()})`,i=`getChannel(getSource(${r.join()}), ${o})`,a=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${i};
        --${r[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${e[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${r[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wCe(t,e,n,s){const r=s.texData.get(t.dataId),o=s.makeTensorInfo(n,t.dtype),i=s.texData.get(o.dataId);Object.assign(i,r),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=m$(e,je(t.shape));r.slice&&(a+=r.slice.flatOffset),i.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||t.dataId};const l=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,l+1),o}function nf(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:o,size:i}=s,[a,l]=Dv(r,o,i);if(h$(r,a,l),le(l)===0)return n.makeTensorInfo(l,r.dtype,[]);if(n.shouldExecuteOnCPU([r])||r.dtype==="string"){const d=n.texData.get(r.dataId),h=fwe(d.values,a,l,r.shape,r.dtype);return n.makeTensorInfo(l,r.dtype,h)}const{isPacked:u}=n.texData.get(r.dataId),c=p$(r.shape,a,l);if(u||!c){const d=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xCe(l):new bCe(l),h=[a];return n.runWebGLProgram(d,[r],r.dtype,h)}return n.uploadToGPU(r.dataId),wCe(r,a,l,n)}const SCe={kernelName:wg,backendName:"webgl",kernelFunc:nf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CCe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:o,crops:i}=s;T(r.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((b,v)=>b*v),l=Yg(r.shape,o,a),u=Qg(l.length,o.length),c=Zg(r.shape,o,a),d=w$(i,o.length),h=S$(c,i,o.length),f=[],p=Ne({inputs:{x:r},backend:n,attrs:{shape:l}}),m=As({inputs:{x:p},backend:n,attrs:{perm:u}}),g=Ne({inputs:{x:m},backend:n,attrs:{shape:c}}),y=nf({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(g),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},kCe={kernelName:Om,backendName:"webgl",kernelFunc:CCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:o}=e,{size:i}=s,a=n.readSync(r.dataId),l=n.readSync(o.dataId),u=o7(a,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}const TCe={kernelName:H2,backendName:"webgl",kernelFunc:NCe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ce=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,ECe=`
  return float(int(a.r) & int(b.r));
`;function ICe(t){const{inputs:e,backend:n}=t,{a:s,b:r}=e,o=se().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=se().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([s,r])||i===1){const l=n.texData.get(s.dataId).values,u=n.texData.get(r.dataId).values,[c,d]=Pxe(s.shape,r.shape,l,u,s.dtype),h=n.makeTensorInfo(d,s.dtype),f=n.texData.get(h.dataId);return f.values=c,h}let a;return o?a=new ef($Ce,s.shape,r.shape,!1):a=new Mu(ECe,s.shape,r.shape),n.runWebGLProgram(a,[s,r],s.dtype)}const RCe={kernelName:Fm,backendName:"webgl",kernelFunc:ICe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ce(t){const{inputs:e,backend:n}=t,{s0:s,s1:r}=e,o=n.readSync(s.dataId),i=n.readSync(r.dataId),a=st(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const ACe={kernelName:q2,backendName:"webgl",kernelFunc:_Ce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DCe="return float(a != b);",v7=ms({opSnippet:DCe,cpuKernelImpl:rwe,dtype:"bool"}),OCe={kernelName:ug,backendName:"webgl",kernelFunc:v7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.texData.get(s.dataId);return pr({inputs:{x:r.complexTensorInfos.real},backend:n})}const FCe={kernelName:$b,backendName:"webgl",kernelFunc:d0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LCe="return float(int(x));";function PCe(t,e){const n=new ti(t.shape,LCe),s=e.runWebGLProgram(n,[t],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qC(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dtype:o}=s;if(o==="complex64"){if(r.dtype==="complex64")return pr({inputs:{x:r},backend:n});const i=xn(r.shape),a=qC({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),l=$l({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(r.dtype==="complex64"){const i=d0({inputs:{input:r},backend:n}),a=qC({inputs:{x:i},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(i),a}if(!AN(r.dtype,o)){const i=pr({inputs:{x:r},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:o}}if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId).values,[a,l,u]=Mxe(i,r.shape,r.dtype,o);return n.makeTensorInfo(a,l,u)}if(o==="int32")return PCe(r,n);if(o==="bool"){const i=n.makeTensorInfo([],"bool",Xn("bool",1)),l=v7({inputs:{a:r,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${r.dtype} to ${o}`)}const MCe={kernelName:Zd,backendName:"webgl",kernelFunc:qC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_="return ceil(x);",zCe=Tt({opSnippet:P_,packedOpSnippet:P_,cpuKernelImpl:zxe}),BCe={kernelName:Jd,backendName:"webgl",kernelFunc:zCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VCe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UCe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WCe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{clipValueMin:o,clipValueMax:i}=s;let a;se().getBool("WEBGL_PACK_CLIP")?a=new UCe(r.shape):a=new VCe(r.shape);const l=[[o],[i]];return n.runWebGLProgram(a,[r],r.dtype,l)}const jCe={kernelName:eh,backendName:"webgl",kernelFunc:WCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GCe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function HCe(t){const{inputs:e,backend:n}=t,{x:s}=e,r=n.texData.get(s.dataId),o=new GCe(s.shape),i=[M_(s,r.complexTensorInfos.real),M_(s,r.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}const qCe={kernelName:Lm,backendName:"webgl",kernelFunc:HCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KCe{constructor(e){this.outputShape=[],this.outputShape=ii(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];s.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const r=n.length,o=n[n.length-1];s.push(`else setOutput(getT${r}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XCe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ii(e,n);const s=this.outputShape,r=s.length,o=Mt(r),i=Rs("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),d=a.join();let h=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];h+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${sy(a,u,g)}),
            vec2(${sy(c,u,g)}));
        }`}const f=l.length,p=l[l.length-1];h+=`
        return getChannel(
          getT${f}(${sy(a,u,p)}),
          vec2(${sy(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[r-1]} = ${i[r-1]} + 1;
        if (${i[r-1]} < ${s[r-1]}) {
          result.g = getValue(${i});
        }

        ${i[r-2]} = ${i[r-2]} + 1;
        if (${i[r-2]} < ${s[r-2]}) {
          result.a = getValue(${i});
        }

        ${i[r-1]} = ${i[r-1]} - 1;
        if (${i[r-2]} < ${s[r-2]} &&
            ${i[r-1]} < ${s[r-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function sy(t,e,n){const s=t.indexOf(e);return t.map((o,i)=>i===s?`${o} - ${n}`:o).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tx(t){const{inputs:e,backend:n}=t,{input:s}=e,r=n.texData.get(s.dataId);return pr({inputs:{x:r.complexTensorInfos.imag},backend:n})}const YCe={kernelName:fb,backendName:"webgl",kernelFunc:tx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jf(t,e,n){const s=t[0].dtype;if(s==="complex64"){const f=t.map(b=>d0({inputs:{input:b},backend:n})),p=t.map(b=>tx({inputs:{input:b},backend:n})),m=jf(f,e,n),g=jf(p,e,n),y=$l({inputs:{real:m,imag:g},backend:n});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),p.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let r=n.shouldExecuteOnCPU(t);if(s==="string"&&(r=!0),r){const f=t.map(x=>{const S=[-1,le(x.shape.slice(e))];return Ne({inputs:{x},backend:n,attrs:{shape:S}})}),p=f.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=ii(f.map(x=>x.shape),1),g=f[0].shape[0]===1,y=Bxe(p,m,s,g),b=ii(t.map(x=>x.shape),e),v=n.makeTensorInfo(b,s,y);return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const o=t.filter(f=>le(f.shape)>0),i=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){const f=i?new ti(t[0].shape,Ca):new Pa(t[0].shape,Ca);return n.runWebGLProgram(f,t,s)}const a=se().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){const f=[];for(let m=0;m<o.length;m+=a){const g=o.slice(m,m+a);f.push(jf(g,e,n))}const p=jf(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(i){const f=new XCe(o.map(p=>p.shape),e);return n.runWebGLProgram(f,o,s)}const{tensors2D:l,outShape:u}=QCe(o,e,n),c=new KCe(l.map(f=>f.shape)),d=n.runWebGLProgram(c,l,s);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=Ne({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),h}function QCe(t,e,n){const s=ii(t.map(o=>o.shape),e);return{tensors2D:t.map(o=>Ne({inputs:{x:o},attrs:{shape:[-1,le(o.shape.slice(e))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s,o=pt(r,e[0].shape)[0],i=e.map(u=>u.shape);b$(i,o);const a=ii(e.map(u=>u.shape),o);if(le(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>le(u.shape)>0);return l.length===1?pr({inputs:{x:l[0]},backend:n}):jf(l,o,n)}const ZCe={kernelName:Pm,backendName:"webgl",kernelFunc:x7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w7{constructor(e,n=!1,s=null,r=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,b=g?2:3,v=g?3:1;let x="",w="";s&&(r?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:o?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:x=`
          float activation(float x) {
            ${s}
          }
        `,w="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${w}
        setOutput(result);
      }
    `}}class JCe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,s=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${s}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S7{constructor(e,n=!1,s=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)h+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;h+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)h+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const y=g*2;if(h+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<c&&(i%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?h+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const b=i%2===0?B2(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:h+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):b===1?h+=`
                     xC${y+1} = xTexelC${y};
                     `:h+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(i%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(h+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(h+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(h+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",p="";s&&(r?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${s}
         }`:o?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${s}
         }`:f=`vec4 activation(vec4 x) {
           ${s}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eke{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Cs(this.outputShape.length);const{dataFormat:s}=n,r=Os(),o=s==="channelsLast",i=o?1:2,a=o?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${r.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function C7({x:t,filter:e,convInfo:n,backend:s,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,u=s.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(o!=null){const x=B1(o.shape,f);x!=null&&(o=Ne({inputs:{x:o},backend:s,attrs:{shape:x}}),y.push(o))}if(r!=null){const x=B1(r.shape,f);x!=null&&(r=Ne({inputs:{x:r},backend:s,attrs:{shape:x}}),y.push(r))}if(!((d===1||h===1)&&c>m7)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&vt(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,T(M1(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const k=Ne({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(k);const N=z1({a:w,b:k,backend:s,transposeA:p,transposeB:m,bias:r,activation:a,preluActivationWeights:o,leakyreluAlpha:i}),$=s.texData.get(N.dataId);T($.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,$.shape=n.outShape,g=pr({inputs:{x:N},backend:s}),g.shape=n.outShape,y.push(N)}else{const x=n.outHeight*n.outWidth,w=Ne({inputs:{x:t},backend:s,attrs:{shape:f?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=Ne({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),k=z1({a:f?w:S,b:f?S:w,transposeA:!f,transposeB:m,backend:s,bias:r,activation:a,preluActivationWeights:o,leakyreluAlpha:i});g=Ne({inputs:{x:k},backend:s,attrs:{shape:n.outShape}}),y.push(w),y.push(S),y.push(k)}for(const x of y)s.disposeIntermediateTensorInfo(x);return g}function k7({x:t,filter:e,convInfo:n,backend:s,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=l*u*c,g=h*d,y=[n.batchSize,m,g],b=!0,v=!1,x=[];if(o!=null){const B=B1(o.shape,p);B!=null&&(o=Ne({inputs:{x:o},backend:s,attrs:{shape:B}}),x.push(o))}if(r!=null){const B=B1(r.shape,p);B!=null&&(r=Ne({inputs:{x:r},backend:s,attrs:{shape:B}}),x.push(r))}const w=Ne({inputs:{x:e},backend:s,attrs:{shape:[1,m,le(e.shape)/m]}});x.push(w);const S=new eke(y,n),k=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=s.runWebGLProgram(S,[t],"float32",k),$=Ne({inputs:{x:N},backend:s,attrs:{shape:y}});x.push(N),x.push($);const I=r!=null,A=o!=null,O=a==="leakyrelu",P=a?qp(a,!0):null,F=new p7(p?$.shape:w.shape,p?w.shape:$.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],b,v,I,P,A,O),G=p?[$,w]:[w,$];if(r&&G.push(r),A&&G.push(o),O){const B=s.makeTensorInfo([],"float32",ta(i,"float32"));G.push(B),x.push(B)}const q=s.runWebGLProgram(F,G,"float32"),Z=Ne({inputs:{x:q},backend:s,attrs:{shape:n.outShape}});x.push(q);for(const B of x)s.disposeIntermediateTensorInfo(B);return Z}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o}=e,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s,d=sa(l),h=Qn(r.shape,o.shape,i,u,a,c,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=C7({x:r,filter:o,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&se().getBool("WEBGL_EXP_CONV")){const m=new S7(h),g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[r,o],"float32",g)}else if(se().getBool("WEBGL_CONV_IM2COL"))f=k7({x:r,filter:o,convInfo:h,backend:n});else{const m=new w7(h);f=n.runWebGLProgram(m,[r,o],"float32")}const p=Ne({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const nke={kernelName:Mm,backendName:"webgl",kernelFunc:tke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ske{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class rke{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=s-1-e.padInfo.left,u=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class oke{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,s=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${o};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ike{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=s-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ake(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:o}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s,d=sa(l),h=Qn(r.shape,c,i,1,a,u,!1,d),f=new ske(h);return n.runWebGLProgram(f,[r,o],"float32")}const lke={kernelName:X2,backendName:"webgl",kernelFunc:ake};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uke{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Cs(this.outputShape.length);const n=e.filterHeight,s=e.filterWidth,r=n-1-e.padInfo.top,o=s-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            int wCPerm = ${s} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:o}=e,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s,d=sa(u),h=Qn(i,o.shape,a,1,l,c,!1,d);if(se().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new uke(h);return n.runWebGLProgram(p,[r,o],"float32",f)}else{const f=new rke(h);return n.runWebGLProgram(f,[r,o],"float32")}}const dke={kernelName:zm,backendName:"webgl",kernelFunc:cke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o}=e,{strides:i,pad:a,dilations:l}=s,u=xl(r.shape,o.shape,i,l,a),c=new JCe(u);return n.runWebGLProgram(c,[r,o],"float32")}const fke={kernelName:Bm,backendName:"webgl",kernelFunc:hke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:o}=e,{strides:i,pad:a,filterShape:l}=s,u=xl(r.shape,l,i,1,a),c=new oke(u);return n.runWebGLProgram(c,[r,o],"float32")}const mke={kernelName:Y2,backendName:"webgl",kernelFunc:pke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:o}=e,{pad:i,strides:a,inputShape:l}=s,u=xl(l,o.shape,a,1,i),c=new ike(u);return n.runWebGLProgram(c,[r,o],"float32")}const yke={kernelName:Q2,backendName:"webgl",kernelFunc:gke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bke=tf+`
  return cos(x);
`,vke=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${rc}
  return result;
`,xke=Tt({opSnippet:bke,packedOpSnippet:vke}),wke={kernelName:th,backendName:"webgl",kernelFunc:xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ske=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Cke=Tt({opSnippet:Ske}),kke={kernelName:nh,backendName:"webgl",kernelFunc:Cke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nke{constructor(e,n,s,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,u]=e,[c]=n,[d,h]=s;this.outputShape=[c,d,h,u];const f=r==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,x,w]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${x};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke=t=>{const{inputs:e,backend:n,attrs:s}=t,{image:r,boxes:o,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:u}=s,c=new Nke(r.shape,o.shape,a,l,u);return n.runWebGLProgram(c,[r,o,i],"float32")},$ke={kernelName:J2,backendName:"webgl",kernelFunc:Tke};var Xp;(function(t){t.Prod="*",t.Sum="+"})(Xp||(Xp={}));class z_{constructor(e,n,s,r){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,i=this.op===Xp.Prod?"1.0":"0.0",a=s?i:`getX(${B_(o,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";s?(u=r?`end != ${l-1}`:"end != 0",c=r?"end + 1":"end - 1"):(u=r?`end + pow2 < ${l}`:"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Mt(o)} coords = getOutputCoords();
        int end = ${V_(o,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${V_(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${B_(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function B_(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function V_(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N7(t,e,n,s,r,o){const i=e.shape.length,a=dn([s],i);let l=e;a!=null&&(l=As({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=kn(1,i)[0];if(u!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${s}`);const c=l.shape[u];let d=pr({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const f=new z_(t,l.shape,!1,o),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(r){const h=new z_(t,l.shape,r,o),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=wl(a),f=As({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,exclusive:i,reverse:a}=s;return N7(Xp.Prod,r,n,o,i,a)}const Ike={kernelName:Z2,backendName:"webgl",kernelFunc:Eke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,exclusive:i,reverse:a}=s;return N7(Xp.Sum,r,n,o,i,a)}const _ke={kernelName:Vm,backendName:"webgl",kernelFunc:Rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,weights:o}=e,{size:i,binaryOutput:a}=s;if(r.shape.length===1){const l=n.readSync(r.dataId),u=n.readSync(o.dataId),c=o7(l,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}else if(r.shape.length===2){const l=n.bufferSync(r),u=n.bufferSync(o),c=Lxe(l,u,i,a);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}const Dke={kernelName:eb,backendName:"webgl",kernelFunc:Ake};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oke{constructor(e,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockSize:o,dataFormat:i}=s,a=r.shape[0],l=i==="NHWC"?r.shape[1]:r.shape[2],u=i==="NHWC"?r.shape[2]:r.shape[3],c=i==="NHWC"?r.shape[3]:r.shape[1],d=l*o,h=u*o,f=c/(o*o),p=i==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new Oke(p,o,i);return n.runWebGLProgram(m,[r],r.dtype)}const Lke={kernelName:tb,backendName:"webgl",kernelFunc:Fke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T7{constructor(e,n=!1,s=null,r=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";s&&(r?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:o?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $7{constructor(e,n=!1,s=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)f+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<d;y++)f+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(h+1)/2;y++){const b=y*2;if(f+=`
          xC = xCCorner + ${b*u};
          `,l===1){if(b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,u===1&&b>0?f+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const v=a%2===0?B2(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:f+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):v===1?f+=`
                    xC${b+1} = xTexelC${b};
                    `:f+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(f+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(f+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(f+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";s&&(r?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:o?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:p=`vec4 activation(vec4 x) {
          ${s}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;let c=l;c==null&&(c=[1,1]),T(hs(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=Qn(r.shape,o.shape,i,c,a,u,!0);let h;se().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new $7(d):h=new T7(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[r,o],"float32",f)}const Mke={kernelName:Um,backendName:"webgl",kernelFunc:Pke};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zke{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Bke{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=n-1-e.padInfo.top,a=s-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,dy:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s,d=Qn(r.shape,c,i,a,l,u,!0),h=new zke(d);return n.runWebGLProgram(h,[r,o],"float32")}const Uke={kernelName:nb,backendName:"webgl",kernelFunc:Vke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,filter:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s,d=Qn(c,o.shape,i,a,l,u,!0),h=new Bke(d);return n.runWebGLProgram(h,[r,o],"float32")}const jke={kernelName:sb,backendName:"webgl",kernelFunc:Wke};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gke{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t){const{inputs:e,backend:n}=t,{x:s}=e,r=[...s.shape,...s.shape],o=le(s.shape),i=Ne({inputs:{x:s},backend:n,attrs:{shape:[o]}}),a=new Gke(o),l=n.runWebGLProgram(a,[i],i.dtype),u=Ne({inputs:{x:l},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const qke={kernelName:rb,backendName:"webgl",kernelFunc:Hke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kke{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:s,padInfo:r,strideHeight:o,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:h}=r;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${i});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o}=e,{strides:i,pad:a,dilations:l}=s,u=Ag(r.shape,o.shape,i,a,"NHWC",l);let c;const d=new Kke(u);c=n.runWebGLProgram(d,[r,o],"float32");const h=Ne({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),h}const Yke={kernelName:Wm,backendName:"webgl",kernelFunc:Xke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qke(t){const{inputs:e,backend:n,attrs:s}=t,{equation:r}=s,o=e,{allDims:i,summedDims:a,idDims:l}=R$(r,o.length);A$(i.length,l,o);const{path:u,steps:c}=D$(a,l),d=c.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:b}=_$(f,l[g]);let v;O$(y)?v=o[g]:(v=As({inputs:{x:o[g]},backend:n,attrs:{perm:y}}),p.push(v));const x=v.shape.slice();for(let w=0;w<b.length;++w)x.splice(b[w],0,1);vt(v.shape,x)||(v=Ne({inputs:{x:v},backend:n,attrs:{shape:x}}),p.push(v)),h===null?h=v:(h=SE({inputs:{a:v,b:h},backend:n}),p.push(h))}m<d-1&&(u[m]>=0&&(h=ex({inputs:{x:h},backend:n,attrs:{axis:u[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const Zke={kernelName:ib,backendName:"webgl",kernelFunc:Qke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jke="return (x >= 0.0) ? x : (exp(x) - 1.0);",eNe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,tNe=Tt({opSnippet:Jke,packedOpSnippet:eNe}),nNe={kernelName:rh,backendName:"webgl",kernelFunc:tNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNe="return (b >= 0.0) ? a : a * (b + 1.0);",rNe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,oNe=t=>{const{inputs:e,backend:n}=t,{dy:s,y:r}=e,o=se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ef(rNe,s.shape,r.shape):new Mu(sNe,s.shape,r.shape);return n.runWebGLProgram(o,[s,r],s.dtype)},iNe={kernelName:ab,backendName:"webgl",kernelFunc:oNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aNe=`
  return vec4(equal(a, b));
`,lNe="return float(a == b);",uNe=ms({opSnippet:lNe,packedOpSnippet:aNe,dtype:"bool",cpuKernelImpl:Vxe}),cNe={kernelName:jm,backendName:"webgl",kernelFunc:uNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dNe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${C$};
  float a1 = ${k$};
  float a2 = ${N$};
  float a3 = ${T$};
  float a4 = ${$$};
  float a5 = ${E$};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,hNe=Tt({opSnippet:dNe}),fNe={kernelName:oh,backendName:"webgl",kernelFunc:hNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe=tf+`
  return exp(x);
`,mNe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,E7=Tt({opSnippet:pNe,packedOpSnippet:mNe,cpuKernelImpl:Uxe,dtype:"float32"}),gNe={kernelName:ih,backendName:"webgl",kernelFunc:E7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KC(t){const{inputs:e,attrs:n,backend:s}=t,{dim:r}=n,{input:o}=e,i=o.shape.length,a=o.shape.slice();let l=r;return r<0&&(T(-(i+1)<=r,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+r+1),a.splice(l,0,1),Ne({inputs:{x:o},backend:s,attrs:{shape:a}})}const yNe={kernelName:Gm,backendName:"webgl",kernelFunc:KC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U_="return exp(x) - 1.0;",bNe=Tt({opSnippet:U_,packedOpSnippet:U_,cpuKernelImpl:Wxe}),vNe={kernelName:ah,backendName:"webgl",kernelFunc:bNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W_{constructor(e,n,s){this.variableNames=["real","imag"];const r=n[1];this.outputShape=n;const o=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${r}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${r});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${r}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7(t,e,n){const s=n.texData.get(t.dataId),r=le(t.shape),o=t.shape[t.shape.length-1],i=r/o,a=Ne({inputs:{x:t},backend:n,attrs:{shape:[i,o]}}),l=a.shape,u=new W_("real",l,e),c=new W_("imag",l,e),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),p=$l({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=Ne({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNe(t){const{inputs:e,backend:n}=t,{input:s}=e;return I7(s,!1,n)}const wNe={kernelName:lb,backendName:"webgl",kernelFunc:xNe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SNe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0(t){const{backend:e,attrs:n}=t,{shape:s,value:r}=n;let{dtype:o}=n;if(o=o||Gu(r),o==="string"){const i=fn(o,le(s));return i.fill(r),e.makeTensorInfo(s,o,i)}else{const i=new SNe(s,r),a=[[r]];return e.runWebGLProgram(i,[],o,a)}}const CNe={kernelName:ub,backendName:"webgl",kernelFunc:h0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kNe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NNe={kernelName:cb,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,s=e,r=new kNe(n.shape);return s.runWebGLProgram(r,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j_="return floor(x);",TNe=Tt({opSnippet:j_,packedOpSnippet:j_,cpuKernelImpl:jxe}),$Ne={kernelName:lh,backendName:"webgl",kernelFunc:TNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,INe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,RNe=ms({opSnippet:ENe,packedOpSnippet:INe,dtype:"int32"}),_Ne={kernelName:uh,backendName:"webgl",kernelFunc:RNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ANe{constructor(e){this.variableNames=["A"];const n=Os(),[s,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DNe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Os(),[s,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ONe={kernelName:m1,backendName:"webgl",kernelFunc:FNe};let fc,ww=se().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function FNe(t){const{inputs:e,backend:n,attrs:s}=t;let{pixels:r}=e;const{numChannels:o}=s,i=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,[l,u]=i?[r.videoWidth,r.videoHeight]:[r.width,r.height],c=[u,l],d=[u,l,o];if(a||i){const m=se().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(fc==null||m!==ww)&&(ww=m,fc=document.createElement("canvas").getContext("2d",{willReadFrequently:ww})),fc.canvas.width=l,fc.canvas.height=u,fc.drawImage(r,0,0,l,u),r=fc.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=Er.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),r);const f=se().getBool("WEBGL_PACK")?new DNe(d):new ANe(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s,m=sa(c),g=Qn(r.shape,o.shape,l,d,u,h,!1,m);let y;const b=[],v=i!=null,x=a!=null,w=f==="leakyrelu",S=()=>{const N=[r,o],$=(I,A)=>{if(A==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const O=Ne({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return b.push(O),O}return I};if(v&&N.push($(i,c)),x&&N.push($(a,c)),w){const I=n.makeTensorInfo([],"float32",ta(p,"float32"));N.push(I),b.push(I)}return N};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=C7({x:r,filter:o,convInfo:g,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&se().getBool("WEBGL_EXP_CONV")){const N=f?qp(f,!0):null,$=new S7(g,v,N,x,w),I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],A=S();y=n.runWebGLProgram($,A,"float32",I)}else if(se().getBool("WEBGL_CONV_IM2COL"))y=k7({x:r,filter:o,convInfo:g,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const N=f?qp(f,!1):null,$=new w7(g,v,N,x,w),I=S();y=n.runWebGLProgram($,I,"float32")}const k=Ne({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return b.push(y),b.forEach(N=>n.disposeIntermediateTensorInfo(N)),k}const PNe={kernelName:Ap,backendName:"webgl",kernelFunc:LNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=s,p=[];let m=c;m==null&&(m=[1,1]),T(hs(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Qn(r.shape,o.shape,l,m,u,d,!0),y=se().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?qp(h,y):null,v=[r,o],x=i!=null,w=a!=null,S=h==="leakyrelu";if(x&&v.push(i),w&&v.push(a),S){const I=n.makeTensorInfo([],"float32",ta(f,"float32"));v.push(I),p.push(I)}let k;y?k=new $7(g,x,b,w,S):k=new T7(g,x,b,w,S);const N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],$=n.runWebGLProgram(k,v,"float32",N);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),$}const zNe={kernelName:Dp,backendName:"webgl",kernelFunc:MNe};class BNe{constructor(e,n,s,r){this.sliceDim=e,this.strides=n,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=s;const o=Mt(s.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(t){const{inputs:e,backend:n}=t,{params:s,indices:r}=e,o=r.shape,i=o[o.length-1],a=le(s.shape),[l,u,c,d]=Av(s,r),h=Ne({inputs:{x:r},backend:n,attrs:{shape:[u,i]}}),f=Ne({inputs:{x:s},backend:n,attrs:{shape:[le(s.shape)/c,c]}});if(n.shouldExecuteOnCPU([s,r])||s.dtype==="string"){const y=n.readSync(r.dataId),b=n.bufferSync(s),v=Gxe(y,b,s.dtype,u,i,c,d,s.shape,a);return n.makeTensorInfo(l,s.dtype,v.values)}const p=new BNe(i,d,[u,c],s.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),g=Ne({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const UNe={kernelName:db,backendName:"webgl",kernelFunc:VNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WNe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=Mt(this.rank),r=jNe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}}function jNe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let r=0;r<t.length;r++)r===2?s.push("index"):s.push(`${n[r]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R7(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,indices:o}=e,{axis:i,batchDims:a}=s,l=pt(i,r.shape)[0];if(se().get("DEBUG")){const b=n.readSync(o.dataId),v=r.shape[l];for(let x=0;x<b.length;++x){const w=b[x];T(w<=v-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${v-1}]`)}}const u=L$(r,o,l,a),c=le(o.shape),d=[],h=Ne({inputs:{x:r},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Ne({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(h),d.push(f);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){const b=n.bufferSync(f),v=n.bufferSync(h),x=Hxe(v,b,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,x.dtype,x.values)}const m=new WNe(h.shape,p),g=n.runWebGLProgram(m,[h,f],h.dtype);d.push(g);const y=Ne({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const GNe={kernelName:qm,backendName:"webgl",kernelFunc:R7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HNe="return float(a > b);",qNe=`
  return vec4(greaterThan(a, b));
`,KNe=ms({opSnippet:HNe,packedOpSnippet:qNe,cpuKernelImpl:qxe,dtype:"bool"}),XNe={kernelName:Km,backendName:"webgl",kernelFunc:KNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YNe="return float(a >= b);",QNe=`
  return vec4(greaterThanEqual(a, b));
`,ZNe=ms({opSnippet:YNe,packedOpSnippet:QNe,dtype:"bool",cpuKernelImpl:Kxe}),JNe={kernelName:ch,backendName:"webgl",kernelFunc:ZNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t){const{inputs:e,backend:n}=t,{input:s}=e;return I7(s,!0,n)}const tTe={kernelName:hb,backendName:"webgl",kernelFunc:eTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nTe="return float(!isnan(x) && !isinf(x));",sTe=Tt({opSnippet:nTe,dtype:"bool"}),rTe={kernelName:hh,backendName:"webgl",kernelFunc:sTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oTe="return float(isinf(x));",iTe=Tt({opSnippet:oTe,dtype:"bool"}),aTe={kernelName:fh,backendName:"webgl",kernelFunc:iTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lTe="return float(isnan(x));",uTe=Tt({opSnippet:lTe,dtype:"bool"}),cTe={kernelName:ph,backendName:"webgl",kernelFunc:uTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe="return float(a < b);",hTe=`
  return vec4(lessThan(a, b));
`,fTe=ms({opSnippet:dTe,packedOpSnippet:hTe,cpuKernelImpl:Xxe,dtype:"bool"}),pTe={kernelName:Ym,backendName:"webgl",kernelFunc:fTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mTe="return float(a <= b);",gTe=`
  return vec4(lessThanEqual(a, b));
`,yTe=ms({opSnippet:mTe,packedOpSnippet:gTe,cpuKernelImpl:Yxe,dtype:"bool"}),bTe={kernelName:Qm,backendName:"webgl",kernelFunc:yTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t){const{backend:e,attrs:n}=t,{start:s,stop:r,num:o}=n,i=Qxe(s,r,o);return e.makeTensorInfo([i.length],"float32",i)}const xTe={kernelName:pb,backendName:"webgl",kernelFunc:vTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wTe=tf+`
  return x < 0.0 ? 0./0. : log(x);
`,STe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,CTe=Tt({opSnippet:wTe,packedOpSnippet:STe,cpuKernelImpl:Zxe}),kTe={kernelName:mh,backendName:"webgl",kernelFunc:CTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NTe=tf+`
  return log(1.0 + x);
`,TTe=Tt({opSnippet:NTe}),$Te={kernelName:gh,backendName:"webgl",kernelFunc:TTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ETe="return float(a >= 1.0 && b >= 1.0);",ITe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,RTe=ms({opSnippet:ETe,packedOpSnippet:ITe,dtype:"bool"}),_Te={kernelName:Zm,backendName:"webgl",kernelFunc:RTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATe="return float(!(x >= 1.0));",DTe=Tt({opSnippet:ATe}),OTe={kernelName:Jm,backendName:"webgl",kernelFunc:DTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FTe="return float(a >= 1.0 || b >= 1.0);",LTe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,PTe=ms({opSnippet:FTe,packedOpSnippet:LTe,dtype:"bool"}),MTe={kernelName:eg,backendName:"webgl",kernelFunc:PTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zTe{constructor(e,n,s,r,o){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${s}) + float(${r}) * sum`;o===.5?l=`inversesqrt(${u})`:o===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BTe{constructor(e,n,s,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${s}) + float(${r}) * sum`;o===.5?l=`inversesqrt(${u})`:o===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VTe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{depthRadius:o,bias:i,alpha:a,beta:l}=s,u=se().getBool("WEBGL_PACK_NORMALIZATION")?new BTe(r.shape,o,i,a,l):new zTe(r.shape,o,i,a,l);return n.runWebGLProgram(u,[r],r.dtype)},UTe={kernelName:tg,backendName:"webgl",kernelFunc:VTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WTe{constructor(e,n,s,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=s,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jTe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r,y:o,dy:i}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=s,d=new WTe(r.shape,a,l,u,c);return n.runWebGLProgram(d,[r,o,i],r.dtype)},GTe={kernelName:mb,backendName:"webgl",kernelFunc:jTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(t,e,n,s){const r=le(e),i=le(t.shape)/r,a=Ne({inputs:{x:t},attrs:{shape:[i,r]},backend:s}),l=oc(a,t.dtype,"max",s),u=Ne({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _7(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reductionIndices:o,keepDims:i}=s,a=r.shape.length,l=pt(o,r.shape);let u=l;const c=dn(u,a),d=c!=null,h=n.shouldExecuteOnCPU([r]);let f=r;if(d){if(h){const v=n.texData.get(f.dataId).values,x=new Array(a);for(let k=0;k<x.length;k++)x[k]=r.shape[c[k]];const w=xE(v,r.shape,r.dtype,c,x);f=n.makeTensorInfo(x,r.dtype);const S=n.texData.get(f.dataId);S.values=w}else f=Jv(r,c,n);u=kn(u.length,a)}fs("max",u,a);const[p,m]=Zn(f.shape,u);let g=p;i&&(g=Cn(p,l));let y;if(h){const v=n.texData.get(f.dataId).values,x=Jxe(v,le(m),g,r.dtype);y=n.makeTensorInfo(g,r.dtype);const w=n.texData.get(y.dataId);w.values=x}else y=HTe(f,m,g,n);return d&&n.disposeIntermediateTensorInfo(f),y}const qTe={kernelName:ng,backendName:"webgl",kernelFunc:_7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KTe=wE+`
  return max(a, b);
`,XTe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rc+`
  return result;
`,YTe=ms({opSnippet:KTe,packedOpSnippet:XTe,cpuKernelImpl:ewe}),QTe={kernelName:yh,backendName:"webgl",kernelFunc:YTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;u0(r,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=s,u=1;T(hs(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=co(r.shape,o,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&vt(c.inShape,c.outShape))return pr({inputs:{x:r},backend:n});const d=new Kp(c,"max",!1);return n.runWebGLProgram(d,[r],r.dtype)}const JTe={kernelName:sg,backendName:"webgl",kernelFunc:ZTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{filterSize:o,strides:i,pad:a,dataFormat:l,dimRoundingMode:u}=s,c=[1,1,1],d=na(r.shape,o,i,c,a,u,l),h=new CE(d,"max",!1);return n.runWebGLProgram(h,[r],r.dtype)}const t$e={kernelName:rg,backendName:"webgl",kernelFunc:e$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n$e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,s=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,l=i-1-e.padInfo.left,u=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class s$e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,s=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=u-1-e.padInfo.top,f=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o}=e,i=o,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],h=na(i.shape,a,l,d,u,c),f=new CE(h,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),m=new s$e(h),g=n.runWebGLProgram(m,[r,p],i.dtype);return n.disposeIntermediateTensorInfo(p),g}const o$e={kernelName:yb,backendName:"webgl",kernelFunc:r$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t){const{inputs:e,backend:n,attrs:s}=t,{dy:r,input:o,output:i}=e,a=o;u0([o,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,h=co(a.shape,l,u,1,c,d),f=!0,p=new Kp(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),g=new n$e(h),y=n.runWebGLProgram(g,[r,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const a$e={kernelName:gb,backendName:"webgl",kernelFunc:i$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t,e,n,s){let r=new Kp(n,"max",!1);const o=s.runWebGLProgram(r,[t],"float32");r=new Kp(n,"max",!0,!0,e);const i=s.runWebGLProgram(r,[t],"float32");return[o,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u$e={kernelName:bb,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:r,strides:o,pad:i,includeBatchInIndex:a}=e,l=n;T(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];T(hs(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=co(s.shape,r,o,u,i),[d,h]=l$e(s,a,c,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t,e,n,s){const r=le(e),i=le(t.shape)/r,a=Ne({inputs:{x:t},attrs:{shape:[i,r]},backend:s}),l=oc(a,"float32","mean",s),u=Ne({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e={kernelName:og,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{keepDims:r,axis:o}=e,i=n,a=s.shape.length,l=pt(o,s.shape);let u=l;const c=dn(u,a),d=c!=null,h=i.shouldExecuteOnCPU([s]),f=[];let p=s;if(d){if(h){const x=i.texData.get(p.dataId).values,w=new Array(a);for(let N=0;N<w.length;N++)w[N]=s.shape[c[N]];const S=xE(x,s.shape,s.dtype,c,w);p=i.makeTensorInfo(w,s.dtype);const k=i.texData.get(p.dataId);k.values=S}else p=Jv(s,c,i);f.push(p),u=kn(u.length,a)}fs("sum",u,a);const[m,g]=Zn(p.shape,u);let y=m;r&&(y=Cn(m,l));const b=c$e(p,g,y,i);for(const v of f)i.disposeIntermediateTensorInfo(v);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s,a=r.shape.length,l=pt(o,r.shape);let u=l;const c=dn(u,a);let d=r;c!=null&&(d=As({inputs:{x:r},backend:n,attrs:{perm:c}}),u=kn(u.length,r.shape.length)),fs("min",u,a);const[h,f]=Zn(d.shape,u),p=le(f),m=Ne({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=oc(m,m.dtype,"min",n);let y;if(i){const b=Cn(h,l);y=Ne({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Ne({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const f$e={kernelName:ig,backendName:"webgl",kernelFunc:h$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$e=wE+`
  return min(a, b);
`,m$e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rc+`
  return result;
`,g$e=ms({opSnippet:p$e,packedOpSnippet:m$e,cpuKernelImpl:twe}),y$e={kernelName:bh,backendName:"webgl",kernelFunc:g$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b$e{constructor(e,n,s){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const r=e.length,o=Mt(r),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u=s==="reflect"?0:1;if(r===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v$e{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const r=e.length,o=Mt(r),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=Rs("rc",r),u=Rs("source",r),c=`${l[r-1]} < ${this.outputShape[r-1]}`,d=r===1?"source":`vec2(${u.slice(-2).join()})`,h=s==="reflect"?0:1;let f="";if(r===1){const p=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${o} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[r-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${o} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[r-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[r-2]} += 1;
        if(${l[r-2]} < ${this.outputShape[r-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[r-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x$e=({inputs:t,backend:e,attrs:n})=>{const{x:s}=t,{paddings:r,mode:o}=n,i=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new v$e(s.shape,r,o):new b$e(s.shape,r,o);return e.runWebGLProgram(i,[s],s.dtype)},w$e={kernelName:ag,backendName:"webgl",kernelFunc:x$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e=`if (b == 0.0) return NAN;
  return mod(a, b);`,C$e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+rc+`
  return result;
`,k$e=ms({opSnippet:S$e,packedOpSnippet:C$e}),N$e={kernelName:vh,backendName:"webgl",kernelFunc:k$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T$e{constructor(e,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $$e=`
if (a == b) {
  return 1.0;
};
return a / b;`,E$e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,A7=ms({opSnippet:$$e,packedOpSnippet:E$e,checkOutOfBounds:!0}),I$e={kernelName:sh,backendName:"webgl",kernelFunc:A7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G_="return a - b;",D7=ms({opSnippet:G_,packedOpSnippet:G_,supportsComplex:!0,cpuKernelImpl:Swe}),R$e={kernelName:Fh,backendName:"webgl",kernelFunc:D7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{dim:o}=s,i=pt([o],r.shape),a=_7({inputs:{x:r},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Cn(a.shape,i),u=Ne({inputs:{x:a},backend:n,attrs:{shape:l}}),c=D7({inputs:{a:r,b:u},backend:n}),d=E7({inputs:{x:c},backend:n}),h=ex({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),f=Ne({inputs:{x:h},backend:n,attrs:{shape:l}}),p=A7({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const _$e={kernelName:Ng,backendName:"webgl",kernelFunc:O7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$e(t){const{inputs:e,backend:n,attrs:s}=t,{logits:r}=e,{numSamples:o,seed:i,normalized:a}=s,l=a?r:O7({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new T$e(u,c,o),h=[[i]],f=n.runWebGLProgram(d,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),f}const D$e={kernelName:vb,backendName:"webgl",kernelFunc:A$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O$e=fo+`
  return -x;
`,F$e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function L$e(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId),[i,a]=swe(o.values,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,i)}let r;return se().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new Pa(s.shape,F$e):r=new ti(s.shape,O$e),n.runWebGLProgram(r,[s],s.dtype)}const P$e={kernelName:lg,backendName:"webgl",kernelFunc:L$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M$e=Ev;function z$e(t){Cr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s,u=n.readSync(r.dataId),c=n.readSync(o.dataId),{selectedIndices:d}=M$e(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const B$e={kernelName:xb,backendName:"webgl",kernelFunc:z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V$e=Iv;function U$e(t){Cr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s,c=n.readSync(r.dataId),d=n.readSync(o.dataId),{selectedIndices:h,validOutputs:f}=V$e(c,d,i,a,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const W$e={kernelName:wb,backendName:"webgl",kernelFunc:U$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e=Rv;function G$e(t){Cr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:r,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s,c=n.readSync(r.dataId),d=n.readSync(o.dataId),h=i,f=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=j$e(c,d,h,f,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const H$e={kernelName:Sb,backendName:"webgl",kernelFunc:G$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q$e{constructor(e,n,s,r){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K$e=t=>{const{inputs:e,backend:n,attrs:s}=t,{indices:r}=e,{dtype:o,depth:i,onValue:a,offValue:l}=s,u=le(r.shape),c=new q$e(u,i,a,l),d=Ne({inputs:{x:r},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[d],o);n.disposeIntermediateTensorInfo(d);const f=[...r.shape,i],p=Ne({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},X$e={kernelName:dg,backendName:"webgl",kernelFunc:K$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="complex64"){const r=d0({inputs:{input:s},backend:n}),o=V1({inputs:{x:r},backend:n}),i=tx({inputs:{input:s},backend:n}),a=V1({inputs:{x:i},backend:n}),l=$l({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return h0({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const Y$e={kernelName:Ig,backendName:"webgl",kernelFunc:V1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F7(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const r=d0({inputs:{input:s},backend:n}),o=F7({inputs:{x:r},backend:n}),i=tx({inputs:{input:s},backend:n}),a=V1({inputs:{x:i},backend:n}),l=$l({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return h0({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const Q$e={kernelName:cg,backendName:"webgl",kernelFunc:F7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const{inputs:e,backend:n,attrs:s}=t,{axis:r}=s;if(e.length===1)return KC({inputs:{input:e[0]},backend:n,attrs:{dim:r}});const o=e[0].shape,i=e[0].dtype;e.forEach(c=>{ds(o,c.shape,"All tensors passed to stack must have matching shapes"),T(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=KC({inputs:{input:c},backend:n,attrs:{dim:r}});return a.push(d),d}),u=x7({inputs:l,backend:n,attrs:{axis:r}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const J$e={kernelName:hg,backendName:"webgl",kernelFunc:Z$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eEe{constructor(e,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const r=e.length,o=Mt(r),i=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tEe{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const r=e.length,o=Mt(r),i=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=Rs("rc",r),u=Rs("source",r),c=`${l[r-1]} < ${this.outputShape[r-1]}`,d=r===1?"source":`vec2(${u.slice(-2).join()})`,h=[`${o} rc = outputLoc;`,`${l[r-1]} += 1;
       if(${c}) {
      `,r===1?"":`}
       rc = outputLoc;
       ${l[r-2]} += 1;
       if(${l[r-2]} < ${this.outputShape[r-2]}) {`,r===1?"":`  ${l[r-1]} += 1;
         if(${c}) {`],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=r===1?2:4;m<g;m++)p+=`
        ${h[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=r===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L7=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{paddings:o,constantValue:i}=s;if(le(r.shape)===0){const u=o.map((c,d)=>c[0]+r.shape[d]+c[1]);return h0({backend:n,attrs:{shape:u,value:i,dtype:r.dtype}})}const a=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tEe(r.shape,o,i):new eEe(r.shape,o,i),l=[[i]];return n.runWebGLProgram(a,[r],r.dtype,l)},nEe={kernelName:fg,backendName:"webgl",kernelFunc:L7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sEe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,rEe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+rc+`
  return result;
`,oEe=ms({opSnippet:sEe,packedOpSnippet:rEe}),iEe={kernelName:wh,backendName:"webgl",kernelFunc:oEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{axis:o,keepDims:i}=s,a=r.shape.length,l=[],u=pt(o,r.shape);let c=u;const d=dn(c,a);let h=r;d!=null&&(h=As({inputs:{x:r},backend:n,attrs:{perm:d}}),c=kn(c.length,a),l.push(h)),fs("prod",c,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:g,outDtype:y}=owe(h.shape,h.dtype,p,c);f=n.makeTensorInfo(g,y,m)}else{const[p,m]=Zn(h.shape,c),g=le(m),y=Ne({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),b=Kb(r.dtype),v=oc(y,b,"prod",n);f=Ne({inputs:{x:v},backend:n,attrs:{shape:p}}),l.push(y),l.push(v)}if(i){l.push(f);const p=Cn(f.shape,u);f=Ne({inputs:{x:f},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const lEe={kernelName:mg,backendName:"webgl",kernelFunc:aEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:r,paramsDenseValues:o,indices:i}=e,{outputRaggedRank:a}=s,l=r.map(y=>n.readSync(y.dataId)),u=r.map(y=>y.shape),c=n.readSync(o.dataId),d=n.readSync(i.dataId),[h,f,p]=iwe(l,u,c,o.shape,o.dtype,d,i.shape,a),m=h.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,o.dtype,f);return m.concat([g])}const cEe={kernelName:Cb,backendName:"webgl",kernelFunc:uEe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(t){const{inputs:e,backend:n}=t,{starts:s,limits:r,deltas:o}=e,i=n.readSync(s.dataId),a=n.readSync(r.dataId),l=n.readSync(o.dataId),[u,c]=awe(i,s.shape,s.dtype,a,r.shape,l,o.shape),d=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],s.dtype,c);return[d,h]}const hEe={kernelName:kb,backendName:"webgl",kernelFunc:dEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t){const{inputs:e,backend:n,attrs:s}=t,{shape:r,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=s,u=n.readSync(r.dataId),c=n.readSync(o.dataId),d=n.readSync(i.dataId),h=a.map(g=>n.readSync(g.dataId)),f=a.map(g=>g.shape),[p,m]=lwe(u,r.shape,c,o.shape,o.dtype,d,i.shape,h,f,l);return n.makeTensorInfo(p,o.dtype,m)}const pEe={kernelName:Nb,backendName:"webgl",kernelFunc:fEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P7=t=>{const{backend:e,attrs:n}=t,{start:s,stop:r,step:o,dtype:i}=n,a=uwe(s,r,o,i);return e.makeTensorInfo([a.length],i,a)},mEe={kernelName:Tb,backendName:"webgl",kernelFunc:P7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gEe="return 1.0 / x;",yEe=Tt({opSnippet:gEe}),bEe={kernelName:Sh,backendName:"webgl",kernelFunc:yEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vEe=fo+`
  return (x < 0.0) ? 0.0 : x;
`,xEe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wEe=Tt({opSnippet:vEe,packedOpSnippet:xEe}),SEe={kernelName:Ch,backendName:"webgl",kernelFunc:wEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEe=fo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,kEe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,NEe=Tt({opSnippet:CEe,packedOpSnippet:kEe}),TEe={kernelName:kh,backendName:"webgl",kernelFunc:NEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ee{constructor(e,n,s,r,o){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,s,u];const c=[r&&n>1?a-1:a,r&&s>1?l-1:l],d=[r&&n>1?n-1:n,r&&s>1?s-1:s];let h;o?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EEe{constructor(e,n,s,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,s,u];const c=[r&&n>1?a-1:a,r&&s>1?l-1:l],d=[r&&n>1?n-1:n,r&&s>1?s-1:s];let h;o?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:o,halfPixelCenters:i,size:a}=s,[l,u]=a,c=se().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new EEe(r.shape,l,u,o,i):new $Ee(r.shape,l,u,o,i);return n.runWebGLProgram(c,[r],"float32")}const REe={kernelName:bg,backendName:"webgl",kernelFunc:IEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ee{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,r,o]=n,[,i,a]=e,l=[s&&i>1?r-1:r,s&&a>1?o-1:o],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],h=1/c,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:o}=e,{alignCorners:i}=s,a=new _Ee(o.shape,r.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const DEe={kernelName:Ib,backendName:"webgl",kernelFunc:AEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OEe{constructor(e,n,s,r,o){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,s,u];const c=[r&&n>1?a-1:a,r&&s>1?l-1:l],d=[r&&n>1?n-1:n,r&&s>1?s-1:s],h=r?"0.5":"0.0";let f;o?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FEe{constructor(e,n,s,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,s,u];const c=[r&&n>1?a-1:a,r&&s>1?l-1:l],d=[r&&n>1?n-1:n,r&&s>1?s-1:s],h=r?"0.5":"0.0";let f;o?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r}=e,{alignCorners:o,halfPixelCenters:i,size:a}=s,[l,u]=a,c=se().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new FEe(r.shape,l,u,o,i):new OEe(r.shape,l,u,o,i);return n.runWebGLProgram(c,[r],r.dtype)}const PEe={kernelName:yg,backendName:"webgl",kernelFunc:LEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MEe{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,r,o]=n,[,i,a]=e,l=[s&&i>1?r-1:r,s&&a>1?o-1:o],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],h=1/c,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const{inputs:e,backend:n,attrs:s}=t,{images:r,dy:o}=e,{alignCorners:i}=s,a=new MEe(o.shape,r.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const BEe={kernelName:Eb,backendName:"webgl",kernelFunc:zEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VEe{constructor(e,n){this.variableNames=["x"];const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=e,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const r=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,o=e.map((a,l)=>r(l)).join(","),i=Mt(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UEe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=e;const r=Rs("rc",s),o=`${r[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${r[s-2]} + 1 < ${this.outputShape[s-2]}`,a=Mt(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(r.slice())};
          if(${o}){
            result.g = ${u(r.slice())};
          }
          if(${i}) {
            result.b = ${c(r.slice())};
            if(${o}) {
              result.a = ${d(r.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return h(p)}function u(p){return p[s-1]="("+p[s-1]+" + 1)",h(p)}function c(p){return p[s-2]="("+p[s-2]+" + 1)",h(p)}function d(p){return p[s-1]="("+p[s-1]+" + 1)",p[s-2]="("+p[s-2]+" + 1)",h(p)}function h(p){const m=e.map((b,v)=>f(v,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{dims:o}=s,i=r.shape.length,a=pt(o,r.shape);if(i===0)return pr({inputs:{x:r},backend:n});const l=se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UEe(r.shape,a):new VEe(r.shape,a);return n.runWebGLProgram(l,[r],r.dtype)}const jEe={kernelName:vg,backendName:"webgl",kernelFunc:WEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GEe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=e[1],r=e[2];this.outputShape=e;let o="";typeof n=="number"?o=`float outputValue = ${n.toFixed(2)};`:o=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEe={kernelName:Hb,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:r,fillValue:o,center:i}=e,a=n,l=new GEe(s.shape,o),[u,c]=x$(i,s.shape[1],s.shape[2]),d=[[u,c,Math.sin(r),Math.cos(r)]];return a.runWebGLProgram(l,[s],s.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qEe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,KEe=Tt({opSnippet:qEe}),XEe={kernelName:Nh,backendName:"webgl",kernelFunc:KEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YEe="return inversesqrt(x);",QEe=Tt({opSnippet:YEe,cpuKernelImpl:cwe}),ZEe={kernelName:Th,backendName:"webgl",kernelFunc:QEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kE{constructor(e,n,s,r,o,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const u=Mt(o.length),c=Mt(i.length);let d="";s===1?d="i":s===2&&(d="i, j");const h=`getIndices(${d})`;let f="";r===1?f="i":r===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${o});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JEe{constructor(e,n,s,r,o,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const u=Mt(o.length),c=Mt(i.length);let d="";s===1?d="i":s===2&&(d="i, j");const h=`getIndices(${d})`;let f="";r===1?f="i":r===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",b=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${o});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(t){const{inputs:e,backend:n,attrs:s}=t,{indices:r,updates:o}=e,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=kl(o,r,i),h=[d/u,u];if(d===0)return n.makeTensorInfo(i,r.dtype);const f=Ne({inputs:{x:r},backend:n,attrs:{shape:[l,a]}}),p=Ne({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;se().getBool("WEBGL_PACK")?g=new JEe(l,a,f.shape.length,p.shape.length,c,h):g=new kE(l,a,f.shape.length,p.shape.length,c,h);const y=n.runWebGLProgram(g,[p,f,m],p.dtype),b=Ne({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}const tIe={kernelName:Rb,backendName:"webgl",kernelFunc:eIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nIe{constructor(e,n,s,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,s];const o="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=se().getNumber("WEBGL_VERSION")===2?o:i,l=r==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIe(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:r,values:o}=e,{side:i}=s,a=new nIe(r.shape[0],r.shape[1],o.shape[1],i),l=[[r.shape[1]]];return n.runWebGLProgram(a,[r,o],"int32",l)}const rIe={kernelName:Ab,backendName:"webgl",kernelFunc:sIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oIe{constructor(e,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let r,o;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)o="resRC",r="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);r=l.join(),o=u.join()}const i=Mt(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t){const{inputs:e,backend:n}=t,{condition:s,t:r,e:o}=e,i=new oIe(s.shape.length,r.shape,r.shape.length);return n.runWebGLProgram(i,[s,r,o],Ws(r.dtype,o.dtype))}const aIe={kernelName:xg,backendName:"webgl",kernelFunc:iIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lIe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Fv};
  float scale = ${Lv};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,uIe=Tt({opSnippet:lIe}),cIe={kernelName:$h,backendName:"webgl",kernelFunc:uIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dIe=tf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,hIe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fIe=Tt({opSnippet:dIe,packedOpSnippet:hIe,cpuKernelImpl:hwe}),pIe={kernelName:_h,backendName:"webgl",kernelFunc:fIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,gIe=Tt({opSnippet:mIe}),yIe={kernelName:Rh,backendName:"webgl",kernelFunc:gIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe=tf+`
  return sin(x);
`,vIe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${rc}
  return result;
`,xIe=Tt({opSnippet:bIe,packedOpSnippet:vIe}),wIe={kernelName:Eh,backendName:"webgl",kernelFunc:xIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,CIe=Tt({opSnippet:SIe}),kIe={kernelName:Ih,backendName:"webgl",kernelFunc:CIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NIe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,TIe=Tt({opSnippet:NIe}),$Ie={kernelName:Ah,backendName:"webgl",kernelFunc:TIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EIe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{blockShape:o,paddings:i}=s;T(r.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((y,b)=>y*b),l=[[0,0]];l.push(...i);for(let y=1+o.length;y<r.shape.length;++y)l.push([0,0]);const u=[],c=L7({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),d=Yg(c.shape,o,a,!1),h=Qg(d.length,o.length,!1),f=Zg(c.shape,o,a,!1),p=Ne({inputs:{x:c},backend:n,attrs:{shape:d}}),m=As({inputs:{x:p},backend:n,attrs:{perm:h}}),g=Ne({inputs:{x:m},backend:n,attrs:{shape:f}});return u.push(c),u.push(p),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},IIe={kernelName:Cg,backendName:"webgl",kernelFunc:EIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t){const{inputs:e,backend:n}=t,{indices:s,values:r,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${r.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(r.dataId),u=n.readSync(o.dataId),c=n.readSync(i.dataId)[0],[d,h,f,p,m]=pwe(a,s.shape,s.dtype,l,r.dtype,u,c);return[n.makeTensorInfo(h,s.dtype,d),n.makeTensorInfo([h[0]],r.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const _Ie={kernelName:Db,backendName:"webgl",kernelFunc:RIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:r,newShape:o}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.readSync(r.dataId)),a=n.readSync(s.dataId),l=Array.from(n.readSync(o.dataId)),[u,c,d]=mwe(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}const DIe={kernelName:Ob,backendName:"webgl",kernelFunc:AIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:o}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);const i=n.readSync(s.dataId),a=n.readSync(r.dataId),l=n.readSync(o.dataId),[u,c]=a7(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const FIe={kernelName:Fb,backendName:"webgl",kernelFunc:OIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(t){const{inputs:e,backend:n}=t,{data:s,indices:r,segmentIds:o}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);const i=n.readSync(s.dataId),a=n.readSync(r.dataId),l=n.readSync(o.dataId),[u,c]=a7(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const PIe={kernelName:Lb,backendName:"webgl",kernelFunc:LIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:r,sparseValues:o,defaultValue:i}=e,{outputShape:a}=s,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=kl(o,r,a),f=!1;if(o.dtype==="string"){const y=n.bufferSync(r),b=n.bufferSync(o),v=Gi(n.readSync(i.dataId)[0]),x=dwe(y,b,a,h,c,u,l,d,v,f);return n.makeTensorInfo(a,x.dtype,x.values)}const p=new kE(u,l,r.shape.length,o.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[o,r,i],o.dtype),g=Ne({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const zIe={kernelName:Pb,backendName:"webgl",kernelFunc:MIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{numOrSizeSplits:o,axis:i}=s,a=pt(i,r.shape)[0],l=F$(r,o,a),u=r.shape.length,c=new Array(u).fill(0),d=r.shape.slice();return l.map(h=>{const f=[...d];f[a]=h;const p=nf({inputs:{x:r},backend:n,attrs:{begin:c,size:f}});return c[a]+=h,p})}const VIe={kernelName:kg,backendName:"webgl",kernelFunc:BIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H_="return sqrt(x);",UIe=Tt({opSnippet:H_,packedOpSnippet:H_,cpuKernelImpl:gwe}),WIe={kernelName:Dh,backendName:"webgl",kernelFunc:UIe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe="return x * x;",GIe=Tt({opSnippet:jIe}),HIe={kernelName:Mb,backendName:"webgl",kernelFunc:GIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q_="return (a - b) * (a - b);",qIe=ms({opSnippet:q_,packedOpSnippet:q_}),KIe={kernelName:Oh,backendName:"webgl",kernelFunc:qIe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");const o=n.readSync(r.dataId),i=Yi(o),a=ywe(i,"string",s);return n.makeTensorInfo(r.shape,"string",a)}const YIe={kernelName:Tg,backendName:"webgl",kernelFunc:XIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe({inputs:t,attrs:e,backend:n}){const{x:s}=t,r=fo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,o=new ti(s.shape,r);return n.runWebGLProgram(o,[s],s.dtype)}const ZIe={kernelName:zh,backendName:"webgl",kernelFunc:QIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JIe{constructor(e,n,s){this.variableNames=["x"],this.outputShape=s;const r=s.length,o=Mt(s.length),i=Mt(s.length);let a="";if(r===1)a="coords * strides + begin";else{let l=0;a=s.map((u,c)=>(l++,s.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${e});
      ${o} strides = ${o}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{begin:o,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=s,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:v,strides:x}=g$(r.shape,o,i,a,l,u,c,d,h);let w;if(m)w=Ne({inputs:{x:r},backend:n,attrs:{shape:p}});else if(g||y){T(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);const k=f$(b,v,x),N=nf({inputs:{x:r},backend:n,attrs:{begin:b,size:k}});w=Ne({inputs:{x:N},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([r])){const N=n.readSync(r.dataId),$=lt(r.shape,r.dtype,N),I=bwe(f,$,x,b);w=n.makeTensorInfo(p,r.dtype,I.values)}else{const N=new JIe(b,x,f);w=n.runWebGLProgram(N,[r],r.dtype)}const S=Ne({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),S}const tRe={kernelName:zb,backendName:"webgl",kernelFunc:eRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nRe(t){const{inputs:e,backend:n,attrs:s}=t,{separator:r,nGramWidths:o,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=e,h=n.readSync(c.dataId),f=n.readSync(d.dataId),[p,m]=vwe(h,f,r,o,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const sRe={kernelName:Bb,backendName:"webgl",kernelFunc:nRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rRe(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:r}=s,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=xwe(a,l,r),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const oRe={kernelName:Vb,backendName:"webgl",kernelFunc:rRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:r}=s,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(o.dataId),a=wwe(i,r);return n.makeTensorInfo(o.shape,"int32",a)}const aRe={kernelName:Ub,backendName:"webgl",kernelFunc:iRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe="return tan(x);",uRe=Tt({opSnippet:lRe}),cRe={kernelName:Lh,backendName:"webgl",kernelFunc:uRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dRe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,hRe=Tt({opSnippet:dRe}),fRe={kernelName:Ph,backendName:"webgl",kernelFunc:hRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t){const{inputs:e,backend:n,attrs:s}=t,{tensor:r,indices:o,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=kl(i,o,r.shape),h=[d/u,u];if(d===0)return n.makeTensorInfo(r.shape,o.dtype);const f=Ne({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=Ne({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=Ne({inputs:{x:r},backend:n,attrs:{shape:h}}),g=new kE(l,a,f.shape.length,p.shape.length,c,h,!1,!0),y=n.runWebGLProgram(g,[p,f,m],m.dtype),b=Ne({inputs:{x:y},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}const mRe={kernelName:_b,backendName:"webgl",kernelFunc:pRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gRe{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[i]*n[i];this.outputShape=s,this.rank=s.length;const r=Mt(this.rank),o=yRe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}}function yRe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let r=0;r<t.length;r++)s.push(`imod(${n[r]}, ${t[r]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{reps:o}=s;if(r.dtype==="string"||r.shape.length>5){const l=n.readSync(r.dataId),u=r.dtype==="string"?l.map(h=>Gi(h)):l,c=lt(r.shape,r.dtype,u),d=Cwe(c,o);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new gRe(r.shape,o);return n.runWebGLProgram(i,[r],r.dtype)}const bRe={kernelName:Mh,backendName:"webgl",kernelFunc:M7};class vRe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class xRe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Al(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function K_(t){let e=1;for(;e<t;)e*=2;return e}function wRe(t){const{inputs:e,backend:n,attrs:s}=t,{x:r}=e,{k:o,sorted:i}=s,a=se().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=se().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=r.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([r])||c<a||o>l){const I=n.readSync(r.dataId),[A,O]=kwe(I,u,r.dtype,o,i);return[n.makeTensorInfo(A.shape,A.dtype,A.values),n.makeTensorInfo(O.shape,O.dtype,O.values)]}if(o===0)return u[u.length-1]=0,[n.makeTensorInfo(u,r.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[r,h0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(r.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(r):r,m=le(u)/c,g=Ne({inputs:{x:f},attrs:{shape:[m,c]},backend:n});h&&Al(n,f);const y=K_(o),b=K_(c);let v=null;const x=()=>v===null?[g,g]:[g,v],w=(I,A,O)=>{const P=x(),F=new vRe(O),q=[[c],[v===null?1:0],[Number.NEGATIVE_INFINITY],[I],[A]],Z=v;v=n.runWebGLProgram(F,P,"int32",q),Al(n,Z)};for(let I=1;I<y;I*=2){const A=I*2;for(let O=I;O>=1;O/=2)w(A,O,[m,b])}for(let I=b;I>y;I/=2){const A=x(),O=new xRe([m,I/2]),F=[[c],[v===null?1:0],[y]],G=v;v=n.runWebGLProgram(O,A,"int32",F),Al(n,G);const q=y/2,Z=q*2;for(let B=q;B>=1;B/=2)w(Z,B,v.shape)}let S=v;v=nf({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,o]}}),Al(n,S);let k=R7({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});Al(n,g);const N=u.slice(0,-1);N.push(o),S=v,v=Ne({inputs:{x:v},attrs:{shape:N},backend:n}),Al(n,S);const $=k;return k=Ne({inputs:{x:k},attrs:{shape:N},backend:n}),Al(n,$),[k,v]}const SRe={kernelName:Wb,backendName:"webgl",kernelFunc:wRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CRe{constructor(e,n,s,r,o,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=s==="nearest"?1:2;let l;switch(r){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRe(t){const{inputs:e,backend:n,attrs:s}=t,{image:r,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=s,[c,d,h,f]=r.shape,[p,m]=u??[d,h],g=[c,p,m,f],y=new CRe(d,h,i,a,l,g);return n.runWebGLProgram(y,[r,o],"float32")}const NRe={kernelName:jb,backendName:"webgl",kernelFunc:kRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TRe(t){const{inputs:e,attrs:n,backend:s}=t,{axis:r}=n,{x:o}=e;u0(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(o.dataId),{outputValues:a,outputShape:l,indices:u}=Nwe(i,r,o.shape,o.dtype);return[s.makeTensorInfo(l,o.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const $Re={kernelName:Gb,backendName:"webgl",kernelFunc:TRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(t){const{inputs:e,backend:n,attrs:s}=t,{value:r}=e;let{axis:o}=s;o<0&&(o+=r.shape.length);const i=r,a=i.shape.length,l=r.shape[o],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==o&&(u[c++]=i.shape[m]);const d=[],h=new Array(a).fill(0),f=i.shape.slice();f[o]=1;const p=new Array(l);for(let m=0;m<p.length;m++){h[o]=m;const g=nf({inputs:{x:i},backend:n,attrs:{begin:h,size:f}}),y=Ne({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=y,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const IRe={kernelName:$g,backendName:"webgl",kernelFunc:ERe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RRe{constructor(e,n){this.variableNames=["x","segmentIds"];const s=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/s);this.outputShape=[r,a];const l="0.0",u="sumValue",c=Math.floor(s/4)*4,d=s%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";o%s>0&&(f=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let p="";o%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(t){const{inputs:e,backend:n,attrs:s}=t,{x:r,segmentIds:o}=e,{numSegments:i}=s,a=r.shape.length,l=[];let u=0;const c=dn([u],a);let d=r;c!=null&&(d=As({inputs:{x:r},backend:n,attrs:{perm:c}}),l.push(d),u=kn(1,a)[0]);const h=c6(d.shape,u,i),f=le([d.shape[u]]),p=Ne({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(p);const m=Kb(r.dtype),g=(x,w,S,k,N)=>{const $=x.shape[0],I=x.shape[1],A=u6(I,N),O={windowSize:A,inSize:I,batchSize:$,numSegments:N},P=new RRe(O,w),F=n.compileAndRun(P,[x,S],k);if(l.push(F),F.shape[1]===N)return F;const G=P7({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),q=M7({inputs:{x:G},backend:n,attrs:{reps:[I/A]}});return l.push(G),l.push(q),g(F,w,q,k,N)},y=g(p,"unsortedSegmentSum",o,m,i),b=Ne({inputs:{x:y},backend:n,attrs:{shape:h}});let v=b;if(c!=null){l.push(b);const x=wl(c);v=As({inputs:{x:v},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const ARe={kernelName:Eg,backendName:"webgl",kernelFunc:_Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DRe=[gSe,bSe,wSe,kSe,TSe,ISe,_Se,DSe,PSe,zSe,USe,GSe,KSe,ZSe,tCe,sCe,oCe,uCe,dCe,fCe,yCe,kCe,TCe,RCe,ACe,MCe,BCe,jCe,Jwe,qCe,ZCe,nke,lke,dke,fke,mke,yke,wke,kke,$ke,Ike,_ke,Dke,Lke,Mke,Uke,jke,qke,Yke,Zke,nNe,iNe,cNe,fNe,gNe,yNe,vNe,wNe,CNe,NNe,$Ne,_Ne,ONe,PNe,zNe,UNe,GNe,XNe,JNe,Zwe,tTe,YCe,rTe,aTe,cTe,tSe,pTe,bTe,xTe,kTe,$Te,_Te,OTe,MTe,UTe,GTe,qTe,QTe,JTe,t$e,o$e,a$e,u$e,d$e,f$e,y$e,w$e,N$e,D$e,rSe,P$e,B$e,W$e,H$e,OCe,X$e,Q$e,J$e,nEe,iEe,sSe,lEe,cEe,hEe,pEe,mEe,FCe,I$e,bEe,SEe,TEe,iSe,REe,DEe,PEe,BEe,jEe,HEe,XEe,ZEe,tIe,rIe,aIe,cIe,pIe,yIe,wIe,kIe,SCe,_$e,$Ie,IIe,_Ie,DIe,FIe,PIe,zIe,VIe,WIe,HIe,KIe,YIe,ZIe,tRe,sRe,oRe,aRe,R$e,fSe,cRe,fRe,mRe,bRe,SRe,NRe,pSe,$Re,IRe,ARe,Y$e];for(const t of DRe)qb(t);const ORe=()=>{const t=_.useRef(null),e=_.useRef(null),[n,s]=_.useState(null);_.useEffect(()=>{(async()=>{const i=await Qce();s(i)})()},[]),_.useEffect(()=>{(async()=>{if(t.current)try{const i=await navigator.mediaDevices.getUserMedia({video:!0});t.current.srcObject=i}catch(i){console.error("Error accessing the webcam: ",i)}})()},[t]);const r=async()=>{if(n&&t.current){const i=await(await mme(t.current)).capture(),a=await n.classify(i);e.current&&(e.current.innerText=`Prediction: ${a[0].className}
Probability: ${a[0].probability}`),i.dispose()}};return R.jsxs(R.Fragment,{children:[R.jsx("div",{ref:e}),R.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:t,width:"870",height:"534"}),R.jsx("button",{onClick:r,children:"Capture Image"})]})};var FRe={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const LRe=async({query:t})=>{const e=`${FRe.VITE_REACT_APP_SERVER}/api/v1/search?q=${t}`;try{const{data:n}=await NN.get(e,{headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":!0}});return console.log(n),n.data}catch(n){throw console.error(":",n),new Error("Failed to fetch nutrition data")}},z7=aY({key:"selectedProductState",default:null}),Gc=(t,e)=>{let n;switch(e){case"carbohydrate":n=300;break;case"protein":n=50;break;case"fat":n=70;break;default:throw new Error("Invalid nutrient type")}return Math.round(Number(t)/n*100)},PRe=({product:t})=>{const e=mi(),[,n]=uY(z7),s=()=>{n(t),e(`/search/detail/${t.id}`)};return R.jsxs("div",{onClick:s,className:"cursor-pointer py-4 px-4 bg-white rounded-lg border-b-2 mb-2",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("h3",{className:"font-semibold text-black",children:t.foodName}),R.jsx("span",{className:"text-customGrey",children:t.manufacturerName})]}),R.jsxs("div",{className:"text-customGrey mt-1 text-sm",children:[t.energyKcal,"kcal (",t.foodWeight,")"]}),R.jsxs("div",{className:"flex space-x-4 mt-2 text-[13px] flex-nowrap",children:[R.jsxs("span",{className:"text-customYellow whitespace-nowrap",children:["carbohydrate ",R.jsxs("span",{className:"text-customGrey",children:[t.carbohydrateG,"g (",Gc(t.carbohydrateG,"carbohydrate"),"%)"]})]}),R.jsxs("span",{className:"text-customYellow whitespace-nowrap",children:["protein "," ",R.jsxs("span",{className:"text-customGrey",children:[t.proteinG,"g (",Gc(t.proteinG,"protein"),"%)"]})]}),R.jsxs("span",{className:"text-customYellow whitespace-nowrap",children:["fat "," ",R.jsxs("span",{className:"text-customGrey",children:[t.fatG,"g (",Gc(t.fatG,"fat"),"%)"]})]})]})]})},MRe=()=>{const{query:t}=UU(),{data:e,error:n,isLoading:s}=jV({queryKey:["nutritionData,",t],queryFn:()=>LRe({query:t||""}),staleTime:1e3*60*5,enabled:!!t});return s?R.jsx(cu,{children:R.jsx("div",{className:"relative w-full h-screen flex justify-center items-center",children:R.jsx("p",{children:"Loading..."})})}):n?R.jsx(cu,{children:R.jsx("div",{className:"relative w-full h-screen flex justify-center items-center",children:R.jsx("p",{children:"Error loading data"})})}):R.jsx(cu,{children:R.jsxs("div",{className:"relative w-full min-h-screen overflow-hidden",children:[R.jsx(YF,{mt:"mt-10",placeholder:`Search results for "${t}"`}),R.jsxs("div",{className:"bg-white mt-3 w-full h-full rounded-t-3xl",children:[R.jsx("h2",{className:"pt-5 text-center text-customGrey text-lg",children:"Products searched by photos taken"}),R.jsx("div",{className:"mt-4 space-y-4",children:e&&e.length>0?e.map((r,o)=>R.jsx(PRe,{product:r},o)):R.jsxs("p",{className:"text-center text-lg",children:['No results found for "',t,'".']})}),R.jsx(RF,{position:"bottom-right"})]})]})})},Sw="data:image/svg+xml,%3csvg%20width='2'%20height='2'%20viewBox='0%200%202%202'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='1'%20cy='1'%20r='1'%20fill='%23A4A4A4'/%3e%3c/svg%3e",zRe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2022C17.5229%2022%2022%2017.5229%2022%2012C22%206.47715%2017.5229%202%2012%202C6.47715%202%202%206.47715%202%2012C2%2017.5229%206.47715%2022%2012%2022Z'%20stroke='%23FB5963'%20stroke-width='2'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5229%2017.5229%2022%2012%2022C6.47715%2022%202%2017.5229%202%2012C2%206.47715%206.47715%202%2012%202C17.5229%202%2022%206.47715%2022%2012ZM12%2014.5C10.4572%2014.5%209.35443%2015.1248%208.64814%2015.7526C8.2992%2016.0628%208.04677%2016.373%207.87929%2016.6095C7.79516%2016.7282%207.73127%2016.8301%207.68631%2016.9064C7.6638%2016.9446%207.64593%2016.9766%207.63255%2017.0013C7.62585%2017.0136%207.62027%2017.0242%207.61579%2017.0328L7.60987%2017.0443L7.60752%2017.0489L7.6065%2017.0509L7.60602%2017.0519C7.6058%2017.0523%207.60557%2017.0528%208.5%2017.5L7.60557%2017.0528C7.35858%2017.5468%207.55881%2018.1474%208.05279%2018.3944C8.5441%2018.6401%209.14095%2018.4433%209.3904%2017.9552L9.39113%2017.9538C9.39362%2017.9492%209.39968%2017.9382%209.40939%2017.9218C9.42889%2017.8887%209.46265%2017.8343%209.51134%2017.7655C9.60948%2017.627%209.7633%2017.4372%209.97686%2017.2474C10.3956%2016.8752%2011.0428%2016.5%2012%2016.5C12.9572%2016.5%2013.6044%2016.8752%2014.0231%2017.2474C14.2367%2017.4372%2014.3905%2017.627%2014.4887%2017.7655C14.5373%2017.8343%2014.5711%2017.8887%2014.5906%2017.9218C14.6003%2017.9382%2014.6064%2017.9492%2014.6089%2017.9538L14.6096%2017.9552C14.859%2018.4433%2015.4559%2018.6401%2015.9472%2018.3944C16.4412%2018.1474%2016.6414%2017.5468%2016.3944%2017.0528L15.5%2017.5C16.3944%2017.0528%2016.3942%2017.0523%2016.394%2017.0519L16.3935%2017.0509L16.3925%2017.0489L16.3901%2017.0443L16.3842%2017.0328L16.3809%2017.0265L16.3675%2017.0013C16.3541%2016.9766%2016.3362%2016.9446%2016.3137%2016.9064C16.2687%2016.8301%2016.2048%2016.7282%2016.1207%2016.6095C15.9532%2016.373%2015.7008%2016.0628%2015.3519%2015.7526C14.6456%2015.1248%2013.5428%2014.5%2012%2014.5ZM17.3944%209.05279C17.6414%209.54676%2017.4412%2010.1474%2016.9472%2010.3944L14.9472%2011.3944C14.4532%2011.6414%2013.8526%2011.4412%2013.6056%2010.9472C13.3586%2010.4532%2013.5588%209.85256%2014.0528%209.60557L16.0528%208.60557C16.5468%208.35858%2017.1474%208.55881%2017.3944%209.05279ZM7.94721%208.60557C7.45324%208.35858%206.85256%208.55881%206.60557%209.05279C6.35858%209.54676%206.55881%2010.1474%207.05279%2010.3944L9.05279%2011.3944C9.54676%2011.6414%2010.1474%2011.4412%2010.3944%2010.9472C10.6414%2010.4532%2010.4412%209.85256%209.94721%209.60557L7.94721%208.60557Z'%20fill='%23FB5963'/%3e%3c/svg%3e",BRe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_154_1167)'%3e%3cpath%20d='M12%2022C17.5229%2022%2022%2017.5229%2022%2012C22%206.47715%2017.5229%202%2012%202C6.47715%202%202%206.47715%202%2012C2%2017.5229%206.47715%2022%2012%2022Z'%20stroke='%23F48087'%20stroke-width='2.4'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5229%2017.5229%2022%2012%2022C6.47715%2022%202%2017.5229%202%2012C2%206.47715%206.47715%202%2012%202C17.5229%202%2022%206.47715%2022%2012ZM16.7%209.00003C16.7%208.33729%2016.1627%207.80003%2015.5%207.80003C14.8373%207.80003%2014.3%208.33729%2014.3%209.00003V9.50003C14.3%2010.1628%2014.8373%2010.7%2015.5%2010.7C16.1627%2010.7%2016.7%2010.1628%2016.7%209.50003V9.00003ZM8.49988%207.80003C9.16262%207.80003%209.69988%208.33729%209.69988%209.00003V9.50003C9.69988%2010.1628%209.16262%2010.7%208.49988%2010.7C7.83714%2010.7%207.29988%2010.1628%207.29988%209.50003V9.00003C7.29988%208.33729%207.83714%207.80003%208.49988%207.80003ZM15.6696%2016.188C16.3257%2016.0942%2016.7815%2015.4864%2016.6878%2014.8303C16.5941%2014.1742%2015.9863%2013.7184%2015.3302%2013.8121L8.33017%2014.8121C7.67409%2014.9058%207.21821%2015.5137%207.31194%2016.1697C7.40566%2016.8258%208.0135%2017.2817%208.66958%2017.188L15.6696%2016.188Z'%20fill='%23F48087'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_154_1167'%3e%3crect%20width='24'%20height='24'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",VRe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2022C17.5229%2022%2022%2017.5229%2022%2012C22%206.47715%2017.5229%202%2012%202C6.47715%202%202%206.47715%202%2012C2%2017.5229%206.47715%2022%2012%2022Z'%20stroke='%23FFC01F'%20stroke-width='2'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5229%2017.5229%2022%2012%2022C6.47715%2022%202%2017.5229%202%2012C2%206.47715%206.47715%202%2012%202C17.5229%202%2022%206.47715%2022%2012ZM16.5%209C16.5%208.44772%2016.0523%208%2015.5%208C14.9477%208%2014.5%208.44772%2014.5%209V9.5C14.5%2010.0523%2014.9477%2010.5%2015.5%2010.5C16.0523%2010.5%2016.5%2010.0523%2016.5%209.5V9ZM8.5%208C9.05228%208%209.5%208.44772%209.5%209V9.5C9.5%2010.0523%209.05228%2010.5%208.5%2010.5C7.94772%2010.5%207.5%2010.0523%207.5%209.5V9C7.5%208.44772%207.94772%208%208.5%208ZM8.05279%2014.6056C8.5441%2014.3599%209.14095%2014.5567%209.39039%2015.0448L9.39113%2015.0462C9.39362%2015.0508%209.39968%2015.0618%209.40939%2015.0782C9.42889%2015.1113%209.46265%2015.1657%209.51134%2015.2345C9.60948%2015.373%209.7633%2015.5628%209.97686%2015.7526C10.3956%2016.1248%2011.0428%2016.5%2012%2016.5C12.9572%2016.5%2013.6044%2016.1248%2014.0231%2015.7526C14.2367%2015.5628%2014.3905%2015.373%2014.4887%2015.2345C14.5373%2015.1657%2014.5711%2015.1113%2014.5906%2015.0782C14.5974%2015.0667%2014.6025%2015.0578%2014.6057%2015.0519H14.606L14.6064%2015.0511H14.6062C14.6073%2015.049%2014.6082%2015.0474%2014.6089%2015.0462L14.6096%2015.0448C14.6102%2015.0437%2014.6103%2015.0435%2014.6099%2015.0443M14.6096%2015.0448C14.859%2014.5567%2015.4559%2014.3599%2015.9472%2014.6056C16.4412%2014.8526%2016.6414%2015.4532%2016.3944%2015.9472L15.5%2015.5C16.3944%2015.9472%2016.3942%2015.9477%2016.394%2015.9481L16.3935%2015.9491L16.3925%2015.9511L16.3901%2015.9557L16.3842%2015.9672C16.3797%2015.9758%2016.3741%2015.9864%2016.3675%2015.9987C16.3541%2016.0234%2016.3362%2016.0554%2016.3137%2016.0936C16.2687%2016.1699%2016.2048%2016.2718%2016.1207%2016.3905C15.9532%2016.627%2015.7008%2016.9372%2015.3519%2017.2474C14.6456%2017.8752%2013.5428%2018.5%2012%2018.5C10.4572%2018.5%209.35443%2017.8752%208.64814%2017.2474C8.2992%2016.9372%208.04677%2016.627%207.87929%2016.3905C7.79516%2016.2718%207.73127%2016.1699%207.68631%2016.0936C7.6638%2016.0554%207.64593%2016.0234%207.63255%2015.9987C7.62585%2015.9864%207.62027%2015.9758%207.61579%2015.9672L7.60987%2015.9557L7.60752%2015.9511L7.6065%2015.9491L7.60602%2015.9481C7.6058%2015.9477%207.60557%2015.9472%208.5%2015.5L7.60557%2015.9472C7.35858%2015.4532%207.55881%2014.8526%208.05279%2014.6056M14.6062%2015.0511L9.39039%2015.0448L14.6057%2015.0519C14.6059%2015.0517%2014.606%2015.0514%2014.6062%2015.0511Z'%20fill='%23FFC01F'/%3e%3c/svg%3e",URe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2022C17.5229%2022%2022%2017.5229%2022%2012C22%206.47715%2017.5229%202%2012%202C6.47715%202%202%206.47715%202%2012C2%2017.5229%206.47715%2022%2012%2022Z'%20stroke='%2352D4CD'%20stroke-width='2'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5229%2017.5229%2022%2012%2022C6.47715%2022%202%2017.5229%202%2012C2%206.47715%206.47715%202%2012%202C17.5229%202%2022%206.47715%2022%2012ZM8.5%2014.5C8.15342%2014.5%207.83156%2014.6795%207.64935%2014.9743C7.46714%2015.2691%207.45058%2015.6372%207.60557%2015.9472L8.5%2015.5C7.60557%2015.9472%207.6058%2015.9477%207.60602%2015.9481L7.6065%2015.9491L7.60752%2015.9511L7.60987%2015.9557L7.61579%2015.9672C7.62027%2015.9758%207.62585%2015.9864%207.63255%2015.9987C7.64593%2016.0234%207.6638%2016.0554%207.68631%2016.0936C7.73127%2016.1699%207.79516%2016.2718%207.87929%2016.3905C8.04677%2016.627%208.2992%2016.9372%208.64814%2017.2474C9.35443%2017.8752%2010.4572%2018.5%2012%2018.5C13.5428%2018.5%2014.6456%2017.8752%2015.3519%2017.2474C15.7008%2016.9372%2015.9532%2016.627%2016.1207%2016.3905C16.2048%2016.2718%2016.2687%2016.1699%2016.3137%2016.0936C16.3362%2016.0554%2016.3541%2016.0234%2016.3675%2015.9987C16.3741%2015.9864%2016.3797%2015.9758%2016.3842%2015.9672L16.3901%2015.9557L16.3925%2015.9511L16.3935%2015.9491L16.394%2015.9481C16.3942%2015.9477%2016.3944%2015.9472%2015.5%2015.5L16.3944%2015.9472C16.5494%2015.6372%2016.5329%2015.2691%2016.3507%2014.9743C16.1684%2014.6795%2015.8466%2014.5%2015.5%2014.5H8.5ZM16.7071%207.79289C17.0976%208.18342%2017.0976%208.81658%2016.7071%209.20711L15.9142%2010L16.7071%2010.7929C17.0976%2011.1834%2017.0976%2011.8166%2016.7071%2012.2071C16.3166%2012.5976%2015.6834%2012.5976%2015.2929%2012.2071L13.7929%2010.7071C13.4024%2010.3166%2013.4024%209.68342%2013.7929%209.29289L15.2929%207.79289C15.6834%207.40237%2016.3166%207.40237%2016.7071%207.79289ZM8.70711%207.79289C8.31658%207.40237%207.68342%207.40237%207.29289%207.79289C6.90237%208.18342%206.90237%208.81658%207.29289%209.20711L8.08579%2010L7.29289%2010.7929C6.90237%2011.1834%206.90237%2011.8166%207.29289%2012.2071C7.68342%2012.5976%208.31658%2012.5976%208.70711%2012.2071L10.2071%2010.7071C10.5976%2010.3166%2010.5976%209.68342%2010.2071%209.29289L8.70711%207.79289Z'%20fill='%2352D4CD'/%3e%3c/svg%3e",WRe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2022C17.5229%2022%2022%2017.5229%2022%2012C22%206.47715%2017.5229%202%2012%202C6.47715%202%202%206.47715%202%2012C2%2017.5229%206.47715%2022%2012%2022Z'%20stroke='%2352D4CD'%20stroke-width='2'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5229%2017.5229%2022%2012%2022C6.47715%2022%202%2017.5229%202%2012C2%206.47715%206.47715%202%2012%202C17.5229%202%2022%206.47715%2022%2012ZM8.5%2014.5C8.15342%2014.5%207.83156%2014.6795%207.64935%2014.9743C7.46714%2015.2691%207.45058%2015.6372%207.60557%2015.9472L8.5%2015.5C7.60557%2015.9472%207.6058%2015.9477%207.60602%2015.9481L7.6065%2015.9491L7.60752%2015.9511L7.60987%2015.9557L7.61579%2015.9672C7.62027%2015.9758%207.62585%2015.9864%207.63255%2015.9987C7.64593%2016.0234%207.6638%2016.0554%207.68631%2016.0936C7.73127%2016.1699%207.79516%2016.2718%207.87929%2016.3905C8.04677%2016.627%208.2992%2016.9372%208.64814%2017.2474C9.35443%2017.8752%2010.4572%2018.5%2012%2018.5C13.5428%2018.5%2014.6456%2017.8752%2015.3519%2017.2474C15.7008%2016.9372%2015.9532%2016.627%2016.1207%2016.3905C16.2048%2016.2718%2016.2687%2016.1699%2016.3137%2016.0936C16.3362%2016.0554%2016.3541%2016.0234%2016.3675%2015.9987C16.3741%2015.9864%2016.3797%2015.9758%2016.3842%2015.9672L16.3901%2015.9557L16.3925%2015.9511L16.3935%2015.9491L16.394%2015.9481C16.3942%2015.9477%2016.3944%2015.9472%2015.5%2015.5L16.3944%2015.9472C16.5494%2015.6372%2016.5329%2015.2691%2016.3507%2014.9743C16.1684%2014.6795%2015.8466%2014.5%2015.5%2014.5H8.5ZM16.7071%207.79289C17.0976%208.18342%2017.0976%208.81658%2016.7071%209.20711L15.9142%2010L16.7071%2010.7929C17.0976%2011.1834%2017.0976%2011.8166%2016.7071%2012.2071C16.3166%2012.5976%2015.6834%2012.5976%2015.2929%2012.2071L13.7929%2010.7071C13.4024%2010.3166%2013.4024%209.68342%2013.7929%209.29289L15.2929%207.79289C15.6834%207.40237%2016.3166%207.40237%2016.7071%207.79289ZM8.70711%207.79289C8.31658%207.40237%207.68342%207.40237%207.29289%207.79289C6.90237%208.18342%206.90237%208.81658%207.29289%209.20711L8.08579%2010L7.29289%2010.7929C6.90237%2011.1834%206.90237%2011.8166%207.29289%2012.2071C7.68342%2012.5976%208.31658%2012.5976%208.70711%2012.2071L10.2071%2010.7071C10.5976%2010.3166%2010.5976%209.68342%2010.2071%209.29289L8.70711%207.79289Z'%20fill='%2352D4CD'/%3e%3c/svg%3e",jRe="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_125_1497)'%3e%3cpath%20d='M9%2016.875C6.91142%2016.875%204.90838%2016.0453%203.43153%2014.5685C1.95468%2013.0916%201.125%2011.0886%201.125%209C1.125%206.91142%201.95468%204.90838%203.43153%203.43153C4.90838%201.95468%206.91142%201.125%209%201.125C11.0886%201.125%2013.0916%201.95468%2014.5685%203.43153C16.0453%204.90838%2016.875%206.91142%2016.875%209C16.875%2011.0886%2016.0453%2013.0916%2014.5685%2014.5685C13.0916%2016.0453%2011.0886%2016.875%209%2016.875ZM9%2018C11.3869%2018%2013.6761%2017.0518%2015.364%2015.364C17.0518%2013.6761%2018%2011.3869%2018%209C18%206.61305%2017.0518%204.32387%2015.364%202.63604C13.6761%200.948212%2011.3869%200%209%200C6.61305%200%204.32387%200.948212%202.63604%202.63604C0.948212%204.32387%200%206.61305%200%209C0%2011.3869%200.948212%2013.6761%202.63604%2015.364C4.32387%2017.0518%206.61305%2018%209%2018Z'%20fill='white'/%3e%3cpath%20d='M5.91186%206.50925C5.91032%206.54558%205.91623%206.58184%205.92922%206.61581C5.94221%206.64977%205.96202%206.68072%205.98741%206.70674C6.0128%206.73277%206.04326%206.75333%206.07689%206.76715C6.11052%206.78097%206.14663%206.78777%206.18298%206.78713H7.11111C7.26636%206.78713%207.39011%206.66%207.41036%206.50588C7.51161%205.76788%208.01786%205.23013%208.92011%205.23013C9.69186%205.23013%2010.3984%205.616%2010.3984%206.54413C10.3984%207.2585%209.97761%207.587%209.31273%208.0865C8.55561%208.63663%207.95599%209.279%207.99874%2010.3219L8.00211%2010.566C8.00329%2010.6398%208.03344%2010.7102%208.08606%2010.762C8.13868%2010.8137%208.20954%2010.8428%208.28336%2010.8428H9.19573C9.27033%2010.8428%209.34186%2010.8131%209.39461%2010.7604C9.44735%2010.7076%209.47698%2010.6361%209.47698%2010.5615V10.4434C9.47698%209.63563%209.78411%209.4005%2010.6132%208.77163C11.2984%208.25075%2012.0127%207.6725%2012.0127%206.45863C12.0127%204.75875%2010.5772%203.9375%209.00561%203.9375C7.58024%203.9375%206.01874%204.60125%205.91186%206.50925ZM7.66348%2012.9926C7.66348%2013.5923%208.14161%2014.0355%208.79973%2014.0355C9.48486%2014.0355%209.95624%2013.5923%209.95624%2012.9926C9.95624%2012.3716%209.48374%2011.9351%208.79861%2011.9351C8.14161%2011.9351%207.66348%2012.3716%207.66348%2012.9926Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_125_1497'%3e%3crect%20width='18'%20height='18'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",pc=()=>R.jsx(R.Fragment,{children:R.jsx("hr",{className:"border-t-1 border-slate-200 mx-auto w-[90%]"})}),GRe="data:image/svg+xml,%3csvg%20width='14'%20height='24'%20viewBox='0%200%2014%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.545454%2013.4328L10.9091%2023.4627C11.6364%2024.1791%2012.7273%2024.1791%2013.4545%2023.4627C14.1818%2022.7463%2014.1818%2021.6716%2013.4545%2020.9552L4.54545%2012L13.4545%203.04478C14.1818%202.32836%2014.1818%201.25373%2013.4545%200.537313C13.0909%200.179104%2012.7273%200%2012.1818%200C11.6364%200%2011.2727%200.179104%2010.9091%200.537313L0.545454%2010.5672C-0.181818%2011.4627%20-0.181818%2012.5373%200.545454%2013.4328C0.545454%2013.2537%200.545454%2013.2537%200.545454%2013.4328Z'%20fill='%23EAEAEA'/%3e%3c/svg%3e",HRe=()=>{const t=lY(z7);console.log(t);const e={foodCode:(t==null?void 0:t.foodCode)||"",foodName:(t==null?void 0:t.foodName)||"",nutritionStandardAmount:(t==null?void 0:t.nutritionStandardAmount)||"",energyKcal:(t==null?void 0:t.energyKcal)||0,waterG:(t==null?void 0:t.waterG)||0,proteinG:(t==null?void 0:t.proteinG)||0,fatG:(t==null?void 0:t.fatG)||0,ashG:(t==null?void 0:t.ashG)||0,carbohydrateG:(t==null?void 0:t.carbohydrateG)||0,sugarG:(t==null?void 0:t.sugarG)||0,dietaryFiberG:(t==null?void 0:t.dietaryFiberG)||0,calciumMg:(t==null?void 0:t.calciumMg)||0,ironMg:(t==null?void 0:t.ironMg)||0,phosphorusMg:(t==null?void 0:t.phosphorusMg)||0,potassiumMg:(t==null?void 0:t.potassiumMg)||0,sodiumMg:(t==null?void 0:t.sodiumMg)||0,vitaminAgRAE:(t==null?void 0:t.vitaminAgRAE)||0,retinolg:(t==null?void 0:t.retinolg)||0,betaCaroteneg:(t==null?void 0:t.betaCaroteneg)||0,thiamineMg:(t==null?void 0:t.thiamineMg)||0,riboflavinMg:(t==null?void 0:t.riboflavinMg)||0,niacinMg:(t==null?void 0:t.niacinMg)||0,vitaminCMg:(t==null?void 0:t.vitaminCMg)||0,vitaminDg:(t==null?void 0:t.vitaminDg)||0,cholesterolMg:(t==null?void 0:t.cholesterolMg)||0,saturatedFattyAcidG:(t==null?void 0:t.saturatedFattyAcidG)||0,transFattyAcidG:(t==null?void 0:t.transFattyAcidG)||0,manufacturerName:(t==null?void 0:t.manufacturerName)||""},n=["vitaminAgRAE","vitaminDg","ironMg","sodiumMg","saturatedFattyAcidG","transFattyAcidG"],s=["proteinG","ironMg","vitaminCMg","dietaryFiberG","potassiumMg"],r=["foodCode","foodName","nutritionStandardAmount"],o=u=>{const c=["vitaminAgRAE","vitaminDg","ironMg","sodiumMg","saturatedFattyAcidG","transFattyAcidG"],d=["proteinG","ironMg","vitaminCMg","dietaryFiberG","potassiumMg"];let h=0;return c.forEach(f=>{u[f]===0&&(h-=1)}),d.forEach(f=>{u[f]===0&&(h+=1)}),h},i=u=>{const c=[zRe,BRe,VRe,URe,WRe];return u>=-3&&u<-2?c[0]:u>=-2&&u<=-1?c[1]:u===0?c[2]:1<=u&&3>u?c[3]:c[4]},a=mi(),l=()=>{a(-1)};return R.jsx(cu,{children:R.jsx("div",{className:"relative w-full h-screen overflow-hidden scroll-hide",children:R.jsxs("div",{className:"bg-white mt-[10%] w-full h-full rounded-tl-3xl overflow-y-auto",children:[" ",R.jsxs("div",{className:"flex justify-between p-6",children:[R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("img",{className:"cursor-pointer ",onClick:l,src:GRe,alt:"x"}),R.jsx("span",{children:e.foodName}),R.jsx("img",{src:i(o(e)),alt:"x"})]}),R.jsx("p",{className:"text-customGrey",children:e.manufacturerName})]}),R.jsxs("div",{className:"relative p-3 rounded-lg border border-gray-300 m-4",children:[R.jsxs("div",{className:"mb-2",children:[e.energyKcal," kcal (",e.foodWeight," g )"]}),R.jsxs("div",{className:"flex space-x-1 ml-4",children:[R.jsx("span",{className:"text-[#FFC01F]",children:"carbohydrates"}),R.jsx("img",{src:Sw,alt:"x"}),e.carbohydrateG," (",Gc(e==null?void 0:e.carbohydrateG,"carbohydrate"),"%)"]}),R.jsxs("div",{className:"flex space-x-1 ml-4",children:[R.jsx("span",{className:"text-[#FFC01F]",children:"protein"}),R.jsx("img",{src:Sw,alt:"x"}),e.proteinG," (",Gc(e==null?void 0:e.proteinG,"protein"),"%)"]}),R.jsxs("div",{className:"flex space-x-1 ml-4",children:[R.jsx("span",{className:"text-[#FFC01F]",children:"fat"}),R.jsx("img",{src:Sw,alt:"x"}),e.fatG," (",Gc(e==null?void 0:e.fatG,"fat"),"%)"]}),R.jsxs("button",{onClick:()=>a("/score"),className:`absolute bottom-2 right-2 
             ${o(e)<0?"bg-[#f48187]":o(e)===0?"bg-[#898A8D]":"bg-[#49C09C]"} 
  rounded-[8px] px-2 py-1 text-[#fff] flex items-center`,children:[R.jsxs("span",{className:"text-sm font-bold text-[16px]",children:["Score : ",o(e)]}),R.jsx("img",{src:jRe,alt:"",className:"w-5 h-5 ml-1"})]})]}),R.jsxs("div",{className:"px-6 py-2",children:[R.jsx("span",{className:"text-[#F6D0D2]",children:"Cautionary"}),R.jsx("span",{className:"text-[#CECECE]",children:" Ingredient "})]}),R.jsx(pc,{}),R.jsx("ul",{children:n.map(u=>{const c=e[u],d=Number(c)>0,h=u.replace(/(g|mg|g)$/i,""),f=u.endsWith("G")?"g":u.endsWith("Mg")?"mg":u.endsWith("g")?"g":"";return d&&R.jsxs(R.Fragment,{children:[R.jsxs("li",{className:"px-6 py-2",children:[R.jsx("span",{className:"text-[#F48187]",children:h})," : ",R.jsxs("span",{children:[" ",c," "]})," ",f]},u),R.jsx(pc,{})]})})}),R.jsx("div",{className:"h-[20px]"}),R.jsxs("div",{className:"px-6 py-2",children:[R.jsx("span",{className:"text-[#B3E5D6]",children:"Good"}),R.jsx("span",{className:"text-[#CECECE]",children:" Ingredient "})]}),R.jsx(pc,{}),R.jsx("ul",{children:s.map(u=>{const c=e[u],d=Number(c)>0,h=u.replace(/(g|mg|g)$/i,""),f=u.endsWith("G")?"g":u.endsWith("Mg")?"mg":u.endsWith("g")?"g":"";return d&&R.jsxs(R.Fragment,{children:[R.jsxs("li",{className:"px-6 py-2",children:[R.jsx("span",{className:"text-[#49C09C]",children:h})," : ",R.jsxs("span",{children:[" ",c," "]})," ",f]},u),R.jsx(pc,{})]})})}),R.jsx("div",{className:"h-[20px]"}),R.jsxs("div",{className:"px-6 py-2",children:[R.jsx("span",{className:"text-[#CECECE]",children:"Other"}),R.jsx("span",{className:"text-[#CECECE]",children:" Ingredient "})]}),R.jsx(pc,{}),R.jsx("ul",{children:Object.entries(e).map(([u,c])=>{const d=n.includes(u),h=s.includes(u),f=r.includes(u),p=!d&&!h&&!f,m=u.replace(/(g|mg|g)$/i,""),g=u.endsWith("G")?"g":u.endsWith("Mg")?"mg":u.endsWith("g")?"g":"";return p&&c!==0&&R.jsxs(R.Fragment,{children:[R.jsxs("li",{className:"px-6 py-2",children:[R.jsx("span",{className:"text-[#000]",children:m})," : ",R.jsxs("span",{children:[" ",c," "]})," ",g]},u),R.jsx(pc,{})]})})})]})})})},qRe=async()=>{const e=new URLSearchParams(window.location.search).get("access_token");if(e){localStorage.setItem("accessToken",e);const n=await ZF(e);return console.log(" :",n),n}throw new Error("Access token not found")},KRe=()=>{const t=mi();return _.useEffect(()=>{(async()=>{try{(await qRe()).data.babyName===null?t("/join"):t("/")}catch(n){console.error(" :",n),t("/login")}})()},[t]),R.jsx("h2",{className:"text-white",children:"...."})},XRe="data:image/svg+xml,%3csvg%20width='14'%20height='24'%20viewBox='0%200%2014%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.545455%2013.4328L10.9091%2023.4627C11.6364%2024.1791%2012.7273%2024.1791%2013.4545%2023.4627C14.1818%2022.7463%2014.1818%2021.6716%2013.4545%2020.9552L4.54545%2012L13.4545%203.04478C14.1818%202.32836%2014.1818%201.25373%2013.4545%200.537313C13.0909%200.179104%2012.7273%200%2012.1818%200C11.6364%200%2011.2727%200.179104%2010.9091%200.537313L0.545455%2010.5672C-0.181818%2011.4627%20-0.181818%2012.5373%200.545455%2013.4328C0.545455%2013.2537%200.545455%2013.2537%200.545455%2013.4328Z'%20fill='%23675143'/%3e%3c/svg%3e",YRe=()=>{const t=mi(),e=()=>{t(-1)};return R.jsx(cu,{children:R.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[R.jsx("img",{className:"cursor-pointer ",onClick:e,src:XRe,alt:"x"}),R.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Nutrition Guide for Pregnant Women"}),R.jsxs("section",{className:"mb-8",children:[R.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Nutrients to Avoid in Excess"}),R.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[R.jsxs("li",{children:[R.jsx("strong",{children:"Vitamin A/gRAE:"})," Excessive intake can lead to fetal deformities."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Vitamin D/g:"})," Excessive vitamin D can be harmful to the fetus, but adequate amounts are necessary."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Iron/Mg:"})," Too much iron intake can be harmful to health, so its important to maintain an appropriate level."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Sodium/Mg:"})," Excessive sodium intake can lead to problems such as hypertension."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Saturated Fatty Acid/G:"})," Overconsumption of saturated fatty acids can be unhealthy."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Trans Fatty Acid/G:"})," Trans fats can negatively affect cardiovascular health."]})]})]}),R.jsxs("section",{children:[R.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Essential Nutrients for Pregnant Women"}),R.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[R.jsxs("li",{children:[R.jsx("strong",{children:"Protein/G:"})," Essential for the growth and development of the fetus."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Calcium/Mg:"})," Important for bone and teeth formation, and necessary for the mother's bone health."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Iron/Mg:"})," Crucial for blood production, and the iron requirement increases during pregnancy."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Vitamin C/Mg:"})," Helps boost immunity and aids in iron absorption."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Vitamin D/g:"})," Aids in calcium absorption and contributes to bone health."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Dietary Fiber/G:"})," Helps maintain digestive health and prevents constipation."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Potassium/Mg:"})," Important for fluid balance and blood pressure regulation."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Folate (Vitamin B9):"})," Essential for fetal neural tube development."]})]})]})]})})},ya={main:"/",redirect:"/redirect",example:"/example",example2:"/example2",login:"/login",join:"/join",camera:"/camera",search:"/search/:query",searchDetail:"/search/detail/:query",score:"/score"},Dl=()=>R.jsx(fY,{children:R.jsxs(pY,{children:[R.jsx(tW,{}),R.jsx(iee,{})]})}),QRe=oW([{element:R.jsx(Dl,{}),children:[{path:ya.main,element:R.jsx(iJ,{}),errorElement:R.jsx(Ti,{})},{path:ya.search,element:R.jsx(MRe,{}),errorElement:R.jsx(Ti,{})},{path:"*",element:R.jsx(Il,{})}]},{element:R.jsx(Dl,{}),children:[{path:ya.camera,element:R.jsx(ORe,{}),errorElement:R.jsx(Ti,{})},{path:"*",element:R.jsx(Il,{})}]},{element:R.jsx(Dl,{}),children:[{path:ya.login,element:R.jsx(hee,{}),errorElement:R.jsx(Ti,{})},{path:"*",element:R.jsx(Il,{})}]},{element:R.jsx(Dl,{}),children:[{path:ya.redirect,element:R.jsx(KRe,{}),errorElement:R.jsx(Ti,{})},{path:"*",element:R.jsx(Il,{})}]},{element:R.jsx(Dl,{}),children:[{path:ya.join,element:R.jsx(qee,{}),errorElement:R.jsx(Ti,{})},{path:"*",element:R.jsx(Il,{})}]},{element:R.jsx(Dl,{}),children:[{path:ya.searchDetail,element:R.jsx(HRe,{}),errorElement:R.jsx(Ti,{})},{path:"*",element:R.jsx(Il,{})}]},{element:R.jsx(Dl,{}),children:[{path:ya.score,element:R.jsx(YRe,{}),errorElement:R.jsx(Ti,{})},{path:"*",element:R.jsx(Il,{})}]}]),ZRe=new TV,JRe=!1;async function e3e(){}e3e().then(()=>{Fw.createRoot(document.getElementById("root")).render(R.jsx(iY,{children:R.jsxs(_V,{client:ZRe,children:[JRe,R.jsx(pW,{router:QRe})]})}))});
